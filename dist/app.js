/*! For license information please see app.js.LICENSE.txt */
(()=>{var e={389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}",""]);const a=i},714:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".prism-editor-component{align-items:flex-start;display:flex;height:auto;max-height:100%;position:relative;width:100%}.prism-editor-wrapper{display:block;height:100%;overflow:auto;-o-tab-size:1.5em;tab-size:1.5em;-moz-tab-size:1.5em;width:100%}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.prism-editor__textarea{color:transparent!important}.prism-editor__textarea::-moz-selection{background-color:#accef7!important;color:transparent!important}.prism-editor__textarea::selection{background-color:#accef7!important;color:transparent!important}}.prism-editor__autocomplete{max-height:180px;max-width:250px;min-height:12px;min-width:100px;overflow-y:auto;position:absolute;top:25px;width:100%;z-index:4}.prism-editor__autocomplete li{cursor:pointer;overflow:hidden;padding:1px 5px;white-space:nowrap}.prism-editor__container{box-sizing:border-box;min-width:100%;padding:0;position:relative;text-align:left;width:-moz-max-content;width:max-content}.prism-editor__line-numbers{flex-shrink:0;height:100%;margin-right:10px;margin-top:0;overflow:hidden;padding-top:4px}.prism-editor__line-number{text-align:right;white-space:nowrap}.prism-editor__textarea{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;color:inherit;height:100%;left:0;overflow:hidden;position:absolute;resize:none;top:0;width:100%}.prism-editor__editor,.prism-editor__textarea{word-wrap:keep-all;background:none;border:0;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;overflow-wrap:break-word;padding:0;-moz-tab-size:inherit;-o-tab-size:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap}.prism-editor__textarea--empty{-webkit-text-fill-color:inherit!important}.prism-editor__editor{overflow:visible;pointer-events:none;position:relative}",""]);const a=i},204:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r),a=n(491),o=i()((function(e){return e[1]}));o.i(a.Z),o.push([e.id,".tool{cursor:pointer;display:inline-block;height:100%;max-height:32px;padding:1px 8px 2px;width:35px}.tool:hover{color:var(--color-highlight)}.tool>i{pointer-events:none}.resizer{position:absolute!important;z-index:12}.resizer.vertical{cursor:ew-resize;width:6px}.resizer.horizontal{cursor:ns-resize;height:6px}.resizer.disabled{pointer-events:none}.resizer_toggle_button{align-items:center;border-radius:10%;display:flex;height:30px;justify-content:center;left:50%;padding:0;position:absolute;top:120px;transform:translateX(-50%);width:30px}",""]);const s=o},51:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'div#app[data-v-3b44087e]{display:grid;font-weight:400;grid-template-areas:"sidebar header" "sidebar preview";grid-template-columns:var(--sidebar) calc(100% - var(--sidebar));grid-template-rows:74px calc(100% - 74px);height:100%;position:fixed;width:100%}main[data-v-3b44087e]{grid-area:preview}header[data-v-3b44087e]{font-size:1.1em;grid-area:header;position:relative}content[data-v-3b44087e]{background-color:var(--color-interface);grid-area:sidebar}div#app.portrait_view[data-v-3b44087e]{grid-template-areas:"header" "main" "mode_selector";grid-template-columns:100%;grid-template-rows:124px calc(100% - 162px) 38px}header>svg[data-v-3b44087e]{height:40px;padding:12px;width:100%}div#app.portrait_view content[data-v-3b44087e],div#app.portrait_view main[data-v-3b44087e]{grid-area:main}div#app.portrait_view #portrait_mode_selector[data-v-3b44087e]{display:flex;grid-area:mode_selector}li.mode_selector[data-v-3b44087e]{border-top:1px solid var(--color-border);flex:1 0 0;padding-top:6px;text-align:center}li.mode_selector.selected[data-v-3b44087e]{background-color:var(--color-dark)}div#app.portrait_view dialog[data-v-3b44087e]{margin:auto;padding:12px}#dialog_blackout[data-v-3b44087e]{background-color:#00000050;bottom:0;left:0;position:absolute;right:0;top:0;z-index:49}dialog[data-v-3b44087e]{background-color:var(--color-interface);border:none;border:1px solid var(--color-bar);border-radius:4px;bottom:20px;box-shadow:0 1px 12px rgba(0,0,0,.4);color:inherit;display:flex;flex-direction:column;margin-left:calc(50% - 400px);max-height:calc(100% - 40px);max-width:100%;overflow:hidden;padding:20px 28px;top:20px;width:800px;z-index:50}.resizer[data-v-3b44087e],dialog[data-v-3b44087e]{position:absolute}.resizer[data-v-3b44087e]{bottom:0;cursor:ew-resize;margin-left:-3px;top:0;width:6px}',""]);const a=i},314:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"dialog h3{padding:20px 0 5px}dialog .close_button{height:30px;position:absolute;right:6px;top:6px}",""]);const a=i},927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"main#code[data-v-eed9881e]{display:flex;flex-direction:column}main#code pre[data-v-eed9881e]{background-color:var(--color-dark);border:none;border-radius:0;cursor:text;margin:0 auto;max-width:1000px;overflow-y:auto;width:100%}#code pre code[data-v-eed9881e],main#code pre[data-v-eed9881e]{-webkit-user-select:text;-moz-user-select:text;user-select:text}#code pre code[data-v-eed9881e]{text-shadow:none}.menu[data-v-eed9881e]{flex:0 0 42px;padding:5px}.menu button[data-v-eed9881e]{width:100px}.menu button svg[data-v-eed9881e]{margin-right:4px}",""]);const a=i},291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".token{-webkit-user-select:text;-moz-user-select:text;user-select:text}.token.entity,.token.operator,.token.url{background:transparent}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#7bcbf0}.token.boolean,.token.number{color:#ff6868}",""]);const a=i},481:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#expression_bar{background-color:var(--color-dark);border-bottom:1px solid var(--color-border);font-family:var(--font-code);height:auto;min-height:20px;outline:none;padding:5px 8px;position:absolute;width:100%;z-index:3}#expression_bar .prism-editor-component{border:none}",""]);const a=i},730:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".custom_checkbox[data-v-64bb3515]{padding:2px}input[data-v-64bb3515]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;display:inline;height:0;opacity:0;width:0}svg path[data-v-64bb3515]:first-child{stroke-width:3px;color:var(--color-accent)}",""]);const a=i},269:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"div[data-v-7246dc22]{border:1px dashed var(--color-bar);cursor:pointer;padding:2px;width:auto}div[data-v-7246dc22]:hover{background-color:var(--color-dark)}div>svg[data-v-7246dc22]{display:block;margin:auto;opacity:.8}",""]);const a=i},357:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#help_panel[data-v-777ee623]{display:flex;flex-direction:column}#help_panel[data-v-777ee623]:not(.portrait_view){background-color:var(--color-interface);border:1px solid var(--color-border);bottom:33px;grid-area:none;left:auto;max-width:100%;position:absolute;right:0;top:32px;width:482px;z-index:5}#help_panel.portrait_view[data-v-777ee623]{background-color:var(--color-interface);max-width:100%;width:100%}.help_header[data-v-777ee623]{flex-shrink:0}#help_panel>content[data-v-777ee623]{display:block;overflow-y:auto;padding:14px}.close_button[data-v-777ee623]{margin:4px}.back_button[data-v-777ee623]{cursor:pointer;display:inline-block;height:29px;padding:2px 8px 2px 2px;vertical-align:bottom}#help_panel.portrait_view .back_button[data-v-777ee623]{height:43px;padding:10px}.back_button[data-v-777ee623]:hover{color:var(--color-highlight)}.back_button svg[data-v-777ee623]{margin-top:-2px}ul li[data-v-777ee623]{padding:3px 7px}#help_panel.portrait_view ul li[data-v-777ee623]{padding-bottom:5px;padding-top:5px}ul>li>ul[data-v-777ee623]{padding-left:2px}li>ul>li[data-v-777ee623]{margin-left:-2px;padding-left:25px}.category_title[data-v-777ee623]{color:var(--color-text_grayed);text-transform:uppercase}li.clickable[data-v-777ee623]{cursor:pointer}li.clickable[data-v-777ee623]:hover{background:var(--color-bar);color:var(--color-highlight)}",""]);const a=i},864:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"h2>svg[data-v-0eb22078]{background-color:var(--color-bar);border:1px solid var(--color-dark);border-radius:3px;height:22px;margin-top:-5px}.input_info_bar[data-v-0eb22078]{background-color:var(--color-dark);border-radius:4px;height:24px;margin-bottom:3px}.input_type_label[data-v-0eb22078]{background-color:var(--color-accent)}.input_context_label[data-v-0eb22078],.input_type_label[data-v-0eb22078]{border-radius:4px;color:var(--color-border);display:inline-block;height:100%;padding:1px 8px}.input_context_label[data-v-0eb22078]{background-color:var(--color-text)}.select_description[data-v-0eb22078]{padding-left:30px}",""]);const a=i},336:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#help_panel p.code_line[data-v-23de1216]{display:flex;line-height:inherit;margin-bottom:2px}code[data-v-23de1216]{background-color:var(--color-dark);color:#50cca7;display:inline-block;flex-shrink:0;font-size:.92em;height:-moz-fit-content;height:fit-content;margin-right:8px;padding:4px 8px;text-indent:0;-webkit-user-select:text;-moz-user-select:text;user-select:text;width:208px}",""]);const a=i},210:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#help_panel p{line-height:normal;margin-bottom:12px}#help_panel h1{border-bottom:2px solid var(--color-selection);margin-bottom:12px;padding-bottom:2px}#help_panel h2{margin-bottom:6px;margin-top:22px}#help_panel h3{font-weight:600;margin-bottom:5px;margin-top:15px}",""]);const a=i},791:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#box[data-v-0f0cb56e]{background-color:var(--color-interface);border:1px solid var(--color-border);box-shadow:0 0 15px rgba(0,0,0,.5);font-size:1.1em;left:0;margin:auto;max-width:100%;overflow:hidden;padding:16px 20px;position:absolute;right:0;top:20px;width:500px;z-index:50}.close_button[data-v-0f0cb56e]{position:absolute;right:10px;top:13px}",""]);const a=i},590:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"ul#menu_bar[data-v-1febde09]{background-color:var(--color-interface);font-weight:400;height:32px;padding:0 8px;white-space:nowrap}a[data-v-1febde09]{color:inherit;display:block;padding:3px 12px 2px}a[data-v-1febde09]:hover{background-color:var(--color-interface)}ul#menu_bar>li[data-v-1febde09]{display:inline-block}ul#menu_bar>li>ul[data-v-1febde09]{background-color:var(--color-bar);box-shadow:1px 4px 10px rgba(0,0,0,.25);display:none;min-width:150px;padding:0;position:absolute;z-index:8}ul#menu_bar>li:hover>ul[data-v-1febde09]{display:block}ul.menu_dropdown>li a[data-v-1febde09]{height:34px;padding-top:5px}ul#menu_bar>li:hover>a[data-v-1febde09]{background-color:var(--color-bar)}.mode_selector[data-v-1febde09]{cursor:pointer;float:right;height:100%;margin-right:2px;padding:3px 8px 2px}.mode_selector[data-v-1febde09]:hover{background-color:var(--color-interface)}.mode_selector.selected[data-v-1febde09]{background-color:var(--color-dark);color:var(--color-text_grayed)}",""]);const a=i},561:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"main#preview[data-v-1e10ce7d]{--footer-height:34px;position:relative}#canvas_wrapper[data-v-1e10ce7d]{height:calc(100% - var(--footer-height));width:100%}canvas[data-v-1e10ce7d]{height:100%;outline:none;width:100%}#overlay_timestamp[data-v-1e10ce7d]{font-family:Consolas,monospace;font-size:1.1em;left:0;opacity:.5;padding:4px 10px;pointer-events:none;position:absolute;top:0}.placeholder_bar[data-v-1e10ce7d]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:color-mix(in srgb,var(--color-background) 90%,transparent);border-top:1px solid var(--color-border);bottom:34px;display:flex;min-height:35px;position:absolute;width:100%}.placeholder_bar>ul[data-v-1e10ce7d]{display:flex;flex-grow:1;flex-wrap:wrap;gap:2px 12px;padding:2px 10px}.placeholder_bar>ul>li[data-v-1e10ce7d]{align-items:center;display:flex;gap:5px}.placeholder_bar>.tool[data-v-1e10ce7d]{padding-top:4px}.placeholder_bar input[data-v-1e10ce7d]{width:70px}.placeholder_bar label[data-v-1e10ce7d]{color:var(--color-text_grayed)}.placeholder_bar li>.tool[data-v-1e10ce7d]{padding:2px;width:24px}footer[data-v-1e10ce7d]{background-color:var(--color-bar);border-top:1px solid var(--color-border);display:flex;font-size:1.1em;height:var(--footer-height);overflow-x:auto;overflow-y:hidden;scrollbar-width:none;width:100%}footer[data-v-1e10ce7d] ::-webkit-scrollbar{height:0}footer>*[data-v-1e10ce7d]{background-color:var(--color-bar);padding:4px 8px}footer>.tool[data-v-1e10ce7d]{padding-top:2px}footer .spacing[data-v-1e10ce7d]{flex:1 1 auto;margin:0;padding:0}select[data-v-1e10ce7d]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--color-dark);border-top:none;height:100%;margin-left:4px;padding:2px 6px}#app.portrait_view footer select[data-v-1e10ce7d]{border-bottom:none}div.stat[data-v-1e10ce7d]{background:transparent;float:right;min-width:72px;text-align:right}div.warning[data-v-1e10ce7d]{color:#ffc107;float:right;width:auto}div.warning[data-v-1e10ce7d]:hover{color:#ffe060;float:right}div.warning>i[data-v-1e10ce7d]{display:inline;margin-right:4px}.unicode_icon.pause[data-v-1e10ce7d]{float:right;font-size:20pt;font-weight:700;height:23px;margin-top:-4px;overflow:hidden}.tool.toggle_enabled[data-v-1e10ce7d]{background-color:var(--color-background)}",""]);const a=i},28:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"content[data-v-3b47af4a]{border-right:1px solid var(--color-border)}content>div[data-v-3b47af4a]{height:100%;overflow-y:auto;padding-bottom:60px}#sidebar_tab_bar[data-v-3b47af4a]{background-color:var(--color-bar);box-shadow:0 1px 12px rgba(0,0,0,.34);display:flex;height:45px;position:sticky;top:0;z-index:6}.portrait_view #sidebar_tab_bar[data-v-3b47af4a]{border-bottom:1px solid var(--color-border);bottom:36px;box-shadow:none;left:0;position:absolute;right:0;top:auto}.sidebar_tab[data-v-3b47af4a]{background-color:inherit;cursor:pointer;flex:1 0.5 45px;padding:10px 4px;position:relative;text-align:center}.sidebar_tab.selected[data-v-3b47af4a]{background-color:var(--color-title)}.sidebar_tab.selected[data-v-3b47af4a],.sidebar_tab[data-v-3b47af4a]:hover{color:var(--color-highlight)}.sidebar_tab_tooltip[data-v-3b47af4a]{background-color:inherit;bottom:-28px;display:none;height:28px;left:0;min-width:100%;padding:2px 8px;position:absolute;white-space:nowrap}.portrait_view .sidebar_tab_tooltip[data-v-3b47af4a]{top:-28px}.sidebar_tab:hover>.sidebar_tab_tooltip[data-v-3b47af4a]{display:block}.sidebar_tab:last-of-type>.sidebar_tab_tooltip[data-v-3b47af4a]{left:unset;right:0}.help_button[data-v-3b47af4a]{font-family:arial,sans-serif;height:32px;margin:-5px -9px;padding-top:4px;text-align:center;width:30px}#test_quick_setup_button[data-v-3b47af4a]{display:block;margin:16px auto auto}h3[data-v-3b47af4a]{color:var(--color-text_grayed);cursor:pointer;font-size:1.1em;margin:8px 8px -2px;padding-left:12px;text-align:center;text-transform:uppercase}.input_subject[data-v-3b47af4a]{border-right:1px solid var(--color-border);overflow-x:visible}.input_subject h3[data-v-3b47af4a]{background-color:var(--color-title);font-size:1.4em;padding:4px 4px 4px 12px}#add_curve_button[data-v-3b47af4a]{border:1px dashed var(--color-bar);cursor:pointer;padding:2px;width:100%}#add_curve_button[data-v-3b47af4a]:hover{background-color:var(--color-dark)}#add_curve_button>svg[data-v-3b47af4a]{display:block;margin:auto;opacity:.8}",""]);const a=i},563:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".input_group:not(:last-of-type){border-bottom:1px solid var(--color-border)}.input_group h4{color:var(--color-text_grayed);cursor:pointer;font-size:1.2em;padding:10px 10px 10px 12px}.input_group h4:hover{filter:brightness(1.1)}.help_button{float:right}.input_group>ul{padding:8px 2px 8px 8px}.input_group_folded_indicator{color:var(--color-text_grayed);cursor:pointer;font-size:30px;height:32px;line-height:6px;text-align:center}.input_group_folded_indicator:hover{color:var(--color-text)}",""]);const a=i},863:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'.curve[data-v-937f4896]{--color-curve:#657c86;padding-bottom:8px;padding-top:12px}.curve_display[data-v-937f4896]{background-color:var(--color-bar);margin-top:10px;position:relative}.curve_display svg[data-v-937f4896]{height:100%;width:100%}.curve_min_num[data-v-937f4896]{bottom:0}.curve_max_num[data-v-937f4896],.curve_min_num[data-v-937f4896]{left:2px;pointer-events:none;position:absolute}.curve_max_num[data-v-937f4896]{top:0}.curve_display .curve_path[data-v-937f4896]{fill:none;stroke-width:2px;stroke:var(--color-curve)}.curve_display .curve_handles[data-v-937f4896]{fill:none;stroke-width:2px;stroke:var(--color-selection)}.curve_display .vertical_line_path[data-v-937f4896]{fill:none;stroke-width:2px;stroke-dasharray:8;stroke:var(--color-selection)}.curve_display .horizontal_line_path[data-v-937f4896]{fill:none;stroke-width:2px;stroke-dasharray:6;stroke:var(--color-selection)}.curve_display .curve_controls[data-v-937f4896]{display:flex;height:100%;left:0;position:absolute;top:0;width:100%}.curve.bezier_chain .curve_display .curve_controls[data-v-937f4896]{cursor:copy}.curve_controls .curve_add[data-v-937f4896],.curve_controls .curve_node[data-v-937f4896]{flex-grow:1;height:100%}.curve_controls .curve_node[data-v-937f4896]{cursor:ns-resize;position:relative}.curve.bezier_chain .curve_controls[data-v-937f4896]{display:block}.curve.bezier_chain .curve_controls .curve_node[data-v-937f4896]{cursor:move;height:20px;margin-bottom:-6px;position:absolute;width:20px}.curve.bezier_chain .curve_controls .curve_node .curve_point[data-v-937f4896]{margin-top:4px}.curve_controls .curve_add[data-v-937f4896]:hover,.curve_node.touch_active[data-v-937f4896],.curve_node[data-v-937f4896]:hover{background-color:rgba(174,217,255,.1)}.curve_node .curve_point[data-v-937f4896]{background:var(--color-text);border-radius:50%;height:8px;left:0;margin-bottom:1px;margin-left:auto;margin-right:auto;position:absolute;right:0;width:8px}.curve_node:hover .curve_point[data-v-937f4896]{background:#fff}.curve_node .curve_point label[data-v-937f4896]{display:none;margin-left:12px;margin-top:-8.4px;pointer-events:none;white-space:nowrap}.curve_node:hover .curve_point label[data-v-937f4896]{display:block}.curve_node.selected .curve_point[data-v-937f4896]{background:var(--color-accent);height:10px;margin-bottom:0;margin-top:4px;width:10px}.curve.bezier_chain .curve_controls .curve_node.selected .curve_point[data-v-937f4896]{margin-top:3px}.curve_handle_point[data-v-937f4896]{background:var(--color-text_grayed);border-radius:50%;cursor:row-resize;height:8px;margin:4px 6px;position:absolute;width:8px}.curve_handle_point[data-v-937f4896]:before{content:"";display:block;height:16px;left:-4px;position:absolute;top:-4px;width:16px}.curve_controls .curve_add[data-v-937f4896]{cursor:copy}.curve_controls .curve_add[data-v-937f4896]:first-child,.curve_controls .curve_add[data-v-937f4896]:last-child{max-width:20px}.curve_point_options[data-v-937f4896]{display:flex}.curve_point_options label[data-v-937f4896]{margin-bottom:0;padding:4px 8px}.curve_point_options label[data-v-937f4896]:not(:first-child),.curve_point_remove_tool[data-v-937f4896]{margin-left:auto}.curve_point_options input[data-v-937f4896]{flex-grow:1;min-width:40px;width:0}.tool.slim[data-v-937f4896]{padding:1px 0;text-align:center;width:24px}.curve_footer[data-v-937f4896]{display:flex;height:30px}.curve_footer .fill_line[data-v-937f4896]{cursor:ns-resize;flex-grow:1}.curve_footer .fill_line[data-v-937f4896]:after{background-color:var(--color-bar);content:"";display:inline-block;height:2px;margin:auto;pointer-events:none;width:100%}.curve_footer:hover .fill_line[data-v-937f4896]:after{background-color:var(--color-selection)}',""]);const a=i},34:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#event_list[data-v-15ea88b9]{margin-block:12px}.event[data-v-15ea88b9]{border-bottom:2px solid transparent;border-top:2px solid var(--color-bar);padding:20px 6px}.event[data-v-15ea88b9]:first-of-type{border-top-color:transparent;margin-top:0;padding-top:4px}.event.sort_before[data-v-15ea88b9]{border-top:2px solid var(--color-accent)}.event.sort_after[data-v-15ea88b9]{border-bottom:2px solid var(--color-accent)}.event_header_bar[data-v-15ea88b9]{background-color:var(--color-bar);display:flex;gap:4px;padding:5px}.event_header_bar>label[data-v-15ea88b9]{min-width:80px;padding:4px;text-align:right}.event_header_bar>input[data-v-15ea88b9]{margin-right:auto}.event_sort_handle[data-v-15ea88b9]{cursor:grab;padding-top:2px}.remove_event_button[data-v-15ea88b9]{cursor:pointer;padding:4px}.remove_event_button[data-v-15ea88b9]:hover{color:var(--color-highlight)}",""]);const a=i},823:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".event_picker_wrapper[data-v-281608f1]{position:relative}.list[data-v-281608f1]{background-color:var(--color-dark);border:1px solid var(--color-border);border-radius:2px;color:var(--color-text_grayed);max-height:200px;min-height:20px;overflow:auto;position:absolute;text-align:center;width:200px;z-index:4}.list>li[data-v-281608f1]{color:var(--color-text);cursor:pointer;height:32px;padding:4px 9px;text-align:initial}.list>li[data-v-281608f1]:hover{background-color:var(--color-interface);color:var(--color-highlight)}.list>li svg[data-v-281608f1]{margin-right:2px}",""]);const a=i},987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'.event_subpart[data-v-4056498d]{border-left:5px solid var(--color-bar);padding-bottom:8px;padding-left:12px;padding-top:8px}.event_subpart[data-v-4056498d]:hover{border-left-color:var(--color-selection)}ul.create_bar[data-v-4056498d]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;padding:4px 6px}ul.create_bar>li[data-v-4056498d]{color:var(--color-text_grayed);cursor:pointer;font-size:.96em;white-space:nowrap}ul.create_bar>li[data-v-4056498d]:hover{color:var(--color-text)}ul.create_bar>li>svg[data-v-4056498d]{vertical-align:sub}ul.nested_list[data-v-4056498d]{margin-left:12px}ul.sortable>li[data-v-4056498d]{border-bottom:2px solid transparent;border-top:2px solid transparent}ul.sortable>.sort_before[data-v-4056498d]{border-top:2px solid var(--color-accent)}ul.sortable>.sort_after[data-v-4056498d]{border-bottom:2px solid var(--color-accent)}.list_add_button[data-v-4056498d]{margin-left:26px}.header_bar[data-v-4056498d]{display:flex;gap:8px}.header_bar>label[data-v-4056498d]{padding-top:4px}.header_bar>svg[data-v-4056498d]{cursor:grab;margin-left:-2px;margin-top:2px}.header_bar .fill_line[data-v-4056498d]{flex-grow:1}.header_bar .fill_line[data-v-4056498d]:after{background-color:var(--color-bar);content:"";display:inline-block;height:2px;margin:auto;pointer-events:none;width:100%}.add_button[data-v-4056498d]{margin-left:auto}.subpart_option_head_bar[data-v-4056498d]{display:flex}.section_bar[data-v-4056498d]{margin-bottom:4px;margin-top:8px}.descriptor_label[data-v-4056498d]{color:var(--color-text_grayed);padding-right:4px;vertical-align:middle}.input_wrapper[data-v-4056498d]{display:flex;gap:8px;margin:2px 0}.input_wrapper>label[data-v-4056498d]{flex-shrink:0;margin:3px 0;text-align:right;vertical-align:middle;width:95px}.input_wrapper>select[data-v-4056498d]{flex-grow:1}',""]);const a=i},549:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".color_gradient[data-v-300efe16]{width:100%}.gradient_container[data-v-300efe16]{border:1px solid #000;height:20px;margin:0 5px 10px;position:relative;width:calc(100% - 10px)}.gradient_point[data-v-300efe16]{border:1px solid #212529;cursor:pointer;height:16px;margin-left:-5px;overflow:hidden;position:absolute;top:10px;width:10px}.gradient_point.selected[data-v-300efe16]{border-color:#fff;box-shadow:0 0 2px #000;z-index:4}.gradient_inner[data-v-300efe16]{height:100%;width:100%}div.vc-chrome[data-v-300efe16]{float:left}",""]);const a=i},478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'.input_wrapper[data-v-21003fb4]{margin:2px 0}.input_wrapper>label[data-v-21003fb4]{margin:3px 0;text-align:right;vertical-align:middle;width:100px}.input_right[data-v-21003fb4]{display:inline-flex;gap:2px;margin-left:4px;vertical-align:middle;width:calc(100% - 110px)}.input_right.full_width[data-v-21003fb4]{width:calc(100% - 8px)}.input_right.expandable[data-v-21003fb4]{width:calc(100% - 134px)}.input_right[axes="1"]>input[data-v-21003fb4]:not([type=checkbox]),.input_right[axes="1"]>select[data-v-21003fb4]:not([type=checkbox]){width:100%}.input_right.expanded[data-v-21003fb4]{display:block;width:calc(100% - 7px)}.input_right.expanded .input_vector[data-v-21003fb4],.input_right.expanded input[data-v-21003fb4]{display:block;margin-left:0;width:100%!important}.tool.input_expand_button[data-v-21003fb4]{float:right;padding-left:0;padding-top:2px;width:22px}li[input_type=select_custom] select[data-v-21003fb4]{flex-grow:1;width:140px}.input_list li[data-v-21003fb4]{margin:2px 0}ul.input_list .prism-editor-component[data-v-21003fb4],ul.input_list input[data-v-21003fb4]{float:left;margin-left:52px;width:calc(100% - 80px)}.input_list li .tool[data-v-21003fb4]{height:30px;padding:2px 0;width:24px}.input_vector[data-v-21003fb4]{flex-grow:1;width:40px}.input_vector[data-v-21003fb4]:first-child{margin-left:0}.list_add_tool[data-v-21003fb4]{vertical-align:sub}.event_list[data-v-21003fb4]{flex-grow:1;min-height:30px;padding:0 1px;position:relative;width:auto}.event_list>li.event_list_event[data-v-21003fb4]{background-color:var(--color-bar);border-radius:5px;box-shadow:0 1px 14px rgba(0,0,0,.18);display:inline-block;height:30px;margin:1px 2px;padding:4px 13px}.event_list>li.event_list_event>label[data-v-21003fb4]{font-family:var(--font-code)}.event_list>li.event_list_event>svg[data-v-21003fb4]{margin-top:-2px}.event_list>div[data-v-21003fb4]{display:inline-block;margin-top:4px}.timeline_event_list[data-v-21003fb4]{margin-bottom:0;margin-top:-2px}.event_speed_list>li.event_list_event[data-v-21003fb4]{padding:5px}.event_speed_list>li.event_list_event>.highlighting_button[data-v-21003fb4]{float:right;margin-top:1px}.event_min_speed[data-v-21003fb4]{border-top:2px solid var(--color-interface);display:flex;gap:5px;padding-top:4px;width:100%}.event_min_speed>label[data-v-21003fb4]{padding-top:3px}.event_min_speed>input[data-v-21003fb4]{width:56px}ul.event_timeline[data-v-21003fb4]{margin-left:20px;padding:0 10px;position:relative}ul.event_timeline.has_entries[data-v-21003fb4]:before{background-color:var(--color-bar);border-radius:3px;bottom:-2px;content:"";display:block;left:-11px;position:absolute;top:-4px;width:6px}ul.event_timeline>li[data-v-21003fb4]{display:block;display:flex;gap:6px;margin:2px 0;padding-left:2px;position:relative}ul.event_timeline>li[data-v-21003fb4]:before{background-color:var(--color-title);border-radius:50%;content:"";display:block;height:16px;left:-26px;position:absolute;top:7px;width:16px}ul.event_timeline>li[data-v-21003fb4]:hover:before{filter:brightness(1.2)}ul.event_timeline>li:not(:hover) .event_switch_button[data-v-21003fb4]{display:none}ul.event_timeline>li>input[data-v-21003fb4]{width:69px}ul.event_timeline>li>label[data-v-21003fb4]{font-family:var(--font-code);padding:3px}ul.event_timeline>li>.timeline_remove_button[data-v-21003fb4]{flex-shrink:0;margin-left:auto;margin-top:2px}',""]);const a=i},473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"svg[data-v-1c83545f]{fill:var(--color-text);height:auto;overflow:hidden;padding:12px}span[data-v-1c83545f]{color:var(--color-title);float:right;margin-right:12px;margin-top:21px}",""]);const a=i},187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".preset_option_list[data-v-43114ee2]{display:flex;gap:2px;overflow-x:auto}.preset_option_list>li[data-v-43114ee2]{cursor:pointer;padding:8px;text-align:center;width:80px}.preset_option_list>li[data-v-43114ee2]:hover{color:var(--color-highlight)}.preset_option_list>li.selected[data-v-43114ee2]{background-color:var(--color-bar)}.preset_option_list>li>svg[data-v-43114ee2]{display:block;margin:auto}.preset_option_list>li>img[data-v-43114ee2]{aspect-ratio:1/1;-o-object-fit:cover;object-fit:cover;-o-object-position:bottom;object-position:bottom;pointer-events:none}.preset_option_list>li:hover>img.frames_8[data-v-43114ee2]{animation:thumb_animation-data-v-43114ee2 1s step-end 0s infinite normal}.preset_option_list>li:hover>img.frames_4[data-v-43114ee2]{animation:thumb_animation_4-data-v-43114ee2 .3s step-end 0s infinite normal}@keyframes thumb_animation-data-v-43114ee2{0%{-o-object-position:0 0;object-position:0 0}12.5%{-o-object-position:0 14.28571%;object-position:0 14.28571%}25%{-o-object-position:0 28.57143%;object-position:0 28.57143%}37.5%{-o-object-position:0 42.85714%;object-position:0 42.85714%}50%{-o-object-position:0 57.14286%;object-position:0 57.14286%}62.5%{-o-object-position:0 71.42857%;object-position:0 71.42857%}75%{-o-object-position:0 85.71429%;object-position:0 85.71429%}87.5%{-o-object-position:0 100%;object-position:0 100%}to{-o-object-position:0 0;object-position:0 0}}@keyframes thumb_animation_4-data-v-43114ee2{0%{-o-object-position:0 0;object-position:0 0}25%{-o-object-position:0 33.33333%;object-position:0 33.33333%}50%{-o-object-position:0 66.66667%;object-position:0 66.66667%}75%{-o-object-position:0 100%;object-position:0 100%}to{-o-object-position:0 0;object-position:0 0}}.input_bar[data-v-43114ee2]{gap:8px;margin:10px 14px}.input_bar[data-v-43114ee2],.input_bar label[data-v-43114ee2]{align-items:center;display:flex}.input_bar label[data-v-43114ee2]{margin-block:0}.input_bar input[type=range][data-v-43114ee2]{flex-grow:1}.input_bar label.range_number_label[data-v-43114ee2]{display:block;text-align:center;width:46px}",""]);const a=i},416:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'.texture_input[data-v-1f4988d8]{margin-top:8px;position:relative;width:100%}input#image[data-v-1f4988d8]{width:calc(100% - 40px)}.input_right.image[data-v-1f4988d8]{flex-direction:column}.texture_viewport[data-v-1f4988d8]{--size:256px;background-color:var(--color-dark);display:block;flex-shrink:0;height:calc(var(--outer-height) + 2px);margin-left:-12px;margin-right:-6px;margin-top:8px;overflow:hidden;position:relative;touch-action:none;width:100%;width:auto}.input_texture_wrapper[data-v-1f4988d8]{border:1px solid var(--color-border);box-sizing:content-box;cursor:crosshair;height:auto;height:-webkit-fill-available;margin:auto;overflow:visible;position:relative;width:var(--size)}.texture_input[tool=select] .input_texture_wrapper[data-v-1f4988d8]{cursor:default}#canvas_wrapper[data-v-1f4988d8]{height:100%}.uv_preview[data-v-1f4988d8]{cursor:move;outline:1px solid var(--color-border);position:absolute;top:0;touch-action:none}.texture_input:not([tool=select]) .uv_preview[data-v-1f4988d8]{pointer-events:none}.texture_input[tool=select] .uv_preview[data-v-1f4988d8]:hover{outline-color:var(--color-highlight)}.uv_sample_preview[data-v-1f4988d8]{border:1px solid var(--color-accent)}.uv_perimeter_preview[data-v-1f4988d8]{border:1px solid var(--color-text)}.uv_preview_size_handle[data-v-1f4988d8]{background-color:var(--color-text);bottom:-10px;cursor:se-resize;display:none;height:10px;outline:1px solid var(--color-border);position:absolute;right:-10px;touch-action:none;width:10px}.texture_viewport:hover .uv_preview_size_handle[data-v-1f4988d8]{display:block}.viewport_scrollbar[data-v-1f4988d8]{background-color:var(--color-bar);border:1px solid var(--color-border);border-radius:8px;height:12px;margin:auto;position:absolute;touch-action:none;width:12px}.portrait_view .viewport_scrollbar[data-v-1f4988d8]{height:16px;width:16px}.viewport_scrollbar[data-v-1f4988d8]:active,.viewport_scrollbar[data-v-1f4988d8]:hover{background-color:var(--color-accent)}.viewport_scrollbar.horizontal[data-v-1f4988d8]{bottom:4px;left:0;max-width:100px;min-width:25px;right:0}.viewport_scrollbar.vertical[data-v-1f4988d8]{bottom:0;max-height:100px;min-height:25px;right:3px;top:0}.texture_info_bar[data-v-1f4988d8]{display:flex}.texture_info_bar>div.info[data-v-1f4988d8]{flex:1 1 80px;padding-top:5px;text-align:center}.toolbar[data-v-1f4988d8]{align-items:center;display:flex;height:34px;margin-top:6px}.tool[data-v-1f4988d8]{border-radius:2px;cursor:pointer;padding:4px;text-align:center;width:40px}.tool.selected[data-v-1f4988d8]{background-color:var(--color-title);color:var(--color-highlight)}.tool[data-v-1f4988d8]:hover{outline-color:var(--color-highlight)}.undo_controls[data-v-1f4988d8]{margin:auto}.color_preview[data-v-1f4988d8]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADBJREFUOE9jfPbs2X8GPEBSUhKfNAPjqAHDIgz+//+PNx08f/4cfzoYNYCBceiHAQC5flV5JzgrxQAAAABJRU5ErkJggg==");border:1px solid var(--color-border);border-radius:50%;cursor:pointer;height:100%;height:34px;margin-left:auto;overflow:hidden;position:relative;width:34px}.color_preview_color[data-v-1f4988d8]{bottom:0;left:0;position:absolute;right:0;top:0}#color_picker_overlay[data-v-1f4988d8]{position:absolute;right:0;z-index:4}#brush_outline[data-v-1f4988d8]{border:1px solid #fff;mix-blend-mode:difference;outline:1px solid var(--color-border);position:absolute}.resize_line[data-v-1f4988d8]{cursor:ns-resize;height:12px;position:relative}.resize_line[data-v-1f4988d8]:after{background-color:var(--color-bar);content:"";display:block;height:2px;pointer-events:none;position:absolute;top:5px;width:100%}.resize_line[data-v-1f4988d8]:hover:after{background-color:var(--color-selection)}',""]);const a=i},284:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".input_texture_wrapper canvas{background-repeat:no-repeat;background-size:contain;height:100%;pointer-events:none;width:100%}",""]);const a=i},257:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".scrollable[data-v-8dd2ba5c]{overflow-y:scroll}li.warning[data-v-8dd2ba5c]{color:#ffc107;list-style:inside;padding:10px}",""]);const a=i},491:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"\r\n\t/*Setup*/\r\n\r\n\t::-webkit-scrollbar {\r\n\t\twidth: 8px;\r\n\t\theight: 8px;\r\n\t}\r\n\t\r\n\t::-webkit-scrollbar-track {\r\n\t\tbackground: var(--color-interface);\r\n\t}\r\n\t::-webkit-scrollbar-corner {\r\n\t\tbackground: var(--color-interface);\r\n\t}\r\n\t\r\n\t::-webkit-scrollbar-thumb {\r\n\t\tbackground: var(--color-bar);\r\n\t}\r\n\t::-webkit-scrollbar-thumb:hover {\r\n\t\tbackground: var(--color-title);\r\n\t}\r\n\t::selection {\r\n\t\tbackground: var(--color-selection);\r\n\t}\r\n\t::placeholder {\r\n\t\topacity: 0.6;\r\n\t}\r\n\t* {\r\n\t\tscrollbar-width: thin;\r\n\t\tscrollbar-color: var(--color-bar) var(--color-background);\r\n\t}\r\n\r\n\tbody {\r\n\t\t--color-background: #29323a;\r\n\t\t--color-dark: #20272d;\r\n\t\t--color-border: #1a1c1f;\r\n\t\t--color-interface: #29323a;\r\n\t\t--color-bar: #34404a;\r\n\t\t--color-title: #4b5b69;\r\n\t\t--color-selection: rgba(110, 142, 191, 0.3);\r\n\t\t--color-highlight: #f7f9ff;\r\n\t\t--color-text: #bcc3ca;\r\n\t\t--color-text_grayed: #939aa3;\r\n\t\t--color-accent: #20ddff;\r\n\r\n\t\t--font-code: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r\n\t}\r\n\r\n\r\n\th1, h2, h3, h4, h5, h6 {\r\n\t\tmargin: 0;\r\n\t\tfont-weight: inherit;\r\n\t\tline-height: 1.2;\r\n    }\r\n\tul {\r\n\t\tlist-style: none;\r\n\t\tpadding-left: 0;\r\n\t\tmargin: 0;\r\n\t}\r\n\t* {\r\n\t\tmargin: 0;\r\n        padding: 0;\r\n        box-sizing: border-box;\r\n\t\tuser-select: none;\r\n\t}\r\n\t*, :after, :before {\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\timg, svg {\r\n\t\tvertical-align: middle;\r\n\t}\r\n\tbutton, input, optgroup, select, textarea {\r\n\t\tfont-family: inherit;\r\n\t\tfont-size: inherit;\r\n\t\tline-height: inherit;\r\n\t\tmargin: 0;\r\n\t}\r\n\tinput, select {\r\n\t\tfont-weight: inherit;\r\n\t\tbackground-color: var(--color-dark);\r\n\t\tborder: 1px solid var(--color-border);\r\n\t\tcolor: var(--color-text);\r\n\t\theight: 30px;\r\n\t\tpadding: 4px 1px;\r\n\t\toutline: none;\r\n\t}\r\n\tinput[type=text], input[type=number], input:not([type]) {\r\n\t\tfont-family: var(--font-code);\r\n\t\tpadding: 0 4px;\r\n\t}\r\n\tinput[type=checkbox].hidden {\r\n\t\tdisplay: none;\r\n\t}\r\n\tinput[type=file] {\r\n        padding: 1px;\r\n        border: none;\r\n        background-color: initial;\r\n\t}\r\n\tinput[type=range] {\r\n\t\t-webkit-appearance: none;\r\n\t\tappearance: none;\r\n\t\tborder: none;\r\n\t\tfont-size: 1em;\r\n\t\tfont-family: inherit;\r\n\t\toutline: none;\r\n\t\tbackground-color: transparent;\r\n\t\theight: 30px;\r\n\t\tposition: relative;\r\n\t\t--color-track: var(--color-bar);\r\n\t\t--color-thumb: var(--color-accent);\r\n\t\t--color-center: var(--color-interface);\r\n\t}\r\n\tinput[type=range]::-webkit-slider-thumb {\r\n\t\t-webkit-appearance: none;\r\n\t\t-moz-appearance: none;\r\n\t\tappearance: none;\r\n\t\theight: 20px;\r\n\t\twidth: 20px;\r\n\t\tmargin-top: -9px;\r\n\t\tborder: none;\r\n\t\tbackground-color: var(--color-center);\r\n\t\tborder: 2px solid var(--color-thumb);\r\n\t\tborder-radius: 50%;\r\n\t\tcursor: pointer;\r\n\t\tz-index: 3;\r\n\t}\r\n\tinput[type=range]::-moz-range-thumb {\r\n\t\t-webkit-appearance: none;\r\n\t\t-moz-appearance: none;\r\n\t\tappearance: none;\r\n\t\theight: 20px;\r\n\t\twidth: 20px;\r\n\t\tborder:none;\r\n\t\tbackground-color: var(--color-center);\r\n\t\tborder: 2px solid var(--color-thumb);\r\n\t\tborder-radius: 50%;\r\n\t\tcursor: pointer;\r\n\t\tz-index: 3;\r\n\t}\r\n\tinput[type=range]:not([disabled=disabled])::-webkit-slider-thumb:hover {\r\n\t\tbackground-color: var(--color-thumb);\r\n\t\tborder: none;\r\n\t}\r\n\tinput[type=range]:not([disabled=disabled])::-moz-range-thumb:hover {\r\n\t\tbackground-color: var(--color-thumb);\r\n\t\tborder: none;\r\n\t}\r\n\tinput[type=range][disabled=disabled]::-webkit-slider-thumb {\r\n\t\tbackground-color: var(--color-button);\r\n\t}\r\n\tinput[type=range][disabled=disabled]::-moz-range-thumb {\r\n\t\tbackground-color: var(--color-button);\r\n\t}\r\n\tinput[type=range]::-webkit-slider-runnable-track {\r\n\t\twidth: 100%;\r\n\t\theight: 4px;\r\n\t\tcursor: pointer;\r\n\t\tbackground: var(--color-track);\r\n\t}\r\n\tinput[type=range]::-moz-range-track {\r\n\t\twidth: 100%;\r\n\t\theight: 2px;\r\n\t\tcursor: pointer;\r\n\t\tbackground: var(--color-track);\r\n\t\tborder-radius: 3px;\r\n\t}\r\n\t::file-selector-button {\r\n\t\tborder: none;\r\n\t\tbackground-color: var(--color-bar);\r\n\t\tcolor: inherit;\r\n\t\tfont-size: inherit;\r\n\t\tpadding: 5px 12px;\r\n\t\tborder-radius: 1px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t::file-selector-button:hover {\r\n\t\tbackground-color: var(--color-title);\r\n\t}\r\n\tbutton {\r\n\t\tappearance: none;\r\n\t\tborder: none;\r\n\t\tbackground-color: var(--color-bar);\r\n\t\tcolor: inherit;\r\n\t\tfont-size: inherit;\r\n\t\tpadding: 8px 12px;\r\n\t\tborder-radius: 1px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\tbutton:hover {\r\n\t\tbackground-color: var(--color-accent);\r\n\t\tcolor: black;\r\n\t}\r\n\tlabel {\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\t.unicode_icon {\r\n\t\tfont-style: unset;\r\n\t\tdisplay: block;\r\n\t\twidth: 24px;\r\n\t\theight: 24px;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14pt;\r\n\t\tfont-family: sans-serif;\r\n\t}\r\n\t.unicode_icon.caret {\r\n\t\tfont-size: 25pt;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: block;\r\n\t\tmargin-top: -4px;\r\n\t\twidth: 12px;\r\n\t}\r\n\t.unicode_icon.plus {\r\n\t\tfont-size: 18pt;\r\n\t\tmargin-top: -4px;\r\n\t}\r\n\t.unicode_icon.split {\r\n\t\tfont-size: 22pt;\r\n\t\tmargin-top: -12px;\r\n\t}\r\n\t.unicode_icon.warning {\r\n\t\tmargin-top: -1px;\r\n\t}\r\n\t.checkerboard {\r\n\t\t--color-checker_offset: var(--color-bar);\r\n\t\t--color-checkerboard: var(--color-interface);\r\n\t\tbackground-color: var(--color-checkerboard) !important;\r\n\t\tbackground-image: linear-gradient(45deg, var(--color-checkerboard) 25%, transparent 25%), linear-gradient(-45deg, var(--color-checkerboard) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--color-checkerboard) 75%), linear-gradient(-45deg, var(--color-checker_offset) 75%, var(--color-checkerboard) 75%);\r\n\t\tbackground-size: 16px 16px;\r\n\t\tbackground-position: 0 0, 0 8px, 8px -8px, -8px 0px;\r\n\t}\r\n\tselect {\r\n\t\theight: 30px;\r\n\t\t-webkit-appearance: none;\r\n\t\tappearance: auto;\r\n\t\tborder-radius: 0;\r\n\t}\r\n\tbody {\r\n\t\timage-rendering: pixelated;\r\n\t\tbackground-color: var(--color-background);\r\n\t\tuser-select: none;\r\n\t\t-moz-user-select: none;\r\n\t\tfont-family: 'Lato', -apple-system, \"Segoe UI\", sans-serif;\r\n\t\theight: 100%;\r\n        width: 100%;\r\n        margin: 0;\r\n        font-size: 11pt;\r\n        font-weight: 400;\r\n        line-height: 1.5;\r\n        color: var(--color-text);\r\n        text-align: left;\r\n\t}\r\n\r\n\t.highlighting_button {\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.highlighting_button:hover {\r\n\t\tcolor: var(--color-highlight);\r\n\t}\r\n\r\n/* Dialog */\r\n\t.modal_dialog {\r\n\t\tmargin: auto;\r\n\t\tborder: 1px solid var(--color-bar);\r\n\t\tbackground-color: var(--color-interface);\r\n\t\tbox-shadow: 0 1px 12px rgba(0, 0, 0, 0.4);\r\n\t\tpadding: 12px;\r\n\t\tcolor: inherit;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\t.modal_dialog > .button_bar {\r\n\t\tdisplay: flex;\r\n\t\tmargin-top: 10px;\r\n\t\tjustify-content: end;\r\n\t\tgap: 4px;\r\n\t}\r\n\t.modal_dialog > .form_bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tgap: 8px;\r\n\t\tmargin-top: 2px;\r\n\t}\r\n\r\n/*Color Picker*/\r\n\t\r\n\tdiv.vc-chrome {\r\n\t\twidth: 310px;\r\n\t\tmargin: 2px 0;\r\n\t\tfont-family: inherit;\r\n\t}\r\n\tdiv.vc-chrome .vc-chrome-body {\r\n\t\tbackground-color: var(--color-interface);\r\n\t}\r\n\tdiv.vc-chrome .vc-chrome-fields .vc-input__input {\r\n\t\tcolor: var(--color-text);\r\n\t\tbox-shadow: none;\r\n\t\tfont-size: inherit;\r\n\t\tborder: 1px solid var(--color-border);\r\n\t\theight: 24px;\r\n\t}\r\n\tdiv.vc-chrome .vc-chrome-toggle-icon svg path {\r\n\t\tfill: var(--color-text);\r\n\t}\r\n\t.vc-chrome-saturation-wrap .vc-saturation-circle {\r\n\t\tmargin-top: -5px;\r\n\t\tmargin-left: -4px;\r\n\t}\r\n\r\n\r\n/* Prism Editor */\r\n\r\n.prism-editor-wrapper {\r\n\tbackground-color: var(--color-dark);\r\n\theight: auto;\r\n\tz-index: 3;\r\n\tfont-family: var(--font-code);\r\n\toutline: none;\r\n\tpadding: 4px;\r\n\tpadding-bottom: 2px;\r\n\tfont-size: 15px;\r\n\twidth: fit-content;\r\n\tmin-width: 100%;\r\n\tscrollbar-color: var(--color-bar) var(--color-dark);\r\n}\r\n.prism-editor-wrapper .prism-editor__editor, .prism-editor-wrapper .prism-editor__textarea {\r\n\twhite-space: pre;\r\n}\r\n.prism-editor-component {\r\n\tborder: 1px solid var(--color-border);\r\n\twidth: 100%;\r\n}\r\n.prism-editor-wrapper textarea {\r\n\toutline: none;\r\n}\r\n.prism-editor-wrapper pre {\r\n\tcolor: var(--color-text);\r\n}\r\n.prism-editor-wrapper .prism-editor-wrapper {\r\n\toverflow-y: hidden;\r\n}\r\n.prism-editor__autocomplete {\r\n\tbackground-color: var(--color-interface);\r\n\tborder: 1px solid var(--color-border);\r\n\tmax-height: 220px;\r\n\tpadding-bottom: 10px;\r\n}\r\n.prism-editor__autocomplete > li {\r\n\tpadding: 3px 8px;\r\n\tfont-family: var(--font-code);\r\n}\r\n.prism-editor__autocomplete > li:hover {\r\n\tcolor: var(--color-highlight);\r\n\tbackground-color: var(--color-bar);\r\n}\r\n.prism-editor__autocomplete > li.selected {\r\n\tcolor: var(--color-highlight);\r\n\tbackground-color: var(--color-bar);\r\n}\r\n\r\n.prism-editor-wrapper pre .token.punctuation {\r\n\tcolor: #5ba8c5\r\n}\r\n.prism-editor-wrapper pre .token.operator, .prism-editor-wrapper pre .token.keyword {\r\n\tcolor: #fc2f40\r\n}\r\n.prism-editor-wrapper pre .token.number, .prism-editor-wrapper pre .token.boolean, input[type=\"number\"] {\r\n\tcolor: #b99cff\r\n}\r\n.prism-editor-wrapper pre .token.function-name {\r\n\tcolor: #94e400\r\n}\r\n.prism-editor-wrapper pre .token.selector {\r\n\tcolor: #92dcff;\r\n}",""]);const a=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},325:(e,t,n)=>{var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof a?new a(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,a;switch(n=n||{},i.util.type(t)){case"Object":if(a=i.util.objId(t),n[a])return n[a];for(var o in r={},n[a]=r,t)t.hasOwnProperty(o)&&(r[o]=e(t[o],n));return r;case"Array":return a=i.util.objId(t),n[a]?n[a]:(r=[],n[a]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var a=(r=r||i.languages)[e],o={};for(var s in a)if(a.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(o[l]=n[l]);n.hasOwnProperty(s)||(o[s]=a[s])}var c=r[e];return r[e]=o,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=o)})),o},DFS:function e(t,n,r,a){a=a||{};var o=i.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],r||s);var l=t[s],c=i.util.type(l);"Object"!==c||a[o(l)]?"Array"!==c||a[o(l)]||(a[o(l)]=!0,e(l,n,s,a)):(a[o(l)]=!0,e(l,n,null,a))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var a,o=0;a=r.elements[o++];)i.highlightElement(a,!0===t,r.callback)},highlightElement:function(t,n,r){var a=i.util.getLanguage(t),o=i.languages[a];i.util.setLanguage(t,a);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&i.util.setLanguage(s,a);var l={element:t,language:a,grammar:o,code:t.textContent};function c(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(i.highlight(l.code,l.grammar,l.language));else c(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),a.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return c(i,i.head,e),s(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,a=0;r=n[a++];)r(t)}},Token:a};function a(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function o(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var a=i[1].length;i.index+=a,i[0]=i[0].slice(a)}return i}function s(e,t,n,r,l,h){for(var p in n)if(n.hasOwnProperty(p)&&n[p]){var d=n[p];d=Array.isArray(d)?d:[d];for(var f=0;f<d.length;++f){if(h&&h.cause==p+","+f)return;var m=d[f],v=m.inside,g=!!m.lookbehind,_=!!m.greedy,y=m.alias;if(_&&!m.pattern.global){var b=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,b+"g")}for(var x=m.pattern||m,w=r.next,M=l;w!==t.tail&&!(h&&M>=h.reach);M+=w.value.length,w=w.next){var S=w.value;if(t.length>e.length)return;if(!(S instanceof a)){var E,A=1;if(_){if(!(E=o(x,M,e,g))||E.index>=e.length)break;var T=E.index,C=E.index+E[0].length,k=M;for(k+=w.value.length;T>=k;)k+=(w=w.next).value.length;if(M=k-=w.value.length,w.value instanceof a)continue;for(var L=w;L!==t.tail&&(k<C||"string"==typeof L.value);L=L.next)A++,k+=L.value.length;A--,S=e.slice(M,k),E.index-=M}else if(!(E=o(x,0,S,g)))continue;T=E.index;var P=E[0],R=S.slice(0,T),I=S.slice(T+P.length),z=M+S.length;h&&z>h.reach&&(h.reach=z);var O=w.prev;if(R&&(O=c(t,O,R),M+=R.length),u(t,O,A),w=c(t,O,new a(p,v?i.tokenize(P,v):P,y,P)),I&&c(t,w,I),A>1){var D={cause:p+","+f,reach:z};s(e,t,n,w.prev,M,D),h&&D.reach>h.reach&&(h.reach=D.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,a.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var a={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},o=t.alias;o&&(Array.isArray(o)?Array.prototype.push.apply(a.classes,o):a.classes.push(o)),i.hooks.run("wrap",a);var s="";for(var l in a.attributes)s+=" "+l+'="'+(a.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+s+">"+a.content+"</"+a.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,a=n.code,o=n.immediateClose;e.postMessage(i.highlight(a,i.languages[r],r)),o&&e.close()}),!1),i):i;var h=i.util.currentScript();function p(){i.manual||i.highlightAll()}if(h&&(i.filename=h.src,h.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var d=document.readyState;"loading"===d||"interactive"===d&&h&&h.defer?document.addEventListener("DOMContentLoaded",p):window.requestAnimationFrame?window.requestAnimationFrame(p):window.setTimeout(p,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=r),void 0!==n.g&&(n.g.Prism=r)},277:()=>{Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json},660:(e,t,n)=>{var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof a?new a(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,a;switch(n=n||{},i.util.type(t)){case"Object":if(a=i.util.objId(t),n[a])return n[a];for(var o in r={},n[a]=r,t)t.hasOwnProperty(o)&&(r[o]=e(t[o],n));return r;case"Array":return a=i.util.objId(t),n[a]?n[a]:(r=[],n[a]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var a=(r=r||i.languages)[e],o={};for(var s in a)if(a.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(o[l]=n[l]);n.hasOwnProperty(s)||(o[s]=a[s])}var c=r[e];return r[e]=o,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=o)})),o},DFS:function e(t,n,r,a){a=a||{};var o=i.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],r||s);var l=t[s],c=i.util.type(l);"Object"!==c||a[o(l)]?"Array"!==c||a[o(l)]||(a[o(l)]=!0,e(l,n,s,a)):(a[o(l)]=!0,e(l,n,null,a))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var a,o=0;a=r.elements[o++];)i.highlightElement(a,!0===t,r.callback)},highlightElement:function(t,n,r){var a=i.util.getLanguage(t),o=i.languages[a];i.util.setLanguage(t,a);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&i.util.setLanguage(s,a);var l={element:t,language:a,grammar:o,code:t.textContent};function c(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(i.highlight(l.code,l.grammar,l.language));else c(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),a.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return c(i,i.head,e),s(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,a=0;r=n[a++];)r(t)}},Token:a};function a(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function o(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var a=i[1].length;i.index+=a,i[0]=i[0].slice(a)}return i}function s(e,t,n,r,l,h){for(var p in n)if(n.hasOwnProperty(p)&&n[p]){var d=n[p];d=Array.isArray(d)?d:[d];for(var f=0;f<d.length;++f){if(h&&h.cause==p+","+f)return;var m=d[f],v=m.inside,g=!!m.lookbehind,_=!!m.greedy,y=m.alias;if(_&&!m.pattern.global){var b=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,b+"g")}for(var x=m.pattern||m,w=r.next,M=l;w!==t.tail&&!(h&&M>=h.reach);M+=w.value.length,w=w.next){var S=w.value;if(t.length>e.length)return;if(!(S instanceof a)){var E,A=1;if(_){if(!(E=o(x,M,e,g))||E.index>=e.length)break;var T=E.index,C=E.index+E[0].length,k=M;for(k+=w.value.length;T>=k;)k+=(w=w.next).value.length;if(M=k-=w.value.length,w.value instanceof a)continue;for(var L=w;L!==t.tail&&(k<C||"string"==typeof L.value);L=L.next)A++,k+=L.value.length;A--,S=e.slice(M,k),E.index-=M}else if(!(E=o(x,0,S,g)))continue;T=E.index;var P=E[0],R=S.slice(0,T),I=S.slice(T+P.length),z=M+S.length;h&&z>h.reach&&(h.reach=z);var O=w.prev;if(R&&(O=c(t,O,R),M+=R.length),u(t,O,A),w=c(t,O,new a(p,v?i.tokenize(P,v):P,y,P)),I&&c(t,w,I),A>1){var D={cause:p+","+f,reach:z};s(e,t,n,w.prev,M,D),h&&D.reach>h.reach&&(h.reach=D.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,a.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var a={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},o=t.alias;o&&(Array.isArray(o)?Array.prototype.push.apply(a.classes,o):a.classes.push(o)),i.hooks.run("wrap",a);var s="";for(var l in a.attributes)s+=" "+l+'="'+(a.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+s+">"+a.content+"</"+a.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,a=n.code,o=n.immediateClose;e.postMessage(i.highlight(a,i.languages[r],r)),o&&e.close()}),!1),i):i;var h=i.util.currentScript();function p(){i.manual||i.highlightAll()}if(h&&(i.filename=h.src,h.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var d=document.readyState;"loading"===d||"interactive"===d&&h&&h.defer?document.addEventListener("DOMContentLoaded",p):window.requestAnimationFrame?window.requestAnimationFrame(p):window.setTimeout(p,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=r),void 0!==n.g&&(n.g.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var a={};a[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:i},r.languages.insertBefore("markup","cdata",a)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,function(){if(void 0!==r&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",i="loaded",a="pre[data-src]:not(["+t+'="'+i+'"]):not(['+t+'="'+n+'"])';r.hooks.add("before-highlightall",(function(e){e.selector+=", "+a})),r.hooks.add("before-sanity-check",(function(o){var s=o.element;if(s.matches(a)){o.code="",s.setAttribute(t,n);var l=s.appendChild(document.createElement("CODE"));l.textContent="Loading";var c=s.getAttribute("data-src"),u=o.language;if("none"===u){var h=(/\.(\w+)$/.exec(c)||[,"none"])[1];u=e[h]||h}r.util.setLanguage(l,u),r.util.setLanguage(s,u);var p=r.plugins.autoloader;p&&p.loadLanguages(u),function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&(r.status<400&&r.responseText?t(r.responseText):r.status>=400?n(" Error "+r.status+" while fetching file: "+r.statusText):n(" Error: File does not exist or is empty"))},r.send(null)}(c,(function(e){s.setAttribute(t,i);var n=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),r=t[2],i=t[3];return r?i?[n,Number(i)]:[n,void 0]:[n,n]}}(s.getAttribute("data-range"));if(n){var a=e.split(/\r\n?|\n/g),o=n[0],c=null==n[1]?a.length:n[1];o<0&&(o+=a.length),o=Math.max(0,Math.min(o-1,a.length)),c<0&&(c+=a.length),c=Math.max(0,Math.min(c,a.length)),e=a.slice(o,c).join("\n"),s.hasAttribute("data-start")||s.setAttribute("data-start",String(o+1))}l.textContent=e,r.highlightElement(l)}),(function(e){s.setAttribute(t,"failed"),l.textContent=e}))}})),r.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(a),i=0;t=n[i++];)r.highlightElement(t)}};var o=!1;r.fileHighlight=function(){o||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),o=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}}}()},379:(e,t,n)=>{"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],i=0;i<e.length;i++){var a=e[i],l=t.base?a[0]+t.base:a[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var h=s(u),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(o[h].references++,o[h].updater(p)):o.push({identifier:u,updater:v(p,t),references:1}),r.push(u)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function d(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,m=0;function v(e,t){var n,r,i;if(t.singleton){var a=m++;n=f||(f=c(t)),r=p.bind(null,n,a,!1),i=p.bind(null,n,a,!0)}else n=c(t),r=d.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var a=l(e,t),c=0;c<n.length;c++){var u=s(n[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=a}}}},621:(e,t,n)=>{var r;!function(i){var a=/^\s+/,o=/\s+$/,s=0,l=i.round,c=i.min,u=i.max,h=i.random;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,l=null,h=!1,p=!1;"string"==typeof e&&(e=function(e){e=e.replace(a,"").replace(o,"").toLowerCase();var t,n=!1;if(L[e])e=L[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=V.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=V.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=V.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=V.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=V.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=V.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=V.hex8.exec(e))return{r:O(t[1]),g:O(t[2]),b:O(t[3]),a:B(t[4]),format:n?"name":"hex8"};if(t=V.hex6.exec(e))return{r:O(t[1]),g:O(t[2]),b:O(t[3]),format:n?"name":"hex"};if(t=V.hex4.exec(e))return{r:O(t[1]+""+t[1]),g:O(t[2]+""+t[2]),b:O(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=V.hex3.exec(e))return{r:O(t[1]+""+t[1]),g:O(t[2]+""+t[2]),b:O(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(G(e.r)&&G(e.g)&&G(e.b)?(d=e.r,f=e.g,m=e.b,t={r:255*I(d,255),g:255*I(f,255),b:255*I(m,255)},h=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):G(e.h)&&G(e.s)&&G(e.v)?(r=N(e.s),s=N(e.v),t=function(e,t,n){e=6*I(e,360),t=I(t,100),n=I(n,100);var r=i.floor(e),a=e-r,o=n*(1-t),s=n*(1-a*t),l=n*(1-(1-a)*t),c=r%6,u=[n,s,o,o,l,n][c],h=[l,n,n,s,o,o][c],p=[o,o,l,n,n,s][c];return{r:255*u,g:255*h,b:255*p}}(e.h,r,s),h=!0,p="hsv"):G(e.h)&&G(e.s)&&G(e.l)&&(r=N(e.s),l=N(e.l),t=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=I(e,360),t=I(t,100),n=I(n,100),0===t)r=i=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=o(l,s,e+1/3),i=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,r,l),h=!0,p="hsl"),e.hasOwnProperty("a")&&(n=e.a));var d,f,m;return n=R(n),{ok:h,format:e.format||p,r:c(255,u(t.r,0)),g:c(255,u(t.g,0)),b:c(255,u(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function d(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=u(e,t,n),o=c(e,t,n),s=(a+o)/2;if(a==o)r=i=0;else{var l=a-o;switch(i=s>.5?l/(2-a-o):l/(a+o),a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function f(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,a=u(e,t,n),o=c(e,t,n),s=a,l=a-o;if(i=0===a?0:l/a,a==o)r=0;else{switch(a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function m(e,t,n,r){var i=[D(l(e).toString(16)),D(l(t).toString(16)),D(l(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function v(e,t,n,r){return[D(F(r)),D(l(e).toString(16)),D(l(t).toString(16)),D(l(n).toString(16))].join("")}function g(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s-=t/100,n.s=z(n.s),p(n)}function _(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s+=t/100,n.s=z(n.s),p(n)}function y(e){return p(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l+=t/100,n.l=z(n.l),p(n)}function x(e,t){t=0===t?0:t||10;var n=p(e).toRgb();return n.r=u(0,c(255,n.r-l(-t/100*255))),n.g=u(0,c(255,n.g-l(-t/100*255))),n.b=u(0,c(255,n.b-l(-t/100*255))),p(n)}function w(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l-=t/100,n.l=z(n.l),p(n)}function M(e,t){var n=p(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,p(n)}function S(e){var t=p(e).toHsl();return t.h=(t.h+180)%360,p(t)}function E(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+120)%360,s:t.s,l:t.l}),p({h:(n+240)%360,s:t.s,l:t.l})]}function A(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+90)%360,s:t.s,l:t.l}),p({h:(n+180)%360,s:t.s,l:t.l}),p({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+72)%360,s:t.s,l:t.l}),p({h:(n+216)%360,s:t.s,l:t.l})]}function C(e,t,n){t=t||6,n=n||30;var r=p(e).toHsl(),i=360/n,a=[p(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(p(r));return a}function k(e,t){t=t||6;for(var n=p(e).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(p({h:r,s:i,v:a})),a=(a+s)%1;return o}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=R(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=d(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var a=[D(l(e).toString(16)),D(l(t).toString(16)),D(l(n).toString(16)),D(F(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*I(this._r,255))+"%",g:l(100*I(this._g,255))+"%",b:l(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%)":"rgba("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+v(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=p(e);n="#"+v(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(S,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:N(e[r]));e=n}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:h(),g:h(),b:h()})},p.mix=function(e,t,n){n=0===n?0:n||50;var r=p(e).toRgb(),i=p(t).toRgb(),a=n/100;return p({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},p.readability=function(e,t){var n=p(e),r=p(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},p.isReadable=function(e,t,n){var r,i,a=p.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},p.mostReadable=function(e,t,n){var r,i,a,o,s=null,l=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var c=0;c<t.length;c++)(r=p.readability(e,t[c]))>l&&(l=r,s=p(t[c]));return p.isReadable(e,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],n))};var L=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=p.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(L);function R(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,u(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function z(e){return c(1,u(0,e))}function O(e){return parseInt(e,16)}function D(e){return 1==e.length?"0"+e:""+e}function N(e){return e<=1&&(e=100*e+"%"),e}function F(e){return i.round(255*parseFloat(e)).toString(16)}function B(e){return O(e)/255}var U,H,j,V=(H="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",j="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+H),rgba:new RegExp("rgba"+j),hsl:new RegExp("hsl"+H),hsla:new RegExp("hsla"+j),hsv:new RegExp("hsv"+H),hsva:new RegExp("hsva"+j),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(e){return!!V.CSS_UNIT.exec(e)}e.exports?e.exports=p:void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}(Math)},23:function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=59)}([function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=r(i);return[n].concat(i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}))).concat([a]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){function r(e){for(var t=0;t<e.length;t++){var n=e[t],r=u[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(a(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(a(n.parts[i]));u[n.id]={id:n.id,refs:1,parts:o}}}}function i(){var e=document.createElement("style");return e.type="text/css",h.appendChild(e),e}function a(e){var t,n,r=document.querySelector("style["+g+'~="'+e.id+'"]');if(r){if(f)return m;r.parentNode.removeChild(r)}if(_){var a=d++;r=p||(p=i()),t=o.bind(null,r,a,!1),n=o.bind(null,r,a,!0)}else r=i(),t=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}function o(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function s(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),v.ssrId&&e.setAttribute(g,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(63),u={},h=l&&(document.head||document.getElementsByTagName("head")[0]),p=null,d=0,f=!1,m=function(){},v=null,g="data-vue-ssr-id",_="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n,i){f=n,v=i||{};var a=c(e,t);return r(a),function(t){for(var n=[],i=0;i<a.length;i++){var o=a[i];(s=u[o.id]).refs--,n.push(s)}for(t?r(a=c(e,t)):a=[],i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete u[s.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,n,r,i,a){var o,s=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,s=e.default);var c,u="function"==typeof s?s.options:s;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId=i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):r&&(c=r),c){var h=u.functional,p=h?u.render:u.beforeCreate;h?(u._injectStyles=c,u.render=function(e,t){return c.call(t),p(e,t)}):u.beforeCreate=p?[].concat(p,c):[c]}return{esModule:o,exports:s,options:u}}},function(e,t,n){"use strict";function r(e,t){var n,r=e&&e.a;!(n=e&&e.hsl?(0,i.default)(e.hsl):e&&e.hex&&e.hex.length>0?(0,i.default)(e.hex):e&&e.hsv?(0,i.default)(e.hsv):e&&e.rgba?(0,i.default)(e.rgba):e&&e.rgb?(0,i.default)(e.rgb):(0,i.default)(e))||void 0!==n._a&&null!==n._a||n.setAlpha(r||1);var a=n.toHsl(),o=n.toHsv();return 0===a.s&&(o.h=a.h=e.h||e.hsl&&e.hsl.h||t||0),{hsl:a,hex:n.toHexString().toUpperCase(),hex8:n.toHex8String().toUpperCase(),rgba:n.toRgb(),hsv:o,oldHue:e.h||t||a.h,source:e.source,a:e.a||n.getAlpha()}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(64));t.default={props:["value"],data:function(){return{val:r(this.value)}},computed:{colors:{get:function(){return this.val},set:function(e){this.val=e,this.$emit("input",e)}}},watch:{value:function(e){this.val=r(e)}},methods:{colorChange:function(e,t){this.oldHue=this.colors.hsl.h,this.colors=r(e,t||this.oldHue)},isValidHex:function(e){return(0,i.default)(e).isValid()},simpleCheckForValidColor:function(e){for(var t=["r","g","b","a","h","s","l","v"],n=0,r=0,i=0;i<t.length;i++){var a=t[i];e[a]&&(n++,isNaN(e[a])||r++)}if(n===r)return e},paletteUpperCase:function(e){return e.map((function(e){return e.toUpperCase()}))},isTransparent:function(e){return 0===(0,i.default)(e).getAlpha()}}}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";function r(e){l||n(65)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(67),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/common/EditableInput.vue",t.default=u.exports},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(8),i=n(16);e.exports=n(9)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(13),i=n(42),a=n(25),o=Object.defineProperty;t.f=n(9)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(89),i=n(22);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(29)("wks"),i=n(17),a=n(4).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";function r(e){l||n(111)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(50),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(113),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/common/Hue.vue",t.default=u.exports},function(e,t,n){var r=n(14);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";function r(e){l||n(123)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(53),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(127),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/common/Saturation.vue",t.default=u.exports},function(e,t,n){"use strict";function r(e){l||n(128)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(54),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(133),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/common/Alpha.vue",t.default=u.exports},function(e,t,n){"use strict";function r(e){l||n(130)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(55),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(132),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/common/Checkboard.vue",t.default=u.exports},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=!0},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(14);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var r=n(46),i=n(30);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(29)("keys"),i=n(17);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(8).f,i=n(6),a=n(11)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){t.f=n(11)},function(e,t,n){var r=n(4),i=n(24),a=n(23),o=n(32),s=n(8).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),a=r(n(5)),o=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];t.default={name:"Compact",mixins:[i.default],props:{palette:{type:Array,default:function(){return o}}},components:{"ed-in":a.default},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"editableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get:function(){return this.value},set:function(e){if(!(void 0!==this.max&&+e>this.max))return e;this.$refs.input.value=this.max}},labelId:function(){return"input__label__"+this.label+"__"+Math.random().toString().slice(2,5)},labelSpanText:function(){return this.labelText||this.label}},methods:{update:function(e){this.handleChange(e.target.value)},handleChange:function(e){var t={};t[this.label]=e,(void 0===t.hex&&void 0===t["#"]||e.length>5)&&this.$emit("change",t)},handleKeyDown:function(e){var t=this.val,n=Number(t);if(n){var r=this.arrowOffset||1;38===e.keyCode&&(t=n+r,this.handleChange(t),e.preventDefault()),40===e.keyCode&&(t=n-r,this.handleChange(t),e.preventDefault())}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),i=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];t.default={name:"Grayscale",mixins:[r.default],props:{palette:{type:Array,default:function(){return i}}},components:{},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(5)),a=r(n(3));t.default={name:"Material",mixins:[a.default],components:{"ed-in":i.default},methods:{onChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(80)),a=r(n(3)),o=r(n(12));t.default={name:"Slider",mixins:[a.default],props:{swatches:{type:Array,default:function(){return[{s:.5,l:.8},{s:.5,l:.65},{s:.5,l:.5},{s:.5,l:.35},{s:.5,l:.2}]}}},components:{hue:o.default},computed:{normalizedSwatches:function(){return this.swatches.map((function(e){return"object"!==(void 0===e?"undefined":(0,i.default)(e))?{s:.5,l:e}:e}))}},methods:{isActive:function(e,t){var n=this.colors.hsl;return 1===n.l&&1===e.l||0===n.l&&0===e.l||Math.abs(n.l-e.l)<.01&&Math.abs(n.s-e.s)<.01},hueChange:function(e){this.colorChange(e)},handleSwClick:function(e,t){this.colorChange({h:this.colors.hsl.h,s:t.s,l:t.l,source:"hsl"})}}}},function(e,t,n){"use strict";var r=n(23),i=n(41),a=n(44),o=n(7),s=n(6),l=n(26),c=n(87),u=n(31),h=n(94),p=n(11)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,m,v,g,_){c(n,t,m);var y,b,x,w=function(e){if(!d&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",S="values"==v,E=!1,A=e.prototype,T=A[p]||A["@@iterator"]||v&&A[v],C=T||w(v),k=v?S?w("entries"):C:void 0,L="Array"==t&&A.entries||T;if(L&&(x=h(L.call(new e)))!==Object.prototype&&x.next&&(u(x,M,!0),r||s(x,p)||o(x,p,f)),S&&T&&"values"!==T.name&&(E=!0,C=function(){return T.call(this)}),r&&!_||!d&&!E&&A[p]||o(A,p,C),l[t]=C,l[M]=f,v)if(y={values:S?C:w("values"),keys:g?C:w("keys"),entries:k},_)for(b in y)b in A||a(A,b,y[b]);else i(i.P+i.F*(d||E),t,y);return y}},function(e,t,n){var r=n(4),i=n(24),a=n(85),o=n(7),s=function(e,t,n){var l,c,u,h=e&s.F,p=e&s.G,d=e&s.S,f=e&s.P,m=e&s.B,v=e&s.W,g=p?i:i[t]||(i[t]={}),_=g.prototype,y=p?r:d?r[t]:(r[t]||{}).prototype;for(l in p&&(n=t),n)(c=!h&&y&&void 0!==y[l])&&l in g||(u=c?y[l]:n[l],g[l]=p&&"function"!=typeof y[l]?n[l]:m&&c?a(u,r):v&&y[l]==u?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):f&&"function"==typeof u?a(Function.call,u):u,f&&((g.virtual||(g.virtual={}))[l]=u,e&s.R&&_&&!_[l]&&o(_,l,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){e.exports=!n(9)&&!n(15)((function(){return 7!=Object.defineProperty(n(43)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(14),i=n(4).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){e.exports=n(7)},function(e,t,n){var r=n(13),i=n(88),a=n(30),o=n(28)("IE_PROTO"),s=function(){},l=function(){var e,t=n(43)("iframe"),r=a.length;for(t.style.display="none",n(93).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[a[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(6),i=n(10),a=n(90)(!1),o=n(28)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=o&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(46),i=n(30).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data:function(){return{oldHue:0,pullDirection:""}},computed:{colors:function(){var e=this.value.hsl.h;return 0!==e&&e-this.oldHue>0&&(this.pullDirection="right"),0!==e&&e-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=e,this.value},directionClass:function(){return{"vc-hue--horizontal":"horizontal"===this.direction,"vc-hue--vertical":"vertical"===this.direction}},pointerTop:function(){return"vertical"===this.direction?0===this.colors.hsl.h&&"right"===this.pullDirection?0:-100*this.colors.hsl.h/360+100+"%":0},pointerLeft:function(){return"vertical"===this.direction?0:0===this.colors.hsl.h&&"right"===this.pullDirection?"100%":100*this.colors.hsl.h/360+"%"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var n=this.$refs.container;if(n){var r,i=n.clientWidth,a=n.clientHeight,o=n.getBoundingClientRect().left+window.pageXOffset,s=n.getBoundingClientRect().top+window.pageYOffset,l=(e.pageX||(e.touches?e.touches[0].pageX:0))-o,c=(e.pageY||(e.touches?e.touches[0].pageY:0))-s;"vertical"===this.direction?(r=c<0?360:c>a?0:360*(-100*c/a+100)/100,this.colors.hsl.h!==r&&this.$emit("change",{h:r,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(r=l<0?0:l>i?360:100*l/i*360/100,this.colors.hsl.h!==r&&this.$emit("change",{h:r,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))}},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(118)),a=r(n(3)),o=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],s=["900","700","500","300","100"],l=function(){var e=[];return o.forEach((function(t){var n=[];"black"===t.toLowerCase()||"white"===t.toLowerCase()?n=n.concat(["#000000","#FFFFFF"]):s.forEach((function(e){var r=i.default[t][e];n.push(r.toUpperCase())})),e.push(n)})),e}();t.default={name:"Swatches",mixins:[a.default],props:{palette:{type:Array,default:function(){return l}}},computed:{pick:function(){return this.colors.hex}},methods:{equal:function(e){return e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),a=r(n(5)),o=r(n(18)),s=r(n(12)),l=r(n(19));t.default={name:"Photoshop",mixins:[i.default],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:o.default,hue:s.default,alpha:l.default,"ed-in":a.default},data:function(){return{currentColor:"#FFF"}},computed:{hsv:function(){var e=this.colors.hsv;return{h:e.h.toFixed(),s:(100*e.s).toFixed(),v:(100*e.v).toFixed()}},hex:function(){var e=this.colors.hex;return e&&e.replace("#","")}},created:function(){this.currentColor=this.colors.hex},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e["#"]?this.isValidHex(e["#"])&&this.colorChange({hex:e["#"],source:"hex"}):e.r||e.g||e.b||e.a?this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}):(e.h||e.s||e.v)&&this.colorChange({h:e.h||this.colors.hsv.h,s:e.s/100||this.colors.hsv.s,v:e.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor:function(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept:function(){this.$emit("ok")},handleCancel:function(){this.$emit("cancel")},handleReset:function(){this.$emit("reset")}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(125)),a=r(n(126));t.default={name:"Saturation",props:{value:Object},computed:{colors:function(){return this.value},bgColor:function(){return"hsl("+this.colors.hsv.h+", 100%, 50%)"},pointerTop:function(){return-100*this.colors.hsv.v+1+100+"%"},pointerLeft:function(){return 100*this.colors.hsv.s+"%"}},beforeDestroy:function(){this.unbindEventListeners()},methods:{throttle:(0,a.default)((function(e,t){e(t)}),20,{leading:!0,trailing:!1}),handleChange:function(e,t){!t&&e.preventDefault();var n=this.$refs.container;if(n){var r=n.clientWidth,a=n.clientHeight,o=n.getBoundingClientRect().left+window.pageXOffset,s=n.getBoundingClientRect().top+window.pageYOffset,l=e.pageX||(e.touches?e.touches[0].pageX:0),c=e.pageY||(e.touches?e.touches[0].pageY:0),u=(0,i.default)(l-o,0,r),h=(0,i.default)(c-s,0,a),p=u/r,d=(0,i.default)(-h/a+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:p,v:d,a:this.colors.hsv.a,source:"hsva"})}},onChange:function(e){this.$emit("change",e)},handleMouseDown:function(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(20));t.default={name:"Alpha",props:{value:Object,onChange:Function},components:{checkboard:r.default},computed:{colors:function(){return this.value},gradientColor:function(){var e=this.colors.rgba,t=[e.r,e.g,e.b].join(",");return"linear-gradient(to right, rgba("+t+", 0) 0%, rgba("+t+", 1) 100%)"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var n=this.$refs.container;if(n){var r,i=n.clientWidth,a=n.getBoundingClientRect().left+window.pageXOffset,o=(e.pageX||(e.touches?e.touches[0].pageX:0))-a;r=o<0?0:o>i?1:Math.round(100*o/i)/100,this.colors.a!==r&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:r,source:"rgba"})}},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,n){"use strict";function r(e,t,n){if("undefined"==typeof document)return null;var r=document.createElement("canvas");r.width=r.height=2*n;var i=r.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,r.width,r.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),r.toDataURL()):null}function i(e,t,n){var i=e+","+t+","+n;if(a[i])return a[i];var o=r(e,t,n);return a[i]=o,o}Object.defineProperty(t,"__esModule",{value:!0});var a={};t.default={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle:function(){return{"background-image":"url("+i(this.white,this.grey,this.size)+")"}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),a=r(n(5)),o=r(n(18)),s=r(n(12)),l=r(n(19)),c=r(n(20)),u=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];t.default={name:"Sketch",mixins:[i.default],components:{saturation:o.default,hue:s.default,alpha:l.default,"ed-in":a.default,checkboard:c.default},props:{presetColors:{type:Array,default:function(){return u}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex:function(){return(this.colors.a<1?this.colors.hex8:this.colors.hex).replace("#","")},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"}},methods:{handlePreset:function(e){this.colorChange({hex:e,source:"hex"})},childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),a=r(n(5)),o=r(n(18)),s=r(n(12)),l=r(n(19)),c=r(n(20));t.default={name:"Chrome",mixins:[i.default],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:o.default,hue:s.default,alpha:l.default,"ed-in":a.default,checkboard:c.default},data:function(){return{fieldsIndex:0,highlight:!1}},computed:{hsl:function(){var e=this.colors.hsl,t=e.h,n=e.s,r=e.l;return{h:t.toFixed(),s:(100*n).toFixed()+"%",l:(100*r).toFixed()+"%"}},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"},hasAlpha:function(){return this.colors.a<1}},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){if(e)if(e.hex)this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"});else if(e.r||e.g||e.b||e.a)this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"});else if(e.h||e.s||e.l){var t=e.s?e.s.replace("%","")/100:this.colors.hsl.s,n=e.l?e.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:e.h||this.colors.hsl.h,s:t,l:n,source:"hsl"})}},toggleViews:function(){this.fieldsIndex>=2?this.fieldsIndex=0:this.fieldsIndex++},showHighlight:function(){this.highlight=!0},hideHighlight:function(){this.highlight=!1}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(5)),a=r(n(3)),o=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];t.default={name:"Twitter",mixins:[a.default],components:{editableInput:i.default},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default:function(){return o}},triangle:{default:"top-left",validator:function(e){return["hide","top-left","top-right"].includes(e)}}},computed:{hsv:function(){var e=this.colors.hsv;return{h:e.h.toFixed(),s:(100*e.s).toFixed(),v:(100*e.v).toFixed()}},hex:function(){var e=this.colors.hex;return e&&e.replace("#","")}},methods:{equal:function(e){return e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick:function(e){this.colorChange({hex:e,source:"hex"})},inputChange:function(e){e&&(e["#"]?this.isValidHex(e["#"])&&this.colorChange({hex:e["#"],source:"hex"}):e.r||e.g||e.b||e.a?this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}):(e.h||e.s||e.v)&&this.colorChange({h:e.h||this.colors.hsv.h,s:e.s/100||this.colors.hsv.s,v:e.v/100||this.colors.hsv.v,source:"hsv"}))}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=r(n(60)),a=r(n(69)),o=r(n(73)),s=r(n(77)),l=r(n(115)),c=r(n(120)),u=r(n(135)),h=r(n(139)),p=r(n(143)),d=r(n(19)),f=r(n(20)),m=r(n(5)),v=r(n(12)),g=r(n(18)),_=r(n(3)),y={version:"2.8.2",Compact:i.default,Grayscale:a.default,Twitter:p.default,Material:o.default,Slider:s.default,Swatches:l.default,Photoshop:c.default,Sketch:u.default,Chrome:h.default,Alpha:d.default,Checkboard:f.default,EditableInput:m.default,Hue:v.default,Saturation:g.default,ColorMixin:_.default};e.exports=y},function(e,t,n){"use strict";function r(e){l||n(61)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(68),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Compact.vue",t.default=u.exports},function(e,t,n){var r=n(62);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("6ce8a5a8",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-compact {\n  padding-top: 5px;\n  padding-left: 5px;\n  width: 245px;\n  border-radius: 2px;\n  box-sizing: border-box;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-compact-colors {\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-compact-color-item {\n  list-style: none;\n  width: 15px;\n  height: 15px;\n  float: left;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  position: relative;\n  cursor: pointer;\n}\n.vc-compact-color-item--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-compact-color-item--white .vc-compact-dot {\n  background: #000;\n}\n.vc-compact-dot {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  bottom: 5px;\n  left: 5px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t){e.exports=function(e,t){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],o=a[0],s={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}},function(e,t,n){var r;!function(i){function a(e,t){if(t=t||{},(e=e||"")instanceof a)return e;if(!(this instanceof a))return new a(e,t);var n=o(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=G(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=G(this._r)),this._g<1&&(this._g=G(this._g)),this._b<1&&(this._b=G(this._b)),this._ok=n.ok,this._tc_id=V++}function o(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,l=!1;return"string"==typeof e&&(e=B(e)),"object"==typeof e&&(F(e.r)&&F(e.g)&&F(e.b)?(t=s(e.r,e.g,e.b),o=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):F(e.h)&&F(e.s)&&F(e.v)?(r=O(e.s),i=O(e.v),t=h(e.h,r,i),o=!0,l="hsv"):F(e.h)&&F(e.s)&&F(e.l)&&(r=O(e.s),a=O(e.l),t=c(e.h,r,a),o=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=C(n),{ok:o,format:e.format||l,r:W(255,q(t.r,0)),g:W(255,q(t.g,0)),b:W(255,q(t.b,0)),a:n}}function s(e,t,n){return{r:255*k(e,255),g:255*k(t,255),b:255*k(n,255)}}function l(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var r,i,a=q(e,t,n),o=W(e,t,n),s=(a+o)/2;if(a==o)r=i=0;else{var l=a-o;switch(i=s>.5?l/(2-a-o):l/(a+o),a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function c(e,t,n){function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var i,a,o;if(e=k(e,360),t=k(t,100),n=k(n,100),0===t)i=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=r(l,s,e+1/3),a=r(l,s,e),o=r(l,s,e-1/3)}return{r:255*i,g:255*a,b:255*o}}function u(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var r,i,a=q(e,t,n),o=W(e,t,n),s=a,l=a-o;if(i=0===a?0:l/a,a==o)r=0;else{switch(a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function h(e,t,n){e=6*k(e,360),t=k(t,100),n=k(n,100);var r=i.floor(e),a=e-r,o=n*(1-t),s=n*(1-a*t),l=n*(1-(1-a)*t),c=r%6;return{r:255*[n,s,o,o,l,n][c],g:255*[l,n,n,s,o,o][c],b:255*[o,o,l,n,n,s][c]}}function p(e,t,n,r){var i=[z(G(e).toString(16)),z(G(t).toString(16)),z(G(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(e,t,n,r,i){var a=[z(G(e).toString(16)),z(G(t).toString(16)),z(G(n).toString(16)),z(D(r))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function f(e,t,n,r){return[z(D(r)),z(G(e).toString(16)),z(G(t).toString(16)),z(G(n).toString(16))].join("")}function m(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.s-=t/100,n.s=L(n.s),a(n)}function v(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.s+=t/100,n.s=L(n.s),a(n)}function g(e){return a(e).desaturate(100)}function _(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.l+=t/100,n.l=L(n.l),a(n)}function y(e,t){t=0===t?0:t||10;var n=a(e).toRgb();return n.r=q(0,W(255,n.r-G(-t/100*255))),n.g=q(0,W(255,n.g-G(-t/100*255))),n.b=q(0,W(255,n.b-G(-t/100*255))),a(n)}function b(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.l-=t/100,n.l=L(n.l),a(n)}function x(e,t){var n=a(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,a(n)}function w(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function M(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+120)%360,s:t.s,l:t.l}),a({h:(n+240)%360,s:t.s,l:t.l})]}function S(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+90)%360,s:t.s,l:t.l}),a({h:(n+180)%360,s:t.s,l:t.l}),a({h:(n+270)%360,s:t.s,l:t.l})]}function E(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+72)%360,s:t.s,l:t.l}),a({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var r=a(e).toHsl(),i=360/n,o=[a(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(a(r));return o}function T(e,t){t=t||6;for(var n=a(e).toHsv(),r=n.h,i=n.s,o=n.v,s=[],l=1/t;t--;)s.push(a({h:r,s:i,v:o})),o=(o+l)%1;return s}function C(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function k(e,t){R(e)&&(e="100%");var n=I(e);return e=W(t,q(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function L(e){return W(1,q(0,e))}function P(e){return parseInt(e,16)}function R(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function I(e){return"string"==typeof e&&-1!=e.indexOf("%")}function z(e){return 1==e.length?"0"+e:""+e}function O(e){return e<=1&&(e=100*e+"%"),e}function D(e){return i.round(255*parseFloat(e)).toString(16)}function N(e){return P(e)/255}function F(e){return!!J.CSS_UNIT.exec(e)}function B(e){e=e.replace(H,"").replace(j,"").toLowerCase();var t,n=!1;if(Y[e])e=Y[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=J.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=J.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=J.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=J.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=J.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=J.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=J.hex8.exec(e))?{r:P(t[1]),g:P(t[2]),b:P(t[3]),a:N(t[4]),format:n?"name":"hex8"}:(t=J.hex6.exec(e))?{r:P(t[1]),g:P(t[2]),b:P(t[3]),format:n?"name":"hex"}:(t=J.hex4.exec(e))?{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),a:N(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=J.hex3.exec(e))&&{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),format:n?"name":"hex"}}function U(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}var H=/^\s+/,j=/\s+$/,V=0,G=i.round,W=i.min,q=i.max,X=i.random;a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=C(e),this._roundA=G(100*this._a)/100,this},toHsv:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=u(this._r,this._g,this._b),t=G(360*e.h),n=G(100*e.s),r=G(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=G(360*e.h),n=G(100*e.s),r=G(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:G(this._r),g:G(this._g),b:G(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+G(this._r)+", "+G(this._g)+", "+G(this._b)+")":"rgba("+G(this._r)+", "+G(this._g)+", "+G(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:G(100*k(this._r,255))+"%",g:G(100*k(this._g,255))+"%",b:G(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+G(100*k(this._r,255))+"%, "+G(100*k(this._g,255))+"%, "+G(100*k(this._b,255))+"%)":"rgba("+G(100*k(this._r,255))+"%, "+G(100*k(this._g,255))+"%, "+G(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Z[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+f(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=a(e);n="#"+f(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return a(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},a.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:O(e[r]));e=n}return a(e,t)},a.equals=function(e,t){return!(!e||!t)&&a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:X(),g:X(),b:X()})},a.mix=function(e,t,n){n=0===n?0:n||50;var r=a(e).toRgb(),i=a(t).toRgb(),o=n/100;return a({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},a.readability=function(e,t){var n=a(e),r=a(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},a.isReadable=function(e,t,n){var r,i,o=a.readability(e,t);switch(i=!1,(r=U(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},a.mostReadable=function(e,t,n){var r,i,o,s,l=null,c=0;i=(n=n||{}).includeFallbackColors,o=n.level,s=n.size;for(var u=0;u<t.length;u++)(r=a.readability(e,t[u]))>c&&(c=r,l=a(t[u]));return a.isReadable(e,l,{level:o,size:s})||!i?l:(n.includeFallbackColors=!1,a.mostReadable(e,["#fff","#000"],n))};var Y=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z=a.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Y),J=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=a:void 0!==(r=function(){return a}.call(t,n,t,e))&&(e.exports=r)}(Math)},function(e,t,n){var r=n(66);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("0f73e73c",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-editable-input {\n  position: relative;\n}\n.vc-input__input {\n  padding: 0;\n  border: 0;\n  outline: none;\n}\n.vc-input__label {\n  text-transform: capitalize;\n}\n",""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-editable-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],ref:"input",staticClass:"vc-input__input",attrs:{"aria-labelledby":e.labelId},domProps:{value:e.val},on:{keydown:e.handleKeyDown,input:[function(t){t.target.composing||(e.val=t.target.value)},e.update]}}),e._v(" "),n("span",{staticClass:"vc-input__label",attrs:{for:e.label,id:e.labelId}},[e._v(e._s(e.labelSpanText))]),e._v(" "),n("span",{staticClass:"vc-input__desc"},[e._v(e._s(e.desc))])])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-compact",attrs:{role:"application","aria-label":"Compact color picker"}},[n("ul",{staticClass:"vc-compact-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return n("li",{key:t,staticClass:"vc-compact-color-item",class:{"vc-compact-color-item--white":"#FFFFFF"===t},style:{background:t},attrs:{role:"option","aria-label":"color:"+t,"aria-selected":t===e.pick},on:{click:function(n){e.handlerClick(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-compact-dot"})])})))])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(70)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(37),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(72),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Grayscale.vue",t.default=u.exports},function(e,t,n){var r=n(71);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("21ddbb74",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-grayscale {\n  width: 125px;\n  border-radius: 2px;\n  box-shadow: 0 2px 15px rgba(0,0,0,.12), 0 2px 10px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-grayscale-colors {\n  border-radius: 2px;\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-grayscale-color-item {\n  list-style: none;\n  width: 25px;\n  height: 25px;\n  float: left;\n  position: relative;\n  cursor: pointer;\n}\n.vc-grayscale-color-item--white .vc-grayscale-dot {\n  background: #000;\n}\n.vc-grayscale-dot {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 6px;\n  height: 6px;\n  margin: -3px 0 0 -2px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-grayscale",attrs:{role:"application","aria-label":"Grayscale color picker"}},[n("ul",{staticClass:"vc-grayscale-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return n("li",{key:t,staticClass:"vc-grayscale-color-item",class:{"vc-grayscale-color-item--white":"#FFFFFF"==t},style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":t===e.pick},on:{click:function(n){e.handlerClick(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-grayscale-dot"})])})))])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(74)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(76),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Material.vue",t.default=u.exports},function(e,t,n){var r=n(75);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("1ff3af73",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,'\n.vc-material {\n  width: 98px;\n  height: 98px;\n  padding: 16px;\n  font-family: "Roboto";\n  position: relative;\n  border-radius: 2px;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-material .vc-input__input {\n  width: 100%;\n  margin-top: 12px;\n  font-size: 15px;\n  color: #333;\n  height: 30px;\n}\n.vc-material .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 11px;\n  color: #999;\n  text-transform: capitalize;\n}\n.vc-material-hex {\n  border-bottom-width: 2px;\n  border-bottom-style: solid;\n}\n.vc-material-split {\n  display: flex;\n  margin-right: -10px;\n  padding-top: 11px;\n}\n.vc-material-third {\n  flex: 1;\n  padding-right: 10px;\n}\n',""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-material",attrs:{role:"application","aria-label":"Material color picker"}},[n("ed-in",{staticClass:"vc-material-hex",style:{borderColor:e.colors.hex},attrs:{label:"hex"},on:{change:e.onChange},model:{value:e.colors.hex,callback:function(t){e.$set(e.colors,"hex",t)},expression:"colors.hex"}}),e._v(" "),n("div",{staticClass:"vc-material-split"},[n("div",{staticClass:"vc-material-third"},[n("ed-in",{attrs:{label:"r"},on:{change:e.onChange},model:{value:e.colors.rgba.r,callback:function(t){e.$set(e.colors.rgba,"r",t)},expression:"colors.rgba.r"}})],1),e._v(" "),n("div",{staticClass:"vc-material-third"},[n("ed-in",{attrs:{label:"g"},on:{change:e.onChange},model:{value:e.colors.rgba.g,callback:function(t){e.$set(e.colors.rgba,"g",t)},expression:"colors.rgba.g"}})],1),e._v(" "),n("div",{staticClass:"vc-material-third"},[n("ed-in",{attrs:{label:"b"},on:{change:e.onChange},model:{value:e.colors.rgba.b,callback:function(t){e.$set(e.colors.rgba,"b",t)},expression:"colors.rgba.b"}})],1)])],1)},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(78)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(39),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(114),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Slider.vue",t.default=u.exports},function(e,t,n){var r=n(79);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("7982aa43",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-slider {\n  position: relative;\n  width: 410px;\n}\n.vc-slider-hue-warp {\n  height: 12px;\n  position: relative;\n}\n.vc-slider-hue-warp .vc-hue-picker {\n  width: 14px;\n  height: 14px;\n  border-radius: 6px;\n  transform: translate(-7px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-slider-swatches {\n  display: flex;\n  margin-top: 20px;\n}\n.vc-slider-swatch {\n  margin-right: 1px;\n  flex: 1;\n  width: 20%;\n}\n.vc-slider-swatch:first-child {\n  margin-right: 1px;\n}\n.vc-slider-swatch:first-child .vc-slider-swatch-picker {\n  border-radius: 2px 0px 0px 2px;\n}\n.vc-slider-swatch:last-child {\n  margin-right: 0;\n}\n.vc-slider-swatch:last-child .vc-slider-swatch-picker {\n  border-radius: 0px 2px 2px 0px;\n}\n.vc-slider-swatch-picker {\n  cursor: pointer;\n  height: 12px;\n}\n.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active {\n  transform: scaleY(1.8);\n  border-radius: 3.6px/2px;\n}\n.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 0.6px #ddd;\n}\n",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n(81)),a=r(n(100)),o="function"==typeof a.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===o(i.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){e.exports={default:n(82),__esModule:!0}},function(e,t,n){n(83),n(96),e.exports=n(32).f("iterator")},function(e,t,n){"use strict";var r=n(84)(!0);n(40)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(21),i=n(22);e.exports=function(e){return function(t,n){var a,o,s=String(i(t)),l=r(n),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(45),i=n(16),a=n(31),o={};n(7)(o,n(11)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var r=n(8),i=n(13),a=n(27);e.exports=n(9)?Object.defineProperties:function(e,t){i(e);for(var n,o=a(t),s=o.length,l=0;s>l;)r.f(e,n=o[l++],t[n]);return e}},function(e,t,n){var r=n(47);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(10),i=n(91),a=n(92);e.exports=function(e){return function(t,n,o){var s,l=r(t),c=i(l.length),u=a(o,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(21),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(21),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(6),i=n(95),a=n(28)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var r=n(22);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(97);for(var r=n(4),i=n(7),a=n(26),o=n(11)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=r[c],h=u&&u.prototype;h&&!h[o]&&i(h,o,c),a[c]=a.Array}},function(e,t,n){"use strict";var r=n(98),i=n(99),a=n(26),o=n(10);e.exports=n(40)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(101),__esModule:!0}},function(e,t,n){n(102),n(108),n(109),n(110),e.exports=n(24).Symbol},function(e,t,n){"use strict";var r=n(4),i=n(6),a=n(9),o=n(41),s=n(44),l=n(103).KEY,c=n(15),u=n(29),h=n(31),p=n(17),d=n(11),f=n(32),m=n(33),v=n(104),g=n(105),_=n(13),y=n(10),b=n(25),x=n(16),w=n(45),M=n(106),S=n(107),E=n(8),A=n(27),T=S.f,C=E.f,k=M.f,L=r.Symbol,P=r.JSON,R=P&&P.stringify,I=d("_hidden"),z=d("toPrimitive"),O={}.propertyIsEnumerable,D=u("symbol-registry"),N=u("symbols"),F=u("op-symbols"),B=Object.prototype,U="function"==typeof L,H=r.QObject,j=!H||!H.prototype||!H.prototype.findChild,V=a&&c((function(){return 7!=w(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=T(B,t);r&&delete B[t],C(e,t,n),r&&e!==B&&C(B,t,r)}:C,G=function(e){var t=N[e]=w(L.prototype);return t._k=e,t},W=U&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},q=function(e,t,n){return e===B&&q(F,t,n),_(e),t=b(t,!0),_(n),i(N,t)?(n.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),n=w(n,{enumerable:x(0,!1)})):(i(e,I)||C(e,I,x(1,{})),e[I][t]=!0),V(e,t,n)):C(e,t,n)},X=function(e,t){_(e);for(var n,r=v(t=y(t)),i=0,a=r.length;a>i;)q(e,n=r[i++],t[n]);return e},Y=function(e,t){return void 0===t?w(e):X(w(e),t)},Z=function(e){var t=O.call(this,e=b(e,!0));return!(this===B&&i(N,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(N,e)||i(this,I)&&this[I][e])||t)},J=function(e,t){if(e=y(e),t=b(t,!0),e!==B||!i(N,t)||i(F,t)){var n=T(e,t);return!n||!i(N,t)||i(e,I)&&e[I][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=k(y(e)),r=[],a=0;n.length>a;)i(N,t=n[a++])||t==I||t==l||r.push(t);return r},K=function(e){for(var t,n=e===B,r=k(n?F:y(e)),a=[],o=0;r.length>o;)!i(N,t=r[o++])||n&&!i(B,t)||a.push(N[t]);return a};U||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(F,n),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),V(this,e,x(1,n))};return a&&j&&V(B,e,{configurable:!0,set:t}),G(e)},s(L.prototype,"toString",(function(){return this._k})),S.f=J,E.f=q,n(49).f=M.f=Q,n(34).f=Z,n(48).f=K,a&&!n(23)&&s(B,"propertyIsEnumerable",Z,!0),f.f=function(e){return G(d(e))}),o(o.G+o.W+o.F*!U,{Symbol:L});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)d($[ee++]);for(var te=A(d.store),ne=0;te.length>ne;)m(te[ne++]);o(o.S+o.F*!U,"Symbol",{for:function(e){return i(D,e+="")?D[e]:D[e]=L(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){j=!0},useSimple:function(){j=!1}}),o(o.S+o.F*!U,"Object",{create:Y,defineProperty:q,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:K}),P&&o(o.S+o.F*(!U||c((function(){var e=L();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return"function"==typeof(t=r[1])&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,R.apply(P,r)}}}),L.prototype[z]||n(7)(L.prototype,z,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t,n){var r=n(17)("meta"),i=n(14),a=n(6),o=n(8).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(15)((function(){return l(Object.preventExtensions({}))})),u=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},h=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},p=function(e,t){if(!a(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},d=function(e){return c&&f.NEED&&l(e)&&!a(e,r)&&u(e),e},f=e.exports={KEY:r,NEED:!1,fastKey:h,getWeak:p,onFreeze:d}},function(e,t,n){var r=n(27),i=n(48),a=n(34);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),l=a.f,c=0;s.length>c;)l.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,n){var r=n(47);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(10),i=n(49).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(r(e))}},function(e,t,n){var r=n(34),i=n(16),a=n(10),o=n(25),s=n(6),l=n(42),c=Object.getOwnPropertyDescriptor;t.f=n(9)?c:function(e,t){if(e=a(e),t=o(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(33)("asyncIterator")},function(e,t,n){n(33)("observable")},function(e,t,n){var r=n(112);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("7c5f1a1c",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-hue {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  border-radius: 2px;\n}\n.vc-hue--horizontal {\n  background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue--vertical {\n  background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue-container {\n  cursor: pointer;\n  margin: 0 2px;\n  position: relative;\n  height: 100%;\n}\n.vc-hue-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-hue-picker {\n  cursor: pointer;\n  margin-top: 1px;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  transform: translateX(-2px) ;\n}\n",""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-hue",e.directionClass]},[n("div",{ref:"container",staticClass:"vc-hue-container",attrs:{role:"slider","aria-valuenow":e.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360"},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[n("div",{staticClass:"vc-hue-pointer",style:{top:e.pointerTop,left:e.pointerLeft},attrs:{role:"presentation"}},[n("div",{staticClass:"vc-hue-picker"})])])])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-slider",attrs:{role:"application","aria-label":"Slider color picker"}},[n("div",{staticClass:"vc-slider-hue-warp"},[n("hue",{on:{change:e.hueChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-slider-swatches",attrs:{role:"group"}},e._l(e.normalizedSwatches,(function(t,r){return n("div",{key:r,staticClass:"vc-slider-swatch",attrs:{"data-index":r,"aria-label":"color:"+e.colors.hex,role:"button"},on:{click:function(n){e.handleSwClick(r,t)}}},[n("div",{staticClass:"vc-slider-swatch-picker",class:{"vc-slider-swatch-picker--active":e.isActive(t,r),"vc-slider-swatch-picker--white":1===t.l},style:{background:"hsl("+e.colors.hsl.h+", "+100*t.s+"%, "+100*t.l+"%)"}})])})))])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(116)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(51),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(119),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Swatches.vue",t.default=u.exports},function(e,t,n){var r=n(117);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("10f839a2",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-swatches {\n  width: 320px;\n  height: 240px;\n  overflow-y: scroll;\n  background-color: #fff;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n}\n.vc-swatches-box {\n  padding: 16px 0 6px 16px;\n  overflow: hidden;\n}\n.vc-swatches-color-group {\n  padding-bottom: 10px;\n  width: 40px;\n  float: left;\n  margin-right: 10px;\n}\n.vc-swatches-color-it {\n  box-sizing: border-box;\n  width: 40px;\n  height: 24px;\n  cursor: pointer;\n  background: #880e4f;\n  margin-bottom: 1px;\n  overflow: hidden;\n  -ms-border-radius: 2px 2px 0 0;\n  -moz-border-radius: 2px 2px 0 0;\n  -o-border-radius: 2px 2px 0 0;\n  -webkit-border-radius: 2px 2px 0 0;\n  border-radius: 2px 2px 0 0;\n}\n.vc-swatches-color--white {\n  border: 1px solid #DDD;\n}\n.vc-swatches-pick {\n  fill: rgb(255, 255, 255);\n  margin-left: 8px;\n  display: block;\n}\n.vc-swatches-color--white .vc-swatches-pick {\n  fill: rgb(51, 51, 51);\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"red",(function(){return r})),n.d(t,"pink",(function(){return i})),n.d(t,"purple",(function(){return a})),n.d(t,"deepPurple",(function(){return o})),n.d(t,"indigo",(function(){return s})),n.d(t,"blue",(function(){return l})),n.d(t,"lightBlue",(function(){return c})),n.d(t,"cyan",(function(){return u})),n.d(t,"teal",(function(){return h})),n.d(t,"green",(function(){return p})),n.d(t,"lightGreen",(function(){return d})),n.d(t,"lime",(function(){return f})),n.d(t,"yellow",(function(){return m})),n.d(t,"amber",(function(){return v})),n.d(t,"orange",(function(){return g})),n.d(t,"deepOrange",(function(){return _})),n.d(t,"brown",(function(){return y})),n.d(t,"grey",(function(){return b})),n.d(t,"blueGrey",(function(){return x})),n.d(t,"darkText",(function(){return w})),n.d(t,"lightText",(function(){return M})),n.d(t,"darkIcons",(function(){return S})),n.d(t,"lightIcons",(function(){return E})),n.d(t,"white",(function(){return A})),n.d(t,"black",(function(){return T}));var r={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},i={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},a={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},o={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},u={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},h={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},p={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},d={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},f={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},m={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},v={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},g={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},_={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},y={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},b={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},x={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},w={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},M={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},S={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},E={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},A="#ffffff",T="#000000";t.default={red:r,pink:i,purple:a,deepPurple:o,indigo:s,blue:l,lightBlue:c,cyan:u,teal:h,green:p,lightGreen:d,lime:f,yellow:m,amber:v,orange:g,deepOrange:_,brown:y,grey:b,blueGrey:x,darkText:w,lightText:M,darkIcons:S,lightIcons:E,white:A,black:T}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-swatches",attrs:{role:"application","aria-label":"Swatches color picker","data-pick":e.pick}},[n("div",{staticClass:"vc-swatches-box",attrs:{role:"listbox"}},e._l(e.palette,(function(t,r){return n("div",{key:r,staticClass:"vc-swatches-color-group"},e._l(t,(function(t){return n("div",{key:t,class:["vc-swatches-color-it",{"vc-swatches-color--white":"#FFFFFF"===t}],style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":e.equal(t),"data-color":t},on:{click:function(n){e.handlerClick(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.equal(t),expression:"equal(c)"}],staticClass:"vc-swatches-pick"},[n("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}})])])])})))})))])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(121)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(134),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Photoshop.vue",t.default=u.exports},function(e,t,n){var r=n(122);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("080365d4",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,'\n.vc-photoshop {\n  background: #DCDCDC;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15);\n  box-sizing: initial;\n  width: 513px;\n  font-family: Roboto;\n}\n.vc-photoshop__disable-fields {\n  width: 390px;\n}\n.vc-ps-head {\n  background-image: linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%);\n  border-bottom: 1px solid #B1B1B1;\n  box-shadow: inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02);\n  height: 23px;\n  line-height: 24px;\n  border-radius: 4px 4px 0 0;\n  font-size: 13px;\n  color: #4D4D4D;\n  text-align: center;\n}\n.vc-ps-body {\n  padding: 15px;\n  display: flex;\n}\n.vc-ps-saturation-wrap {\n  width: 256px;\n  height: 256px;\n  position: relative;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n  overflow: hidden;\n}\n.vc-ps-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-ps-hue-wrap {\n  position: relative;\n  height: 256px;\n  width: 19px;\n  margin-left: 10px;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n}\n.vc-ps-hue-pointer {\n  position: relative;\n}\n.vc-ps-hue-pointer--left,\n.vc-ps-hue-pointer--right {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 5px 0 5px 8px;\n  border-color: transparent transparent transparent #555;\n}\n.vc-ps-hue-pointer--left:after,\n.vc-ps-hue-pointer--right:after {\n  content: "";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 6px;\n  border-color: transparent transparent transparent #fff;\n  position: absolute;\n  top: 1px;\n  left: 1px;\n  transform: translate(-8px, -5px);\n}\n.vc-ps-hue-pointer--left {\n  transform: translate(-13px, -4px);\n}\n.vc-ps-hue-pointer--right {\n  transform: translate(20px, -4px) rotate(180deg);\n}\n.vc-ps-controls {\n  width: 180px;\n  margin-left: 10px;\n  display: flex;\n}\n.vc-ps-controls__disable-fields {\n  width: auto;\n}\n.vc-ps-actions {\n  margin-left: 20px;\n  flex: 1;\n}\n.vc-ps-ac-btn {\n  cursor: pointer;\n  background-image: linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%);\n  border: 1px solid #878787;\n  border-radius: 2px;\n  height: 20px;\n  box-shadow: 0 1px 0 0 #EAEAEA;\n  font-size: 14px;\n  color: #000;\n  line-height: 20px;\n  text-align: center;\n  margin-bottom: 10px;\n}\n.vc-ps-previews {\n  width: 60px;\n}\n.vc-ps-previews__swatches {\n  border: 1px solid #B3B3B3;\n  border-bottom: 1px solid #F0F0F0;\n  margin-bottom: 2px;\n  margin-top: 1px;\n}\n.vc-ps-previews__pr-color {\n  height: 34px;\n  box-shadow: inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000;\n}\n.vc-ps-previews__label {\n  font-size: 14px;\n  color: #000;\n  text-align: center;\n}\n.vc-ps-fields {\n  padding-top: 5px;\n  padding-bottom: 9px;\n  width: 80px;\n  position: relative;\n}\n.vc-ps-fields .vc-input__input {\n  margin-left: 40%;\n  width: 40%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 5px;\n  font-size: 13px;\n  padding-left: 3px;\n  margin-right: 10px;\n}\n.vc-ps-fields .vc-input__label, .vc-ps-fields .vc-input__desc {\n  top: 0;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n  position: absolute;\n}\n.vc-ps-fields .vc-input__label {\n  left: 0;\n  width: 34px;\n}\n.vc-ps-fields .vc-input__desc {\n  right: 0;\n  width: 0;\n}\n.vc-ps-fields__divider {\n  height: 5px;\n}\n.vc-ps-fields__hex .vc-input__input {\n  margin-left: 20%;\n  width: 80%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 6px;\n  font-size: 13px;\n  padding-left: 3px;\n}\n.vc-ps-fields__hex .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 14px;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n}\n',""])},function(e,t,n){var r=n(124);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("b5380e52",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-saturation,\n.vc-saturation--white,\n.vc-saturation--black {\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.vc-saturation--white {\n  background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n}\n.vc-saturation--black {\n  background: linear-gradient(to top, #000, rgba(0,0,0,0));\n}\n.vc-saturation-pointer {\n  cursor: pointer;\n  position: absolute;\n}\n.vc-saturation-circle {\n  cursor: pointer;\n  width: 4px;\n  height: 4px;\n  box-shadow: 0 0 0 1.6px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4);\n  border-radius: 50%;\n  transform: translate(-2px, -2px);\n}\n",""])},function(e,t){function n(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}e.exports=n},function(e,t){function r(e,t,n){function r(t){var n=m,r=v;return m=v=void 0,S=t,_=e.apply(r,n)}function i(e){return S=e,y=setTimeout(u,t),E?r(e):_}function o(e){var n=t-(e-b);return A?w(n,g-(e-S)):n}function s(e){var n=e-b;return void 0===b||n>=t||n<0||A&&e-S>=g}function u(){var e=M();if(s(e))return h(e);y=setTimeout(u,o(e))}function h(e){return y=void 0,T&&m?r(e):(m=v=void 0,_)}function p(){void 0!==y&&clearTimeout(y),S=0,m=b=v=y=void 0}function d(){return void 0===y?_:h(M())}function f(){var e=M(),n=s(e);if(m=arguments,v=this,b=e,n){if(void 0===y)return i(b);if(A)return y=setTimeout(u,t),r(b)}return void 0===y&&(y=setTimeout(u,t)),_}var m,v,g,_,y,b,S=0,E=!1,A=!1,T=!0;if("function"!=typeof e)throw new TypeError(c);return t=l(t)||0,a(n)&&(E=!!n.leading,g=(A="maxWait"in n)?x(l(n.maxWait)||0,t):g,T="trailing"in n?!!n.trailing:T),f.cancel=p,f.flush=d,f}function i(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(c);return a(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:i,maxWait:t,trailing:o})}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==typeof e}function s(e){return"symbol"==typeof e||o(e)&&b.call(e)==h}function l(e){if("number"==typeof e)return e;if(s(e))return u;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var n=f.test(e);return n||m.test(e)?v(e.slice(2),n?2:8):d.test(e)?u:+e}var c="Expected a function",u=NaN,h="[object Symbol]",p=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,m=/^0o[0-7]+$/i,v=parseInt,g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,_="object"==typeof self&&self&&self.Object===Object&&self,y=g||_||Function("return this")(),b=Object.prototype.toString,x=Math.max,w=Math.min,M=function(){return y.Date.now()};e.exports=i},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"vc-saturation",style:{background:e.bgColor},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[n("div",{staticClass:"vc-saturation--white"}),e._v(" "),n("div",{staticClass:"vc-saturation--black"}),e._v(" "),n("div",{staticClass:"vc-saturation-pointer",style:{top:e.pointerTop,left:e.pointerLeft}},[n("div",{staticClass:"vc-saturation-circle"})])])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){var r=n(129);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("4dc1b086",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-alpha {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-checkboard-wrap {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  overflow: hidden;\n}\n.vc-alpha-gradient {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-container {\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n  height: 100%;\n  margin: 0 3px;\n}\n.vc-alpha-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-alpha-picker {\n  cursor: pointer;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  margin-top: 1px;\n  transform: translateX(-2px);\n}\n",""])},function(e,t,n){var r=n(131);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("7e15c05b",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-checkerboard {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  background-size: contain;\n}\n",""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"vc-checkerboard",style:e.bgStyle})},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-alpha"},[n("div",{staticClass:"vc-alpha-checkboard-wrap"},[n("checkboard")],1),e._v(" "),n("div",{staticClass:"vc-alpha-gradient",style:{background:e.gradientColor}}),e._v(" "),n("div",{ref:"container",staticClass:"vc-alpha-container",on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[n("div",{staticClass:"vc-alpha-pointer",style:{left:100*e.colors.a+"%"}},[n("div",{staticClass:"vc-alpha-picker"})])])])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-photoshop",e.disableFields?"vc-photoshop__disable-fields":""],attrs:{role:"application","aria-label":"PhotoShop color picker"}},[n("div",{staticClass:"vc-ps-head",attrs:{role:"heading"}},[e._v(e._s(e.head))]),e._v(" "),n("div",{staticClass:"vc-ps-body"},[n("div",{staticClass:"vc-ps-saturation-wrap"},[n("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-ps-hue-wrap"},[n("hue",{attrs:{direction:"vertical"},on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}},[n("div",{staticClass:"vc-ps-hue-pointer"},[n("i",{staticClass:"vc-ps-hue-pointer--left"}),n("i",{staticClass:"vc-ps-hue-pointer--right"})])])],1),e._v(" "),n("div",{class:["vc-ps-controls",e.disableFields?"vc-ps-controls__disable-fields":""]},[n("div",{staticClass:"vc-ps-previews"},[n("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.newLabel))]),e._v(" "),n("div",{staticClass:"vc-ps-previews__swatches"},[n("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.colors.hex},attrs:{"aria-label":"New color is "+e.colors.hex}}),e._v(" "),n("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.currentColor},attrs:{"aria-label":"Current color is "+e.currentColor},on:{click:e.clickCurrentColor}})]),e._v(" "),n("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.currentLabel))])]),e._v(" "),e.disableFields?e._e():n("div",{staticClass:"vc-ps-actions"},[n("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.acceptLabel},on:{click:e.handleAccept}},[e._v(e._s(e.acceptLabel))]),e._v(" "),n("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.cancelLabel},on:{click:e.handleCancel}},[e._v(e._s(e.cancelLabel))]),e._v(" "),n("div",{staticClass:"vc-ps-fields"},[n("ed-in",{attrs:{label:"h",desc:"",value:e.hsv.h},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"s",desc:"%",value:e.hsv.s,max:100},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"v",desc:"%",value:e.hsv.v,max:100},on:{change:e.inputChange}}),e._v(" "),n("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),n("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}}),e._v(" "),n("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),n("ed-in",{staticClass:"vc-ps-fields__hex",attrs:{label:"#",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),e.hasResetButton?n("div",{staticClass:"vc-ps-ac-btn",attrs:{"aria-label":"reset"},on:{click:e.handleReset}},[e._v(e._s(e.resetLabel))]):e._e()])])])])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(136)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(56),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(138),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Sketch.vue",t.default=u.exports},function(e,t,n){var r=n(137);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("612c6604",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-sketch {\n  position: relative;\n  width: 200px;\n  padding: 10px 10px 0;\n  box-sizing: initial;\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, .15), 0 8px 16px rgba(0, 0, 0, .15);\n}\n.vc-sketch-saturation-wrap {\n  width: 100%;\n  padding-bottom: 75%;\n  position: relative;\n  overflow: hidden;\n}\n.vc-sketch-controls {\n  display: flex;\n}\n.vc-sketch-sliders {\n  padding: 4px 0;\n  flex: 1;\n}\n.vc-sketch-sliders .vc-hue,\n.vc-sketch-sliders .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-sketch-hue-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-sketch-alpha-wrap {\n  position: relative;\n  height: 10px;\n  margin-top: 4px;\n  overflow: hidden;\n}\n.vc-sketch-color-wrap {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  margin-top: 4px;\n  margin-left: 4px;\n  border-radius: 3px;\n}\n.vc-sketch-active-color {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: 2px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15), inset 0 0 4px rgba(0, 0, 0, .25);\n  z-index: 2;\n}\n.vc-sketch-color-wrap .vc-checkerboard {\n  background-size: auto;\n}\n.vc-sketch-field {\n  display: flex;\n  padding-top: 4px;\n}\n.vc-sketch-field .vc-input__input {\n  width: 90%;\n  padding: 4px 0 3px 10%;\n  border: none;\n  box-shadow: inset 0 0 0 1px #ccc;\n  font-size: 10px;\n}\n.vc-sketch-field .vc-input__label {\n  display: block;\n  text-align: center;\n  font-size: 11px;\n  color: #222;\n  padding-top: 3px;\n  padding-bottom: 4px;\n  text-transform: capitalize;\n}\n.vc-sketch-field--single {\n  flex: 1;\n  padding-left: 6px;\n}\n.vc-sketch-field--double {\n  flex: 2;\n}\n.vc-sketch-presets {\n  margin-right: -10px;\n  margin-left: -10px;\n  padding-left: 10px;\n  padding-top: 10px;\n  border-top: 1px solid #eee;\n}\n.vc-sketch-presets-color {\n  border-radius: 3px;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  margin: 0 10px 10px 0;\n  vertical-align: top;\n  cursor: pointer;\n  width: 16px;\n  height: 16px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n}\n.vc-sketch-presets-color .vc-checkerboard {\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n  border-radius: 3px;\n}\n.vc-sketch__disable-alpha .vc-sketch-color-wrap {\n  height: 10px;\n}\n",""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-sketch",e.disableAlpha?"vc-sketch__disable-alpha":""],attrs:{role:"application","aria-label":"Sketch color picker"}},[n("div",{staticClass:"vc-sketch-saturation-wrap"},[n("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-controls"},[n("div",{staticClass:"vc-sketch-sliders"},[n("div",{staticClass:"vc-sketch-hue-wrap"},[n("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-sketch-alpha-wrap"},[n("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)]),e._v(" "),n("div",{staticClass:"vc-sketch-color-wrap"},[n("div",{staticClass:"vc-sketch-active-color",style:{background:e.activeColor},attrs:{"aria-label":"Current color is "+e.activeColor}}),e._v(" "),n("checkboard")],1)]),e._v(" "),e.disableFields?e._e():n("div",{staticClass:"vc-sketch-field"},[n("div",{staticClass:"vc-sketch-field--double"},[n("ed-in",{attrs:{label:"hex",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),n("div",{staticClass:"vc-sketch-presets",attrs:{role:"group","aria-label":"A color preset, pick one to set as current color"}},[e._l(e.presetColors,(function(t){return[e.isTransparent(t)?n("div",{key:t,staticClass:"vc-sketch-presets-color",attrs:{"aria-label":"Color:"+t},on:{click:function(n){e.handlePreset(t)}}},[n("checkboard")],1):n("div",{key:t,staticClass:"vc-sketch-presets-color",style:{background:t},attrs:{"aria-label":"Color:"+t},on:{click:function(n){e.handlePreset(t)}}})]}))],2)])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(140)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(142),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Chrome.vue",t.default=u.exports},function(e,t,n){var r=n(141);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("1cd16048",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-chrome {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3);\n  box-sizing: initial;\n  width: 225px;\n  font-family: Menlo, monospace;\n  background-color: #fff;\n}\n.vc-chrome-controls {\n  display: flex;\n}\n.vc-chrome-color-wrap {\n  position: relative;\n  width: 36px;\n}\n.vc-chrome-active-color {\n  position: relative;\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  overflow: hidden;\n  z-index: 1;\n}\n.vc-chrome-color-wrap .vc-checkerboard {\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  background-size: auto;\n}\n.vc-chrome-sliders {\n  flex: 1;\n}\n.vc-chrome-fields-wrap {\n  display: flex;\n  padding-top: 16px;\n}\n.vc-chrome-fields {\n  display: flex;\n  margin-left: -6px;\n  flex: 1;\n}\n.vc-chrome-field {\n  padding-left: 6px;\n  width: 100%;\n}\n.vc-chrome-toggle-btn {\n  width: 32px;\n  text-align: right;\n  position: relative;\n}\n.vc-chrome-toggle-icon {\n  margin-right: -4px;\n  margin-top: 12px;\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n}\n.vc-chrome-toggle-icon-highlight {\n  position: absolute;\n  width: 24px;\n  height: 28px;\n  background: #eee;\n  border-radius: 4px;\n  top: 10px;\n  left: 12px;\n}\n.vc-chrome-hue-wrap {\n  position: relative;\n  height: 10px;\n  margin-bottom: 8px;\n}\n.vc-chrome-alpha-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-chrome-hue-wrap .vc-hue {\n  border-radius: 2px;\n}\n.vc-chrome-alpha-wrap .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-chrome-hue-wrap .vc-hue-picker, .vc-chrome-alpha-wrap .vc-alpha-picker {\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  transform: translate(-6px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-chrome-body {\n  padding: 16px 16px 12px;\n  background-color: #fff;\n}\n.vc-chrome-saturation-wrap {\n  width: 100%;\n  padding-bottom: 55%;\n  position: relative;\n  border-radius: 2px 2px 0 0;\n  overflow: hidden;\n}\n.vc-chrome-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-chrome-fields .vc-input__input {\n  font-size: 11px;\n  color: #333;\n  width: 100%;\n  border-radius: 2px;\n  border: none;\n  box-shadow: inset 0 0 0 1px #dadada;\n  height: 21px;\n  text-align: center;\n}\n.vc-chrome-fields .vc-input__label {\n  text-transform: uppercase;\n  font-size: 11px;\n  line-height: 11px;\n  color: #969696;\n  text-align: center;\n  display: block;\n  margin-top: 12px;\n}\n.vc-chrome__disable-alpha .vc-chrome-active-color {\n  width: 18px;\n  height: 18px;\n}\n.vc-chrome__disable-alpha .vc-chrome-color-wrap {\n  width: 30px;\n}\n.vc-chrome__disable-alpha .vc-chrome-hue-wrap {\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n",""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-chrome",e.disableAlpha?"vc-chrome__disable-alpha":""],attrs:{role:"application","aria-label":"Chrome color picker"}},[n("div",{staticClass:"vc-chrome-saturation-wrap"},[n("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-body"},[n("div",{staticClass:"vc-chrome-controls"},[n("div",{staticClass:"vc-chrome-color-wrap"},[n("div",{staticClass:"vc-chrome-active-color",style:{background:e.activeColor},attrs:{"aria-label":"current color is "+e.colors.hex}}),e._v(" "),e.disableAlpha?e._e():n("checkboard")],1),e._v(" "),n("div",{staticClass:"vc-chrome-sliders"},[n("div",{staticClass:"vc-chrome-hue-wrap"},[n("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-chrome-alpha-wrap"},[n("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)])]),e._v(" "),e.disableFields?e._e():n("div",{staticClass:"vc-chrome-fields-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.fieldsIndex,expression:"fieldsIndex === 0"}],staticClass:"vc-chrome-fields"},[n("div",{staticClass:"vc-chrome-field"},[e.hasAlpha?e._e():n("ed-in",{attrs:{label:"hex",value:e.colors.hex},on:{change:e.inputChange}}),e._v(" "),e.hasAlpha?n("ed-in",{attrs:{label:"hex",value:e.colors.hex8},on:{change:e.inputChange}}):e._e()],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===e.fieldsIndex,expression:"fieldsIndex === 1"}],staticClass:"vc-chrome-fields"},[n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===e.fieldsIndex,expression:"fieldsIndex === 2"}],staticClass:"vc-chrome-fields"},[n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"h",value:e.hsl.h},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"s",value:e.hsl.s},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"l",value:e.hsl.l},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),n("div",{staticClass:"vc-chrome-toggle-btn",attrs:{role:"button","aria-label":"Change another color definition"},on:{click:e.toggleViews}},[n("div",{staticClass:"vc-chrome-toggle-icon"},[n("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"},on:{mouseover:e.showHighlight,mouseenter:e.showHighlight,mouseout:e.hideHighlight}},[n("path",{attrs:{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.highlight,expression:"highlight"}],staticClass:"vc-chrome-toggle-icon-highlight"})])])])])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a},function(e,t,n){"use strict";function r(e){l||n(144)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(58),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var s=n(146),l=!1,c=r,u=n(2)(a.a,s.a,!1,c,null,null);u.options.__file="src/components/Twitter.vue",t.default=u.exports},function(e,t,n){var r=n(145);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(1)("669a48a5",r,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-twitter {\n  background: #fff;\n  border: 0 solid rgba(0,0,0,0.25);\n  box-shadow: 0 1px 4px rgba(0,0,0,0.25);\n  border-radius: 4px;\n  position: relative;\n}\n.vc-twitter-triangle {\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 0 9px 10px 9px;\n  border-color: transparent transparent #fff transparent;\n  position: absolute;\n}\n.vc-twitter-triangle-shadow {\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 0 9px 10px 9px;\n  border-color: transparent transparent rgba(0, 0, 0, .1) transparent;\n  position: absolute;\n}\n.vc-twitter-body {\n  padding: 15px 9px 9px 15px;\n}\n.vc-twitter .vc-editable-input {\n  position: relative;\n}\n.vc-twitter .vc-editable-input input {\n  width: 100px;\n  font-size: 14px;\n  color: #666;\n  border: 0px;\n  outline: none;\n  height: 28px;\n  box-shadow: inset 0 0 0 1px #F0F0F0;\n  box-sizing: content-box;\n  border-radius: 0 4px 4px 0;\n  float: left;\n  padding: 1px;\n  padding-left: 8px;\n}\n.vc-twitter .vc-editable-input span {\n  display: none;\n}\n.vc-twitter-hash {\n  background: #F0F0F0;\n  height: 30px;\n  width: 30px;\n  border-radius: 4px 0 0 4px;\n  float: left;\n  color: #98A1A4;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.vc-twitter-swatch {\n  width: 30px;\n  height: 30px;\n  float: left;\n  border-radius: 4px;\n  margin: 0 6px 6px 0;\n  cursor: pointer;\n  position: relative;\n  outline: none;\n}\n.vc-twitter-clear {\n  clear: both;\n}\n.vc-twitter-hide-triangle .vc-twitter-triangle {\n  display: none;\n}\n.vc-twitter-hide-triangle .vc-twitter-triangle-shadow {\n  display: none;\n}\n.vc-twitter-top-left-triangle .vc-twitter-triangle{\n  top: -10px;\n  left: 12px;\n}\n.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{\n  top: -11px;\n  left: 12px;\n}\n.vc-twitter-top-right-triangle .vc-twitter-triangle{\n  top: -10px;\n  right: 12px;\n}\n.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{\n  top: -11px;\n  right: 12px;\n}\n",""])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-twitter",class:{"vc-twitter-hide-triangle ":"hide"===e.triangle,"vc-twitter-top-left-triangle ":"top-left"===e.triangle,"vc-twitter-top-right-triangle ":"top-right"===e.triangle},style:{width:"number"==typeof e.width?e.width+"px":e.width}},[n("div",{staticClass:"vc-twitter-triangle-shadow"}),e._v(" "),n("div",{staticClass:"vc-twitter-triangle"}),e._v(" "),n("div",{staticClass:"vc-twitter-body"},[e._l(e.defaultColors,(function(t,r){return n("span",{key:r,staticClass:"vc-twitter-swatch",style:{background:t,boxShadow:"0 0 4px "+(e.equal(t)?t:"transparent")},on:{click:function(n){e.handlerClick(t)}}})})),e._v(" "),n("div",{staticClass:"vc-twitter-hash"},[e._v("#")]),e._v(" "),n("editable-input",{attrs:{label:"#",value:e.hex},on:{change:e.inputChange}}),e._v(" "),n("div",{staticClass:"vc-twitter-clear"})],2)])},i=[];r._withStripped=!0;var a={render:r,staticRenderFns:i};t.a=a}])},897:(e,t,n)=>{"use strict";var r,i=(r=n(660))&&"object"==typeof r&&"default"in r?r.default:r;function a(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e}var o={functional:!0,props:{code:{type:String},inline:{type:Boolean,default:!1},language:{type:String,default:"markup"}},render:function(e,t){var n=t.props.code||(t.children&&t.children.length>0?t.children[0].text:""),r=t.props.inline,o=t.props.language,s=i.languages[o],l="language-".concat(o);return r?e("code",a({},t.data,{class:[t.data.class,l],domProps:a({},t.data.domProps,{innerHTML:i.highlight(n,s)})})):e("pre",a({},t.data,{class:[t.data.class,l]}),[e("code",{class:l,domProps:{innerHTML:i.highlight(n,s)}})])}};e.exports=o}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=Object.freeze({});function t(e){return null==e}function r(e){return null!=e}function i(e){return!0===e}function a(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function o(e){return null!==e&&"object"==typeof e}var s=Object.prototype.toString;function l(e){return"[object Object]"===s.call(e)}function c(e){return"[object RegExp]"===s.call(e)}function u(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return r(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===s?JSON.stringify(e,null,2):String(e)}function d(e){var t=parseFloat(e);return isNaN(t)?e:t}function f(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var m=f("slot,component",!0),v=f("key,ref,slot,slot-scope,is");function g(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var _=Object.prototype.hasOwnProperty;function y(e,t){return _.call(e,t)}function b(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var x=/-(\w)/g,w=b((function(e){return e.replace(x,(function(e,t){return t?t.toUpperCase():""}))})),M=b((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),S=/\B([A-Z])/g,E=b((function(e){return e.replace(S,"-$1").toLowerCase()}));var A=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function T(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function C(e,t){for(var n in t)e[n]=t[n];return e}function k(e){for(var t={},n=0;n<e.length;n++)e[n]&&C(t,e[n]);return t}function L(e,t,n){}var P=function(e,t,n){return!1},R=function(e){return e};function I(e,t){if(e===t)return!0;var n=o(e),r=o(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),a=Array.isArray(t);if(i&&a)return e.length===t.length&&e.every((function(e,n){return I(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||a)return!1;var s=Object.keys(e),l=Object.keys(t);return s.length===l.length&&s.every((function(n){return I(e[n],t[n])}))}catch(e){return!1}}function z(e,t){for(var n=0;n<e.length;n++)if(I(e[n],t))return n;return-1}function O(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var D="data-server-rendered",N=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],B={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:P,isReservedAttr:P,isUnknownElement:P,getTagNamespace:L,parsePlatformTagName:R,mustUseProp:P,async:!0,_lifecycleHooks:F},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function j(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var V=new RegExp("[^"+U.source+".$_\\d]");var G,W="__proto__"in{},q="undefined"!=typeof window,X="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Y=X&&WXEnvironment.platform.toLowerCase(),Z=q&&window.navigator.userAgent.toLowerCase(),J=Z&&/msie|trident/.test(Z),Q=Z&&Z.indexOf("msie 9.0")>0,K=Z&&Z.indexOf("edge/")>0,$=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===Y),ee=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),te={}.watch,ne=!1;if(q)try{var re={};Object.defineProperty(re,"passive",{get:function(){ne=!0}}),window.addEventListener("test-passive",null,re)}catch(e){}var ie=function(){return void 0===G&&(G=!q&&!X&&void 0!==n.g&&(n.g.process&&"server"===n.g.process.env.VUE_ENV)),G},ae=q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function oe(e){return"function"==typeof e&&/native code/.test(e.toString())}var se,le="undefined"!=typeof Symbol&&oe(Symbol)&&"undefined"!=typeof Reflect&&oe(Reflect.ownKeys);se="undefined"!=typeof Set&&oe(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ce=L,ue=0,he=function(){this.id=ue++,this.subs=[]};he.prototype.addSub=function(e){this.subs.push(e)},he.prototype.removeSub=function(e){g(this.subs,e)},he.prototype.depend=function(){he.target&&he.target.addDep(this)},he.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},he.target=null;var pe=[];function de(e){pe.push(e),he.target=e}function fe(){pe.pop(),he.target=pe[pe.length-1]}var me=function(e,t,n,r,i,a,o,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ve={child:{configurable:!0}};ve.child.get=function(){return this.componentInstance},Object.defineProperties(me.prototype,ve);var ge=function(e){void 0===e&&(e="");var t=new me;return t.text=e,t.isComment=!0,t};function _e(e){return new me(void 0,void 0,void 0,String(e))}function ye(e){var t=new me(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var be=Array.prototype,xe=Object.create(be);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=be[e];j(xe,e,(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,a=t.apply(this,n),o=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&o.observeArray(i),o.dep.notify(),a}))}));var we=Object.getOwnPropertyNames(xe),Me=!0;function Se(e){Me=e}var Ee=function(e){this.value=e,this.dep=new he,this.vmCount=0,j(e,"__ob__",this),Array.isArray(e)?(W?function(e,t){e.__proto__=t}(e,xe):function(e,t,n){for(var r=0,i=n.length;r<i;r++){var a=n[r];j(e,a,t[a])}}(e,xe,we),this.observeArray(e)):this.walk(e)};function Ae(e,t){var n;if(o(e)&&!(e instanceof me))return y(e,"__ob__")&&e.__ob__ instanceof Ee?n=e.__ob__:Me&&!ie()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Ee(e)),t&&n&&n.vmCount++,n}function Te(e,t,n,r,i){var a=new he,o=Object.getOwnPropertyDescriptor(e,t);if(!o||!1!==o.configurable){var s=o&&o.get,l=o&&o.set;s&&!l||2!==arguments.length||(n=e[t]);var c=!i&&Ae(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return he.target&&(a.depend(),c&&(c.dep.depend(),Array.isArray(t)&&Le(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!=t&&r!=r||s&&!l||(l?l.call(e,t):n=t,c=!i&&Ae(t),a.notify())}})}}function Ce(e,t,n){if(Array.isArray(e)&&u(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Te(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function ke(e,t){if(Array.isArray(e)&&u(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||y(e,t)&&(delete e[t],n&&n.dep.notify())}}function Le(e){for(var t=void 0,n=0,r=e.length;n<r;n++)(t=e[n])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Le(t)}Ee.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Te(e,t[n])},Ee.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ae(e[t])};var Pe=B.optionMergeStrategies;function Re(e,t){if(!t)return e;for(var n,r,i,a=le?Reflect.ownKeys(t):Object.keys(t),o=0;o<a.length;o++)"__ob__"!==(n=a[o])&&(r=e[n],i=t[n],y(e,n)?r!==i&&l(r)&&l(i)&&Re(r,i):Ce(e,n,i));return e}function Ie(e,t,n){return n?function(){var r="function"==typeof t?t.call(n,n):t,i="function"==typeof e?e.call(n,n):e;return r?Re(r,i):i}:t?e?function(){return Re("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function ze(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function Oe(e,t,n,r){var i=Object.create(e||null);return t?C(i,t):i}Pe.data=function(e,t,n){return n?Ie(e,t,n):t&&"function"!=typeof t?e:Ie(e,t)},F.forEach((function(e){Pe[e]=ze})),N.forEach((function(e){Pe[e+"s"]=Oe})),Pe.watch=function(e,t,n,r){if(e===te&&(e=void 0),t===te&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var a in C(i,e),t){var o=i[a],s=t[a];o&&!Array.isArray(o)&&(o=[o]),i[a]=o?o.concat(s):Array.isArray(s)?s:[s]}return i},Pe.props=Pe.methods=Pe.inject=Pe.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return C(i,e),t&&C(i,t),i},Pe.provide=Ie;var De=function(e,t){return void 0===t?e:t};function Ne(e,t,n){if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var r,i,a={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(a[w(i)]={type:null});else if(l(n))for(var o in n)i=n[o],a[w(o)]=l(i)?i:{type:i};e.props=a}}(t),function(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var a in n){var o=n[a];r[a]=l(o)?C({from:a},o):{from:o}}}}(t),function(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}(t),!t._base&&(t.extends&&(e=Ne(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Ne(e,t.mixins[r],n);var a,o={};for(a in e)s(a);for(a in t)y(e,a)||s(a);function s(r){var i=Pe[r]||De;o[r]=i(e[r],t[r],n,r)}return o}function Fe(e,t,n,r){if("string"==typeof n){var i=e[t];if(y(i,n))return i[n];var a=w(n);if(y(i,a))return i[a];var o=M(a);return y(i,o)?i[o]:i[n]||i[a]||i[o]}}function Be(e,t,n,r){var i=t[e],a=!y(n,e),o=n[e],s=je(Boolean,i.type);if(s>-1)if(a&&!y(i,"default"))o=!1;else if(""===o||o===E(e)){var l=je(String,i.type);(l<0||s<l)&&(o=!0)}if(void 0===o){o=function(e,t,n){if(!y(t,"default"))return;var r=t.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"==typeof r&&"Function"!==Ue(t.type)?r.call(e):r}(r,i,e);var c=Me;Se(!0),Ae(o),Se(c)}return o}function Ue(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function He(e,t){return Ue(e)===Ue(t)}function je(e,t){if(!Array.isArray(t))return He(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(He(t[n],e))return n;return-1}function Ve(e,t,n){de();try{if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{if(!1===i[a].call(r,e,t,n))return}catch(e){We(e,r,"errorCaptured hook")}}We(e,t,n)}finally{fe()}}function Ge(e,t,n,r,i){var a;try{(a=n?e.apply(t,n):e.call(t))&&!a._isVue&&h(a)&&!a._handled&&(a.catch((function(e){return Ve(e,r,i+" (Promise/async)")})),a._handled=!0)}catch(e){Ve(e,r,i)}return a}function We(e,t,n){if(B.errorHandler)try{return B.errorHandler.call(null,e,t,n)}catch(t){t!==e&&qe(t,null,"config.errorHandler")}qe(e,t,n)}function qe(e,t,n){if(!q&&!X||"undefined"==typeof console)throw e;console.error(e)}var Xe,Ye=!1,Ze=[],Je=!1;function Qe(){Je=!1;var e=Ze.slice(0);Ze.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&oe(Promise)){var Ke=Promise.resolve();Xe=function(){Ke.then(Qe),$&&setTimeout(L)},Ye=!0}else if(J||"undefined"==typeof MutationObserver||!oe(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Xe="undefined"!=typeof setImmediate&&oe(setImmediate)?function(){setImmediate(Qe)}:function(){setTimeout(Qe,0)};else{var $e=1,et=new MutationObserver(Qe),tt=document.createTextNode(String($e));et.observe(tt,{characterData:!0}),Xe=function(){$e=($e+1)%2,tt.data=String($e)},Ye=!0}function nt(e,t){var n;if(Ze.push((function(){if(e)try{e.call(t)}catch(e){Ve(e,t,"nextTick")}else n&&n(t)})),Je||(Je=!0,Xe()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var rt=new se;function it(e){at(e,rt),rt.clear()}function at(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!o(e)||Object.isFrozen(e)||e instanceof me)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(i)for(n=e.length;n--;)at(e[n],t);else for(n=(r=Object.keys(e)).length;n--;)at(e[r[n]],t)}}var ot=b((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:n,capture:r,passive:t}}));function st(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return Ge(r,null,arguments,t,"v-on handler");for(var i=r.slice(),a=0;a<i.length;a++)Ge(i[a],null,e,t,"v-on handler")}return n.fns=e,n}function lt(e,n,r,a,o,s){var l,c,u,h;for(l in e)c=e[l],u=n[l],h=ot(l),t(c)||(t(u)?(t(c.fns)&&(c=e[l]=st(c,s)),i(h.once)&&(c=e[l]=o(h.name,c,h.capture)),r(h.name,c,h.capture,h.passive,h.params)):c!==u&&(u.fns=c,e[l]=u));for(l in n)t(e[l])&&a((h=ot(l)).name,n[l],h.capture)}function ct(e,n,a){var o;e instanceof me&&(e=e.data.hook||(e.data.hook={}));var s=e[n];function l(){a.apply(this,arguments),g(o.fns,l)}t(s)?o=st([l]):r(s.fns)&&i(s.merged)?(o=s).fns.push(l):o=st([s,l]),o.merged=!0,e[n]=o}function ut(e,t,n,i,a){if(r(t)){if(y(t,n))return e[n]=t[n],a||delete t[n],!0;if(y(t,i))return e[n]=t[i],a||delete t[i],!0}return!1}function ht(e){return a(e)?[_e(e)]:Array.isArray(e)?dt(e):void 0}function pt(e){return r(e)&&r(e.text)&&!1===e.isComment}function dt(e,n){var o,s,l,c,u=[];for(o=0;o<e.length;o++)t(s=e[o])||"boolean"==typeof s||(c=u[l=u.length-1],Array.isArray(s)?s.length>0&&(pt((s=dt(s,(n||"")+"_"+o))[0])&&pt(c)&&(u[l]=_e(c.text+s[0].text),s.shift()),u.push.apply(u,s)):a(s)?pt(c)?u[l]=_e(c.text+s):""!==s&&u.push(_e(s)):pt(s)&&pt(c)?u[l]=_e(c.text+s.text):(i(e._isVList)&&r(s.tag)&&t(s.key)&&r(n)&&(s.key="__vlist"+n+"_"+o+"__"),u.push(s)));return u}function ft(e,t){if(e){for(var n=Object.create(null),r=le?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var a=r[i];if("__ob__"!==a){for(var o=e[a].from,s=t;s;){if(s._provided&&y(s._provided,o)){n[a]=s._provided[o];break}s=s.$parent}if(!s)if("default"in e[a]){var l=e[a].default;n[a]="function"==typeof l?l.call(t):l}else 0}}return n}}function mt(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var a=e[r],o=a.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,a.context!==t&&a.fnContext!==t||!o||null==o.slot)(n.default||(n.default=[])).push(a);else{var s=o.slot,l=n[s]||(n[s]=[]);"template"===a.tag?l.push.apply(l,a.children||[]):l.push(a)}}for(var c in n)n[c].every(vt)&&delete n[c];return n}function vt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function gt(t,n,r){var i,a=Object.keys(n).length>0,o=t?!!t.$stable:!a,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&r&&r!==e&&s===r.$key&&!a&&!r.$hasNormal)return r;for(var l in i={},t)t[l]&&"$"!==l[0]&&(i[l]=_t(n,l,t[l]))}else i={};for(var c in n)c in i||(i[c]=yt(n,c));return t&&Object.isExtensible(t)&&(t._normalized=i),j(i,"$stable",o),j(i,"$key",s),j(i,"$hasNormal",a),i}function _t(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:ht(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function yt(e,t){return function(){return e[t]}}function bt(e,t){var n,i,a,s,l;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),i=0,a=e.length;i<a;i++)n[i]=t(e[i],i);else if("number"==typeof e)for(n=new Array(e),i=0;i<e;i++)n[i]=t(i+1,i);else if(o(e))if(le&&e[Symbol.iterator]){n=[];for(var c=e[Symbol.iterator](),u=c.next();!u.done;)n.push(t(u.value,n.length)),u=c.next()}else for(s=Object.keys(e),n=new Array(s.length),i=0,a=s.length;i<a;i++)l=s[i],n[i]=t(e[l],l,i);return r(n)||(n=[]),n._isVList=!0,n}function xt(e,t,n,r){var i,a=this.$scopedSlots[e];a?(n=n||{},r&&(n=C(C({},r),n)),i=a(n)||t):i=this.$slots[e]||t;var o=n&&n.slot;return o?this.$createElement("template",{slot:o},i):i}function wt(e){return Fe(this.$options,"filters",e)||R}function Mt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function St(e,t,n,r,i){var a=B.keyCodes[t]||n;return i&&r&&!B.keyCodes[t]?Mt(i,r):a?Mt(a,e):r?E(r)!==t:void 0}function Et(e,t,n,r,i){if(n)if(o(n)){var a;Array.isArray(n)&&(n=k(n));var s=function(o){if("class"===o||"style"===o||v(o))a=e;else{var s=e.attrs&&e.attrs.type;a=r||B.mustUseProp(t,s,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=w(o),c=E(o);l in a||c in a||(a[o]=n[o],i&&((e.on||(e.on={}))["update:"+o]=function(e){n[o]=e}))};for(var l in n)s(l)}else;return e}function At(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||Ct(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),r}function Tt(e,t,n){return Ct(e,"__once__"+t+(n?"_"+n:""),!0),e}function Ct(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&kt(e[r],t+"_"+r,n);else kt(e,t,n)}function kt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Lt(e,t){if(t)if(l(t)){var n=e.on=e.on?C({},e.on):{};for(var r in t){var i=n[r],a=t[r];n[r]=i?[].concat(i,a):a}}else;return e}function Pt(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var a=e[i];Array.isArray(a)?Pt(a,t,n):a&&(a.proxy&&(a.fn.proxy=!0),t[a.key]=a.fn)}return r&&(t.$key=r),t}function Rt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"==typeof r&&r&&(e[t[n]]=t[n+1])}return e}function It(e,t){return"string"==typeof e?t+e:e}function zt(e){e._o=Tt,e._n=d,e._s=p,e._l=bt,e._t=xt,e._q=I,e._i=z,e._m=At,e._f=wt,e._k=St,e._b=Et,e._v=_e,e._e=ge,e._u=Pt,e._g=Lt,e._d=Rt,e._p=It}function Ot(t,n,r,a,o){var s,l=this,c=o.options;y(a,"_uid")?(s=Object.create(a))._original=a:(s=a,a=a._original);var u=i(c._compiled),h=!u;this.data=t,this.props=n,this.children=r,this.parent=a,this.listeners=t.on||e,this.injections=ft(c.inject,a),this.slots=function(){return l.$slots||gt(t.scopedSlots,l.$slots=mt(r,a)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return gt(t.scopedSlots,this.slots())}}),u&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=gt(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,n,r){var i=Gt(s,e,t,n,r,h);return i&&!Array.isArray(i)&&(i.fnScopeId=c._scopeId,i.fnContext=a),i}:this._c=function(e,t,n,r){return Gt(s,e,t,n,r,h)}}function Dt(e,t,n,r,i){var a=ye(e);return a.fnContext=n,a.fnOptions=r,t.slot&&((a.data||(a.data={})).slot=t.slot),a}function Nt(e,t){for(var n in t)e[w(n)]=t[n]}zt(Ot.prototype);var Ft={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Ft.prepatch(n,n)}else{var i=e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns);return new e.componentOptions.Ctor(n)}(e,tn);i.$mount(t?e.elm:void 0,t)}},prepatch:function(t,n){var r=n.componentOptions;!function(t,n,r,i,a){0;var o=i.data.scopedSlots,s=t.$scopedSlots,l=!!(o&&!o.$stable||s!==e&&!s.$stable||o&&t.$scopedSlots.$key!==o.$key),c=!!(a||t.$options._renderChildren||l);t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i);if(t.$options._renderChildren=a,t.$attrs=i.data.attrs||e,t.$listeners=r||e,n&&t.$options.props){Se(!1);for(var u=t._props,h=t.$options._propKeys||[],p=0;p<h.length;p++){var d=h[p],f=t.$options.props;u[d]=Be(d,f,n,t)}Se(!0),t.$options.propsData=n}r=r||e;var m=t.$options._parentListeners;t.$options._parentListeners=r,en(t,r,m),c&&(t.$slots=mt(a,i.context),t.$forceUpdate());0}(n.componentInstance=t.componentInstance,r.propsData,r.listeners,n,r.children)},insert:function(e){var t,n=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,sn(r,"mounted")),e.data.keepAlive&&(n._isMounted?((t=r)._inactive=!1,cn.push(t)):an(r,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?on(t,!0):t.$destroy())}},Bt=Object.keys(Ft);function Ut(n,a,s,l,c){if(!t(n)){var u=s.$options._base;if(o(n)&&(n=u.extend(n)),"function"==typeof n){var p;if(t(n.cid)&&(n=function(e,n){if(i(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;var a=Xt;a&&r(e.owners)&&-1===e.owners.indexOf(a)&&e.owners.push(a);if(i(e.loading)&&r(e.loadingComp))return e.loadingComp;if(a&&!r(e.owners)){var s=e.owners=[a],l=!0,c=null,u=null;a.$on("hook:destroyed",(function(){return g(s,a)}));var p=function(e){for(var t=0,n=s.length;t<n;t++)s[t].$forceUpdate();e&&(s.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},d=O((function(t){e.resolved=Yt(t,n),l?s.length=0:p(!0)})),f=O((function(t){r(e.errorComp)&&(e.error=!0,p(!0))})),m=e(d,f);return o(m)&&(h(m)?t(e.resolved)&&m.then(d,f):h(m.component)&&(m.component.then(d,f),r(m.error)&&(e.errorComp=Yt(m.error,n)),r(m.loading)&&(e.loadingComp=Yt(m.loading,n),0===m.delay?e.loading=!0:c=setTimeout((function(){c=null,t(e.resolved)&&t(e.error)&&(e.loading=!0,p(!1))}),m.delay||200)),r(m.timeout)&&(u=setTimeout((function(){u=null,t(e.resolved)&&f(null)}),m.timeout)))),l=!1,e.loading?e.loadingComp:e.resolved}}(p=n,u),void 0===n))return function(e,t,n,r,i){var a=ge();return a.asyncFactory=e,a.asyncMeta={data:t,context:n,children:r,tag:i},a}(p,a,s,l,c);a=a||{},kn(n),r(a.model)&&function(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var a=t.on||(t.on={}),o=a[i],s=t.model.callback;r(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(a[i]=[s].concat(o)):a[i]=s}(n.options,a);var d=function(e,n,i){var a=n.options.props;if(!t(a)){var o={},s=e.attrs,l=e.props;if(r(s)||r(l))for(var c in a){var u=E(c);ut(o,l,c,u,!0)||ut(o,s,c,u,!1)}return o}}(a,n);if(i(n.options.functional))return function(t,n,i,a,o){var s=t.options,l={},c=s.props;if(r(c))for(var u in c)l[u]=Be(u,c,n||e);else r(i.attrs)&&Nt(l,i.attrs),r(i.props)&&Nt(l,i.props);var h=new Ot(i,l,o,a,t),p=s.render.call(null,h._c,h);if(p instanceof me)return Dt(p,i,h.parent,s);if(Array.isArray(p)){for(var d=ht(p)||[],f=new Array(d.length),m=0;m<d.length;m++)f[m]=Dt(d[m],i,h.parent,s);return f}}(n,d,a,s,l);var f=a.on;if(a.on=a.nativeOn,i(n.options.abstract)){var m=a.slot;a={},m&&(a.slot=m)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<Bt.length;n++){var r=Bt[n],i=t[r],a=Ft[r];i===a||i&&i._merged||(t[r]=i?Ht(a,i):a)}}(a);var v=n.options.name||c;return new me("vue-component-"+n.cid+(v?"-"+v:""),a,void 0,void 0,void 0,s,{Ctor:n,propsData:d,listeners:f,tag:c,children:l},p)}}}function Ht(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}var jt=1,Vt=2;function Gt(e,t,n,s,l,c){return(Array.isArray(n)||a(n))&&(l=s,s=n,n=void 0),i(c)&&(l=Vt),function(e,t,n,i,a){if(r(n)&&r(n.__ob__))return ge();r(n)&&r(n.is)&&(t=n.is);if(!t)return ge();0;Array.isArray(i)&&"function"==typeof i[0]&&((n=n||{}).scopedSlots={default:i[0]},i.length=0);a===Vt?i=ht(i):a===jt&&(i=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(i));var s,l;if("string"==typeof t){var c;l=e.$vnode&&e.$vnode.ns||B.getTagNamespace(t),s=B.isReservedTag(t)?new me(B.parsePlatformTagName(t),n,i,void 0,void 0,e):n&&n.pre||!r(c=Fe(e.$options,"components",t))?new me(t,n,i,void 0,void 0,e):Ut(c,n,e,i,t)}else s=Ut(t,n,e,i);return Array.isArray(s)?s:r(s)?(r(l)&&Wt(s,l),r(n)&&function(e){o(e.style)&&it(e.style);o(e.class)&&it(e.class)}(n),s):ge()}(e,t,n,s,l)}function Wt(e,n,a){if(e.ns=n,"foreignObject"===e.tag&&(n=void 0,a=!0),r(e.children))for(var o=0,s=e.children.length;o<s;o++){var l=e.children[o];r(l.tag)&&(t(l.ns)||i(a)&&"svg"!==l.tag)&&Wt(l,n,a)}}var qt,Xt=null;function Yt(e,t){return(e.__esModule||le&&"Module"===e[Symbol.toStringTag])&&(e=e.default),o(e)?t.extend(e):e}function Zt(e){return e.isComment&&e.asyncFactory}function Jt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(r(n)&&(r(n.componentOptions)||Zt(n)))return n}}function Qt(e,t){qt.$on(e,t)}function Kt(e,t){qt.$off(e,t)}function $t(e,t){var n=qt;return function r(){null!==t.apply(null,arguments)&&n.$off(e,r)}}function en(e,t,n){qt=e,lt(t,n||{},Qt,Kt,$t,e),qt=void 0}var tn=null;function nn(e){var t=tn;return tn=e,function(){tn=t}}function rn(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function an(e,t){if(t){if(e._directInactive=!1,rn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)an(e.$children[n]);sn(e,"activated")}}function on(e,t){if(!(t&&(e._directInactive=!0,rn(e))||e._inactive)){e._inactive=!0;for(var n=0;n<e.$children.length;n++)on(e.$children[n]);sn(e,"deactivated")}}function sn(e,t){de();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,a=n.length;i<a;i++)Ge(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),fe()}var ln=[],cn=[],un={},hn=!1,pn=!1,dn=0;var fn=0,mn=Date.now;if(q&&!J){var vn=window.performance;vn&&"function"==typeof vn.now&&mn()>document.createEvent("Event").timeStamp&&(mn=function(){return vn.now()})}function gn(){var e,t;for(fn=mn(),pn=!0,ln.sort((function(e,t){return e.id-t.id})),dn=0;dn<ln.length;dn++)(e=ln[dn]).before&&e.before(),t=e.id,un[t]=null,e.run();var n=cn.slice(),r=ln.slice();dn=ln.length=cn.length=0,un={},hn=pn=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,an(e[t],!0)}(n),function(e){var t=e.length;for(;t--;){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&sn(r,"updated")}}(r),ae&&B.devtools&&ae.emit("flush")}var _n=0,yn=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++_n,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!V.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=L)),this.value=this.lazy?void 0:this.get()};yn.prototype.get=function(){var e;de(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;Ve(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&it(e),fe(),this.cleanupDeps()}return e},yn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},yn.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},yn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==un[t]){if(un[t]=!0,pn){for(var n=ln.length-1;n>dn&&ln[n].id>e.id;)n--;ln.splice(n+1,0,e)}else ln.push(e);hn||(hn=!0,nt(gn))}}(this)},yn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||o(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){Ve(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},yn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},yn.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},yn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var bn={enumerable:!0,configurable:!0,get:L,set:L};function xn(e,t,n){bn.get=function(){return this[t][n]},bn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,bn)}function wn(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],a=!e.$parent;a||Se(!1);var o=function(a){i.push(a);var o=Be(a,t,n,e);Te(r,a,o),a in e||xn(e,"_props",a)};for(var s in t)o(s);Se(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var n in t)e[n]="function"!=typeof t[n]?L:A(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;t=e._data="function"==typeof t?function(e,t){de();try{return e.call(t,t)}catch(e){return Ve(e,t,"data()"),{}}finally{fe()}}(t,e):t||{},l(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);for(;i--;){var a=n[i];0,r&&y(r,a)||H(a)||xn(e,"_data",a)}Ae(t,!0)}(e):Ae(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),r=ie();for(var i in t){var a=t[i],o="function"==typeof a?a:a.get;0,r||(n[i]=new yn(e,o||L,L,Mn)),i in e||Sn(e,i,a)}}(e,t.computed),t.watch&&t.watch!==te&&function(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)Tn(e,n,r[i]);else Tn(e,n,r)}}(e,t.watch)}var Mn={lazy:!0};function Sn(e,t,n){var r=!ie();"function"==typeof n?(bn.get=r?En(t):An(n),bn.set=L):(bn.get=n.get?r&&!1!==n.cache?En(t):An(n.get):L,bn.set=n.set||L),Object.defineProperty(e,t,bn)}function En(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),he.target&&t.depend(),t.value}}function An(e){return function(){return e.call(this,this)}}function Tn(e,t,n,r){return l(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}var Cn=0;function kn(e){var t=e.options;if(e.super){var n=kn(e.super);if(n!==e.superOptions){e.superOptions=n;var r=function(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}(e);r&&C(e.extendOptions,r),(t=e.options=Ne(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function Ln(e){this._init(e)}function Pn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var a=e.name||n.options.name;var o=function(e){this._init(e)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.cid=t++,o.options=Ne(n.options,e),o.super=n,o.options.props&&function(e){var t=e.options.props;for(var n in t)xn(e.prototype,"_props",n)}(o),o.options.computed&&function(e){var t=e.options.computed;for(var n in t)Sn(e.prototype,n,t[n])}(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,N.forEach((function(e){o[e]=n[e]})),a&&(o.options.components[a]=o),o.superOptions=n.options,o.extendOptions=e,o.sealedOptions=C({},o.options),i[r]=o,o}}function Rn(e){return e&&(e.Ctor.options.name||e.tag)}function In(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!c(e)&&e.test(t)}function zn(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var a in n){var o=n[a];if(o){var s=Rn(o.componentOptions);s&&!t(s)&&On(n,a,r,i)}}}function On(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,g(n,t)}!function(t){t.prototype._init=function(t){var n=this;n._uid=Cn++,n._isVue=!0,t&&t._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(n,t):n.$options=Ne(kn(n.constructor),t||{},n),n._renderProxy=n,n._self=n,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(n),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&en(e,t)}(n),function(t){t._vnode=null,t._staticTrees=null;var n=t.$options,r=t.$vnode=n._parentVnode,i=r&&r.context;t.$slots=mt(n._renderChildren,i),t.$scopedSlots=e,t._c=function(e,n,r,i){return Gt(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return Gt(t,e,n,r,i,!0)};var a=r&&r.data;Te(t,"$attrs",a&&a.attrs||e,null,!0),Te(t,"$listeners",n._parentListeners||e,null,!0)}(n),sn(n,"beforeCreate"),function(e){var t=ft(e.$options.inject,e);t&&(Se(!1),Object.keys(t).forEach((function(n){Te(e,n,t[n])})),Se(!0))}(n),wn(n),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(n),sn(n,"created"),n.$options.el&&n.$mount(n.$options.el)}}(Ln),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ce,e.prototype.$delete=ke,e.prototype.$watch=function(e,t,n){var r=this;if(l(t))return Tn(r,e,t,n);(n=n||{}).user=!0;var i=new yn(r,e,t,n);if(n.immediate)try{t.call(r,i.value)}catch(e){Ve(e,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(Ln),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var a,o=n._events[e];if(!o)return n;if(!t)return n._events[e]=null,n;for(var s=o.length;s--;)if((a=o[s])===t||a.fn===t){o.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?T(n):n;for(var r=T(arguments,1),i='event handler for "'+e+'"',a=0,o=n.length;a<o;a++)Ge(n[a],t,r,t,i)}return t}}(Ln),function(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,a=nn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),a(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){sn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||g(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),sn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Ln),function(e){zt(e.prototype),e.prototype.$nextTick=function(e){return nt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=gt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{Xt=t,e=r.call(t._renderProxy,t.$createElement)}catch(n){Ve(n,t,"render"),e=t._vnode}finally{Xt=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof me||(e=ge()),e.parent=i,e}}(Ln);var Dn=[String,RegExp,Array],Nn={name:"keep-alive",abstract:!0,props:{include:Dn,exclude:Dn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)On(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){zn(e,(function(e){return In(t,e)}))})),this.$watch("exclude",(function(t){zn(e,(function(e){return!In(t,e)}))}))},render:function(){var e=this.$slots.default,t=Jt(e),n=t&&t.componentOptions;if(n){var r=Rn(n),i=this.include,a=this.exclude;if(i&&(!r||!In(i,r))||a&&r&&In(a,r))return t;var o=this.cache,s=this.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;o[l]?(t.componentInstance=o[l].componentInstance,g(s,l),s.push(l)):(o[l]=t,s.push(l),this.max&&s.length>parseInt(this.max)&&On(o,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Fn={KeepAlive:Nn};!function(e){var t={get:function(){return B}};Object.defineProperty(e,"config",t),e.util={warn:ce,extend:C,mergeOptions:Ne,defineReactive:Te},e.set=Ce,e.delete=ke,e.nextTick=nt,e.observable=function(e){return Ae(e),e},e.options=Object.create(null),N.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,C(e.options.components,Fn),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=T(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Ne(this.options,e),this}}(e),Pn(e),function(e){N.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(Ln),Object.defineProperty(Ln.prototype,"$isServer",{get:ie}),Object.defineProperty(Ln.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ln,"FunctionalRenderContext",{value:Ot}),Ln.version="2.6.12";var Bn=f("style,class"),Un=f("input,textarea,option,select,progress"),Hn=function(e,t,n){return"value"===n&&Un(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},jn=f("contenteditable,draggable,spellcheck"),Vn=f("events,caret,typing,plaintext-only"),Gn=function(e,t){return Zn(t)||"false"===t?"false":"contenteditable"===e&&Vn(t)?t:"true"},Wn=f("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),qn="http://www.w3.org/1999/xlink",Xn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Yn=function(e){return Xn(e)?e.slice(6,e.length):""},Zn=function(e){return null==e||!1===e};function Jn(e){for(var t=e.data,n=e,i=e;r(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(t=Qn(i.data,t));for(;r(n=n.parent);)n&&n.data&&(t=Qn(t,n.data));return function(e,t){if(r(e)||r(t))return Kn(e,$n(t));return""}(t.staticClass,t.class)}function Qn(e,t){return{staticClass:Kn(e.staticClass,t.staticClass),class:r(e.class)?[e.class,t.class]:t.class}}function Kn(e,t){return e?t?e+" "+t:e:t||""}function $n(e){return Array.isArray(e)?function(e){for(var t,n="",i=0,a=e.length;i<a;i++)r(t=$n(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):o(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var er={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},tr=f("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),nr=f("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),rr=function(e){return tr(e)||nr(e)};function ir(e){return nr(e)?"svg":"math"===e?"math":void 0}var ar=Object.create(null);var or=f("text,number,password,search,email,tel,url");function sr(e){if("string"==typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}var lr=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(er[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),cr={create:function(e,t){ur(t)},update:function(e,t){e.data.ref!==t.data.ref&&(ur(e,!0),ur(t))},destroy:function(e){ur(e,!0)}};function ur(e,t){var n=e.data.ref;if(r(n)){var i=e.context,a=e.componentInstance||e.elm,o=i.$refs;t?Array.isArray(o[n])?g(o[n],a):o[n]===a&&(o[n]=void 0):e.data.refInFor?Array.isArray(o[n])?o[n].indexOf(a)<0&&o[n].push(a):o[n]=[a]:o[n]=a}}var hr=new me("",{},[]),pr=["create","activate","update","remove","destroy"];function dr(e,n){return e.key===n.key&&(e.tag===n.tag&&e.isComment===n.isComment&&r(e.data)===r(n.data)&&function(e,t){if("input"!==e.tag)return!0;var n,i=r(n=e.data)&&r(n=n.attrs)&&n.type,a=r(n=t.data)&&r(n=n.attrs)&&n.type;return i===a||or(i)&&or(a)}(e,n)||i(e.isAsyncPlaceholder)&&e.asyncFactory===n.asyncFactory&&t(n.asyncFactory.error))}function fr(e,t,n){var i,a,o={};for(i=t;i<=n;++i)r(a=e[i].key)&&(o[a]=i);return o}var mr={create:vr,update:vr,destroy:function(e){vr(e,hr)}};function vr(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,r,i,a=e===hr,o=t===hr,s=_r(e.data.directives,e.context),l=_r(t.data.directives,t.context),c=[],u=[];for(n in l)r=s[n],i=l[n],r?(i.oldValue=r.value,i.oldArg=r.arg,br(i,"update",t,e),i.def&&i.def.componentUpdated&&u.push(i)):(br(i,"bind",t,e),i.def&&i.def.inserted&&c.push(i));if(c.length){var h=function(){for(var n=0;n<c.length;n++)br(c[n],"inserted",t,e)};a?ct(t,"insert",h):h()}u.length&&ct(t,"postpatch",(function(){for(var n=0;n<u.length;n++)br(u[n],"componentUpdated",t,e)}));if(!a)for(n in s)l[n]||br(s[n],"unbind",e,e,o)}(e,t)}var gr=Object.create(null);function _r(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)(r=e[n]).modifiers||(r.modifiers=gr),i[yr(r)]=r,r.def=Fe(t.$options,"directives",r.name);return i}function yr(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function br(e,t,n,r,i){var a=e.def&&e.def[t];if(a)try{a(n.elm,e,n,r,i)}catch(r){Ve(r,n.context,"directive "+e.name+" "+t+" hook")}}var xr=[cr,mr];function wr(e,n){var i=n.componentOptions;if(!(r(i)&&!1===i.Ctor.options.inheritAttrs||t(e.data.attrs)&&t(n.data.attrs))){var a,o,s=n.elm,l=e.data.attrs||{},c=n.data.attrs||{};for(a in r(c.__ob__)&&(c=n.data.attrs=C({},c)),c)o=c[a],l[a]!==o&&Mr(s,a,o);for(a in(J||K)&&c.value!==l.value&&Mr(s,"value",c.value),l)t(c[a])&&(Xn(a)?s.removeAttributeNS(qn,Yn(a)):jn(a)||s.removeAttribute(a))}}function Mr(e,t,n){e.tagName.indexOf("-")>-1?Sr(e,t,n):Wn(t)?Zn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):jn(t)?e.setAttribute(t,Gn(t,n)):Xn(t)?Zn(n)?e.removeAttributeNS(qn,Yn(t)):e.setAttributeNS(qn,t,n):Sr(e,t,n)}function Sr(e,t,n){if(Zn(n))e.removeAttribute(t);else{if(J&&!Q&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Er={create:wr,update:wr};function Ar(e,n){var i=n.elm,a=n.data,o=e.data;if(!(t(a.staticClass)&&t(a.class)&&(t(o)||t(o.staticClass)&&t(o.class)))){var s=Jn(n),l=i._transitionClasses;r(l)&&(s=Kn(s,$n(l))),s!==i._prevClass&&(i.setAttribute("class",s),i._prevClass=s)}}var Tr,Cr,kr,Lr,Pr,Rr,Ir={create:Ar,update:Ar},zr=/[\w).+\-_$\]]/;function Or(e){var t,n,r,i,a,o=!1,s=!1,l=!1,c=!1,u=0,h=0,p=0,d=0;for(r=0;r<e.length;r++)if(n=t,t=e.charCodeAt(r),o)39===t&&92!==n&&(o=!1);else if(s)34===t&&92!==n&&(s=!1);else if(l)96===t&&92!==n&&(l=!1);else if(c)47===t&&92!==n&&(c=!1);else if(124!==t||124===e.charCodeAt(r+1)||124===e.charCodeAt(r-1)||u||h||p){switch(t){case 34:s=!0;break;case 39:o=!0;break;case 96:l=!0;break;case 40:p++;break;case 41:p--;break;case 91:h++;break;case 93:h--;break;case 123:u++;break;case 125:u--}if(47===t){for(var f=r-1,m=void 0;f>=0&&" "===(m=e.charAt(f));f--);m&&zr.test(m)||(c=!0)}}else void 0===i?(d=r+1,i=e.slice(0,r).trim()):v();function v(){(a||(a=[])).push(e.slice(d,r).trim()),d=r+1}if(void 0===i?i=e.slice(0,r).trim():0!==d&&v(),a)for(r=0;r<a.length;r++)i=Dr(i,a[r]);return i}function Dr(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+(")"!==i?","+i:i)}function Nr(e,t){console.error("[Vue compiler]: "+e)}function Fr(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function Br(e,t,n,r,i){(e.props||(e.props=[])).push(Yr({name:t,value:n,dynamic:i},r)),e.plain=!1}function Ur(e,t,n,r,i){(i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Yr({name:t,value:n,dynamic:i},r)),e.plain=!1}function Hr(e,t,n,r){e.attrsMap[t]=n,e.attrsList.push(Yr({name:t,value:n},r))}function jr(e,t,n,r,i,a,o,s){(e.directives||(e.directives=[])).push(Yr({name:t,rawName:n,value:r,arg:i,isDynamicArg:a,modifiers:o},s)),e.plain=!1}function Vr(e,t,n){return n?"_p("+t+',"'+e+'")':e+t}function Gr(t,n,r,i,a,o,s,l){var c;(i=i||e).right?l?n="("+n+")==='click'?'contextmenu':("+n+")":"click"===n&&(n="contextmenu",delete i.right):i.middle&&(l?n="("+n+")==='click'?'mouseup':("+n+")":"click"===n&&(n="mouseup")),i.capture&&(delete i.capture,n=Vr("!",n,l)),i.once&&(delete i.once,n=Vr("~",n,l)),i.passive&&(delete i.passive,n=Vr("&",n,l)),i.native?(delete i.native,c=t.nativeEvents||(t.nativeEvents={})):c=t.events||(t.events={});var u=Yr({value:r.trim(),dynamic:l},s);i!==e&&(u.modifiers=i);var h=c[n];Array.isArray(h)?a?h.unshift(u):h.push(u):c[n]=h?a?[u,h]:[h,u]:u,t.plain=!1}function Wr(e,t,n){var r=qr(e,":"+t)||qr(e,"v-bind:"+t);if(null!=r)return Or(r);if(!1!==n){var i=qr(e,t);if(null!=i)return JSON.stringify(i)}}function qr(e,t,n){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,a=0,o=i.length;a<o;a++)if(i[a].name===t){i.splice(a,1);break}return n&&delete e.attrsMap[t],r}function Xr(e,t){for(var n=e.attrsList,r=0,i=n.length;r<i;r++){var a=n[r];if(t.test(a.name))return n.splice(r,1),a}}function Yr(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function Zr(e,t,n){var r=n||{},i=r.number,a="$$v",o=a;r.trim&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(o="_n("+o+")");var s=Jr(t,o);e.model={value:"("+t+")",expression:JSON.stringify(t),callback:"function ($$v) {"+s+"}"}}function Jr(e,t){var n=function(e){if(e=e.trim(),Tr=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Tr-1)return(Lr=e.lastIndexOf("."))>-1?{exp:e.slice(0,Lr),key:'"'+e.slice(Lr+1)+'"'}:{exp:e,key:null};Cr=e,Lr=Pr=Rr=0;for(;!Kr();)$r(kr=Qr())?ti(kr):91===kr&&ei(kr);return{exp:e.slice(0,Pr),key:e.slice(Pr+1,Rr)}}(e);return null===n.key?e+"="+t:"$set("+n.exp+", "+n.key+", "+t+")"}function Qr(){return Cr.charCodeAt(++Lr)}function Kr(){return Lr>=Tr}function $r(e){return 34===e||39===e}function ei(e){var t=1;for(Pr=Lr;!Kr();)if($r(e=Qr()))ti(e);else if(91===e&&t++,93===e&&t--,0===t){Rr=Lr;break}}function ti(e){for(var t=e;!Kr()&&(e=Qr())!==t;);}var ni,ri="__r",ii="__c";function ai(e,t,n){var r=ni;return function i(){null!==t.apply(null,arguments)&&li(e,i,n,r)}}var oi=Ye&&!(ee&&Number(ee[1])<=53);function si(e,t,n,r){if(oi){var i=fn,a=t;t=a._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return a.apply(this,arguments)}}ni.addEventListener(e,t,ne?{capture:n,passive:r}:n)}function li(e,t,n,r){(r||ni).removeEventListener(e,t._wrapper||t,n)}function ci(e,n){if(!t(e.data.on)||!t(n.data.on)){var i=n.data.on||{},a=e.data.on||{};ni=n.elm,function(e){if(r(e[ri])){var t=J?"change":"input";e[t]=[].concat(e[ri],e[t]||[]),delete e[ri]}r(e[ii])&&(e.change=[].concat(e[ii],e.change||[]),delete e[ii])}(i),lt(i,a,si,li,ai,n.context),ni=void 0}}var ui,hi={create:ci,update:ci};function pi(e,n){if(!t(e.data.domProps)||!t(n.data.domProps)){var i,a,o=n.elm,s=e.data.domProps||{},l=n.data.domProps||{};for(i in r(l.__ob__)&&(l=n.data.domProps=C({},l)),s)i in l||(o[i]="");for(i in l){if(a=l[i],"textContent"===i||"innerHTML"===i){if(n.children&&(n.children.length=0),a===s[i])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===i&&"PROGRESS"!==o.tagName){o._value=a;var c=t(a)?"":String(a);di(o,c)&&(o.value=c)}else if("innerHTML"===i&&nr(o.tagName)&&t(o.innerHTML)){(ui=ui||document.createElement("div")).innerHTML="<svg>"+a+"</svg>";for(var u=ui.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}else if(a!==s[i])try{o[i]=a}catch(e){}}}}function di(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,i=e._vModifiers;if(r(i)){if(i.number)return d(n)!==d(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var fi={create:pi,update:pi},mi=b((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function vi(e){var t=gi(e.style);return e.staticStyle?C(e.staticStyle,t):t}function gi(e){return Array.isArray(e)?k(e):"string"==typeof e?mi(e):e}var _i,yi=/^--/,bi=/\s*!important$/,xi=function(e,t,n){if(yi.test(t))e.style.setProperty(t,n);else if(bi.test(n))e.style.setProperty(E(t),n.replace(bi,""),"important");else{var r=Mi(t);if(Array.isArray(n))for(var i=0,a=n.length;i<a;i++)e.style[r]=n[i];else e.style[r]=n}},wi=["Webkit","Moz","ms"],Mi=b((function(e){if(_i=_i||document.createElement("div").style,"filter"!==(e=w(e))&&e in _i)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<wi.length;n++){var r=wi[n]+t;if(r in _i)return r}}));function Si(e,n){var i=n.data,a=e.data;if(!(t(i.staticStyle)&&t(i.style)&&t(a.staticStyle)&&t(a.style))){var o,s,l=n.elm,c=a.staticStyle,u=a.normalizedStyle||a.style||{},h=c||u,p=gi(n.data.style)||{};n.data.normalizedStyle=r(p.__ob__)?C({},p):p;var d=function(e,t){var n,r={};if(t)for(var i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=vi(i.data))&&C(r,n);(n=vi(e.data))&&C(r,n);for(var a=e;a=a.parent;)a.data&&(n=vi(a.data))&&C(r,n);return r}(n,!0);for(s in h)t(d[s])&&xi(l,s,"");for(s in d)(o=d[s])!==h[s]&&xi(l,s,null==o?"":o)}}var Ei={create:Si,update:Si},Ai=/\s+/;function Ti(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ai).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Ci(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ai).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function ki(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&C(t,Li(e.name||"v")),C(t,e),t}return"string"==typeof e?Li(e):void 0}}var Li=b((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Pi=q&&!Q,Ri="transition",Ii="animation",zi="transition",Oi="transitionend",Di="animation",Ni="animationend";Pi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(zi="WebkitTransition",Oi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Di="WebkitAnimation",Ni="webkitAnimationEnd"));var Fi=q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Bi(e){Fi((function(){Fi(e)}))}function Ui(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Ti(e,t))}function Hi(e,t){e._transitionClasses&&g(e._transitionClasses,t),Ci(e,t)}function ji(e,t,n){var r=Gi(e,t),i=r.type,a=r.timeout,o=r.propCount;if(!i)return n();var s=i===Ri?Oi:Ni,l=0,c=function(){e.removeEventListener(s,u),n()},u=function(t){t.target===e&&++l>=o&&c()};setTimeout((function(){l<o&&c()}),a+1),e.addEventListener(s,u)}var Vi=/\b(transform|all)(,|$)/;function Gi(e,t){var n,r=window.getComputedStyle(e),i=(r[zi+"Delay"]||"").split(", "),a=(r[zi+"Duration"]||"").split(", "),o=Wi(i,a),s=(r[Di+"Delay"]||"").split(", "),l=(r[Di+"Duration"]||"").split(", "),c=Wi(s,l),u=0,h=0;return t===Ri?o>0&&(n=Ri,u=o,h=a.length):t===Ii?c>0&&(n=Ii,u=c,h=l.length):h=(n=(u=Math.max(o,c))>0?o>c?Ri:Ii:null)?n===Ri?a.length:l.length:0,{type:n,timeout:u,propCount:h,hasTransform:n===Ri&&Vi.test(r[zi+"Property"])}}function Wi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return qi(t)+qi(e[n])})))}function qi(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Xi(e,n){var i=e.elm;r(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var a=ki(e.data.transition);if(!t(a)&&!r(i._enterCb)&&1===i.nodeType){for(var s=a.css,l=a.type,c=a.enterClass,u=a.enterToClass,h=a.enterActiveClass,p=a.appearClass,f=a.appearToClass,m=a.appearActiveClass,v=a.beforeEnter,g=a.enter,_=a.afterEnter,y=a.enterCancelled,b=a.beforeAppear,x=a.appear,w=a.afterAppear,M=a.appearCancelled,S=a.duration,E=tn,A=tn.$vnode;A&&A.parent;)E=A.context,A=A.parent;var T=!E._isMounted||!e.isRootInsert;if(!T||x||""===x){var C=T&&p?p:c,k=T&&m?m:h,L=T&&f?f:u,P=T&&b||v,R=T&&"function"==typeof x?x:g,I=T&&w||_,z=T&&M||y,D=d(o(S)?S.enter:S);0;var N=!1!==s&&!Q,F=Ji(R),B=i._enterCb=O((function(){N&&(Hi(i,L),Hi(i,k)),B.cancelled?(N&&Hi(i,C),z&&z(i)):I&&I(i),i._enterCb=null}));e.data.show||ct(e,"insert",(function(){var t=i.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),R&&R(i,B)})),P&&P(i),N&&(Ui(i,C),Ui(i,k),Bi((function(){Hi(i,C),B.cancelled||(Ui(i,L),F||(Zi(D)?setTimeout(B,D):ji(i,l,B)))}))),e.data.show&&(n&&n(),R&&R(i,B)),N||F||B()}}}function Yi(e,n){var i=e.elm;r(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var a=ki(e.data.transition);if(t(a)||1!==i.nodeType)return n();if(!r(i._leaveCb)){var s=a.css,l=a.type,c=a.leaveClass,u=a.leaveToClass,h=a.leaveActiveClass,p=a.beforeLeave,f=a.leave,m=a.afterLeave,v=a.leaveCancelled,g=a.delayLeave,_=a.duration,y=!1!==s&&!Q,b=Ji(f),x=d(o(_)?_.leave:_);0;var w=i._leaveCb=O((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),y&&(Hi(i,u),Hi(i,h)),w.cancelled?(y&&Hi(i,c),v&&v(i)):(n(),m&&m(i)),i._leaveCb=null}));g?g(M):M()}function M(){w.cancelled||(!e.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),p&&p(i),y&&(Ui(i,c),Ui(i,h),Bi((function(){Hi(i,c),w.cancelled||(Ui(i,u),b||(Zi(x)?setTimeout(w,x):ji(i,l,w)))}))),f&&f(i,w),y||b||w())}}function Zi(e){return"number"==typeof e&&!isNaN(e)}function Ji(e){if(t(e))return!1;var n=e.fns;return r(n)?Ji(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function Qi(e,t){!0!==t.data.show&&Xi(t)}var Ki=function(e){var n,o,s={},l=e.modules,c=e.nodeOps;for(n=0;n<pr.length;++n)for(s[pr[n]]=[],o=0;o<l.length;++o)r(l[o][pr[n]])&&s[pr[n]].push(l[o][pr[n]]);function u(e){var t=c.parentNode(e);r(t)&&c.removeChild(t,e)}function h(e,t,n,a,o,l,u){if(r(e.elm)&&r(l)&&(e=l[u]=ye(e)),e.isRootInsert=!o,!function(e,t,n,a){var o=e.data;if(r(o)){var l=r(e.componentInstance)&&o.keepAlive;if(r(o=o.hook)&&r(o=o.init)&&o(e,!1),r(e.componentInstance))return p(e,t),d(n,e.elm,a),i(l)&&function(e,t,n,i){var a,o=e;for(;o.componentInstance;)if(r(a=(o=o.componentInstance._vnode).data)&&r(a=a.transition)){for(a=0;a<s.activate.length;++a)s.activate[a](hr,o);t.push(o);break}d(n,e.elm,i)}(e,t,n,a),!0}}(e,t,n,a)){var h=e.data,f=e.children,v=e.tag;r(v)?(e.elm=e.ns?c.createElementNS(e.ns,v):c.createElement(v,e),_(e),m(e,f,t),r(h)&&g(e,t),d(n,e.elm,a)):i(e.isComment)?(e.elm=c.createComment(e.text),d(n,e.elm,a)):(e.elm=c.createTextNode(e.text),d(n,e.elm,a))}}function p(e,t){r(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,v(e)?(g(e,t),_(e)):(ur(e),t.push(e))}function d(e,t,n){r(e)&&(r(n)?c.parentNode(n)===e&&c.insertBefore(e,t,n):c.appendChild(e,t))}function m(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)h(t[r],n,e.elm,null,!0,t,r)}else a(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function v(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return r(e.tag)}function g(e,t){for(var i=0;i<s.create.length;++i)s.create[i](hr,e);r(n=e.data.hook)&&(r(n.create)&&n.create(hr,e),r(n.insert)&&t.push(e))}function _(e){var t;if(r(t=e.fnScopeId))c.setStyleScope(e.elm,t);else for(var n=e;n;)r(t=n.context)&&r(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t),n=n.parent;r(t=tn)&&t!==e.context&&t!==e.fnContext&&r(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t)}function y(e,t,n,r,i,a){for(;r<=i;++r)h(n[r],a,e,t,!1,n,r)}function b(e){var t,n,i=e.data;if(r(i))for(r(t=i.hook)&&r(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(r(t=e.children))for(n=0;n<e.children.length;++n)b(e.children[n])}function x(e,t,n){for(;t<=n;++t){var i=e[t];r(i)&&(r(i.tag)?(w(i),b(i)):u(i.elm))}}function w(e,t){if(r(t)||r(e.data)){var n,i=s.remove.length+1;for(r(t)?t.listeners+=i:t=function(e,t){function n(){0==--n.listeners&&u(e)}return n.listeners=t,n}(e.elm,i),r(n=e.componentInstance)&&r(n=n._vnode)&&r(n.data)&&w(n,t),n=0;n<s.remove.length;++n)s.remove[n](e,t);r(n=e.data.hook)&&r(n=n.remove)?n(e,t):t()}else u(e.elm)}function M(e,t,n,i){for(var a=n;a<i;a++){var o=t[a];if(r(o)&&dr(e,o))return a}}function S(e,n,a,o,l,u){if(e!==n){r(n.elm)&&r(o)&&(n=o[l]=ye(n));var p=n.elm=e.elm;if(i(e.isAsyncPlaceholder))r(n.asyncFactory.resolved)?T(e.elm,n,a):n.isAsyncPlaceholder=!0;else if(i(n.isStatic)&&i(e.isStatic)&&n.key===e.key&&(i(n.isCloned)||i(n.isOnce)))n.componentInstance=e.componentInstance;else{var d,f=n.data;r(f)&&r(d=f.hook)&&r(d=d.prepatch)&&d(e,n);var m=e.children,g=n.children;if(r(f)&&v(n)){for(d=0;d<s.update.length;++d)s.update[d](e,n);r(d=f.hook)&&r(d=d.update)&&d(e,n)}t(n.text)?r(m)&&r(g)?m!==g&&function(e,n,i,a,o){var s,l,u,p=0,d=0,f=n.length-1,m=n[0],v=n[f],g=i.length-1,_=i[0],b=i[g],w=!o;for(;p<=f&&d<=g;)t(m)?m=n[++p]:t(v)?v=n[--f]:dr(m,_)?(S(m,_,a,i,d),m=n[++p],_=i[++d]):dr(v,b)?(S(v,b,a,i,g),v=n[--f],b=i[--g]):dr(m,b)?(S(m,b,a,i,g),w&&c.insertBefore(e,m.elm,c.nextSibling(v.elm)),m=n[++p],b=i[--g]):dr(v,_)?(S(v,_,a,i,d),w&&c.insertBefore(e,v.elm,m.elm),v=n[--f],_=i[++d]):(t(s)&&(s=fr(n,p,f)),t(l=r(_.key)?s[_.key]:M(_,n,p,f))?h(_,a,e,m.elm,!1,i,d):dr(u=n[l],_)?(S(u,_,a,i,d),n[l]=void 0,w&&c.insertBefore(e,u.elm,m.elm)):h(_,a,e,m.elm,!1,i,d),_=i[++d]);p>f?y(e,t(i[g+1])?null:i[g+1].elm,i,d,g,a):d>g&&x(n,p,f)}(p,m,g,a,u):r(g)?(r(e.text)&&c.setTextContent(p,""),y(p,null,g,0,g.length-1,a)):r(m)?x(m,0,m.length-1):r(e.text)&&c.setTextContent(p,""):e.text!==n.text&&c.setTextContent(p,n.text),r(f)&&r(d=f.hook)&&r(d=d.postpatch)&&d(e,n)}}}function E(e,t,n){if(i(n)&&r(e.parent))e.parent.data.pendingInsert=t;else for(var a=0;a<t.length;++a)t[a].data.hook.insert(t[a])}var A=f("attrs,class,staticClass,staticStyle,key");function T(e,t,n,a){var o,s=t.tag,l=t.data,c=t.children;if(a=a||l&&l.pre,t.elm=e,i(t.isComment)&&r(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(r(l)&&(r(o=l.hook)&&r(o=o.init)&&o(t,!0),r(o=t.componentInstance)))return p(t,n),!0;if(r(s)){if(r(c))if(e.hasChildNodes())if(r(o=l)&&r(o=o.domProps)&&r(o=o.innerHTML)){if(o!==e.innerHTML)return!1}else{for(var u=!0,h=e.firstChild,d=0;d<c.length;d++){if(!h||!T(h,c[d],n,a)){u=!1;break}h=h.nextSibling}if(!u||h)return!1}else m(t,c,n);if(r(l)){var f=!1;for(var v in l)if(!A(v)){f=!0,g(t,n);break}!f&&l.class&&it(l.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,n,a,o){if(!t(n)){var l,u=!1,p=[];if(t(e))u=!0,h(n,p);else{var d=r(e.nodeType);if(!d&&dr(e,n))S(e,n,p,null,null,o);else{if(d){if(1===e.nodeType&&e.hasAttribute(D)&&(e.removeAttribute(D),a=!0),i(a)&&T(e,n,p))return E(n,p,!0),e;l=e,e=new me(c.tagName(l).toLowerCase(),{},[],void 0,l)}var f=e.elm,m=c.parentNode(f);if(h(n,p,f._leaveCb?null:m,c.nextSibling(f)),r(n.parent))for(var g=n.parent,_=v(n);g;){for(var y=0;y<s.destroy.length;++y)s.destroy[y](g);if(g.elm=n.elm,_){for(var w=0;w<s.create.length;++w)s.create[w](hr,g);var M=g.data.hook.insert;if(M.merged)for(var A=1;A<M.fns.length;A++)M.fns[A]()}else ur(g);g=g.parent}r(m)?x([e],0,0):r(e.tag)&&b(e)}}return E(n,p,u),n.elm}r(e)&&b(e)}}({nodeOps:lr,modules:[Er,Ir,hi,fi,Ei,q?{create:Qi,activate:Qi,remove:function(e,t){!0!==e.data.show?Yi(e,t):t()}}:{}].concat(xr)});Q&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&oa(e,"input")}));var $i={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ct(n,"postpatch",(function(){$i.componentUpdated(e,t,n)})):ea(e,t,n.context),e._vOptions=[].map.call(e.options,ra)):("textarea"===n.tag||or(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",ia),e.addEventListener("compositionend",aa),e.addEventListener("change",aa),Q&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){ea(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,ra);if(i.some((function(e,t){return!I(e,r[t])})))(e.multiple?t.value.some((function(e){return na(e,i)})):t.value!==t.oldValue&&na(t.value,i))&&oa(e,"change")}}};function ea(e,t,n){ta(e,t,n),(J||K)&&setTimeout((function(){ta(e,t,n)}),0)}function ta(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var a,o,s=0,l=e.options.length;s<l;s++)if(o=e.options[s],i)a=z(r,ra(o))>-1,o.selected!==a&&(o.selected=a);else if(I(ra(o),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function na(e,t){return t.every((function(t){return!I(t,e)}))}function ra(e){return"_value"in e?e._value:e.value}function ia(e){e.target.composing=!0}function aa(e){e.target.composing&&(e.target.composing=!1,oa(e.target,"input"))}function oa(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function sa(e){return!e.componentInstance||e.data&&e.data.transition?e:sa(e.componentInstance._vnode)}var la={bind:function(e,t,n){var r=t.value,i=(n=sa(n)).data&&n.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Xi(n,(function(){e.style.display=a}))):e.style.display=r?a:"none"},update:function(e,t,n){var r=t.value;!r!=!t.oldValue&&((n=sa(n)).data&&n.data.transition?(n.data.show=!0,r?Xi(n,(function(){e.style.display=e.__vOriginalDisplay})):Yi(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},ca={model:$i,show:la},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ha(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?ha(Jt(t.children)):e}function pa(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var a in i)t[w(a)]=i[a];return t}function da(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var fa=function(e){return e.tag||Zt(e)},ma=function(e){return"show"===e.name},va={name:"transition",props:ua,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(fa)).length){0;var r=this.mode;0;var i=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return i;var o=ha(i);if(!o)return i;if(this._leaving)return da(e,i);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var l=(o.data||(o.data={})).transition=pa(this),c=this._vnode,u=ha(c);if(o.data.directives&&o.data.directives.some(ma)&&(o.data.show=!0),u&&u.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,u)&&!Zt(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=C({},l);if("out-in"===r)return this._leaving=!0,ct(h,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),da(e,i);if("in-out"===r){if(Zt(o))return c;var p,d=function(){p()};ct(l,"afterEnter",d),ct(l,"enterCancelled",d),ct(h,"delayLeave",(function(e){p=e}))}}return i}}},ga=C({tag:String,moveClass:String},ua);delete ga.mode;var _a={props:ga,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=nn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],a=this.children=[],o=pa(this),s=0;s<i.length;s++){var l=i[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))a.push(l),n[l.key]=l,(l.data||(l.data={})).transition=o;else;}if(r){for(var c=[],u=[],h=0;h<r.length;h++){var p=r[h];p.data.transition=o,p.data.pos=p.elm.getBoundingClientRect(),n[p.key]?c.push(p):u.push(p)}this.kept=e(t,null,c),this.removed=u}return e(t,null,a)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ya),e.forEach(ba),e.forEach(xa),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;Ui(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Oi,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Oi,e),n._moveCb=null,Hi(n,t))})}})))},methods:{hasMove:function(e,t){if(!Pi)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Ci(n,e)})),Ti(n,t),n.style.display="none",this.$el.appendChild(n);var r=Gi(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ya(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ba(e){e.data.newPos=e.elm.getBoundingClientRect()}function xa(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate("+r+"px,"+i+"px)",a.transitionDuration="0s"}}var wa={Transition:va,TransitionGroup:_a};Ln.config.mustUseProp=Hn,Ln.config.isReservedTag=rr,Ln.config.isReservedAttr=Bn,Ln.config.getTagNamespace=ir,Ln.config.isUnknownElement=function(e){if(!q)return!0;if(rr(e))return!1;if(e=e.toLowerCase(),null!=ar[e])return ar[e];var t=document.createElement(e);return e.indexOf("-")>-1?ar[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ar[e]=/HTMLUnknownElement/.test(t.toString())},C(Ln.options.directives,ca),C(Ln.options.components,wa),Ln.prototype.__patch__=q?Ki:L,Ln.prototype.$mount=function(e,t){return function(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=ge),sn(e,"beforeMount"),r=function(){e._update(e._render(),n)},new yn(e,r,L,{before:function(){e._isMounted&&!e._isDestroyed&&sn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,sn(e,"mounted")),e}(this,e=e&&q?sr(e):void 0,t)},q&&setTimeout((function(){B.devtools&&ae&&ae.emit("init",Ln)}),0);var Ma=/\{\{((?:.|\r?\n)+?)\}\}/g,Sa=/[-.*+?^${}()|[\]\/\\]/g,Ea=b((function(e){var t=e[0].replace(Sa,"\\$&"),n=e[1].replace(Sa,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}));var Aa={staticKeys:["staticClass"],transformNode:function(e,t){t.warn;var n=qr(e,"class");n&&(e.staticClass=JSON.stringify(n));var r=Wr(e,"class",!1);r&&(e.classBinding=r)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}};var Ta,Ca={staticKeys:["staticStyle"],transformNode:function(e,t){t.warn;var n=qr(e,"style");n&&(e.staticStyle=JSON.stringify(mi(n)));var r=Wr(e,"style",!1);r&&(e.styleBinding=r)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},ka=function(e){return(Ta=Ta||document.createElement("div")).innerHTML=e,Ta.textContent},La=f("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Pa=f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Ra=f("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Ia=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,za=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Oa="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+U.source+"]*",Da="((?:"+Oa+"\\:)?"+Oa+")",Na=new RegExp("^<"+Da),Fa=/^\s*(\/?)>/,Ba=new RegExp("^<\\/"+Da+"[^>]*>"),Ua=/^<!DOCTYPE [^>]+>/i,Ha=/^<!\--/,ja=/^<!\[/,Va=f("script,style,textarea",!0),Ga={},Wa={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},qa=/&(?:lt|gt|quot|amp|#39);/g,Xa=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Ya=f("pre,textarea",!0),Za=function(e,t){return e&&Ya(e)&&"\n"===t[0]};function Ja(e,t){var n=t?Xa:qa;return e.replace(n,(function(e){return Wa[e]}))}var Qa,Ka,$a,eo,to,no,ro,io,ao=/^@|^v-on:/,oo=/^v-|^@|^:|^#/,so=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,lo=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,co=/^\(|\)$/g,uo=/^\[.*\]$/,ho=/:(.*)$/,po=/^:|^\.|^v-bind:/,fo=/\.[^.\]]+(?=[^\]]*$)/g,mo=/^v-slot(:|$)|^#/,vo=/[\r\n]/,go=/\s+/g,_o=b(ka),yo="_empty_";function bo(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:To(t),rawAttrsMap:{},parent:n,children:[]}}function xo(e,t){Qa=t.warn||Nr,no=t.isPreTag||P,ro=t.mustUseProp||P,io=t.getTagNamespace||P;var n=t.isReservedTag||P;(function(e){return!!e.component||!n(e.tag)}),$a=Fr(t.modules,"transformNode"),eo=Fr(t.modules,"preTransformNode"),to=Fr(t.modules,"postTransformNode"),Ka=t.delimiters;var r,i,a=[],o=!1!==t.preserveWhitespace,s=t.whitespace,l=!1,c=!1;function u(e){if(h(e),l||e.processed||(e=wo(e,t)),a.length||e===r||r.if&&(e.elseif||e.else)&&So(r,{exp:e.elseif,block:e}),i&&!e.forbidden)if(e.elseif||e.else)o=e,s=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}(i.children),s&&s.if&&So(s,{exp:o.elseif,block:o});else{if(e.slotScope){var n=e.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[n]=e}i.children.push(e),e.parent=i}var o,s;e.children=e.children.filter((function(e){return!e.slotScope})),h(e),e.pre&&(l=!1),no(e.tag)&&(c=!1);for(var u=0;u<to.length;u++)to[u](e,t)}function h(e){if(!c)for(var t;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}return function(e,t){for(var n,r,i=[],a=t.expectHTML,o=t.isUnaryTag||P,s=t.canBeLeftOpenTag||P,l=0;e;){if(n=e,r&&Va(r)){var c=0,u=r.toLowerCase(),h=Ga[u]||(Ga[u]=new RegExp("([\\s\\S]*?)(</"+u+"[^>]*>)","i")),p=e.replace(h,(function(e,n,r){return c=r.length,Va(u)||"noscript"===u||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Za(u,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""}));l+=e.length-p.length,e=p,A(u,l-c,l)}else{var d=e.indexOf("<");if(0===d){if(Ha.test(e)){var f=e.indexOf("--\x3e");if(f>=0){t.shouldKeepComment&&t.comment(e.substring(4,f),l,l+f+3),M(f+3);continue}}if(ja.test(e)){var m=e.indexOf("]>");if(m>=0){M(m+2);continue}}var v=e.match(Ua);if(v){M(v[0].length);continue}var g=e.match(Ba);if(g){var _=l;M(g[0].length),A(g[1],_,l);continue}var y=S();if(y){E(y),Za(y.tagName,e)&&M(1);continue}}var b=void 0,x=void 0,w=void 0;if(d>=0){for(x=e.slice(d);!(Ba.test(x)||Na.test(x)||Ha.test(x)||ja.test(x)||(w=x.indexOf("<",1))<0);)d+=w,x=e.slice(d);b=e.substring(0,d)}d<0&&(b=e),b&&M(b.length),t.chars&&b&&t.chars(b,l-b.length,l)}if(e===n){t.chars&&t.chars(e);break}}function M(t){l+=t,e=e.substring(t)}function S(){var t=e.match(Na);if(t){var n,r,i={tagName:t[1],attrs:[],start:l};for(M(t[0].length);!(n=e.match(Fa))&&(r=e.match(za)||e.match(Ia));)r.start=l,M(r[0].length),r.end=l,i.attrs.push(r);if(n)return i.unarySlash=n[1],M(n[0].length),i.end=l,i}}function E(e){var n=e.tagName,l=e.unarySlash;a&&("p"===r&&Ra(n)&&A(r),s(n)&&r===n&&A(n));for(var c=o(n)||!!l,u=e.attrs.length,h=new Array(u),p=0;p<u;p++){var d=e.attrs[p],f=d[3]||d[4]||d[5]||"",m="a"===n&&"href"===d[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;h[p]={name:d[1],value:Ja(f,m)}}c||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:h,start:e.start,end:e.end}),r=n),t.start&&t.start(n,h,c,e.start,e.end)}function A(e,n,a){var o,s;if(null==n&&(n=l),null==a&&(a=l),e)for(s=e.toLowerCase(),o=i.length-1;o>=0&&i[o].lowerCasedTag!==s;o--);else o=0;if(o>=0){for(var c=i.length-1;c>=o;c--)t.end&&t.end(i[c].tag,n,a);i.length=o,r=o&&i[o-1].tag}else"br"===s?t.start&&t.start(e,[],!0,n,a):"p"===s&&(t.start&&t.start(e,[],!1,n,a),t.end&&t.end(e,n,a))}A()}(e,{warn:Qa,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,n,o,s,h){var p=i&&i.ns||io(e);J&&"svg"===p&&(n=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Co.test(r.name)||(r.name=r.name.replace(ko,""),t.push(r))}return t}(n));var d,f=bo(e,n,i);p&&(f.ns=p),"style"!==(d=f).tag&&("script"!==d.tag||d.attrsMap.type&&"text/javascript"!==d.attrsMap.type)||ie()||(f.forbidden=!0);for(var m=0;m<eo.length;m++)f=eo[m](f,t)||f;l||(!function(e){null!=qr(e,"v-pre")&&(e.pre=!0)}(f),f.pre&&(l=!0)),no(f.tag)&&(c=!0),l?function(e){var t=e.attrsList,n=t.length;if(n)for(var r=e.attrs=new Array(n),i=0;i<n;i++)r[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(r[i].start=t[i].start,r[i].end=t[i].end);else e.pre||(e.plain=!0)}(f):f.processed||(Mo(f),function(e){var t=qr(e,"v-if");if(t)e.if=t,So(e,{exp:t,block:e});else{null!=qr(e,"v-else")&&(e.else=!0);var n=qr(e,"v-else-if");n&&(e.elseif=n)}}(f),function(e){var t=qr(e,"v-once");null!=t&&(e.once=!0)}(f)),r||(r=f),o?u(f):(i=f,a.push(f))},end:function(e,t,n){var r=a[a.length-1];a.length-=1,i=a[a.length-1],u(r)},chars:function(e,t,n){if(i&&(!J||"textarea"!==i.tag||i.attrsMap.placeholder!==e)){var r,a,u,h=i.children;if(e=c||e.trim()?"script"===(r=i).tag||"style"===r.tag?e:_o(e):h.length?s?"condense"===s&&vo.test(e)?"":" ":o?" ":"":"")c||"condense"!==s||(e=e.replace(go," ")),!l&&" "!==e&&(a=function(e,t){var n=t?Ea(t):Ma;if(n.test(e)){for(var r,i,a,o=[],s=[],l=n.lastIndex=0;r=n.exec(e);){(i=r.index)>l&&(s.push(a=e.slice(l,i)),o.push(JSON.stringify(a)));var c=Or(r[1].trim());o.push("_s("+c+")"),s.push({"@binding":c}),l=i+r[0].length}return l<e.length&&(s.push(a=e.slice(l)),o.push(JSON.stringify(a))),{expression:o.join("+"),tokens:s}}}(e,Ka))?u={type:2,expression:a.expression,tokens:a.tokens,text:e}:" "===e&&h.length&&" "===h[h.length-1].text||(u={type:3,text:e}),u&&h.push(u)}},comment:function(e,t,n){if(i){var r={type:3,text:e,isComment:!0};0,i.children.push(r)}}}),r}function wo(e,t){var n;!function(e){var t=Wr(e,"key");if(t){e.key=t}}(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=Wr(e,"ref");t&&(e.ref=t,e.refInFor=function(e){var t=e;for(;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=qr(e,"scope"),e.slotScope=t||qr(e,"slot-scope")):(t=qr(e,"slot-scope"))&&(e.slotScope=t);var n=Wr(e,"slot");n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||Ur(e,"slot",n,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot")));if("template"===e.tag){var r=Xr(e,mo);if(r){0;var i=Eo(r),a=i.name,o=i.dynamic;e.slotTarget=a,e.slotTargetDynamic=o,e.slotScope=r.value||yo}}else{var s=Xr(e,mo);if(s){0;var l=e.scopedSlots||(e.scopedSlots={}),c=Eo(s),u=c.name,h=c.dynamic,p=l[u]=bo("template",[],e);p.slotTarget=u,p.slotTargetDynamic=h,p.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=p,!0})),p.slotScope=s.value||yo,e.children=[],e.plain=!1}}}(e),"slot"===(n=e).tag&&(n.slotName=Wr(n,"name")),function(e){var t;(t=Wr(e,"is"))&&(e.component=t);null!=qr(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<$a.length;r++)e=$a[r](e,t)||e;return function(e){var t,n,r,i,a,o,s,l,c=e.attrsList;for(t=0,n=c.length;t<n;t++){if(r=i=c[t].name,a=c[t].value,oo.test(r))if(e.hasBindings=!0,(o=Ao(r.replace(oo,"")))&&(r=r.replace(fo,"")),po.test(r))r=r.replace(po,""),a=Or(a),(l=uo.test(r))&&(r=r.slice(1,-1)),o&&(o.prop&&!l&&"innerHtml"===(r=w(r))&&(r="innerHTML"),o.camel&&!l&&(r=w(r)),o.sync&&(s=Jr(a,"$event"),l?Gr(e,'"update:"+('+r+")",s,null,!1,0,c[t],!0):(Gr(e,"update:"+w(r),s,null,!1,0,c[t]),E(r)!==w(r)&&Gr(e,"update:"+E(r),s,null,!1,0,c[t])))),o&&o.prop||!e.component&&ro(e.tag,e.attrsMap.type,r)?Br(e,r,a,c[t],l):Ur(e,r,a,c[t],l);else if(ao.test(r))r=r.replace(ao,""),(l=uo.test(r))&&(r=r.slice(1,-1)),Gr(e,r,a,o,!1,0,c[t],l);else{var u=(r=r.replace(oo,"")).match(ho),h=u&&u[1];l=!1,h&&(r=r.slice(0,-(h.length+1)),uo.test(h)&&(h=h.slice(1,-1),l=!0)),jr(e,r,i,a,h,l,o,c[t])}else Ur(e,r,JSON.stringify(a),c[t]),!e.component&&"muted"===r&&ro(e.tag,e.attrsMap.type,r)&&Br(e,r,"true",c[t])}}(e),e}function Mo(e){var t;if(t=qr(e,"v-for")){var n=function(e){var t=e.match(so);if(!t)return;var n={};n.for=t[2].trim();var r=t[1].trim().replace(co,""),i=r.match(lo);i?(n.alias=r.replace(lo,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r;return n}(t);n&&C(e,n)}}function So(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Eo(e){var t=e.name.replace(mo,"");return t||"#"!==e.name[0]&&(t="default"),uo.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'+t+'"',dynamic:!1}}function Ao(e){var t=e.match(fo);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function To(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].name]=e[n].value;return t}var Co=/^xmlns:NS\d+/,ko=/^NS\d+:/;function Lo(e){return bo(e.tag,e.attrsList.slice(),e.parent)}var Po={preTransformNode:function(e,t){if("input"===e.tag){var n,r=e.attrsMap;if(!r["v-model"])return;if((r[":type"]||r["v-bind:type"])&&(n=Wr(e,"type")),r.type||n||!r["v-bind"]||(n="("+r["v-bind"]+").type"),n){var i=qr(e,"v-if",!0),a=i?"&&("+i+")":"",o=null!=qr(e,"v-else",!0),s=qr(e,"v-else-if",!0),l=Lo(e);Mo(l),Hr(l,"type","checkbox"),wo(l,t),l.processed=!0,l.if="("+n+")==='checkbox'"+a,So(l,{exp:l.if,block:l});var c=Lo(e);qr(c,"v-for",!0),Hr(c,"type","radio"),wo(c,t),So(l,{exp:"("+n+")==='radio'"+a,block:c});var u=Lo(e);return qr(u,"v-for",!0),Hr(u,":type",n),wo(u,t),So(l,{exp:i,block:u}),o?l.else=!0:s&&(l.elseif=s),l}}}},Ro=[Aa,Ca,Po];var Io,zo,Oo={model:function(e,t,n){n;var r=t.value,i=t.modifiers,a=e.tag,o=e.attrsMap.type;if(e.component)return Zr(e,r,i),!1;if("select"===a)!function(e,t,n){var r=n&&n.number,i='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r?"_n(val)":"val")+"});";i=i+" "+Jr(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Gr(e,"change",i,null,!0)}(e,r,i);else if("input"===a&&"checkbox"===o)!function(e,t,n){var r=n&&n.number,i=Wr(e,"value")||"null",a=Wr(e,"true-value")||"true",o=Wr(e,"false-value")||"false";Br(e,"checked","Array.isArray("+t+")?_i("+t+","+i+")>-1"+("true"===a?":("+t+")":":_q("+t+","+a+")")),Gr(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+a+"):("+o+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Jr(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Jr(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Jr(t,"$$c")+"}",null,!0)}(e,r,i);else if("input"===a&&"radio"===o)!function(e,t,n){var r=n&&n.number,i=Wr(e,"value")||"null";Br(e,"checked","_q("+t+","+(i=r?"_n("+i+")":i)+")"),Gr(e,"change",Jr(t,i),null,!0)}(e,r,i);else if("input"===a||"textarea"===a)!function(e,t,n){var r=e.attrsMap.type;0;var i=n||{},a=i.lazy,o=i.number,s=i.trim,l=!a&&"range"!==r,c=a?"change":"range"===r?ri:"input",u="$event.target.value";s&&(u="$event.target.value.trim()");o&&(u="_n("+u+")");var h=Jr(t,u);l&&(h="if($event.target.composing)return;"+h);Br(e,"value","("+t+")"),Gr(e,c,h,null,!0),(s||o)&&Gr(e,"blur","$forceUpdate()")}(e,r,i);else{if(!B.isReservedTag(a))return Zr(e,r,i),!1}return!0},text:function(e,t){t.value&&Br(e,"textContent","_s("+t.value+")",t)},html:function(e,t){t.value&&Br(e,"innerHTML","_s("+t.value+")",t)}},Do={expectHTML:!0,modules:Ro,directives:Oo,isPreTag:function(e){return"pre"===e},isUnaryTag:La,mustUseProp:Hn,canBeLeftOpenTag:Pa,isReservedTag:rr,getTagNamespace:ir,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(Ro)},No=b((function(e){return f("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));function Fo(e,t){e&&(Io=No(t.staticKeys||""),zo=t.isReservedTag||P,Bo(e),Uo(e,!1))}function Bo(e){if(e.static=function(e){if(2===e.type)return!1;if(3===e.type)return!0;return!(!e.pre&&(e.hasBindings||e.if||e.for||m(e.tag)||!zo(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(Io)))}(e),1===e.type){if(!zo(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];Bo(r),r.static||(e.static=!1)}if(e.ifConditions)for(var i=1,a=e.ifConditions.length;i<a;i++){var o=e.ifConditions[i].block;Bo(o),o.static||(e.static=!1)}}}function Uo(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)Uo(e.children[n],t||!!e.for);if(e.ifConditions)for(var i=1,a=e.ifConditions.length;i<a;i++)Uo(e.ifConditions[i].block,t)}}var Ho=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,jo=/\([^)]*?\);*$/,Vo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Go={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Wo={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},qo=function(e){return"if("+e+")return null;"},Xo={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:qo("$event.target !== $event.currentTarget"),ctrl:qo("!$event.ctrlKey"),shift:qo("!$event.shiftKey"),alt:qo("!$event.altKey"),meta:qo("!$event.metaKey"),left:qo("'button' in $event && $event.button !== 0"),middle:qo("'button' in $event && $event.button !== 1"),right:qo("'button' in $event && $event.button !== 2")};function Yo(e,t){var n=t?"nativeOn:":"on:",r="",i="";for(var a in e){var o=Zo(e[a]);e[a]&&e[a].dynamic?i+=a+","+o+",":r+='"'+a+'":'+o+","}return r="{"+r.slice(0,-1)+"}",i?n+"_d("+r+",["+i.slice(0,-1)+"])":n+r}function Zo(e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map((function(e){return Zo(e)})).join(",")+"]";var t=Vo.test(e.value),n=Ho.test(e.value),r=Vo.test(e.value.replace(jo,""));if(e.modifiers){var i="",a="",o=[];for(var s in e.modifiers)if(Xo[s])a+=Xo[s],Go[s]&&o.push(s);else if("exact"===s){var l=e.modifiers;a+=qo(["ctrl","shift","alt","meta"].filter((function(e){return!l[e]})).map((function(e){return"$event."+e+"Key"})).join("||"))}else o.push(s);return o.length&&(i+=function(e){return"if(!$event.type.indexOf('key')&&"+e.map(Jo).join("&&")+")return null;"}(o)),a&&(i+=a),"function($event){"+i+(t?"return "+e.value+"($event)":n?"return ("+e.value+")($event)":r?"return "+e.value:e.value)+"}"}return t||n?e.value:"function($event){"+(r?"return "+e.value:e.value)+"}"}function Jo(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=Go[e],r=Wo[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}var Qo={on:function(e,t){e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:L},Ko=function(e){this.options=e,this.warn=e.warn||Nr,this.transforms=Fr(e.modules,"transformCode"),this.dataGenFns=Fr(e.modules,"genData"),this.directives=C(C({},Qo),e.directives);var t=e.isReservedTag||P;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function $o(e,t){var n=new Ko(t);return{render:"with(this){return "+(e?es(e,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function es(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return ts(e,t);if(e.once&&!e.onceProcessed)return ns(e,t);if(e.for&&!e.forProcessed)return as(e,t);if(e.if&&!e.ifProcessed)return rs(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',r=cs(e,t),i="_t("+n+(r?","+r:""),a=e.attrs||e.dynamicAttrs?ps((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:w(e.name),value:e.value,dynamic:e.dynamic}}))):null,o=e.attrsMap["v-bind"];!a&&!o||r||(i+=",null");a&&(i+=","+a);o&&(i+=(a?"":",null")+","+o);return i+")"}(e,t);var n;if(e.component)n=function(e,t,n){var r=t.inlineTemplate?null:cs(t,n,!0);return"_c("+e+","+os(t,n)+(r?","+r:"")+")"}(e.component,e,t);else{var r;(!e.plain||e.pre&&t.maybeComponent(e))&&(r=os(e,t));var i=e.inlineTemplate?null:cs(e,t,!0);n="_c('"+e.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var a=0;a<t.transforms.length;a++)n=t.transforms[a](e,n);return n}return cs(e,t)||"void 0"}function ts(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return "+es(e,t)+"}"),t.pre=n,"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function ns(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return rs(e,t);if(e.staticInFor){for(var n="",r=e.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+es(e,t)+","+t.onceId+++","+n+")":es(e,t)}return ts(e,t)}function rs(e,t,n,r){return e.ifProcessed=!0,is(e.ifConditions.slice(),t,n,r)}function is(e,t,n,r){if(!e.length)return r||"_e()";var i=e.shift();return i.exp?"("+i.exp+")?"+a(i.block)+":"+is(e,t,n,r):""+a(i.block);function a(e){return n?n(e,t):e.once?ns(e,t):es(e,t)}}function as(e,t,n,r){var i=e.for,a=e.alias,o=e.iterator1?","+e.iterator1:"",s=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,(r||"_l")+"(("+i+"),function("+a+o+s+"){return "+(n||es)(e,t)+"})"}function os(e,t){var n="{",r=function(e,t){var n=e.directives;if(!n)return;var r,i,a,o,s="directives:[",l=!1;for(r=0,i=n.length;r<i;r++){a=n[r],o=!0;var c=t.directives[a.name];c&&(o=!!c(e,a,t.warn)),o&&(l=!0,s+='{name:"'+a.name+'",rawName:"'+a.rawName+'"'+(a.value?",value:("+a.value+"),expression:"+JSON.stringify(a.value):"")+(a.arg?",arg:"+(a.isDynamicArg?a.arg:'"'+a.arg+'"'):"")+(a.modifiers?",modifiers:"+JSON.stringify(a.modifiers):"")+"},")}if(l)return s.slice(0,-1)+"]"}(e,t);r&&(n+=r+","),e.key&&(n+="key:"+e.key+","),e.ref&&(n+="ref:"+e.ref+","),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'+e.tag+'",');for(var i=0;i<t.dataGenFns.length;i++)n+=t.dataGenFns[i](e);if(e.attrs&&(n+="attrs:"+ps(e.attrs)+","),e.props&&(n+="domProps:"+ps(e.props)+","),e.events&&(n+=Yo(e.events,!1)+","),e.nativeEvents&&(n+=Yo(e.nativeEvents,!0)+","),e.slotTarget&&!e.slotScope&&(n+="slot:"+e.slotTarget+","),e.scopedSlots&&(n+=function(e,t,n){var r=e.for||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n.if||n.for||ss(n)})),i=!!e.if;if(!r)for(var a=e.parent;a;){if(a.slotScope&&a.slotScope!==yo||a.for){r=!0;break}a.if&&(i=!0),a=a.parent}var o=Object.keys(t).map((function(e){return ls(t[e],n)})).join(",");return"scopedSlots:_u(["+o+"]"+(r?",null,true":"")+(!r&&i?",null,false,"+function(e){var t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return t>>>0}(o):"")+")"}(e,e.scopedSlots,t)+","),e.model&&(n+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var a=function(e,t){var n=e.children[0];0;if(n&&1===n.type){var r=$o(n,t.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map((function(e){return"function(){"+e+"}"})).join(",")+"]}"}}(e,t);a&&(n+=a+",")}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b("+n+',"'+e.tag+'",'+ps(e.dynamicAttrs)+")"),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function ss(e){return 1===e.type&&("slot"===e.tag||e.children.some(ss))}function ls(e,t){var n=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!n)return rs(e,t,ls,"null");if(e.for&&!e.forProcessed)return as(e,t,ls);var r=e.slotScope===yo?"":String(e.slotScope),i="function("+r+"){return "+("template"===e.tag?e.if&&n?"("+e.if+")?"+(cs(e,t)||"undefined")+":undefined":cs(e,t)||"undefined":es(e,t))+"}",a=r?"":",proxy:true";return"{key:"+(e.slotTarget||'"default"')+",fn:"+i+a+"}"}function cs(e,t,n,r,i){var a=e.children;if(a.length){var o=a[0];if(1===a.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag){var s=n?t.maybeComponent(o)?",1":",0":"";return""+(r||es)(o,t)+s}var l=n?function(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(us(i)||i.ifConditions&&i.ifConditions.some((function(e){return us(e.block)}))){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}(a,t.maybeComponent):0,c=i||hs;return"["+a.map((function(e){return c(e,t)})).join(",")+"]"+(l?","+l:"")}}function us(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function hs(e,t){return 1===e.type?es(e,t):3===e.type&&e.isComment?function(e){return"_e("+JSON.stringify(e.text)+")"}(e):"_v("+(2===(n=e).type?n.expression:ds(JSON.stringify(n.text)))+")";var n}function ps(e){for(var t="",n="",r=0;r<e.length;r++){var i=e[r],a=ds(i.value);i.dynamic?n+=i.name+","+a+",":t+='"'+i.name+'":'+a+","}return t="{"+t.slice(0,-1)+"}",n?"_d("+t+",["+n.slice(0,-1)+"])":t}function ds(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function fs(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),L}}function ms(e){var t=Object.create(null);return function(n,r,i){(r=C({},r)).warn;delete r.warn;var a=r.delimiters?String(r.delimiters)+n:n;if(t[a])return t[a];var o=e(n,r);var s={},l=[];return s.render=fs(o.render,l),s.staticRenderFns=o.staticRenderFns.map((function(e){return fs(e,l)})),t[a]=s}}var vs,gs,_s=(vs=function(e,t){var n=xo(e.trim(),t);!1!==t.optimize&&Fo(n,t);var r=$o(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(e){function t(t,n){var r=Object.create(e),i=[],a=[];if(n)for(var o in n.modules&&(r.modules=(e.modules||[]).concat(n.modules)),n.directives&&(r.directives=C(Object.create(e.directives||null),n.directives)),n)"modules"!==o&&"directives"!==o&&(r[o]=n[o]);r.warn=function(e,t,n){(n?a:i).push(e)};var s=vs(t.trim(),r);return s.errors=i,s.tips=a,s}return{compile:t,compileToFunctions:ms(t)}}),ys=_s(Do),bs=(ys.compile,ys.compileToFunctions);function xs(e){return(gs=gs||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',gs.innerHTML.indexOf("&#10;")>0}var ws=!!q&&xs(!1),Ms=!!q&&xs(!0),Ss=b((function(e){var t=sr(e);return t&&t.innerHTML})),Es=Ln.prototype.$mount;Ln.prototype.$mount=function(e,t){if((e=e&&sr(e))===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=Ss(r));else{if(!r.nodeType)return this;r=r.innerHTML}else e&&(r=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(r){0;var i=bs(r,{outputSourceRange:!1,shouldDecodeNewlines:ws,shouldDecodeNewlinesForHref:Ms,delimiters:n.delimiters,comments:n.comments},this),a=i.render,o=i.staticRenderFns;n.render=a,n.staticRenderFns=o}}return Es.call(this,e,t)},Ln.compile=bs;const As=Ln;var Ts="function"==typeof acquireVsCodeApi&&acquireVsCodeApi();Ts&&document.addEventListener("keydown",(function(e){if((e.ctrlKey||e.metaKey)&&(89==e.which||90==e.which))return e.preventDefault(),!1}));const Cs=Ts;function ks(e){return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(e)}function Ls(e){e=e||1;for(var t="";e>0;){var n=Math.floor(62*Math.random());n>9&&(n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[n-10]),t+=n,e--}return t}function Ps(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function Rs(e){var t=e.match(/\.\w{2,24}$/);return t&&t.length?t[0].replace(".","").toLowerCase():""}function Is(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(""==e)return e;var n=e.toFixed(t);return-0==(n=n.replace(/0+$/g,"").replace(/\.$/g,""))?0:n}function zs(e,t){function n(e){if(!0===t.small)return"";for(var n="\n",r=0;r<e;r++)n+="\t";return n}return"object"!==ks(t)&&(t={}),function e(r,i){var a="";if("string"==typeof r)a+='"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n|\r\n/g,"\\n").replace(/\t/g,"\\t")+'"';else if("boolean"==typeof r)a+=r?"true":"false";else if("number"==typeof r)a+=r=(Math.round(1e5*r)/1e5).toString();else if(null===r||r===1/0||r===-1/0)a+="null";else if("object"===ks(r)&&r instanceof Array){var o=!1;a+="[";for(var s=0;s<r.length;s++){if(u=e(r[s],i+1)){var l="object"===ks(r[s]);o&&(a+=","+(l||t.small?"":" ")),l&&(a+=n(i)),a+=u,o=!0}}"object"===ks(r[r.length-1])&&(a+=n(i-1)),a+="]"}else if("object"===ks(r)){l="oneLiner"!==r.constructor.name,o=!1;for(var c in a+="{",r){var u;if(r.hasOwnProperty(c))(u=e(r[c],i+1))&&(o&&(a+=","+(l||t.small?"":" ")),l&&(a+=n(i)),a+='"'+c+'":'+(!0===t.small?"":" "),a+=u,o=!0)}l&&o&&(a+=n(i-1)),a+="}"}return a}(e,1)}function Os(e){if(e&&e.changedTouches&&e.changedTouches.length&&null==e.offsetX){e.preventDefault(),e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY,e.offsetX=e.changedTouches[0].clientX,e.offsetY=e.changedTouches[0].clientY;var t=Ds(e.target);t&&(e.offsetX-=t[0],e.offsetY-=t[1])}return e}function Ds(e){var t=e.getBoundingClientRect();return[t.left+window.scrollX,t.top+window.scrollY]}function Ns(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}Math.clamp=function(e,t,n){return e>n&&(e=n),(e<t||isNaN(e))&&(e=t),e},Math.randomab=function(e,t){return e+Math.random()*(t-e)},Math.radToDeg=function(e){return e/Math.PI*180},Math.degToRad=function(e){return Math.PI/(180/e)},Math.roundTo=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},Math.lerp=function(e,t,n){return e+(t-e)*n},Math.isBetween=function(e,t,n){return(e-t)*(e-n)<=0},Math.trimDeg=function(e){return(e+2700)%360-180},Math.isPowerOfTwo=function(e){return e>1&&0==(e&e-1)},Math.snapToValues=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=t.slice().sort((function(t,n){return Math.abs(e-t)-Math.abs(e-n)}));return Math.abs(r[0]-e)<n?r[0]:e},Array.prototype.safePush=function(){for(var e=!1,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];this.includes(o)||(this.push(o),e=!0)}return e},Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},Array.prototype.remove=function(e){var t=this.indexOf(e);return t>-1&&(this.splice(t,1),t)},Array.prototype.empty=function(){return this.splice(0,1/0),this},Array.prototype.purge=function(){return this.splice(0,1/0),this},Array.prototype.findInArray=function(e,t){for(var n=0;n<this.length;n++)if(this[n][e]===t)return this[n];return!1},Array.prototype.positiveItems=function(){for(var e=0,t=0;t<this.length;)this[t]&&e++,t++;return e},Array.prototype.allEqual=function(e){for(var t=0;t<this.length;){if(this[t]!==e)return!1;t++}return!0},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};var Fs,Bs={import:function(e,t){"object"!==ks(e)&&(e={});var n=document.createElement("input");n.type="file",n.accept=e.extensions?"."+e.extensions.join(",."):"",n.multiple=!0===e.multiple,n.onchange=function(r){window.input=n;for(var i=[],a=0,o=0;o<n.files.length;)!function(){var r=n.files[o],s=new FileReader;s.i=o,s.onloadend=function(){if(s.result.byteLength){var e=new Uint8Array(s.result),o=new Targa;o.load(e);var l=o.getDataURL()}else l=s.result;i[this.i]={name:r.name,path:r.name,content:l},++a===n.files.length&&t(i)},"image"===e.readtype?"tga"===Rs(r.name)?s.readAsArrayBuffer(r):s.readAsDataURL(r):"buffer"===e.readtype?s.readAsArrayBuffer(r):s.readAsText(r),o++}()},n.click()},export:function(e,t){if(e){var n=e.name+(e.extensions?"."+e.extensions[0]:"");if(window.chooseFile,e.custom_writer)e.custom_writer(e.content,n);else if("image"===e.savetype){(r=document.createElement("a")).href=e.content,r.download=n,r.style.display="none",Ns()&&document.body.appendChild(r),r.click(),Ns()&&document.body.removeChild(r)}else{var r;(r=document.createElement("a")).href="data:text/plain;charset=utf-8,"+encodeURIComponent(e.content),r.download=n,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}"function"==typeof t&&t()}}},Us={},Hs=600,js="";function Vs(e){if(Cs){var t=zs(hM());Cs.postMessage({type:"save",content:t})}for(var n in Us){(0,Us[n])(e)}}function Gs(e,t,n){js=e,t instanceof InputEvent||t instanceof KeyboardEvent||n?(Fs&&clearTimeout(Fs),Fs=setTimeout((function(){Vs(e),Fs=null}),Hs)):Vs(e)}window.addEventListener("message",(function(e){"request_content_update"!==e.data.type||Fs&&(clearTimeout(Fs),Vs(js))}));var Ws=["true","false","math.","query.","variable.","temp.","context.","this","loop()","return","break;","continue;"],qs=["anim_time","life_time","yaw_speed","ground_speed","vertical_speed","property","has_property()","variant","mark_variant","skin_id","above_top_solid","actor_count","all()","all_tags","anger_level","any()","any_tag","approx_eq()","armor_color_slot","armor_material_slot","armor_texture_slot","average_frame_time","blocking","body_x_rotation","body_y_rotation","bone_aabb","bone_origin","bone_rotation","camera_distance_range_lerp","camera_rotation()","can_climb","can_damage_nearby_mobs","can_dash","can_fly","can_power_jump","can_swim","can_walk","cape_flap_amount","cardinal_facing","cardinal_facing_2d","cardinal_player_facing","combine_entities()","count","current_squish_value","dash_cooldown_progress","day","death_ticks","debug_output","delta_time","distance_from_camera","effect_emitter_count","effect_particle_count","equipment_count","equipped_item_all_tags","equipped_item_any_tag()","equipped_item_is_attachable","eye_target_x_rotation","eye_target_y_rotation","facing_target_to_range_attack","frame_alpha","get_actor_info_id","get_animation_frame","get_default_bone_pivot","get_locator_offset","get_root_locator_offset","had_component_group()","has_any_family()","has_armor_slot","has_biome_tag","has_block_property","has_cape","has_collision","has_dash_cooldown","has_gravity","has_owner","has_rider","has_target","head_roll_angle","head_x_rotation","head_y_rotation","health","heartbeat_interval","heartbeat_phase","heightmap","hurt_direction","hurt_time","in_range()","invulnerable_ticks","is_admiring","is_alive","is_angry","is_attached_to_entity","is_avoiding_block","is_avoiding_mobs","is_baby","is_breathing","is_bribed","is_carrying_block","is_casting","is_celebrating","is_celebrating_special","is_charged","is_charging","is_chested","is_critical","is_croaking","is_dancing","is_delayed_attacking","is_digging","is_eating","is_eating_mob","is_elder","is_emerging","is_emoting","is_enchanted","is_fire_immune","is_first_person","is_ghost","is_gliding","is_grazing","is_idling","is_ignited","is_illager_captain","is_in_contact_with_water","is_in_love","is_in_ui","is_in_water","is_in_water_or_rain","is_interested","is_invisible","is_item_equipped","is_item_name_any()","is_jump_goal_jumping","is_jumping","is_laying_down","is_laying_egg","is_leashed","is_levitating","is_lingering","is_moving","is_name_any()","is_on_fire","is_on_ground","is_on_screen","is_onfire","is_orphaned","is_owner_identifier_any()","is_persona_or_premium_skin","is_playing_dead","is_powered","is_pregnant","is_ram_attacking","is_resting","is_riding","is_roaring","is_rolling","is_saddled","is_scared","is_selected_item","is_shaking","is_shaking_wetness","is_sheared","is_shield_powered","is_silent","is_sitting","is_sleeping","is_sneaking","is_sneezing","is_sniffing","is_sonic_boom","is_spectator","is_sprinting","is_stackable","is_stalking","is_standing","is_stunned","is_swimming","is_tamed","is_transforming","is_using_item","is_wall_climbing","item_in_use_duration","item_is_charged","item_max_use_duration","item_remaining_use_duration","item_slot_to_bone_name()","key_frame_lerp_time","last_frame_time","last_hit_by_player","lie_amount","life_span","lod_index","log","main_hand_item_max_duration","main_hand_item_use_duration","max_durability","max_health","max_trade_tier","maximum_frame_time","minimum_frame_time","model_scale","modified_distance_moved","modified_move_speed","moon_brightness","moon_phase","movement_direction","noise","on_fire_time","out_of_control","player_level","position()","position_delta()","previous_squish_value","remaining_durability","roll_counter","rotation_to_camera()","shake_angle","shake_time","shield_blocking_bob","show_bottom","sit_amount","sleep_rotation","sneeze_counter","spellcolor","standing_scale","structural_integrity","surface_particle_color","surface_particle_texture_coordinate","surface_particle_texture_size","swell_amount","swelling_dir","swim_amount","tail_angle","target_x_rotation","target_y_rotation","texture_frame_index","time_of_day","time_since_last_vibration_detection","time_stamp","total_emitter_count","total_particle_count","trade_tier","unhappy_counter","walk_distance","wing_flap_position","wing_flap_speed"],Xs={"in_range()":"in_range( value, min, max )","all()":"in_range( value, values... )","any()":"in_range( value, values... )","approx_eq()":"in_range( value, values... )"},Ys=["item_slot","block_face","cardinal_block_face_placed_on","is_first_person","owning_entity","player_offhand_arm_height","other","count"],Zs=["emitter_lifetime","emitter_age","emitter_random_1","emitter_random_2","emitter_random_3","emitter_random_4","particle_lifetime","particle_age","particle_random_1","particle_random_2","particle_random_3","particle_random_4","entity_scale"],Js=["sin()","cos()","abs()","clamp()","pow()","sqrt()","random()","ceil()","round()","trunc()","floor()","mod()","min_angle()","min()","max()","exp()","ln()","lerp()","lerprotate()","pi","asin()","acos()","atan()","atan2()","die_roll()","die_roll_integer()","hermite_blend()","random_integer()"],Qs={"clamp()":"clamp( value, min, max )","pow()":"pow( base, exponent )","random()":"random( low, high )","mod()":"mod( value, denominator )","min()":"min( A, B )","max()":"max( A, B )","lerp()":"lerp( start, end, 0_to_1 )","lerprotate()":"lerprotate( start, end, 0_to_1 )","atan2()":"atan2( y, x )","die_roll()":"die_roll( num, low, high )","die_roll_integer()":"die_roll_integer( num, low, high )","random_integer()":"random_integer( low, high )","hermite_blend()":"hermite_blend( 0_to_1 )"};function Ks(e){return function(e){if(Array.isArray(e))return tl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||el(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||el(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,t){if(e){if("string"==typeof e)return tl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tl(e,t):void 0}}function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nl(e){var t=new Set;return function(){var e=[];function t(t){var n=t.value;n instanceof Array?n.forEach((function(t){"string"==typeof t&&t&&e.safePush(t)})):"string"==typeof n&&n&&e.safePush(n)}return $w(t),eM.variables.curves.curves.forEach((function(e){for(var n in e.inputs)t(e.inputs[n])})),e}().forEach((function(n){if(n){var r=n.match(/(v|variable)\.\w+/gi);r&&r.forEach((function(n){var r=n.substring(n.indexOf(".")+1);r!==e&&t.add(r)}))}})),t}function rl(e,t){var n,r=0,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=el(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(find=e.substring(r).indexOf(a),-1==find)return!1;r+=find+1}}catch(e){i.e(e)}finally{i.f()}return!0}function il(e,t,n,r){var i=e.filter((function(e){return e.startsWith(t)}));return e.forEach((function(e){!i.includes(e)&&rl(e,t)&&i.push(e)})),n&&n.forEach((function(e){return i.remove(e)})),i.map((function(e){return{text:e,label:r&&r[e],overlap:t.length}}))}function al(e,t,n){var r=e.substring(0,t).split(/[^a-zA-Z0-9_.]\.*/g).at(-1);if(!r)return[];if(!(r=r.toLowerCase()).includes("."))return il(Ws.slice(),r,null);var i=$s(r.split("."),2),a=i[0],o=i[1];if("math"==a)return il(Js,o,null,Qs);if("query"==a||"q"==a)return il(qs,o,"controller"!==n&&["all_animations_finished","any_animation_finished"],Xs);if("temp"==a||"t"==a){var s=e.match(/([^a-z]|^)t(emp)?\.\w+/gi);if(s)return s=(s=s.map((function(e){return e.split(".")[1]}))).filter((function(e,t){return e!==o&&s.indexOf(e)===t})),il(s,o)}if("context"==a||"c"==a)return il(Ys,o);if("variable"==a||"v"==a){var l=Ks(nl(o));return l.safePush.apply(l,Ks(Zs)),il(l,o)}return[]}var ol=n(379),sl=n.n(ol),ll=n(714),cl={insert:"head",singleton:!1};sl()(ll.Z,cl);ll.Z.locals;var ul=n(325),hl=n.n(ul);function pl(){return pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}var dl={"(":")","{":"}","[":"]",'"':'"',"'":"'"},fl="navigator"in n.g&&/Win/i.test(navigator.platform),ml="navigator"in n.g&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),vl=As.extend({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},value:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""},autocomplete:{type:Function,default:function(){return[]}}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:"",autocompleteOpen:!1,autocompleteIndex:0,autocompleteData:[]}},watch:{value:{immediate:!0,handler:function(e){this.codeData=e||""}},content:{immediate:!0,handler:function(){var e=this;this.lineNumbers&&this.$nextTick((function(){e.setLineNumbersHeight()}))}},lineNumbers:function(){var e=this;this.$nextTick((function(){e.styleLineNumbers(),e.setLineNumbersHeight()}))},autocompleteIndex:function(){var e=this;As.nextTick((function(){var t=e.$el.querySelector("ul.prism-editor__autocomplete > li.selected");t&&t.scrollIntoView({block:"nearest"})}))}},computed:{isEmpty:function(){return 0===this.codeData.length},content:function(){return this.highlight(this.codeData)+"<br />"},lineNumbersCount:function(){return this.codeData.split(/\r\n|\n/).length},cursorOffset:function(){var e=this.codeData,t=this.$refs.textarea,n=this.$refs.wrapper,r=e.substring(0,t.selectionEnd||0).split(/\r\n|\n/),i=parseFloat(getComputedStyle(t).getPropertyValue("font-size")),a=r.length,o=r[r.length-1].length;return[Math.min(8.85*o*(i/16)-n.scrollLeft,n.clientWidth-Math.min(240,n.clientWidth)),24*a*(i/16)+2-n.scrollTop]}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{updateAutocompleteData:function(){var e,t=this.$refs.textarea,n="function"==typeof this.autocomplete?this.autocomplete(this.codeData,t.selectionEnd):[],r=this.autocompleteData.length;(e=this.autocompleteData).splice.apply(e,[0,1/0].concat(n)),this.autocompleteOpen=!0,this.autocompleteIndex=Math.max(0,Math.min(this.autocompleteIndex,this.autocompleteData.length-1)),r>this.autocompleteData.length&&(this.autocompleteIndex=0)},acceptAutocomplete:function(e,t){var n=this;e.preventDefault(),null==t&&(t=this.autocompleteIndex);var r=this.$refs.textarea,i=this.$refs.wrapper,a=this.autocompleteData[t]||this.autocompleteData[0];if(a){var o=a.overlap||0,s=[this.codeData.substr(0,r.selectionEnd-o),a.text,this.codeData.substring(r.selectionEnd)].join(""),l=r.selectionEnd-o+a.text.length+(a.text.endsWith(")")?-1:0);r.selectionStart=r.selectionEnd=l,this._applyEdits({value:s,selectionStart:l,selectionEnd:l});var c=a.text.length-a.overlap;As.nextTick((function(){i.scrollLeft+=8.85*c})),a.text.endsWith(".")?setTimeout((function(){n.updateAutocompleteData()}),1):this.autocompleteOpen=!1}},setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(this.lineNumbers&&this.autoStyleLineNumbers){var e=this.$refs.pre,t=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(e);this.$nextTick((function(){var r="border-top-left-radius",i="border-bottom-left-radius";if(t){t.style[r]=n[r],t.style[i]=n[i],e.style[r]="0",e.style[i]="0";["background-color","margin-top","padding-top","font-family","font-size","line-height"].forEach((function(e){t.style[e]=n[e]})),t.style["margin-bottom"]="-"+n["padding-top"]}}))}},_recordCurrentState:function(){var e=this.$refs.textarea;if(e){var t=e.value,n=e.selectionStart,r=e.selectionEnd;this._recordChange({value:t,selectionStart:n,selectionEnd:r})}},_getLines:function(e,t){return e.substring(0,t).split("\n")},_recordStateIfChange:function(){this.history.stack[this.history.offset].value!=this.codeData&&this._recordChange({value:this.codeData,selectionStart:this.codeData.length,selectionEnd:this.codeData.length})},_applyEdits:function(e){var t=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&t&&(this.history.stack[this.history.offset]=pl({},n,{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),this._recordChange(e),this._updateInput(e)},_recordChange:function(e,t){void 0===t&&(t=!1);var n=this.history,r=n.stack,i=n.offset;if(r.length&&i>-1){this.history.stack=r.slice(0,i+1);var a=this.history.stack.length;if(a>100){var o=a-100;this.history.stack=r.slice(o,a),this.history.offset=Math.max(this.history.offset-o,0)}}var s=Date.now();if(t){var l=this.history.stack[this.history.offset];if(l&&s-l.timestamp<3e3){var c,u,h=/[^a-z0-9]([a-z0-9]+)$/i,p=null===(c=this._getLines(l.value,l.selectionStart).pop())||void 0===c?void 0:c.match(h),d=null===(u=this._getLines(e.value,e.selectionStart).pop())||void 0===u?void 0:u.match(h);if(p&&d&&d[1].startsWith(p[1]))return void(this.history.stack[this.history.offset]=pl({},e,{timestamp:s}))}}this.history.stack.push(pl({},e,{timestamp:s})),this.history.offset++},_updateInput:function(e){var t=this.$refs.textarea;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,this.$emit("input",e.value))},handleChange:function(e){var t=e.target,n=t.value,r=t.selectionStart,i=t.selectionEnd;this._recordChange({value:n,selectionStart:r,selectionEnd:i},!0),this.$emit("input",n)},_undoEdit:function(){var e=this.history,t=e.stack,n=e.offset,r=t[n-1];r&&(this._updateInput(r),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var e=this.history,t=e.stack,n=e.offset,r=t[n+1];r&&(this._updateInput(r),this.history.offset=Math.min(n+1,t.length-1))},handleKeyDown:function(e){var t=this,n=this.tabSize,r=this.insertSpaces,i=this.ignoreTabKey;if(!this.$listeners.keydown||(this.$emit("keydown",e),!e.defaultPrevented)){if(9===e.keyCode&&this.autocompleteData.length&&this.autocompleteOpen)return this.acceptAutocomplete(e),e.preventDefault(),void e.stopPropagation();if(27===e.keyCode){if(this.autocompleteData.length&&this.autocompleteOpen)return e.preventDefault(),void(this.autocompleteOpen=!1)}else if(38===e.keyCode){if(this.autocompleteData.length&&this.autocompleteOpen)return e.preventDefault(),void(this.autocompleteIndex=(this.autocompleteIndex?this.autocompleteIndex:this.autocompleteData.length)-1)}else if(40===e.keyCode&&this.autocompleteData.length&&this.autocompleteOpen)return e.preventDefault(),void(this.autocompleteIndex=(this.autocompleteIndex+1)%this.autocompleteData.length);27===e.keyCode&&(e.target.blur(),this.$emit("blur",e));var a=e.target,o=a.value,s=a.selectionStart,l=a.selectionEnd,c=(r?" ":"\t").repeat(n);if(9===e.keyCode&&!i&&this.capture)if(e.preventDefault(),e.shiftKey){var u=this._getLines(o,s),h=u.length-1,p=this._getLines(o,l).length-1,d=o.split("\n").map((function(e,t){return t>=h&&t<=p&&e.startsWith(c)?e.substring(c.length):e})).join("\n");if(o!==d){var f=u[h];this._applyEdits({value:d,selectionStart:f.startsWith(c)?s-c.length:s,selectionEnd:l-(o.length-d.length)})}}else if(s!==l){var m=this._getLines(o,s),v=m.length-1,g=this._getLines(o,l).length-1,_=m[v];this._applyEdits({value:o.split("\n").map((function(e,t){return t>=v&&t<=g?c+e:e})).join("\n"),selectionStart:/\S/.test(_)?s+c.length:s,selectionEnd:l+c.length*(g-v+1)})}else{var y=s+c.length;this._applyEdits({value:o.substring(0,s)+c+o.substring(l),selectionStart:y,selectionEnd:y})}else if(8===e.keyCode){var b=s!==l;if(o.substring(0,s).endsWith(c)&&!b){e.preventDefault();var x=s-c.length;this._applyEdits({value:o.substring(0,s-c.length)+o.substring(l),selectionStart:x,selectionEnd:x})}}else if(13===e.keyCode){if(this.autocompleteData.length&&this.autocompleteOpen)this.acceptAutocomplete(e);else if(s===l){var w=this._getLines(o,s).pop(),M=null==w?void 0:w.match(/^\s+/);if(M&&M[0]){e.preventDefault();var S="\n"+M[0],E=s+S.length;this._applyEdits({value:o.substring(0,s)+S+o.substring(l),selectionStart:E,selectionEnd:E})}}}else dl[e.key]?s!==l&&(e.preventDefault(),this._applyEdits({value:o.substring(0,s)+e.key+o.substring(s,l)+dl[e.key]+o.substring(l),selectionStart:s+1,selectionEnd:l+1})):!(ml?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)||e.shiftKey||e.altKey?(ml?e.metaKey&&90===e.keyCode&&e.shiftKey:fl?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),this._redoEdit()):77!==e.keyCode||!e.ctrlKey||ml&&!e.shiftKey||(e.preventDefault(),this.capture=!this.capture):(e.preventDefault(),this._undoEdit());13!==e.keyCode&&9!==e.keyCode&&setTimeout((function(){t.updateAutocompleteData()}),1)}}},render:function(e){var t=this,n=e("div",{attrs:{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"}},"999"),r=e("div",{staticClass:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},attrs:{"aria-hidden":"true"}},[n,Array.from(Array(this.lineNumbersCount).keys()).map((function(t,n){return e("div",{attrs:{class:"prism-editor__line-number token comment"}},""+ ++n)}))]),i=this.autocompleteOpen&&this.autocompleteData.length?e("ul",{staticClass:"prism-editor__autocomplete",style:{left:this.cursorOffset[0]+"px",top:this.cursorOffset[1]+"px"}},this.autocompleteData.map((function(n,r){return e("li",{key:n.text,class:{selected:r==t.autocompleteIndex},on:{mousedown:function(e){t.acceptAutocomplete(e,r)}}},[n.label||n.text])}))):void 0,a=e("textarea",{ref:"textarea",on:{input:this.handleChange,keydown:this.handleKeyDown,click:function(e){t.autocompleteOpen=!1,t.$emit("click",e)},keyup:function(e){t.$emit("keyup",e)},focus:function(e){t._recordStateIfChange(),t.$emit("focus",e)},blur:function(e){t.autocompleteOpen=!1,t.$emit("blur",e)}},staticClass:"prism-editor__textarea",class:{"prism-editor__textarea--empty":this.isEmpty},attrs:{spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly},domProps:{value:this.codeData}}),o=e("pre",{ref:"pre",staticClass:"prism-editor__editor",attrs:{"data-testid":"preview"},domProps:{innerHTML:this.content}}),s=e("div",{staticClass:"prism-editor__container"},[a,o]),l=e("div",{staticClass:"prism-editor-wrapper",ref:"wrapper"},[this.lineNumbers&&r,s]);return e("div",{staticClass:"prism-editor-component"},[l,i])}}),gl=n(389),_l={insert:"head",singleton:!1};sl()(gl.Z,_l);gl.Z.locals;const yl={molang:{string:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"function-name":/\b(?!\d)math\.\w+(?=[\t ]*\()/i,selector:/\b(?!\d)(query|variable|temp|context|math|q|v|t|c)\.\w+/i,boolean:/\b(?:true|false)\b/i,number:/(?:\b\d+(?:\.\d+f?)?(?:[ed][+-]\d+)?|&h[a-f\d]+)\b/i,operator:/&&|\|\||[-+*/!<>]=?|[:?=]/i,keyword:/\b(return|loop|for_each|break|continue)\b/i,punctuation:/[.,;()[\]{}]/},generic:{namespace:/.*:/,punctuation:/[.,;()//[\]{}]/}};var bl={input:0,axis:null,updateText:function(e){},setup:!1};const xl={name:"expression-bar",components:{PrismEditor:vl},data:function(){return{code:"",language:"generic"}},methods:{autocomplete:function(e,t){return al(e,t,"input")},highlighter:function(){return hl().highlight(this.code,yl[this.language])},updateInput:function(e,t){if(e||"string"==typeof e||"number"==typeof e||(e=""),"string"!=typeof e&&(e=e.toString()),this.code=e,bl.input&&t){var n=bl.input;if(1!=n.axis_count){for(var r=[],i=n.axis_count>0?n.axis_count:n.value&&n.value.length,a=0;a<i;a++)r[a]=a==bl.axis?e:n.value[a];n.set(r)}else n.value=e;"function"==typeof n.change&&n.change(event)}}},mounted:function(){var e=this;bl.setup=!0,bl.updateText=function(t,n,r){n&&n!==e.language&&(e.language=n),r&&(e.$refs.input._data.history.offset=0,e.$refs.input._data.history.stack.splice(0,1/0,{selectionEnd:t.length,selectionStart:t.length,timestamp:(new Date).getTime(),value:t})),e.updateInput(t)}}},wl=xl;var Ml=n(481),Sl={insert:"head",singleton:!1};sl()(Ml.Z,Sl);Ml.Z.locals;function El(e,t,n,r,i,a,o,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}const Al=El(wl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"expression_bar"}},[n("prism-editor",{ref:"input",attrs:{value:e.code,autocomplete:e.autocomplete,highlight:e.highlighter,"line-numbers":!1},on:{input:function(t){return e.updateInput(t,!0)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)}),[],!1,null,null,null).exports;function Tl(e){return Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(e)}function Cl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ll(e,t,n){return(t=zl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pl(){Pl=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",v={};function g(){}function _(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&r.call(w,o)&&(b=w);var M=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Tl(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Tl(t)+" is not iterable")}return _.prototype=y,i(M,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,l,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Rl(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zl(r.key),r)}}function zl(e){var t=function(e,t){if("object"!=Tl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tl(t)?t:String(t)}var Ol,Dl=null;function Nl(e){return[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),parseInt(e.substring(7,9),16)]}var Fl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=16,this.ctx=this.canvas.getContext("2d"),this.source="",this.history=[],this.history_index=0,this.internal_changes=!1,window.tex=this}var t,n,r,i,a;return t=e,n=[{key:"linkEmitter",value:function(e,t){this.texture=t.texture,this.img=this.texture.image,Ol=t,e}},{key:"canvasToDataURL",value:function(){this.source=this.canvas.toDataURL()}},{key:"updateCanvasFromSource",value:(i=Pl().mark((function e(){var t,n=this;return Pl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.source){e.next=4;break}return this.canvas.width=16,this.canvas.height=16,e.abrupt("return");case 4:return(t=new Image).src=this.source,e.next=8,new Promise((function(e,r){t.onload=function(){n.canvas.width=t.naturalWidth,n.canvas.height=t.naturalHeight,n.ctx.drawImage(t,0,0),e()},t.onerror=r}));case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){Rl(a,n,r,o,s,"next",e)}function s(e){Rl(a,n,r,o,s,"throw",e)}o(void 0)}))},function(){return a.apply(this,arguments)})},{key:"update",value:function(){this.img.src=this.source}},{key:"reset",value:function(){this.source="",this.internal_changes=!1,Dl=null,this.history=[],this.history_index=0,this.updateCanvasFromSource()}},{key:"reload",value:function(){this.internal_changes=!1,Ol.updateTexture(),this.updateCanvasFromSource()}},{key:"createEmpty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;this.canvas.width=e,this.canvas.height=t,eM.texture.uv.inputs.size.value.splice(0,2,e,t),this.canvasToDataURL(),this.internal_changes=!0,this.update()}},{key:"save",value:function(){if(this.source){if(Cs){if(this.internal_changes){var e=this.source;Cs.postMessage({type:"save_texture",path:Ol.particle_texture_path,content:e})}}else Bs.export({name:this.name||"Texture",extensions:["png"],savetype:"image",content:this.source});this.markAsSaved()}}},{key:"markAsSaved",value:function(){this.internal_changes=!1}},{key:"pickColor",value:function(e,t){var n=t.position,r=this.ctx.getImageData(n.x,n.y,1,1).data,i="#";return r.forEach((function(e){var t=e.toString(16);1==t.length&&(t="0"+t),i+=t})),i}},{key:"usePaintTool",value:function(e,t){var n=this;this.beforeEdit();var r,i={};e.shiftKey&&Dl&&(i={x:Dl[0],y:Dl[1]}),t.color&&(r=Nl(t.color));var a=function(e,t,i){if("brush"==i.tool){for(var a=n.ctx.getImageData(e-Math.round(0),t-Math.round(0),1,1),o=0;o<a.data.length;o+=4)a.data[o+0]=r[0],a.data[o+1]=r[1],a.data[o+2]=r[2],a.data[o+3]=r[3];n.ctx.putImageData(a,e-Math.round(0),t-Math.round(0))}else n.ctx.clearRect(e-Math.round(0),t-Math.round(0),1,1)},o=function(e){var r=t.position;if(i.x!=r.x||i.y!=r.y){var o=i.x-r.x,s=i.y-r.y,l=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));if(l>1.5&&null!=i.x){var c=1;c=Math.abs(o)>Math.abs(s)?Math.sqrt(Math.pow(s/o,2)+1):Math.sqrt(Math.pow(o/s,2)+1);for(var u=0;u<=l;u+=c){var h=l?Math.round(i.x-o/l*u):r.x,p=l?Math.round(i.y-s/l*u):r.y;a(h,p,t)}}else a(r.x,r.y,t);n.canvasToDataURL(),n.internal_changes=!0,n.update(),i.x=r.x,i.y=r.y,Dl=[r.x,r.y]}};document.addEventListener("pointermove",o),document.addEventListener("pointerup",(function e(t){n.afterEdit(),document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",e)})),o()}},{key:"useFillTool",value:function(e,t){var n=this;this.beforeEdit();var r=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),i=Nl(t.color),a=Ll({},t.position.x,Ll({},t.position.y,!0)),o=function(e,t){var i=4*(t*n.canvas.width+e);return[r.data[i],r.data[i+1],r.data[i+2],r.data[i+3]]},s=o(t.position.x,t.position.y),l=function(e,t){if(!(a[e]&&null!=a[e][t]||e<0||t<0||e>=n.canvas.width||t>=n.canvas.height)){var r=o(e,t),i=s.equals(r);a[e]||(a[e]={}),a[e][t]=i,i&&c(e,t)}},c=function(e,t){l(e+1,t+0),l(e-1,t+0),l(e+0,t+1),l(e+0,t-1)};for(var u in c(t.position.x,t.position.y),a)for(var h in a[u])if(a[u][h]){var p,d=0,f=Cl(i);try{for(f.s();!(p=f.n()).done;){var m=p.value;r.data[4*(h*this.canvas.width+1*u)+d]=m,d++}}catch(e){f.e(e)}finally{f.f()}}this.ctx.putImageData(r,0,0),this.canvasToDataURL(),this.internal_changes=!0,this.update(),this.afterEdit()}},{key:"beforeEdit",value:function(){var e={id:String.fromCharCode(65+26*Math.random())+String.fromCharCode(65+26*Math.random()),data_before:this.source};this.current_undo_entry=e}},{key:"afterEdit",value:function(e){var t=this.current_undo_entry;t.label=e,t.data_after=this.source,this.history.length>this.history_index&&(this.history.length=this.history_index),this.history.push(t),this.history_index=this.history.length,delete this.current_undo_entry}},{key:"cancelEdit",value:function(){this.source=this.current_undo_entry.data_before,this.updateCanvasFromSource(),delete this.current_undo_entry}},{key:"undo",value:function(){var e=this.history[this.history_index-1],t=this.history[this.history_index-2];e&&(this.history_index=Math.max(0,this.history_index-1),this.source=t?t.data_after:e.data_before,this.source?this.internal_changes=!0:this.internal_changes=!1,this.updateCanvasFromSource())}},{key:"redo",value:function(){if(!(this.history_index>=this.history.length)){var e=this.history[this.history_index];this.history_index+=1,this.source=e.data_after,this.source?(this.internal_changes=!0,this.updateCanvasFromSource()):(this.internal_changes=!1,this.update())}}}],n&&Il(t.prototype,n),r&&Il(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.addEventListener("keydown",(function(e){if(!document.querySelector('input:focus, div[contenteditable="true"]:focus, textarea:focus')&&document.querySelector(".texture_input:hover")){var t=!1;(e.ctrlKey||e.metaKey)&&("z"==e.key?(Bl.undo(),t=!0):"y"==e.key&&(Bl.redo(),t=!0)),t&&e.preventDefault()}}));var Bl=new Fl;window.addEventListener("message",(function(e){"request_save_texture"==e.data.type&&Bl.source&&Bl.save()})),window.getTextureForParentEffect=function(){return Bl.source};const Ul=0,Hl=1,jl=2,Vl=0,Gl=1,Wl=2,ql=3,Xl=0,Yl=1,Zl=2,Jl=1,Ql=2,Kl=3,$l=0,ec=1,tc=2,nc=0,rc=1,ic=2,ac=3,oc=4,sc=5,lc=100,cc=101,uc=102,hc=103,pc=104,dc=200,fc=201,mc=202,vc=203,gc=204,_c=205,yc=206,bc=207,xc=208,wc=209,Mc=210,Sc=0,Ec=1,Ac=2,Tc=3,Cc=4,kc=5,Lc=6,Pc=7,Rc=0,Ic=1,zc=2,Oc=0,Dc=1,Nc=2,Fc=3,Bc=4,Uc=5,Hc=301,jc=302,Vc=303,Gc=304,Wc=306,qc=307,Xc=1e3,Yc=1001,Zc=1002,Jc=1003,Qc=1004,Kc=1005,$c=1006,eu=1007,tu=1008,nu=1009,ru=1010,iu=1011,au=1012,ou=1013,su=1014,lu=1015,cu=1016,uu=1017,hu=1018,pu=1019,du=1020,fu=1021,mu=1022,vu=1023,gu=1024,_u=1025,yu=vu,bu=1026,xu=1027,wu=1028,Mu=1029,Su=1030,Eu=1031,Au=1032,Tu=1033,Cu=33776,ku=33777,Lu=33778,Pu=33779,Ru=35840,Iu=35841,zu=35842,Ou=35843,Du=36196,Nu=37492,Fu=37496,Bu=37808,Uu=37809,Hu=37810,ju=37811,Vu=37812,Gu=37813,Wu=37814,qu=37815,Xu=37816,Yu=37817,Zu=37818,Ju=37819,Qu=37820,Ku=37821,$u=36492,eh=37840,th=37841,nh=37842,rh=37843,ih=37844,ah=37845,oh=37846,sh=37847,lh=37848,ch=37849,uh=37850,hh=37851,ph=37852,dh=37853,fh=2300,mh=2301,vh=2302,gh=2400,_h=2401,yh=2402,bh=2500,xh=3e3,wh=3001,Mh=3007,Sh=3002,Eh=3003,Ah=3004,Th=3005,Ch=3006,kh=3201,Lh=0,Ph=1,Rh=7680,Ih=35044,zh=35048,Oh="300 es";class Dh{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}let Nh=1234567;const Fh=Math.PI/180,Bh=180/Math.PI,Uh=[];for(let e=0;e<256;e++)Uh[e]=(e<16?"0":"")+e.toString(16);const Hh="undefined"!=typeof crypto&&"randomUUID"in crypto;function jh(){if(Hh)return crypto.randomUUID().toUpperCase();const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Uh[255&e]+Uh[e>>8&255]+Uh[e>>16&255]+Uh[e>>24&255]+"-"+Uh[255&t]+Uh[t>>8&255]+"-"+Uh[t>>16&15|64]+Uh[t>>24&255]+"-"+Uh[63&n|128]+Uh[n>>8&255]+"-"+Uh[n>>16&255]+Uh[n>>24&255]+Uh[255&r]+Uh[r>>8&255]+Uh[r>>16&255]+Uh[r>>24&255]).toUpperCase()}function Vh(e,t,n){return Math.max(t,Math.min(n,e))}function Gh(e,t){return(e%t+t)%t}function Wh(e,t,n){return(1-n)*e+n*t}function qh(e){return 0==(e&e-1)&&0!==e}function Xh(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Yh(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Zh=Object.freeze({__proto__:null,DEG2RAD:Fh,RAD2DEG:Bh,generateUUID:jh,clamp:Vh,euclideanModulo:Gh,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Wh,damp:function(e,t,n,r){return Wh(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Gh(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Nh=e%2147483647),Nh=16807*Nh%2147483647,(Nh-1)/2147483646},degToRad:function(e){return e*Fh},radToDeg:function(e){return e*Bh},isPowerOfTwo:qh,ceilPowerOfTwo:Xh,floorPowerOfTwo:Yh,setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((t+r)/2),u=o((t+r)/2),h=a((t-r)/2),p=o((t-r)/2),d=a((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(s*u,l*h,l*p,s*c);break;case"YZY":e.set(l*p,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*p,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*d,s*c);break;case"YXY":e.set(l*d,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}});class Jh{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Jh.prototype.isVector2=!0;class Qh{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,a,o,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],p=n[5],d=n[8],f=r[0],m=r[3],v=r[6],g=r[1],_=r[4],y=r[7],b=r[2],x=r[5],w=r[8];return i[0]=a*f+o*g+s*b,i[3]=a*m+o*_+s*x,i[6]=a*v+o*y+s*w,i[1]=l*f+c*g+u*b,i[4]=l*m+c*_+u*x,i[7]=l*v+c*y+u*w,i[2]=h*f+p*g+d*b,i[5]=h*m+p*_+d*x,i[8]=h*v+p*y+d*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*i*c+n*o*s+r*i*l-r*a*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,h=o*s-c*i,p=l*i-a*s,d=t*u+n*h+r*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const f=1/d;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(o*n-r*a)*f,e[3]=h*f,e[4]=(c*t-r*s)*f,e[5]=(r*i-o*t)*f,e[6]=p*f,e[7]=(n*s-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Kh(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Qh.prototype.isMatrix3=!0;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function $h(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ep(e,t=0){let n=3735928559^t,r=1103547991^t;for(let t,i=0;i<e.length;i++)t=e.charCodeAt(i),n=Math.imul(n^t,2654435761),r=Math.imul(r^t,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}let tp;class np{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===tp&&(tp=$h("canvas")),tp.width=e.width,tp.height=e.height;const n=tp.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=tp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let rp=0;class ip extends Dh{constructor(e=ip.DEFAULT_IMAGE,t=ip.DEFAULT_MAPPING,n=Yc,r=Yc,i=$c,a=tu,o=vu,s=nu,l=1,c=xh){super(),Object.defineProperty(this,"id",{value:rp++}),this.uuid=jh(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Jh(0,0),this.repeat=new Jh(1,1),this.center=new Jh(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qh,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=jh()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(ap(r[e].image)):t.push(ap(r[e]))}else t=ap(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xc:e.x=e.x-Math.floor(e.x);break;case Yc:e.x=e.x<0?0:1;break;case Zc:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Xc:e.y=e.y-Math.floor(e.y);break;case Yc:e.y=e.y<0?0:1;break;case Zc:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function ap(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?np.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}ip.DEFAULT_IMAGE=void 0,ip.DEFAULT_MAPPING=300,ip.prototype.isTexture=!0;class op{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],p=s[5],d=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(c-h)<a&&Math.abs(u-f)<a&&Math.abs(d-m)<a){if(Math.abs(c+h)<o&&Math.abs(u+f)<o&&Math.abs(d+m)<o&&Math.abs(l+p+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(p+1)/2,g=(v+1)/2,_=(c+h)/4,y=(u+f)/4,b=(d+m)/4;return e>s&&e>g?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=_/n,i=y/n):s>g?s<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=_/r,i=b/r):g<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=y/i,r=b/i),this.set(n,r,i,t),this}let g=Math.sqrt((m-d)*(m-d)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(g)<.001&&(g=1),this.x=(m-d)/g,this.y=(u-f)/g,this.z=(h-c)/g,this.w=Math.acos((l+p+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}op.prototype.isVector4=!0;class sp extends Dh{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new op(0,0,e,t),this.scissorTest=!1,this.viewport=new op(0,0,e,t),this.texture=new ip(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:$c,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}sp.prototype.isWebGLRenderTarget=!0;(class extends sp{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class lp extends sp{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}lp.prototype.isWebGLMultisampleRenderTarget=!0;class cp{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[a+0],p=i[a+1],d=i[a+2],f=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=h,e[t+1]=p,e[t+2]=d,void(e[t+3]=f);if(u!==f||s!==h||l!==p||c!==d){let e=1-o;const t=s*h+l*p+c*d+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}const i=o*n;if(s=s*e+h*i,l=l*e+p*i,c=c*e+d*i,u=u*e+f*i,e===1-o){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,a){const o=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[a],h=i[a+1],p=i[a+2],d=i[a+3];return e[t]=o*d+c*u+s*p-l*h,e[t+1]=s*d+c*h+l*u-o*p,e[t+2]=l*d+c*p+o*h-s*u,e[t+3]=c*d-o*u-s*h-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),h=s(n/2),p=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*c*u+l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u-h*p*d;break;case"YXZ":this._x=h*c*u+l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u+h*p*d;break;case"ZXY":this._x=h*c*u-l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u-h*p*d;break;case"ZYX":this._x=h*c*u-l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u+h*p*d;break;case"YZX":this._x=h*c*u+l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u-h*p*d;break;case"XZY":this._x=h*c*u-l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u+h*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vh(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+r*l-i*s,this._y=r*c+a*s+i*o-n*l,this._z=i*c+a*l+n*s-r*o,this._w=a*c-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}cp.prototype.isQuaternion=!0;class up{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(pp.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pp.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,c=s*n+o*t-i*r,u=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=l*s+h*-i+c*-o-u*-a,this.y=c*s+h*-a+u*-i-l*-o,this.z=u*s+h*-o+l*-a-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return hp.copy(this).projectOnVector(e),this.sub(hp)}reflect(e){return this.sub(hp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Vh(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}up.prototype.isVector3=!0;const hp=new up,pp=new cp;class dp{constructor(e=new up(1/0,1/0,1/0),t=new up(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,a,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=mp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),vp.copy(t.boundingBox),vp.applyMatrix4(e.matrixWorld),this.union(vp));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,mp),mp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mp),Sp.subVectors(this.max,Mp),gp.subVectors(e.a,Mp),_p.subVectors(e.b,Mp),yp.subVectors(e.c,Mp),bp.subVectors(_p,gp),xp.subVectors(yp,_p),wp.subVectors(gp,yp);let t=[0,-bp.z,bp.y,0,-xp.z,xp.y,0,-wp.z,wp.y,bp.z,0,-bp.x,xp.z,0,-xp.x,wp.z,0,-wp.x,-bp.y,bp.x,0,-xp.y,xp.x,0,-wp.y,wp.x,0];return!!Tp(t,gp,_p,yp,Sp)&&(t=[1,0,0,0,1,0,0,0,1],!!Tp(t,gp,_p,yp,Sp)&&(Ep.crossVectors(bp,xp),t=[Ep.x,Ep.y,Ep.z],Tp(t,gp,_p,yp,Sp)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return mp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(mp).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(fp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fp)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}dp.prototype.isBox3=!0;const fp=[new up,new up,new up,new up,new up,new up,new up,new up],mp=new up,vp=new dp,gp=new up,_p=new up,yp=new up,bp=new up,xp=new up,wp=new up,Mp=new up,Sp=new up,Ep=new up,Ap=new up;function Tp(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){Ap.fromArray(e,a);const o=i.x*Math.abs(Ap.x)+i.y*Math.abs(Ap.y)+i.z*Math.abs(Ap.z),s=t.dot(Ap),l=n.dot(Ap),c=r.dot(Ap);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const Cp=new dp,kp=new up,Lp=new up,Pp=new up;class Rp{constructor(e=new up,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Cp.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Pp.subVectors(e,this.center);const t=Pp.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Pp.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return Lp.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(kp.copy(e.center).add(Lp)),this.expandByPoint(kp.copy(e.center).sub(Lp)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ip=new up,zp=new up,Op=new up,Dp=new up,Np=new up,Fp=new up,Bp=new up;class Up{constructor(e=new up,t=new up(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ip)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ip.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ip.copy(this.direction).multiplyScalar(t).add(this.origin),Ip.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){zp.copy(e).add(t).multiplyScalar(.5),Op.copy(t).sub(e).normalize(),Dp.copy(this.origin).sub(zp);const i=.5*e.distanceTo(t),a=-this.direction.dot(Op),o=Dp.dot(this.direction),s=-Dp.dot(Op),l=Dp.lengthSq(),c=Math.abs(1-a*a);let u,h,p,d;if(c>0)if(u=a*s-o,h=a*o-s,d=i*c,u>=0)if(h>=-d)if(h<=d){const e=1/c;u*=e,h*=e,p=u*(u+a*h+2*o)+h*(a*u+h+2*s)+l}else h=i,u=Math.max(0,-(a*h+o)),p=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(a*h+o)),p=-u*u+h*(h+2*s)+l;else h<=-d?(u=Math.max(0,-(-a*i+o)),h=u>0?-i:Math.min(Math.max(-i,-s),i),p=-u*u+h*(h+2*s)+l):h<=d?(u=0,h=Math.min(Math.max(-i,-s),i),p=h*(h+2*s)+l):(u=Math.max(0,-(a*i+o)),h=u>0?i:Math.min(Math.max(-i,-s),i),p=-u*u+h*(h+2*s)+l);else h=a>0?-i:i,u=Math.max(0,-(a*h+o)),p=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Op).multiplyScalar(h).add(zp),p}intersectSphere(e,t){Ip.subVectors(e.center,this.origin);const n=Ip.dot(this.direction),r=Ip.dot(Ip)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Ip)}intersectTriangle(e,t,n,r,i){Np.subVectors(t,e),Fp.subVectors(n,e),Bp.crossVectors(Np,Fp);let a,o=this.direction.dot(Bp);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Dp.subVectors(this.origin,e);const s=a*this.direction.dot(Fp.crossVectors(Dp,Fp));if(s<0)return null;const l=a*this.direction.dot(Np.cross(Dp));if(l<0)return null;if(s+l>o)return null;const c=-a*Dp.dot(Bp);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Hp{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,a,o,s,l,c,u,h,p,d,f,m){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Hp).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/jp.setFromMatrixColumn(e,0).length(),i=1/jp.setFromMatrixColumn(e,1).length(),a=1/jp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-a*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*c,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=a*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Gp,e,Wp)}lookAt(e,t,n){const r=this.elements;return Yp.subVectors(e,t),0===Yp.lengthSq()&&(Yp.z=1),Yp.normalize(),qp.crossVectors(n,Yp),0===qp.lengthSq()&&(1===Math.abs(n.z)?Yp.x+=1e-4:Yp.z+=1e-4,Yp.normalize(),qp.crossVectors(n,Yp)),qp.normalize(),Xp.crossVectors(Yp,qp),r[0]=qp.x,r[4]=Xp.x,r[8]=Yp.x,r[1]=qp.y,r[5]=Xp.y,r[9]=Yp.y,r[2]=qp.z,r[6]=Xp.z,r[10]=Yp.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],_=n[7],y=n[11],b=n[15],x=r[0],w=r[4],M=r[8],S=r[12],E=r[1],A=r[5],T=r[9],C=r[13],k=r[2],L=r[6],P=r[10],R=r[14],I=r[3],z=r[7],O=r[11],D=r[15];return i[0]=a*x+o*E+s*k+l*I,i[4]=a*w+o*A+s*L+l*z,i[8]=a*M+o*T+s*P+l*O,i[12]=a*S+o*C+s*R+l*D,i[1]=c*x+u*E+h*k+p*I,i[5]=c*w+u*A+h*L+p*z,i[9]=c*M+u*T+h*P+p*O,i[13]=c*S+u*C+h*R+p*D,i[2]=d*x+f*E+m*k+v*I,i[6]=d*w+f*A+m*L+v*z,i[10]=d*M+f*T+m*P+v*O,i[14]=d*S+f*C+m*R+v*D,i[3]=g*x+_*E+y*k+b*I,i[7]=g*w+_*A+y*L+b*z,i[11]=g*M+_*T+y*P+b*O,i[15]=g*S+_*C+y*R+b*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],p=e[14];return e[3]*(+i*s*u-r*l*u-i*o*h+n*l*h+r*o*p-n*s*p)+e[7]*(+t*s*p-t*l*h+i*a*h-r*a*p+r*l*c-i*s*c)+e[11]*(+t*l*u-t*o*p-i*a*u+n*a*p+i*o*c-n*l*c)+e[15]*(-r*o*c-t*s*u+t*o*h+r*a*u-n*a*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],p=e[11],d=e[12],f=e[13],m=e[14],v=e[15],g=u*m*l-f*h*l+f*s*p-o*m*p-u*s*v+o*h*v,_=d*h*l-c*m*l-d*s*p+a*m*p+c*s*v-a*h*v,y=c*f*l-d*u*l+d*o*p-a*f*p-c*o*v+a*u*v,b=d*u*s-c*f*s-d*o*h+a*f*h+c*o*m-a*u*m,x=t*g+n*_+r*y+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=g*w,e[1]=(f*h*i-u*m*i-f*r*p+n*m*p+u*r*v-n*h*v)*w,e[2]=(o*m*i-f*s*i+f*r*l-n*m*l-o*r*v+n*s*v)*w,e[3]=(u*s*i-o*h*i-u*r*l+n*h*l+o*r*p-n*s*p)*w,e[4]=_*w,e[5]=(c*m*i-d*h*i+d*r*p-t*m*p-c*r*v+t*h*v)*w,e[6]=(d*s*i-a*m*i-d*r*l+t*m*l+a*r*v-t*s*v)*w,e[7]=(a*h*i-c*s*i+c*r*l-t*h*l-a*r*p+t*s*p)*w,e[8]=y*w,e[9]=(d*u*i-c*f*i-d*n*p+t*f*p+c*n*v-t*u*v)*w,e[10]=(a*f*i-d*o*i+d*n*l-t*f*l-a*n*v+t*o*v)*w,e[11]=(c*o*i-a*u*i-c*n*l+t*u*l+a*n*p-t*o*p)*w,e[12]=b*w,e[13]=(c*f*r-d*u*r+d*n*h-t*f*h-c*n*m+t*u*m)*w,e[14]=(d*o*r-a*f*r-d*n*s+t*f*s+a*n*m-t*o*m)*w,e[15]=(a*u*r-c*o*r+c*n*s-t*u*s-a*n*h+t*o*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,c=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,c*o+n,c*s-r*a,0,l*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,c=a+a,u=o+o,h=i*l,p=i*c,d=i*u,f=a*c,m=a*u,v=o*u,g=s*l,_=s*c,y=s*u,b=n.x,x=n.y,w=n.z;return r[0]=(1-(f+v))*b,r[1]=(p+y)*b,r[2]=(d-_)*b,r[3]=0,r[4]=(p-y)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(d+_)*w,r[9]=(m-g)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=jp.set(r[0],r[1],r[2]).length();const a=jp.set(r[4],r[5],r[6]).length(),o=jp.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Vp.copy(this);const s=1/i,l=1/a,c=1/o;return Vp.elements[0]*=s,Vp.elements[1]*=s,Vp.elements[2]*=s,Vp.elements[4]*=l,Vp.elements[5]*=l,Vp.elements[6]*=l,Vp.elements[8]*=c,Vp.elements[9]*=c,Vp.elements[10]*=c,t.setFromRotationMatrix(Vp),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(a+i)/(a-i),p=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,a){const o=this.elements,s=1/(t-e),l=1/(n-r),c=1/(a-i),u=(t+e)*s,h=(n+r)*l,p=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Hp.prototype.isMatrix4=!0;const jp=new up,Vp=new Hp,Gp=new up(0,0,0),Wp=new up(1,1,1),qp=new up,Xp=new up,Yp=new up,Zp=new Hp,Jp=new cp;class Qp{constructor(e=0,t=0,n=0,r=Qp.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(Vh(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Vh(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Vh(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Vh(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Vh(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-Vh(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Zp.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Zp,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Jp.setFromEuler(this),this.setFromQuaternion(Jp,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new up(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Qp.prototype.isEuler=!0,Qp.DefaultOrder="XYZ",Qp.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Kp{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let $p=0;const ed=new up,td=new cp,nd=new Hp,rd=new up,id=new up,ad=new up,od=new cp,sd=new up(1,0,0),ld=new up(0,1,0),cd=new up(0,0,1),ud={type:"added"},hd={type:"removed"};class pd extends Dh{constructor(){super(),Object.defineProperty(this,"id",{value:$p++}),this.uuid=jh(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pd.DefaultUp.clone();const e=new up,t=new Qp,n=new cp,r=new up(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Hp},normalMatrix:{value:new Qh}}),this.matrix=new Hp,this.matrixWorld=new Hp,this.matrixAutoUpdate=pd.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Kp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return td.setFromAxisAngle(e,t),this.quaternion.multiply(td),this}rotateOnWorldAxis(e,t){return td.setFromAxisAngle(e,t),this.quaternion.premultiply(td),this}rotateX(e){return this.rotateOnAxis(sd,e)}rotateY(e){return this.rotateOnAxis(ld,e)}rotateZ(e){return this.rotateOnAxis(cd,e)}translateOnAxis(e,t){return ed.copy(e).applyQuaternion(this.quaternion),this.position.add(ed.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(sd,e)}translateY(e){return this.translateOnAxis(ld,e)}translateZ(e){return this.translateOnAxis(cd,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(nd.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?rd.copy(e):rd.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),id.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nd.lookAt(id,rd,this.up):nd.lookAt(rd,id,this.up),this.quaternion.setFromRotationMatrix(nd),r&&(nd.extractRotation(r.matrixWorld),td.setFromRotationMatrix(nd),this.quaternion.premultiply(td.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ud)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(hd)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(hd)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),nd.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),nd.multiply(e.parent.matrixWorld)),e.applyMatrix4(nd),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(id,e,ad),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(id,od,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),c=a(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}pd.DefaultUp=new up(0,1,0),pd.DefaultMatrixAutoUpdate=!0,pd.prototype.isObject3D=!0;const dd=new up,fd=new up,md=new up,vd=new up,gd=new up,_d=new up,yd=new up,bd=new up,xd=new up,wd=new up;class Md{constructor(e=new up,t=new up,n=new up){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),dd.subVectors(e,t),r.cross(dd);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){dd.subVectors(r,t),fd.subVectors(n,t),md.subVectors(e,t);const a=dd.dot(dd),o=dd.dot(fd),s=dd.dot(md),l=fd.dot(fd),c=fd.dot(md),u=a*l-o*o;if(0===u)return i.set(-2,-1,-1);const h=1/u,p=(l*s-o*c)*h,d=(a*c-o*s)*h;return i.set(1-p-d,d,p)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,vd),vd.x>=0&&vd.y>=0&&vd.x+vd.y<=1}static getUV(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,vd),s.set(0,0),s.addScaledVector(i,vd.x),s.addScaledVector(a,vd.y),s.addScaledVector(o,vd.z),s}static isFrontFacing(e,t,n,r){return dd.subVectors(n,t),fd.subVectors(e,t),dd.cross(fd).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return dd.subVectors(this.c,this.b),fd.subVectors(this.a,this.b),.5*dd.cross(fd).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Md.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Md.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Md.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Md.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Md.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,o;gd.subVectors(r,n),_d.subVectors(i,n),bd.subVectors(e,n);const s=gd.dot(bd),l=_d.dot(bd);if(s<=0&&l<=0)return t.copy(n);xd.subVectors(e,r);const c=gd.dot(xd),u=_d.dot(xd);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return a=s/(s-c),t.copy(n).addScaledVector(gd,a);wd.subVectors(e,i);const p=gd.dot(wd),d=_d.dot(wd);if(d>=0&&p<=d)return t.copy(i);const f=p*l-s*d;if(f<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(n).addScaledVector(_d,o);const m=c*d-p*u;if(m<=0&&u-c>=0&&p-d>=0)return yd.subVectors(i,r),o=(u-c)/(u-c+(p-d)),t.copy(r).addScaledVector(yd,o);const v=1/(m+f+h);return a=f*v,o=h*v,t.copy(n).addScaledVector(gd,a).addScaledVector(_d,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Sd=0;class Ed extends Dh{constructor(){super(),Object.defineProperty(this,"id",{value:Sd++}),this.uuid=jh(),this.name="",this.type="Material",this.fog=!0,this.blending=rc,this.side=$l,this.vertexColors=!1,this.opacity=1,this.format=vu,this.transparent=!1,this.blendSrc=gc,this.blendDst=_c,this.blendEquation=lc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Tc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rh,this.stencilZFail=Rh,this.stencilZPass=Rh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==rc&&(n.blending=this.blending),this.side!==$l&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==vu&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Ed.prototype.isMaterial=!0;const Ad={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Td={h:0,s:0,l:0},Cd={h:0,s:0,l:0};function kd(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ld(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Pd(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Rd{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Gh(e,1),t=Vh(t,0,1),n=Vh(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=kd(i,r,e+1/3),this.g=kd(i,r,e),this.b=kd(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Ad[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Ld(e.r),this.g=Ld(e.g),this.b=Ld(e.b),this}copyLinearToSRGB(e){return this.r=Pd(e.r),this.g=Pd(e.g),this.b=Pd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),a=Math.min(t,n,r);let o,s;const l=(a+i)/2;if(a===i)o=0,s=0;else{const e=i-a;switch(s=l<=.5?e/(i+a):e/(2-i-a),i){case t:o=(n-r)/e+(n<r?6:0);break;case n:o=(r-t)/e+2;break;case r:o=(t-n)/e+4}o/=6}return e.h=o,e.s=s,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(Td),Td.h+=e,Td.s+=t,Td.l+=n,this.setHSL(Td.h,Td.s,Td.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Td),e.getHSL(Cd);const n=Wh(Td.h,Cd.h,t),r=Wh(Td.s,Cd.s,t),i=Wh(Td.l,Cd.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Rd.NAMES=Ad,Rd.prototype.isColor=!0,Rd.prototype.r=1,Rd.prototype.g=1,Rd.prototype.b=1;class Id extends Ed{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Rd(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Id.prototype.isMeshBasicMaterial=!0;const zd=new up,Od=new Jh;class Dd{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Ih,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Rd),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Jh),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new up),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new op),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Od.fromBufferAttribute(this,t),Od.applyMatrix3(e),this.setXY(t,Od.x,Od.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)zd.fromBufferAttribute(this,t),zd.applyMatrix3(e),this.setXYZ(t,zd.x,zd.y,zd.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)zd.x=this.getX(t),zd.y=this.getY(t),zd.z=this.getZ(t),zd.applyMatrix4(e),this.setXYZ(t,zd.x,zd.y,zd.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)zd.x=this.getX(t),zd.y=this.getY(t),zd.z=this.getZ(t),zd.applyNormalMatrix(e),this.setXYZ(t,zd.x,zd.y,zd.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)zd.x=this.getX(t),zd.y=this.getY(t),zd.z=this.getZ(t),zd.transformDirection(e),this.setXYZ(t,zd.x,zd.y,zd.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Ih&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}Dd.prototype.isBufferAttribute=!0;class Nd extends Dd{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Fd extends Dd{constructor(e,t,n){super(new Uint32Array(e),t,n)}}(class extends Dd{constructor(e,t,n){super(new Uint16Array(e),t,n)}}).prototype.isFloat16BufferAttribute=!0;class Bd extends Dd{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Ud=0;const Hd=new Hp,jd=new pd,Vd=new up,Gd=new dp,Wd=new dp,qd=new up;class Xd extends Dh{constructor(){super(),Object.defineProperty(this,"id",{value:Ud++}),this.uuid=jh(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Kh(e)>65535?Fd:Nd)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Qh).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Hd.makeRotationFromQuaternion(e),this.applyMatrix4(Hd),this}rotateX(e){return Hd.makeRotationX(e),this.applyMatrix4(Hd),this}rotateY(e){return Hd.makeRotationY(e),this.applyMatrix4(Hd),this}rotateZ(e){return Hd.makeRotationZ(e),this.applyMatrix4(Hd),this}translate(e,t,n){return Hd.makeTranslation(e,t,n),this.applyMatrix4(Hd),this}scale(e,t,n){return Hd.makeScale(e,t,n),this.applyMatrix4(Hd),this}lookAt(e){return jd.lookAt(e),jd.updateMatrix(),this.applyMatrix4(jd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vd).negate(),this.translate(Vd.x,Vd.y,Vd.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Bd(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new dp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new up(-1/0,-1/0,-1/0),new up(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Gd.setFromBufferAttribute(n),this.morphTargetsRelative?(qd.addVectors(this.boundingBox.min,Gd.min),this.boundingBox.expandByPoint(qd),qd.addVectors(this.boundingBox.max,Gd.max),this.boundingBox.expandByPoint(qd)):(this.boundingBox.expandByPoint(Gd.min),this.boundingBox.expandByPoint(Gd.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Rp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new up,1/0);if(e){const n=this.boundingSphere.center;if(Gd.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Wd.setFromBufferAttribute(n),this.morphTargetsRelative?(qd.addVectors(Gd.min,Wd.min),Gd.expandByPoint(qd),qd.addVectors(Gd.max,Wd.max),Gd.expandByPoint(qd)):(Gd.expandByPoint(Wd.min),Gd.expandByPoint(Wd.max))}Gd.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)qd.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(qd));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)qd.fromBufferAttribute(a,t),o&&(Vd.fromBufferAttribute(e,t),qd.add(Vd)),r=Math.max(r,n.distanceToSquared(qd))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Dd(new Float32Array(4*o),4));const s=t.tangent.array,l=[],c=[];for(let e=0;e<o;e++)l[e]=new up,c[e]=new up;const u=new up,h=new up,p=new up,d=new Jh,f=new Jh,m=new Jh,v=new up,g=new up;function _(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),p.fromArray(r,3*n),d.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),h.sub(u),p.sub(u),f.sub(d),m.sub(d);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(v.copy(h).multiplyScalar(m.y).addScaledVector(p,-f.y).multiplyScalar(i),g.copy(p).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(v),l[t].add(v),l[n].add(v),c[e].add(g),c[t].add(g),c[n].add(g))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let e=0,t=y.length;e<t;++e){const t=y[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)_(n[e+0],n[e+1],n[e+2])}const b=new up,x=new up,w=new up,M=new up;function S(e){w.fromArray(i,3*e),M.copy(w);const t=l[e];b.copy(t),b.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(M,t);const n=x.dot(c[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=n}for(let e=0,t=y.length;e<t;++e){const t=y[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Dd(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new up,i=new up,a=new up,o=new up,s=new up,l=new up,c=new up,u=new up;if(e)for(let h=0,p=e.count;h<p;h+=3){const p=e.getX(h+0),d=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,p),i.fromBufferAttribute(t,d),a.fromBufferAttribute(t,f),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,p),s.fromBufferAttribute(n,d),l.fromBufferAttribute(n,f),o.add(c),s.add(c),l.add(c),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,l=Math.min(o.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=o[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)qd.fromBufferAttribute(e,t),qd.normalize(),e.setXYZ(t,qd.x,qd.y,qd.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new Dd(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Xd,n=this.index.array,r=this.attributes;for(const i in r){const a=e(r[i],n);t.setAttribute(i,a)}const i=this.morphAttributes;for(const r in i){const a=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Xd.prototype.isBufferGeometry=!0;const Yd=new Hp,Zd=new Up,Jd=new Rp,Qd=new up,Kd=new up,$d=new up,ef=new up,tf=new up,nf=new up,rf=new up,af=new up,of=new up,sf=new Jh,lf=new Jh,cf=new Jh,uf=new up,hf=new up;class pf extends pd{constructor(e=new Xd,t=new Id){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jd.copy(n.boundingSphere),Jd.applyMatrix4(i),!1===e.ray.intersectsSphere(Jd))return;if(Yd.copy(i).invert(),Zd.copy(e.ray).applyMatrix4(Yd),null!==n.boundingBox&&!1===Zd.intersectsBox(n.boundingBox))return;let a;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,p=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,d=h.length;n<d;n++){const d=h[n],f=r[d.materialIndex];for(let n=Math.max(d.start,p.start),r=Math.min(i.count,Math.min(d.start+d.count,p.start+p.count));n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),p=i.getX(n+2);a=df(this,f,e,Zd,o,s,l,c,u,r,h,p),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=d.materialIndex,t.push(a))}}else{for(let n=Math.max(0,p.start),h=Math.min(i.count,p.start+p.count);n<h;n+=3){const h=i.getX(n),p=i.getX(n+1),d=i.getX(n+2);a=df(this,r,e,Zd,o,s,l,c,u,h,p,d),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}else if(void 0!==o)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],d=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(o.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3){a=df(this,d,e,Zd,o,s,l,c,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}}else{for(let n=Math.max(0,p.start),i=Math.min(o.count,p.start+p.count);n<i;n+=3){a=df(this,r,e,Zd,o,s,l,c,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function df(e,t,n,r,i,a,o,s,l,c,u,h){Qd.fromBufferAttribute(i,c),Kd.fromBufferAttribute(i,u),$d.fromBufferAttribute(i,h);const p=e.morphTargetInfluences;if(a&&p){rf.set(0,0,0),af.set(0,0,0),of.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=p[e],n=a[e];0!==t&&(ef.fromBufferAttribute(n,c),tf.fromBufferAttribute(n,u),nf.fromBufferAttribute(n,h),o?(rf.addScaledVector(ef,t),af.addScaledVector(tf,t),of.addScaledVector(nf,t)):(rf.addScaledVector(ef.sub(Qd),t),af.addScaledVector(tf.sub(Kd),t),of.addScaledVector(nf.sub($d),t)))}Qd.add(rf),Kd.add(af),$d.add(of)}e.isSkinnedMesh&&(e.boneTransform(c,Qd),e.boneTransform(u,Kd),e.boneTransform(h,$d));const d=function(e,t,n,r,i,a,o,s){let l;if(l=t.side===ec?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==tc,s),null===l)return null;hf.copy(s),hf.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(hf);return c<n.near||c>n.far?null:{distance:c,point:hf.clone(),object:e}}(e,t,n,r,Qd,Kd,$d,uf);if(d){s&&(sf.fromBufferAttribute(s,c),lf.fromBufferAttribute(s,u),cf.fromBufferAttribute(s,h),d.uv=Md.getUV(uf,Qd,Kd,$d,sf,lf,cf,new Jh)),l&&(sf.fromBufferAttribute(l,c),lf.fromBufferAttribute(l,u),cf.fromBufferAttribute(l,h),d.uv2=Md.getUV(uf,Qd,Kd,$d,sf,lf,cf,new Jh));const e={a:c,b:u,c:h,normal:new up,materialIndex:0};Md.getNormal(Qd,Kd,$d,e.normal),d.face=e}return d}pf.prototype.isMesh=!0;class ff extends Xd{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const o=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const s=[],l=[],c=[],u=[];let h=0,p=0;function d(e,t,n,r,i,a,d,f,m,v,g){const _=a/m,y=d/v,b=a/2,x=d/2,w=f/2,M=m+1,S=v+1;let E=0,A=0;const T=new up;for(let a=0;a<S;a++){const o=a*y-x;for(let s=0;s<M;s++){const h=s*_-b;T[e]=h*r,T[t]=o*i,T[n]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,c.push(T.x,T.y,T.z),u.push(s/m),u.push(1-a/v),E+=1}}for(let e=0;e<v;e++)for(let t=0;t<m;t++){const n=h+t+M*e,r=h+t+M*(e+1),i=h+(t+1)+M*(e+1),a=h+(t+1)+M*e;s.push(n,r,a),s.push(r,i,a),A+=6}o.addGroup(p,A,g),p+=A,h+=E}d("z","y","x",-1,-1,n,t,e,a,i,0),d("z","y","x",1,-1,n,t,-e,a,i,1),d("x","z","y",1,1,e,n,t,r,a,2),d("x","z","y",1,-1,e,n,-t,r,a,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Bd(l,3)),this.setAttribute("normal",new Bd(c,3)),this.setAttribute("uv",new Bd(u,2))}static fromJSON(e){return new ff(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function mf(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function vf(e){const t={};for(let n=0;n<e.length;n++){const r=mf(e[n]);for(const e in r)t[e]=r[e]}return t}const gf={clone:mf,merge:vf};class _f extends Ed{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mf(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}_f.prototype.isShaderMaterial=!0;class yf extends pd{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Hp,this.projectionMatrix=new Hp,this.projectionMatrixInverse=new Hp}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}yf.prototype.isCamera=!0;class bf extends yf{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Bh*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Fh*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Bh*Math.atan(Math.tan(.5*Fh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Fh*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}bf.prototype.isPerspectiveCamera=!0;const xf=90;class wf extends pd{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new bf(xf,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new up(1,0,0)),this.add(r);const i=new bf(xf,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new up(-1,0,0)),this.add(i);const a=new bf(xf,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new up(0,1,0)),this.add(a);const o=new bf(xf,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new up(0,-1,0)),this.add(o);const s=new bf(xf,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new up(0,0,1)),this.add(s);const l=new bf(xf,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new up(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,a,o,s,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class Mf extends ip{constructor(e,t,n,r,i,a,o,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Hc,n,r,i,a,o,s,l,c),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Mf.prototype.isCubeTexture=!0;class Sf extends sp{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Mf(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:$c,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=vu,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new ff(5,5,5),i=new _f({name:"CubemapFromEquirect",uniforms:mf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ec,blending:nc});i.uniforms.tEquirect.value=t;const a=new pf(r,i),o=t.minFilter;t.minFilter===tu&&(t.minFilter=$c);return new wf(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}Sf.prototype.isWebGLCubeRenderTarget=!0;const Ef=new up,Af=new up,Tf=new Qh;class Cf{constructor(e=new up(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Ef.subVectors(n,t).cross(Af.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Ef),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Tf.getNormalMatrix(e),r=this.coplanarPoint(Ef).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Cf.prototype.isPlane=!0;const kf=new Rp,Lf=new up;class Pf{constructor(e=new Cf,t=new Cf,n=new Cf,r=new Cf,i=new Cf,a=new Cf){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],_=n[15];return t[0].setComponents(o-r,u-s,f-h,_-m).normalize(),t[1].setComponents(o+r,u+s,f+h,_+m).normalize(),t[2].setComponents(o+i,u+l,f+p,_+v).normalize(),t[3].setComponents(o-i,u-l,f-p,_-v).normalize(),t[4].setComponents(o-a,u-c,f-d,_-g).normalize(),t[5].setComponents(o+a,u+c,f+d,_+g).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),kf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(kf)}intersectsSprite(e){return kf.center.set(0,0,0),kf.radius=.7071067811865476,kf.applyMatrix4(e.matrixWorld),this.intersectsSphere(kf)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Lf.x=r.normal.x>0?e.max.x:e.min.x,Lf.y=r.normal.y>0?e.max.y:e.min.y,Lf.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Lf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Rf(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function If(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);void 0===a?r.set(t,function(t,r){const i=t.array,a=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){const a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,t,i),a.version=t.version)}}}class zf extends Xd{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,c=s+1,u=e/o,h=t/s,p=[],d=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-a;for(let n=0;n<l;n++){const r=n*u-i;d.push(r,-t,0),f.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;p.push(n,r,a),p.push(r,i,a)}this.setIndex(p),this.setAttribute("position",new Bd(d,3)),this.setAttribute("normal",new Bd(f,3)),this.setAttribute("uv",new Bd(m,2))}static fromJSON(e){return new zf(e.width,e.height,e.widthSegments,e.heightSegments)}}const Of={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Df={common:{diffuse:{value:new Rd(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qh},uv2Transform:{value:new Qh},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Jh(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rd(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rd(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qh}},sprite:{diffuse:{value:new Rd(16777215)},opacity:{value:1},center:{value:new Jh(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qh}}},Nf={basic:{uniforms:vf([Df.common,Df.specularmap,Df.envmap,Df.aomap,Df.lightmap,Df.fog]),vertexShader:Of.meshbasic_vert,fragmentShader:Of.meshbasic_frag},lambert:{uniforms:vf([Df.common,Df.specularmap,Df.envmap,Df.aomap,Df.lightmap,Df.emissivemap,Df.fog,Df.lights,{emissive:{value:new Rd(0)}}]),vertexShader:Of.meshlambert_vert,fragmentShader:Of.meshlambert_frag},phong:{uniforms:vf([Df.common,Df.specularmap,Df.envmap,Df.aomap,Df.lightmap,Df.emissivemap,Df.bumpmap,Df.normalmap,Df.displacementmap,Df.fog,Df.lights,{emissive:{value:new Rd(0)},specular:{value:new Rd(1118481)},shininess:{value:30}}]),vertexShader:Of.meshphong_vert,fragmentShader:Of.meshphong_frag},standard:{uniforms:vf([Df.common,Df.envmap,Df.aomap,Df.lightmap,Df.emissivemap,Df.bumpmap,Df.normalmap,Df.displacementmap,Df.roughnessmap,Df.metalnessmap,Df.fog,Df.lights,{emissive:{value:new Rd(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Of.meshphysical_vert,fragmentShader:Of.meshphysical_frag},toon:{uniforms:vf([Df.common,Df.aomap,Df.lightmap,Df.emissivemap,Df.bumpmap,Df.normalmap,Df.displacementmap,Df.gradientmap,Df.fog,Df.lights,{emissive:{value:new Rd(0)}}]),vertexShader:Of.meshtoon_vert,fragmentShader:Of.meshtoon_frag},matcap:{uniforms:vf([Df.common,Df.bumpmap,Df.normalmap,Df.displacementmap,Df.fog,{matcap:{value:null}}]),vertexShader:Of.meshmatcap_vert,fragmentShader:Of.meshmatcap_frag},points:{uniforms:vf([Df.points,Df.fog]),vertexShader:Of.points_vert,fragmentShader:Of.points_frag},dashed:{uniforms:vf([Df.common,Df.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Of.linedashed_vert,fragmentShader:Of.linedashed_frag},depth:{uniforms:vf([Df.common,Df.displacementmap]),vertexShader:Of.depth_vert,fragmentShader:Of.depth_frag},normal:{uniforms:vf([Df.common,Df.bumpmap,Df.normalmap,Df.displacementmap,{opacity:{value:1}}]),vertexShader:Of.meshnormal_vert,fragmentShader:Of.meshnormal_frag},sprite:{uniforms:vf([Df.sprite,Df.fog]),vertexShader:Of.sprite_vert,fragmentShader:Of.sprite_frag},background:{uniforms:{uvTransform:{value:new Qh},t2D:{value:null}},vertexShader:Of.background_vert,fragmentShader:Of.background_frag},cube:{uniforms:vf([Df.envmap,{opacity:{value:1}}]),vertexShader:Of.cube_vert,fragmentShader:Of.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Of.equirect_vert,fragmentShader:Of.equirect_frag},distanceRGBA:{uniforms:vf([Df.common,Df.displacementmap,{referencePosition:{value:new up},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Of.distanceRGBA_vert,fragmentShader:Of.distanceRGBA_frag},shadow:{uniforms:vf([Df.lights,Df.fog,{color:{value:new Rd(0)},opacity:{value:1}}]),vertexShader:Of.shadow_vert,fragmentShader:Of.shadow_frag}};function Ff(e,t,n,r,i){const a=new Rd(0);let o,s,l=0,c=null,u=0,h=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),l=t,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,p(a,l)},render:function(n,i){let d=!1,f=!0===i.isScene?i.background:null;f&&f.isTexture&&(f=t.get(f));const m=e.xr,v=m.getSession&&m.getSession();v&&"additive"===v.environmentBlendMode&&(f=null),null===f?p(a,l):f&&f.isColor&&(p(f,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===Wc)?(void 0===s&&(s=new pf(new ff(1,1,1),new _f({name:"BackgroundCubeMaterial",uniforms:mf(Nf.cube.uniforms),vertexShader:Nf.cube.vertexShader,fragmentShader:Nf.cube.fragmentShader,side:ec,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=f,s.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c===f&&u===f.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=f,u=f.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new pf(new zf(2,2),new _f({name:"BackgroundMaterial",uniforms:mf(Nf.background.uniforms),vertexShader:Nf.background.vertexShader,fragmentShader:Nf.background.fragmentShader,side:$l,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&u===f.version&&h===e.toneMapping||(o.material.needsUpdate=!0,c=f,u=f.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Bf(e,t,n,r){const i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=p(null);let c=l;function u(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,i){const a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function _(){y(),c!==l&&(c=l,u(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,_,y){let b=!1;if(o){const t=function(t,n,i){const o=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=u);return u}(_,h,l);c!==t&&(c=t,u(c.object)),b=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],a=r[e];if(void 0===t)return!0;if(t.attribute!==a)return!0;if(t.data!==a.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(_,y),b&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],a={};a.attribute=t,t.data&&(a.data=t.data),n[e]=a,i++}c.attributes=n,c.attributesNum=i,c.index=t}(_,y)}else{const e=!0===l.wireframe;c.geometry===_.id&&c.program===h.id&&c.wireframe===e||(c.geometry=_.id,c.program=h.id,c.wireframe=e,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==y&&n.update(y,34963),b&&(!function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();const l=s.attributes,c=o.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){const t=a.normalized,o=a.itemSize,l=n.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,l=n.stride,p=a.offset;if(n&&n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)m(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)g(r.location+e,o/r.locationSize,u,t,l*h,(p+o/r.locationSize*e)*h)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)m(r.location+e,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)g(r.location+e,o/r.locationSize,u,t,o*h,o/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,h,_),null!==y&&e.bindBuffer(34963,n.get(y).buffer))},reset:_,resetDefaultState:y,dispose:function(){_();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:f,disableUnusedAttributes:v}}function Uf(e,t,n,r){const i=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,o,s),n.update(o,a,s)}}function Hf(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),p=e.getParameter(3379),d=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),_=h>0,y=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:_,floatFragmentTextures:y,floatVertexTextures:_&&y,maxSamples:a?e.getParameter(36183):0}}function jf(e){const t=this;let n=null,r=0,i=!1,a=!1;const o=new Cf,s=new Qh,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)o.copy(e[t]).applyMatrix4(i,s),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const o=0!==e.length||t||0!==r||i;return i=t,n=u(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,o,s){const h=t.clippingPlanes,p=t.clipIntersection,d=t.clipShadows,f=e.get(t);if(!i||null===h||0===h.length||a&&!d)a?u(null):c();else{const e=a?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=u(h,o,t,s);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=e}}}function Vf(e){let t=new WeakMap;function n(e,t){return t===Vc?e.mapping=Hc:t===Gc&&(e.mapping=jc),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===Vc||a===Gc){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const o=e.getRenderTarget(),s=new Sf(a.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),e.setRenderTarget(o),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}Nf.physical={uniforms:vf([Nf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Jh(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Rd(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Jh},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Rd(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Rd(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Of.meshphysical_vert,fragmentShader:Of.meshphysical_frag};class Gf extends yf{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Gf.prototype.isOrthographicCamera=!0;class Wf extends _f{constructor(e){super(e),this.type="RawShaderMaterial"}}Wf.prototype.isRawShaderMaterial=!0;const qf=Math.pow(2,8),Xf=[.125,.215,.35,.446,.526,.582],Yf=5+Xf.length,Zf=20,Jf={[xh]:0,[wh]:1,[Sh]:2,[Ah]:3,[Th]:4,[Ch]:5,[Mh]:6},Qf=new Gf,{_lodPlanes:Kf,_sizeLods:$f,_sigmas:em}=lm(),tm=new Rd;let nm=null;const rm=(1+Math.sqrt(5))/2,im=1/rm,am=[new up(1,1,1),new up(-1,1,1),new up(1,1,-1),new up(-1,1,-1),new up(0,rm,im),new up(0,rm,-im),new up(im,0,rm),new up(-im,0,rm),new up(rm,im,0),new up(-rm,im,0)];class om{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new up(0,1,0);return new Wf({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Jf[xh]},outputEncoding:{value:Jf[xh]}},vertexShader:dm(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${fm()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:nc,depthTest:!1,depthWrite:!1})}(Zf),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){nm=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=pm(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=hm(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Kf.length;e++)Kf[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(nm),e.scissorTest=!1,um(e,0,0,e.width,e.height)}_fromTexture(e){nm=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Jc,minFilter:Jc,generateMipmaps:!1,type:nu,format:yu,encoding:sm(e)?e.encoding:Sh,depthBuffer:!1},n=cm(t);return n.depthBuffer=!e,this._pingPongRenderTarget=cm(t),n}_compileMaterial(e){const t=new pf(Kf[0],e);this._renderer.compile(t,Qf)}_sceneToCubeUV(e,t,n,r){const i=new bf(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.outputEncoding,u=s.toneMapping;s.getClearColor(tm),s.toneMapping=Oc,s.outputEncoding=xh,s.autoClear=!1;const h=new Id({name:"PMREM.Background",side:ec,depthWrite:!1,depthTest:!1}),p=new pf(new ff,h);let d=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,d=!0):(h.color.copy(tm),d=!0);for(let t=0;t<6;t++){const n=t%3;0==n?(i.up.set(0,a[t],0),i.lookAt(o[t],0,0)):1==n?(i.up.set(0,0,a[t]),i.lookAt(0,o[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,o[t])),um(r,n*qf,t>2?qf:0,qf,qf),s.setRenderTarget(r),d&&s.render(p,i),s.render(e,i)}p.geometry.dispose(),p.material.dispose(),s.toneMapping=u,s.outputEncoding=c,s.autoClear=l,e.background=f}_setEncoding(e,t){!0===this._renderer.capabilities.isWebGL2&&t.format===vu&&t.type===nu&&t.encoding===wh?e.value=Jf[xh]:e.value=Jf[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Hc||e.mapping===jc;r?null==this._cubemapShader&&(this._cubemapShader=pm()):null==this._equirectShader&&(this._equirectShader=hm());const i=r?this._cubemapShader:this._equirectShader,a=new pf(Kf[0],i),o=i.uniforms;o.envMap.value=e,r||o.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(o.inputEncoding,e),this._setEncoding(o.outputEncoding,t.texture),um(t,0,0,3*qf,2*qf),n.setRenderTarget(t),n.render(a,Qf)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<Yf;t++){const n=Math.sqrt(em[t]*em[t]-em[t-1]*em[t-1]),r=am[(t-1)%am.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new pf(Kf[r],l),u=l.uniforms,h=$f[n]-1,p=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/p,f=isFinite(i)?1+Math.floor(3*d):Zf;f>Zf&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let v=0;for(let e=0;e<Zf;++e){const t=e/d,n=Math.exp(-t*t/2);m.push(n),0==e?v+=n:e<f&&(v+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/v;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o),u.dTheta.value=p,u.mipInt.value=8-n,this._setEncoding(u.inputEncoding,e.texture),this._setEncoding(u.outputEncoding,e.texture);const g=$f[r];um(t,3*Math.max(0,qf-2*g),(0===r?0:2*qf)+2*g*(r>4?r-8+4:0),3*g,2*g),s.setRenderTarget(t),s.render(c,Qf)}}function sm(e){return void 0!==e&&e.type===nu&&(e.encoding===xh||e.encoding===wh||e.encoding===Mh)}function lm(){const e=[],t=[],n=[];let r=8;for(let i=0;i<Yf;i++){const a=Math.pow(2,r);t.push(a);let o=1/a;i>4?o=Xf[i-8+4-1]:0==i&&(o=0),n.push(o);const s=1/(a-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,p=6,d=3,f=2,m=1,v=new Float32Array(d*p*h),g=new Float32Array(f*p*h),_=new Float32Array(m*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,d*p*e),g.set(u,f*p*e);const i=[e,e,e,e,e,e];_.set(i,m*p*e)}const y=new Xd;y.setAttribute("position",new Dd(v,d)),y.setAttribute("uv",new Dd(g,f)),y.setAttribute("faceIndex",new Dd(_,m)),e.push(y),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function cm(e){const t=new sp(3*qf,3*qf,e);return t.texture.mapping=Wc,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function um(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function hm(){const e=new Jh(1,1);return new Wf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Jf[xh]},outputEncoding:{value:Jf[xh]}},vertexShader:dm(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${fm()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:nc,depthTest:!1,depthWrite:!1})}function pm(){return new Wf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Jf[xh]},outputEncoding:{value:Jf[xh]}},vertexShader:dm(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${fm()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:nc,depthTest:!1,depthWrite:!1})}function dm(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function fm(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function mm(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping,o=a===Vc||a===Gc,s=a===Hc||a===jc;if(o||s){if(t.has(i))return t.get(i).texture;{const a=i.image;if(o&&a&&a.height>0||s&&a&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(a)){const a=e.getRenderTarget();null===n&&(n=new om(e));const s=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,s),e.setRenderTarget(a),i.addEventListener("dispose",r),s.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function vm(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function gm(e,t,n,r){const i={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",o),delete i[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Kh(n)>65535?Fd:Nd)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function _m(e,t,n,r){const i=r.isWebGL2;let a,o,s;this.setMode=function(e){a=e},this.setIndex=function(e){o=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,o,t*s),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,l,o,r*s,c),n.update(l,a,c)}}function ym(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class bm extends ip{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=Jc,this.minFilter=Jc,this.wrapR=Yc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function xm(e,t){return e[0]-t[0]}function wm(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Mm(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Sm(e,t,n){const r={},i=new Float32Array(8),a=new WeakMap,o=new up,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,c,u,h){const p=l.morphTargetInfluences;if(!0===t.isWebGL2){const r=c.morphAttributes.position.length;let i=a.get(c);if(void 0===i||i.count!==r){void 0!==i&&i.texture.dispose();const e=void 0!==c.morphAttributes.normal,n=c.morphAttributes.position,s=c.morphAttributes.normal||[],l=!0===e?2:1;let u=c.attributes.position.count*l,h=1;u>t.maxTextureSize&&(h=Math.ceil(u/t.maxTextureSize),u=t.maxTextureSize);const p=new Float32Array(u*h*4*r),d=new bm(p,u,h,r);d.format=vu,d.type=lu;const f=4*l;for(let t=0;t<r;t++){const r=n[t],i=s[t],a=u*h*4*t;for(let t=0;t<r.count;t++){o.fromBufferAttribute(r,t),!0===r.normalized&&Mm(o,r);const n=t*f;p[a+n+0]=o.x,p[a+n+1]=o.y,p[a+n+2]=o.z,p[a+n+3]=0,!0===e&&(o.fromBufferAttribute(i,t),!0===i.normalized&&Mm(o,i),p[a+n+4]=o.x,p[a+n+5]=o.y,p[a+n+6]=o.z,p[a+n+7]=0)}}i={count:r,texture:d,size:new Jh(u,h)},a.set(c,i)}let s=0;for(let e=0;e<p.length;e++)s+=p[e];const l=c.morphTargetsRelative?1:1-s;h.getUniforms().setValue(e,"morphTargetBaseInfluence",l),h.getUniforms().setValue(e,"morphTargetInfluences",p),h.getUniforms().setValue(e,"morphTargetsTexture",i.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",i.size)}else{const t=void 0===p?0:p.length;let n=r[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[c.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=p[e]}n.sort(wm);for(let e=0;e<8;e++)e<t&&n[e][1]?(s[e][0]=n[e][0],s[e][1]=n[e][1]):(s[e][0]=Number.MAX_SAFE_INTEGER,s[e][1]=0);s.sort(xm);const a=c.morphAttributes.position,o=c.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=s[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(a&&c.getAttribute("morphTarget"+e)!==a[n]&&c.setAttribute("morphTarget"+e,a[n]),o&&c.getAttribute("morphNormal"+e)!==o[n]&&c.setAttribute("morphNormal"+e,o[n]),i[e]=r,l+=r):(a&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),o&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),i[e]=0)}const u=c.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",u),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Em(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const o=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}bm.prototype.isDataTexture2DArray=!0;class Am extends ip{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=Jc,this.minFilter=Jc,this.wrapR=Yc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Am.prototype.isDataTexture3D=!0;const Tm=new ip,Cm=new bm,km=new Am,Lm=new Mf,Pm=[],Rm=[],Im=new Float32Array(16),zm=new Float32Array(9),Om=new Float32Array(4);function Dm(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=Pm[i];if(void 0===a&&(a=new Float32Array(i),Pm[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function Nm(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Fm(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Bm(e,t){let n=Rm[t];void 0===n&&(n=new Int32Array(t),Rm[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Um(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Hm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Nm(n,t))return;e.uniform2fv(this.addr,t),Fm(n,t)}}function jm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Nm(n,t))return;e.uniform3fv(this.addr,t),Fm(n,t)}}function Vm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Nm(n,t))return;e.uniform4fv(this.addr,t),Fm(n,t)}}function Gm(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Nm(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Fm(n,t)}else{if(Nm(n,r))return;Om.set(r),e.uniformMatrix2fv(this.addr,!1,Om),Fm(n,r)}}function Wm(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Nm(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Fm(n,t)}else{if(Nm(n,r))return;zm.set(r),e.uniformMatrix3fv(this.addr,!1,zm),Fm(n,r)}}function qm(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Nm(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Fm(n,t)}else{if(Nm(n,r))return;Im.set(r),e.uniformMatrix4fv(this.addr,!1,Im),Fm(n,r)}}function Xm(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ym(e,t){const n=this.cache;Nm(n,t)||(e.uniform2iv(this.addr,t),Fm(n,t))}function Zm(e,t){const n=this.cache;Nm(n,t)||(e.uniform3iv(this.addr,t),Fm(n,t))}function Jm(e,t){const n=this.cache;Nm(n,t)||(e.uniform4iv(this.addr,t),Fm(n,t))}function Qm(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Km(e,t){const n=this.cache;Nm(n,t)||(e.uniform2uiv(this.addr,t),Fm(n,t))}function $m(e,t){const n=this.cache;Nm(n,t)||(e.uniform3uiv(this.addr,t),Fm(n,t))}function ev(e,t){const n=this.cache;Nm(n,t)||(e.uniform4uiv(this.addr,t),Fm(n,t))}function tv(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Tm,i)}function nv(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||km,i)}function rv(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Lm,i)}function iv(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Cm,i)}function av(e,t){e.uniform1fv(this.addr,t)}function ov(e,t){const n=Dm(t,this.size,2);e.uniform2fv(this.addr,n)}function sv(e,t){const n=Dm(t,this.size,3);e.uniform3fv(this.addr,n)}function lv(e,t){const n=Dm(t,this.size,4);e.uniform4fv(this.addr,n)}function cv(e,t){const n=Dm(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function uv(e,t){const n=Dm(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function hv(e,t){const n=Dm(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function pv(e,t){e.uniform1iv(this.addr,t)}function dv(e,t){e.uniform2iv(this.addr,t)}function fv(e,t){e.uniform3iv(this.addr,t)}function mv(e,t){e.uniform4iv(this.addr,t)}function vv(e,t){e.uniform1uiv(this.addr,t)}function gv(e,t){e.uniform2uiv(this.addr,t)}function _v(e,t){e.uniform3uiv(this.addr,t)}function yv(e,t){e.uniform4uiv(this.addr,t)}function bv(e,t,n){const r=t.length,i=Bm(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||Tm,i[e])}function xv(e,t,n){const r=t.length,i=Bm(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||Lm,i[e])}function wv(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Um;case 35664:return Hm;case 35665:return jm;case 35666:return Vm;case 35674:return Gm;case 35675:return Wm;case 35676:return qm;case 5124:case 35670:return Xm;case 35667:case 35671:return Ym;case 35668:case 35672:return Zm;case 35669:case 35673:return Jm;case 5125:return Qm;case 36294:return Km;case 36295:return $m;case 36296:return ev;case 35678:case 36198:case 36298:case 36306:case 35682:return tv;case 35679:case 36299:case 36307:return nv;case 35680:case 36300:case 36308:case 36293:return rv;case 36289:case 36303:case 36311:case 36292:return iv}}(t.type)}function Mv(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return av;case 35664:return ov;case 35665:return sv;case 35666:return lv;case 35674:return cv;case 35675:return uv;case 35676:return hv;case 5124:case 35670:return pv;case 35667:case 35671:return dv;case 35668:case 35672:return fv;case 35669:case 35673:return mv;case 5125:return vv;case 36294:return gv;case 36295:return _v;case 36296:return yv;case 35678:case 36198:case 36298:case 36306:case 35682:return bv;case 35680:case 36300:case 36308:case 36293:return xv}}(t.type)}function Sv(e){this.id=e,this.seq=[],this.map={}}Mv.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Fm(t,e)},Sv.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}};const Ev=/(\w+)(\])?(\[|\.)?/g;function Av(e,t){e.seq.push(t),e.map[t.id]=t}function Tv(e,t,n){const r=e.name,i=r.length;for(Ev.lastIndex=0;;){const a=Ev.exec(r),o=Ev.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===i){Av(n,void 0===c?new wv(s,e,t):new Mv(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Sv(s),Av(n,e)),n=e}}}function Cv(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Tv(n,e.getUniformLocation(t,n.name),this)}}function kv(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Cv.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Cv.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},Cv.upload=function(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}},Cv.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let Lv=0;function Pv(e){switch(e){case xh:return["Linear","( value )"];case wh:return["sRGB","( value )"];case Sh:return["RGBE","( value )"];case Ah:return["RGBM","( value, 7.0 )"];case Th:return["RGBM","( value, 16.0 )"];case Ch:return["RGBD","( value, 256.0 )"];case Mh:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Eh:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Rv(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Iv(e,t){const n=Pv(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function zv(e,t){const n=Pv(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ov(e,t){let n;switch(t){case Dc:n="Linear";break;case Nc:n="Reinhard";break;case Fc:n="OptimizedCineon";break;case Bc:n="ACESFilmic";break;case Uc:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Dv(e){return""!==e}function Nv(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Fv(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Bv=/^[ \t]*#include +<([\w\d./]+)>/gm;function Uv(e){return e.replace(Bv,Hv)}function Hv(e,t){const n=Of[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Uv(n)}const jv=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Vv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gv(e){return e.replace(Vv,qv).replace(jv,Wv)}function Wv(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),qv(e,t,n,r)}function qv(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Xv(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Yv(e,t,n,r){const i=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Jl?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Ql?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Kl&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Hc:case jc:t="ENVMAP_TYPE_CUBE";break;case Wc:case qc:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case jc:case qc:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Rc:t="ENVMAP_BLENDING_MULTIPLY";break;case Ic:t="ENVMAP_BLENDING_MIX";break;case zc:t="ENVMAP_BLENDING_ADD"}return t}(n),p=e.gammaFactor>0?e.gammaFactor:1,d=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Dv).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),m=i.createProgram();let v,g,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=[f].filter(Dv).join("\n"),v.length>0&&(v+="\n"),g=[d,f].filter(Dv).join("\n"),g.length>0&&(g+="\n")):(v=[Xv(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Dv).join("\n"),g=[d,Xv(n),"#define SHADER_NAME "+n.shaderName,f,"#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Oc?"#define TONE_MAPPING":"",n.toneMapping!==Oc?Of.tonemapping_pars_fragment:"",n.toneMapping!==Oc?Ov("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===mu?"#define OPAQUE":"",Of.encodings_pars_fragment,n.map?Iv("mapTexelToLinear",n.mapEncoding):"",n.matcap?Iv("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Iv("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Iv("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?Iv("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?Iv("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?Iv("lightMapTexelToLinear",n.lightMapEncoding):"",zv("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Dv).join("\n")),o=Uv(o),o=Nv(o,n),o=Fv(o,n),s=Uv(s),s=Nv(s,n),s=Fv(s,n),o=Gv(o),s=Gv(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["#define varying in",n.glslVersion===Oh?"":"out highp vec4 pc_fragColor;",n.glslVersion===Oh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const y=_+g+s,b=kv(i,35633,_+v+o),x=kv(i,35632,y);if(i.attachShader(m,b),i.attachShader(m,x),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(b).trim(),n=i.getShaderInfoLog(x).trim();let r=!0,a=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=Rv(i,b,"vertex"),n=Rv(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(a=!1);a&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:v},fragmentShader:{log:n,prefix:g}})}let w,M;return i.deleteShader(b),i.deleteShader(x),this.getUniforms=function(){return void 0===w&&(w=new Cv(i,m)),w},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(i,m)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Lv++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=x,this}function Zv(e,t,n,r,i,a,o){const s=[],l=i.isWebGL2,c=i.logarithmicDepthBuffer,u=i.floatVertexTextures,h=i.maxVertexUniforms,p=i.vertexTextures;let d=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function v(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=xh,l&&e&&e.isTexture&&e.format===vu&&e.type===nu&&e.encoding===wh&&(t=xh),t}return{getParameters:function(a,s,m,g,_){const y=g.fog,b=a.isMeshStandardMaterial?g.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),w=f[a.type],M=_.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(u)return 1024;{const e=h,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(_):0;let S,E;if(null!==a.precision&&(d=i.getMaxPrecision(a.precision),d!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.")),w){const e=Nf[w];S=e.vertexShader,E=e.fragmentShader}else S=a.vertexShader,E=a.fragmentShader;const A=e.getRenderTarget(),T=a.alphaTest>0,C=a.clearcoat>0;return{isWebGL2:l,shaderID:w,shaderName:a.type,vertexShader:S,fragmentShader:E,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:p,outputEncoding:null!==A?v(A.texture):e.outputEncoding,map:!!a.map,mapEncoding:v(a.map),matcap:!!a.matcap,matcapEncoding:v(a.matcap),envMap:!!x,envMapMode:x&&x.mapping,envMapEncoding:v(x),envMapCubeUV:!!x&&(x.mapping===Wc||x.mapping===qc),lightMap:!!a.lightMap,lightMapEncoding:v(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:v(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Ph,tangentSpaceNormalMap:a.normalMapType===Lh,clearcoat:C,clearcoatMap:C&&!!a.clearcoatMap,clearcoatRoughnessMap:C&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:C&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,specularColorMapEncoding:v(a.specularColorMap),alphaMap:!!a.alphaMap,alphaTest:T,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenColorMapEncoding:v(a.sheenColorMap),sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!_.geometry&&!!_.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!_.geometry&&!!_.geometry.attributes.color&&4===_.geometry.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||!!a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!y,useFog:a.fog,fogExp2:y&&y.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===_.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:u,morphTargets:!!_.geometry&&!!_.geometry.morphAttributes.position,morphNormals:!!_.geometry&&!!_.geometry.morphAttributes.normal,morphTargetsCount:_.geometry&&_.geometry.morphAttributes.position?_.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:Oc,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===tc,flipSided:a.side===ec,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(ep(t.fragmentShader)),n.push(ep(t.vertexShader))),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<m.length;e++)n.push(t[m[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Nf[t];n=gf.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=s.length;e<t;e++){const t=s[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Yv(e,n,t,a),s.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function Jv(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Qv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Kv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function $v(e){const t=[];let n=0;const r=[],i=[],a=[],o={id:-1};function s(r,i,a,s,l,c){let u=t[n];const h=e.get(a);return void 0===u?(u={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:l,group:c},t[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=r.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:r,transmissive:i,transparent:a,init:function(){n=0,r.length=0,i.length=0,a.length=0},push:function(e,t,n,o,l,c){const u=s(e,t,n,o,l,c);n.transmission>0?i.push(u):!0===n.transparent?a.push(u):r.push(u)},unshift:function(e,t,n,o,l,c){const u=s(e,t,n,o,l,c);n.transmission>0?i.unshift(u):!0===n.transparent?a.unshift(u):r.unshift(u)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||Qv),i.length>1&&i.sort(t||Kv),a.length>1&&a.sort(t||Kv)}}}function eg(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new $v(e),t.set(n,[i])):r>=t.get(n).length?(i=new $v(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function tg(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new up,color:new Rd};break;case"SpotLight":n={position:new up,direction:new up,color:new Rd,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new up,color:new Rd,distance:0,decay:0};break;case"HemisphereLight":n={direction:new up,skyColor:new Rd,groundColor:new Rd};break;case"RectAreaLight":n={color:new Rd,position:new up,halfWidth:new up,halfHeight:new up}}return e[t.id]=n,n}}}let ng=0;function rg(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ig(e,t){const n=new tg,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jh};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jh,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new up);const a=new up,o=new Hp,s=new Hp;return{setup:function(a,o){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,p=0,d=0,f=0,m=0,v=0,g=0;a.sort(rg);const _=!0!==o?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],o=t.color,y=t.intensity,b=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=o.r*y*_,l+=o.g*y*_,c+=o.b*y*_;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=x,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(y*_),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[p]=n,i.spotShadowMap[p]=x,i.spotShadowMatrix[p]=t.shadow.matrix,g++}i.spot[p]=e,p++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=x,i.pointShadowMatrix[h]=t.shadow.matrix,v++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y*_),e.groundColor.copy(t.groundColor).multiplyScalar(y*_),i.hemi[f]=e,f++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Df.LTC_FLOAT_1,i.rectAreaLTC2=Df.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Df.LTC_HALF_1,i.rectAreaLTC2=Df.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const y=i.hash;y.directionalLength===u&&y.pointLength===h&&y.spotLength===p&&y.rectAreaLength===d&&y.hemiLength===f&&y.numDirectionalShadows===m&&y.numPointShadows===v&&y.numSpotShadows===g||(i.directional.length=u,i.spot.length=p,i.rectArea.length=d,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=v,i.spotShadowMatrix.length=g,y.directionalLength=u,y.pointLength=h,y.spotLength=p,y.rectAreaLength=d,y.hemiLength=f,y.numDirectionalShadows=m,y.numPointShadows=v,y.numSpotShadows=g,i.version=ng++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,p=e.length;t<p;t++){const p=e[t];if(p.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),n++}else if(p.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(p.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),s.identity(),o.copy(p.matrixWorld),o.premultiply(h),s.extractRotation(o),e.halfWidth.set(.5*p.width,0,0),e.halfHeight.set(0,.5*p.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(p.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(p.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:i}}function ag(e,t){const n=new ig(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function og(e,t){let n=new WeakMap;return{get:function(r,i=0){let a;return!1===n.has(r)?(a=new ag(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new ag(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}class sg extends Ed{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}sg.prototype.isMeshDepthMaterial=!0;class lg extends Ed{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new up,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}lg.prototype.isMeshDistanceMaterial=!0;const cg="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",ug="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function hg(e,t,n){let r=new Pf;const i=new Jh,a=new Jh,o=new op,s=new sg({depthPacking:kh}),l=new lg,c={},u=n.maxTextureSize,h={0:ec,1:$l,2:tc},p=new _f({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Jh},radius:{value:4}},vertexShader:cg,fragmentShader:ug}),d=p.clone();d.defines.HORIZONTAL_PASS=1;const f=new Xd;f.setAttribute("position",new Dd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new pf(f,p),v=this;function g(n,r){const i=t.update(m);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,d.needsUpdate=!0),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,p,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,m,null)}function _(t,n,r,i,a,o,u){let p=null;const d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(p=void 0!==d?d:!0===i.isPointLight?l:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){const e=p.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=p.clone(),n[t]=i),p=i}return p.visible=r.visible,p.wireframe=r.wireframe,p.side=u===Kl?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],p.alphaMap=r.alphaMap,p.alphaTest=r.alphaTest,p.clipShadows=r.clipShadows,p.clippingPlanes=r.clippingPlanes,p.clipIntersection=r.clipIntersection,p.displacementMap=r.displacementMap,p.displacementScale=r.displacementScale,p.displacementBias=r.displacementBias,p.wireframeLinewidth=r.wireframeLinewidth,p.linewidth=r.linewidth,!0===i.isPointLight&&!0===p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(i.matrixWorld),p.nearDistance=a,p.farDistance=o),p}function y(n,i,a,o,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Kl)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=_(n,0,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,r,t,n,c)}}}else if(i.visible){const t=_(n,0,i,o,a.near,a.far,s);e.renderBufferDirect(a,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)y(l[e],i,a,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Jl,this.render=function(t,n,s){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.state;p.setBlending(nc),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const d=h.getFrameExtents();if(i.multiply(d),a.copy(h.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/d.x),i.x=a.x*d.x,h.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/d.y),i.y=a.y*d.y,h.mapSize.y=a.y)),null===h.map&&!h.isPointLightShadow&&this.type===Kl){const e={minFilter:$c,magFilter:$c,format:vu};h.map=new sp(i.x,i.y,e),h.map.texture.name=c.name+".shadowMap",h.mapPass=new sp(i.x,i.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:Jc,magFilter:Jc,format:vu};h.map=new sp(i.x,i.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const f=h.getViewportCount();for(let e=0;e<f;e++){const t=h.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),p.viewport(o),h.updateMatrices(c,e),r=h.getFrustum(),y(n,s,h.camera,c,this.type)}h.isPointLightShadow||this.type!==Kl||g(h,s),h.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function pg(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new op;let r=null;const i=new op(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?N(2929):F(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case Sc:e.depthFunc(512);break;case Ec:e.depthFunc(519);break;case Ac:e.depthFunc(513);break;case Tc:e.depthFunc(515);break;case Cc:e.depthFunc(514);break;case kc:e.depthFunc(518);break;case Lc:e.depthFunc(516);break;case Pc:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?N(2960):F(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null}}};let s={},l=null,c={},u=null,h=!1,p=null,d=null,f=null,m=null,v=null,g=null,_=null,y=!1,b=null,x=null,w=null,M=null,S=null;const E=e.getParameter(35661);let A=!1,T=0;const C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(T=parseFloat(/^WebGL (\d)/.exec(C)[1]),A=T>=1):-1!==C.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),A=T>=2);let k=null,L={};const P=e.getParameter(3088),R=e.getParameter(2978),I=(new op).fromArray(P),z=(new op).fromArray(R);function O(t,n,r){const i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return a}const D={};function N(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function F(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}D[3553]=O(3553,3553,1),D[34067]=O(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),N(2929),a.setFunc(Tc),j(!1),V(Yl),N(2884),H(nc);const B={[lc]:32774,[cc]:32778,[uc]:32779};if(r)B[hc]=32775,B[pc]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(B[hc]=e.MIN_EXT,B[pc]=e.MAX_EXT)}const U={[dc]:0,[fc]:1,[mc]:768,[gc]:770,[Mc]:776,[xc]:774,[yc]:772,[vc]:769,[_c]:771,[wc]:775,[bc]:773};function H(t,n,r,i,a,o,s,l){if(t!==nc){if(!1===h&&(N(3042),h=!0),t===sc)a=a||n,o=o||r,s=s||i,n===d&&a===v||(e.blendEquationSeparate(B[n],B[a]),d=n,v=a),r===f&&i===m&&o===g&&s===_||(e.blendFuncSeparate(U[r],U[i],U[o],U[s]),f=r,m=i,g=o,_=s),p=t,y=null;else if(t!==p||l!==y){if(d===lc&&v===lc||(e.blendEquation(32774),d=lc,v=lc),l)switch(t){case rc:e.blendFuncSeparate(1,771,1,771);break;case ic:e.blendFunc(1,1);break;case ac:e.blendFuncSeparate(0,0,769,771);break;case oc:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case rc:e.blendFuncSeparate(770,771,1,771);break;case ic:e.blendFunc(770,1);break;case ac:e.blendFunc(0,769);break;case oc:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,g=null,_=null,p=t,y=l}}else!0===h&&(F(3042),h=!1)}function j(t){b!==t&&(t?e.frontFace(2304):e.frontFace(2305),b=t)}function V(t){t!==Xl?(N(2884),t!==x&&(t===Yl?e.cullFace(1029):t===Zl?e.cullFace(1028):e.cullFace(1032))):F(2884),x=t}function G(t,n,r){t?(N(32823),M===n&&S===r||(e.polygonOffset(n,r),M=n,S=r)):F(32823)}function W(t){void 0===t&&(t=33984+E-1),k!==t&&(e.activeTexture(t),k=t)}return{buffers:{color:i,depth:a,stencil:o},enable:N,disable:F,bindFramebuffer:function(t,n){return null===n&&null!==l&&(n=l),c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,r&&(36009===t&&(c[36160]=n),36160===t&&(c[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==l&&(e.bindFramebuffer(36160,t),l=t)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===tc?F(2884):N(2884);let n=e.side===ec;t&&(n=!n),j(n),e.blending===rc&&!1===e.transparent?H(nc):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;o.setTest(r),r&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),G(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?N(32926):F(32926)},setFlipSided:j,setCullFace:V,setLineWidth:function(t){t!==w&&(A&&e.lineWidth(t),w=t)},setPolygonOffset:G,setScissorTest:function(e){e?N(3089):F(3089)},activeTexture:W,bindTexture:function(t,n){null===k&&W();let r=L[k];void 0===r&&(r={type:void 0,texture:void 0},L[k]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||D[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=L[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},k=null,L={},l=null,c={},u=null,h=!1,p=null,d=null,f=null,m=null,v=null,g=null,_=null,y=!1,b=null,x=null,w=null,M=null,S=null,I.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),o.reset()}}}function dg(e,t,n,r,i,a,o){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,p=new WeakMap;let d,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):$h("canvas")}function v(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Yh:Math.floor,a=r(i*e.width),o=r(i*e.height);void 0===d&&(d=m(a,o));const s=n?m(a,o):d;s.width=a,s.height=o;return s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return qh(e.width)&&qh(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==Jc&&e.minFilter!==$c}function y(t,n,i,a,o=1){e.generateMipmap(t);r.get(n).__maxMipLevel=Math.log2(Math.max(i,a,o))}function b(n,r,i,a){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=a===wh?35907:32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function x(e){return e===Jc||e===Qc||e===Kc?9728:9729}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&p.delete(n),o.memory.textures--}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=t.texture,i=r.get(t),a=r.get(n);if(!t)return;void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}let S=0;function E(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function A(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;L(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=o||l?l?r.image[e].image:r.image[e]:v(r.image[e],!1,!0,c);const h=u[0],p=g(h)||s,d=a.convert(r.format),f=a.convert(r.type),m=b(r.internalFormat,d,f,r.encoding);let x;if(k(34067,r,p),o){for(let e=0;e<6;e++){x=u[e].mipmaps;for(let t=0;t<x.length;t++){const i=x[t];r.format!==vu&&r.format!==mu?null!==d?n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,i.width,i.height,0,d,f,i.data)}}t.__maxMipLevel=x.length-1}else{x=r.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,d,f,u[e].data);for(let t=0;t<x.length;t++){const r=x[t].image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,d,f,r.data)}}else{n.texImage2D(34069+e,0,m,d,f,u[e]);for(let t=0;t<x.length;t++){const r=x[t];n.texImage2D(34069+e,t+1,m,d,f,r.image[e])}}t.__maxMipLevel=x.length}_(r,p)&&y(34067,r,h.width,h.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}const T={[Xc]:10497,[Yc]:33071,[Zc]:33648},C={[Jc]:9728,[Qc]:9984,[Kc]:9986,[$c]:9729,[eu]:9985,[tu]:9987};function k(n,a,o){if(o?(e.texParameteri(n,10242,T[a.wrapS]),e.texParameteri(n,10243,T[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,T[a.wrapR]),e.texParameteri(n,10240,C[a.magFilter]),e.texParameteri(n,10241,C[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Yc&&a.wrapT===Yc||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(a.magFilter)),e.texParameteri(n,10241,x(a.minFilter)),a.minFilter!==Jc&&a.minFilter!==$c&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(a.type===lu&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&a.type===cu&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function L(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),o.memory.textures++)}function P(t,r,i){let o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),L(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!s&&(e.wrapS!==Yc||e.wrapT!==Yc||e.minFilter!==Jc&&e.minFilter!==$c)}(r)&&!1===g(r.image),c=v(r.image,l,!1,u),h=g(c)||s,p=a.convert(r.format);let d,f=a.convert(r.type),m=b(r.internalFormat,p,f,r.encoding);k(o,r,h);const x=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=r.type===lu?36012:r.type===su?33190:r.type===du?35056:33189:r.type===lu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===bu&&6402===m&&r.type!==au&&r.type!==su&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=au,f=a.convert(r.type)),r.format===xu&&6402===m&&(m=34041,r.type!==du&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=du,f=a.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,p,f,null);else if(r.isDataTexture)if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)d=x[e],n.texImage2D(3553,e,m,d.width,d.height,0,p,f,d.data);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,p,f,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=x.length;e<t;e++)d=x[e],r.format!==vu&&r.format!==mu?null!==p?n.compressedTexImage2D(3553,e,m,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,d.width,d.height,0,p,f,d.data);t.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,p,f,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,p,f,c.data),t.__maxMipLevel=0;else if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)d=x[e],n.texImage2D(3553,e,m,p,f,d);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,p,f,c),t.__maxMipLevel=0;_(r,h)&&y(o,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,i,o,s,l){const c=a.convert(o.format),u=a.convert(o.type),h=b(o.internalFormat,c,u,o.encoding);32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===lu?i=36012:t.type===su&&(i=33190));const r=O(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=O(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=a.convert(t.format),o=a.convert(t.type),s=b(t.internalFormat,i,o,t.encoding);if(r){const t=O(n);e.renderbufferStorageMultisample(36161,t,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function z(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===bu)e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==xu)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),I(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),I(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function O(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let D=!1,N=!1;this.allocateTextureUnit=function(){const e=S;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=A,this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(u.__webglTexture=e.createTexture(),u.__version=l.version,o.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,p=!0===t.isWebGLMultipleRenderTargets,d=!0===t.isWebGLMultisampleRenderTarget,f=l.isDataTexture3D||l.isDataTexture2DArray,m=g(t)||s;if(!s||l.format!==mu||l.type!==lu&&l.type!==cu||(l.format=vu,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),p)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(d)if(s){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const r=a.convert(l.format),i=a.convert(l.type),o=b(l.internalFormat,r,i,l.encoding),s=O(t);e.renderbufferStorageMultisample(36161,s,o,t.width,t.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),I(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,u.__webglTexture),k(34067,l,m);for(let e=0;e<6;e++)R(c.__webglFramebuffer[e],t,l,36064,34069+e);_(l,m)&&y(34067,l,t.width,t.height),n.unbindTexture()}else if(p){const e=t.texture;for(let i=0,a=e.length;i<a;i++){const a=e[i],o=r.get(a);n.bindTexture(3553,o.__webglTexture),k(3553,a,m),R(c.__webglFramebuffer,t,a,36064+i,3553),_(a,m)&&y(3553,a,t.width,t.height)}n.unbindTexture()}else{let e=3553;if(f)if(s){e=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,u.__webglTexture),k(e,l,m),R(c.__webglFramebuffer,t,l,36064,e),_(l,m)&&y(e,l,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){const t=g(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,o=i.length;a<o;a++){const o=i[a];if(_(o,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(o).__webglTexture;n.bindTexture(t,i),y(t,o,e.width,e.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const i=t.width,a=t.height;let o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024);const s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),N=!0),e=e.texture),A(e,t)}}function fg(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===nu)return 5121;if(e===uu)return 32819;if(e===hu)return 32820;if(e===pu)return 33635;if(e===ru)return 5120;if(e===iu)return 5122;if(e===au)return 5123;if(e===ou)return 5124;if(e===su)return 5125;if(e===lu)return 5126;if(e===cu)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===fu)return 6406;if(e===mu)return 6407;if(e===vu)return 6408;if(e===gu)return 6409;if(e===_u)return 6410;if(e===bu)return 6402;if(e===xu)return 34041;if(e===wu)return 6403;if(e===Mu)return 36244;if(e===Su)return 33319;if(e===Eu)return 33320;if(e===Au)return 36248;if(e===Tu)return 36249;if(e===Cu||e===ku||e===Lu||e===Pu){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Cu)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===ku)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Lu)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Pu)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Ru||e===Iu||e===zu||e===Ou){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===Ru)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Iu)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===zu)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Ou)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Du)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===Nu||e===Fu)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===Nu)return n.COMPRESSED_RGB8_ETC2;if(e===Fu)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Bu||e===Uu||e===Hu||e===ju||e===Vu||e===Gu||e===Wu||e===qu||e===Xu||e===Yu||e===Zu||e===Ju||e===Qu||e===Ku||e===eh||e===th||e===nh||e===rh||e===ih||e===ah||e===oh||e===sh||e===lh||e===ch||e===uh||e===hh||e===ph||e===dh?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===$u?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===du?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class mg extends bf{constructor(e=[]){super(),this.cameras=e}}mg.prototype.isArrayCamera=!0;class vg extends pd{constructor(){super(),this.type="Group"}}vg.prototype.isGroup=!0;const gg={type:"move"};class _g{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new vg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new vg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new up,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new up),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new vg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new up,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new up),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(gg))),l&&e.hand){a=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new vg;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}}class yg extends Dh{constructor(e,t){super();const n=this,r=e.state;let i=null,a=1,o=null,s="local-floor",l=null,c=null,u=null,h=null,p=null,d=!1,f=null,m=null,v=null,g=null,_=null,y=null;const b=[],x=new Map,w=new bf;w.layers.enable(1),w.viewport=new op;const M=new bf;M.layers.enable(2),M.viewport=new op;const S=[w,M],E=new mg;E.layers.enable(1),E.layers.enable(2);let A=null,T=null;function C(e){const t=x.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function k(){x.forEach((function(e,t){e.disconnect(t)})),x.clear(),A=null,T=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),u&&t.deleteFramebuffer(u),f&&t.deleteFramebuffer(f),m&&t.deleteRenderbuffer(m),v&&t.deleteRenderbuffer(v),u=null,f=null,m=null,v=null,p=null,h=null,c=null,i=null,O.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function L(e){const t=i.inputSources;for(let e=0;e<b.length;e++)x.set(t[e],b[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=x.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),x.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=x.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=b[e];return void 0===t&&(t=new _g,b[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=b[e];return void 0===t&&(t=new _g,b[e]=t),t.getGripSpace()},this.getHand=function(e){let t=b[e];return void 0===t&&(t=new _g,b[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==h?h:p},this.getBinding=function(){return c},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(e){if(i=e,null!==i){i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",k),i.addEventListener("inputsourceschange",L);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers){const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:p})}else if(t instanceof WebGLRenderingContext){const n={antialias:!0,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(i,t,n),i.updateRenderState({layers:[p]})}else{d=e.antialias;let n=null;e.depth&&(y=256,e.stencil&&(y|=1024),_=e.stencil?33306:36096,n=e.stencil?35056:33190);const o={colorFormat:e.alpha?32856:32849,depthFormat:n,scaleFactor:a};c=new XRWebGLBinding(i,t),h=c.createProjectionLayer(o),u=t.createFramebuffer(),i.updateRenderState({layers:[h]}),d&&(f=t.createFramebuffer(),m=t.createRenderbuffer(),t.bindRenderbuffer(36161,m),t.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),r.bindFramebuffer(36160,f),t.framebufferRenderbuffer(36160,36064,36161,m),t.bindRenderbuffer(36161,null),null!==n&&(v=t.createRenderbuffer(),t.bindRenderbuffer(36161,v),t.renderbufferStorageMultisample(36161,4,n,h.textureWidth,h.textureHeight),t.framebufferRenderbuffer(36160,_,36161,v),t.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}o=await i.requestReferenceSpace(s),O.setContext(i),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const P=new up,R=new up;function I(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;E.near=M.near=w.near=e.near,E.far=M.far=w.far=e.far,A===E.near&&T===E.far||(i.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,T=E.far);const t=e.parent,n=E.cameras;I(E,t);for(let e=0;e<n.length;e++)I(n[e],t);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),e.position.copy(E.position),e.quaternion.copy(E.quaternion),e.scale.copy(E.scale),e.matrix.copy(E.matrix),e.matrixWorld.copy(E.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=P.distanceTo(R),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(a[8]+1)/a[0],p=o*u,d=o*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const v=o+f,g=s+f,_=p-m,y=d+(r-m),b=l*s/g*v,x=c*s/g*v;e.projectionMatrix.makePerspective(_,y,b,x,v,g)}(E,w,M):E.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==p?p.fixedFoveation:void 0},this.setFoveation=function(e){null!==h&&(h.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)};let z=null;const O=new Rf;O.setAnimationLoop((function(e,n){if(l=n.getViewerPose(o),g=n,null!==l){const e=l.views;null!==p&&r.bindXRFramebuffer(p.framebuffer);let n=!1;e.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const a=e[i];let o=null;if(null!==p)o=p.getViewport(a);else{const e=c.getViewSubImage(h,a);r.bindXRFramebuffer(u),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,_,3553,e.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),o=e.viewport}const s=S[i];s.matrix.fromArray(a.transform.matrix),s.projectionMatrix.fromArray(a.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===i&&E.matrix.copy(s.matrix),!0===n&&E.cameras.push(s)}d&&(r.bindXRFramebuffer(f),null!==y&&t.clear(y))}const a=i.inputSources;for(let e=0;e<b.length;e++){const t=b[e],r=a[e];t.update(r,n,o)}if(z&&z(e,n),d){const e=h.textureWidth,n=h.textureHeight;r.bindFramebuffer(36008,f),r.bindFramebuffer(36009,u),t.invalidateFramebuffer(36008,[_]),t.invalidateFramebuffer(36009,[_]),t.blitFramebuffer(0,0,e,n,0,0,e,n,16384,9728),t.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,f)}g=null})),this.setAnimationLoop=function(e){z=e},this.dispose=function(){}}}function bg(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,a;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularColorMap?i=n.specularColorMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap?i=n.thicknessMap:n.sheenColorMap?i=n.sheenColorMap:n.sheenRoughnessMap&&(i=n.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===ec&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===ec&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ec&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ec&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ec&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ec&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===ec&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ec&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ec&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ec&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ec&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function xg(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=$h("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,p=null;const d=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=xh,this.physicallyCorrectLights=!1,this.toneMapping=Oc,this.toneMappingExposure=1;const m=this;let v=!1,g=0,_=0,y=null,b=-1,x=null;const w=new op,M=new op;let S=null,E=t.width,A=t.height,T=1,C=null,k=null;const L=new op(0,0,E,A),P=new op(0,0,E,A);let R=!1;const I=[],z=new Pf;let O=!1,D=!1,N=null;const F=new Hp,B=new up,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===y?T:1}let j,V,G,W,q,X,Y,Z,J,Q,K,$,ee,te,ne,re,ie,ae,oe,se,le,ce,ue,he=n;function pe(e,n){for(let r=0;r<e.length;r++){const i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{const e={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ve,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),he=pe(t,e),null===he)throw pe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function de(){j=new vm(he),V=new Hf(he,j,e),j.init(V),ce=new fg(he,j,V),G=new pg(he,j,V),I[0]=1029,W=new ym(he),q=new Jv,X=new dg(he,j,G,q,V,ce,W),Y=new Vf(m),Z=new mm(m),J=new If(he,V),ue=new Bf(he,j,J,V),Q=new gm(he,J,W,ue),K=new Em(he,Q,J,W),oe=new Sm(he,V,X),re=new jf(q),$=new Zv(m,Y,Z,j,V,ue,re),ee=new bg(q),te=new eg(q),ne=new og(j,V),ae=new Ff(m,Y,G,K,s),ie=new hg(m,K,V),se=new Uf(he,j,W,V),le=new _m(he,j,W,V),W.programs=$.programs,m.capabilities=V,m.extensions=j,m.properties=q,m.renderLists=te,m.shadowMap=ie,m.state=G,m.info=W}de();const fe=new yg(m,he);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;de(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function ge(e){const t=e.target;t.removeEventListener("dispose",ge),function(e){(function(e){const t=q.get(e).programs;void 0!==t&&t.forEach((function(e){$.releaseProgram(e)}))})(e),q.remove(e)}(t)}this.xr=fe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=j.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=j.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(e){void 0!==e&&(T=e,this.setSize(E,A,!1))},this.getSize=function(e){return e.set(E,A)},this.setSize=function(e,n,r){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,A=n,t.width=Math.floor(e*T),t.height=Math.floor(n*T),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(E*T,A*T).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,A=n,T=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),G.viewport(w.copy(L).multiplyScalar(T).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),G.scissor(M.copy(P).multiplyScalar(T).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){G.setScissorTest(R=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ve,!1),te.dispose(),ne.dispose(),q.dispose(),Y.dispose(),Z.dispose(),K.dispose(),ue.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",ye),fe.removeEventListener("sessionend",be),N&&(N.dispose(),N=null),xe.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=U);const o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=U);X.resetTextureUnits();const a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===y?m.outputEncoding:y.texture.encoding,l=(r.isMeshStandardMaterial?Z:Y).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=n.morphAttributes.position?n.morphAttributes.position.length:0,v=q.get(r),g=p.state.lights;if(!0===O&&(!0===D||e!==x)){const t=e===x&&r.id===b;re.setState(r,e,t)}let _=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==g.state.version||v.outputEncoding!==s||i.isInstancedMesh&&!1===v.instancing?_=!0:i.isInstancedMesh||!0!==v.instancing?i.isSkinnedMesh&&!1===v.skinning?_=!0:i.isSkinnedMesh||!0!==v.skinning?v.envMap!==l||r.fog&&v.fog!==a?_=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===re.numPlanes&&v.numIntersection===re.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==h||v.morphNormals!==d||!0===V.isWebGL2&&v.morphTargetsCount!==f)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,v.__version=r.version);let w=v.currentProgram;!0===_&&(w=Ae(r,t,i));let M=!1,S=!1,E=!1;const C=w.getUniforms(),k=v.uniforms;G.useProgram(w.program)&&(M=!0,S=!0,E=!0);r.id!==b&&(b=r.id,S=!0);if(M||x!==e){if(C.setValue(he,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&C.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,S=!0,E=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=C.map.cameraPosition;void 0!==t&&t.setValue(he,B.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&C.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){C.setOptional(he,i,"bindMatrix"),C.setOptional(he,i,"bindMatrixInverse");const e=i.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),C.setValue(he,"boneTexture",e.boneTexture,X),C.setValue(he,"boneTextureSize",e.boneTextureSize)):C.setOptional(he,e,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||oe.update(i,n,r,w);(S||v.receiveShadow!==i.receiveShadow)&&(v.receiveShadow=i.receiveShadow,C.setValue(he,"receiveShadow",i.receiveShadow));S&&(C.setValue(he,"toneMappingExposure",m.toneMappingExposure),v.needsLights&&(P=E,(L=k).ambientLightColor.needsUpdate=P,L.lightProbe.needsUpdate=P,L.directionalLights.needsUpdate=P,L.directionalLightShadows.needsUpdate=P,L.pointLights.needsUpdate=P,L.pointLightShadows.needsUpdate=P,L.spotLights.needsUpdate=P,L.spotLightShadows.needsUpdate=P,L.rectAreaLights.needsUpdate=P,L.hemisphereLights.needsUpdate=P),a&&r.fog&&ee.refreshFogUniforms(k,a),ee.refreshMaterialUniforms(k,r,T,A,N),Cv.upload(he,v.uniformsList,k,X));var L,P;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Cv.upload(he,v.uniformsList,k,X),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&C.setValue(he,"center",i.center);return C.setValue(he,"modelViewMatrix",i.modelViewMatrix),C.setValue(he,"normalMatrix",i.normalMatrix),C.setValue(he,"modelMatrix",i.matrixWorld),w}(e,t,n,r,i);G.setMaterial(r,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=Q.getWireframeAttribute(n),h=2),ue.setup(i,r,s,n,l);let d=se;null!==l&&(u=J.get(l),d=le,d.setIndex(u));const f=null!==l?l.count:c.count,v=n.drawRange.start*h,g=n.drawRange.count*h,_=null!==a?a.start*h:0,w=null!==a?a.count*h:1/0,M=Math.max(v,_),S=Math.min(f,v+g,_+w)-1,E=Math.max(0,S-M+1);if(0!==E){if(i.isMesh)!0===r.wireframe?(G.setLineWidth(r.wireframeLinewidth*H()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),G.setLineWidth(e*H()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(M,E,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(M,E,e)}else d.render(M,E)}},this.compile=function(e,t){p=ne.get(e),p.init(),f.push(p),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Ae(n[r],e,t)}else Ae(n,e,t)})),f.pop(),p=null};let _e=null;function ye(){xe.stop()}function be(){xe.start()}const xe=new Rf;function we(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=K.update(e),i=e.material;i.visible&&h.push(e,t,i,n,B.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||z.intersectsObject(e))){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=K.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let a=0,o=r.length;a<o;a++){const o=r[a],s=i[o.materialIndex];s&&s.visible&&h.push(e,t,s,n,B.z,o)}}else i.visible&&h.push(e,t,i,n,B.z,null)}const i=e.children;for(let e=0,a=i.length;e<a;e++)we(i[e],t,n,r)}function Me(e,t,n,r){const i=e.opaque,a=e.transmissive,s=e.transparent;p.setupLightsView(n),a.length>0&&function(e,t,n){if(null===N){const e=!0===o&&!0===V.isWebGL2;N=new(e?lp:sp)(1024,1024,{generateMipmaps:!0,type:null!==ce.convert(cu)?cu:nu,minFilter:tu,magFilter:Jc,wrapS:Yc,wrapT:Yc})}const r=m.getRenderTarget();m.setRenderTarget(N),m.clear();const i=m.toneMapping;m.toneMapping=Oc,Se(e,t,n),m.toneMapping=i,X.updateMultisampleRenderTarget(N),X.updateRenderTargetMipmap(N),m.setRenderTarget(r)}(i,t,n),r&&G.viewport(w.copy(r)),i.length>0&&Se(i,t,n),a.length>0&&Se(a,t,n),s.length>0&&Se(s,t,n)}function Se(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,c=a.group;o.layers.test(n.layers)&&Ee(o,t,n,s,l,c)}}function Ee(e,t,n,r,i,a){e.onBeforeRender(m,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,a),!0===i.transparent&&i.side===tc?(i.side=ec,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=$l,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=tc):m.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(m,t,n,r,i,a)}function Ae(e,t,n){!0!==t.isScene&&(t=U);const r=q.get(e),i=p.state.lights,a=p.state.shadowsArray,o=i.state.version,s=$.getParameters(e,i.state,a,t,n),l=$.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Z:Y).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",ge),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Te(e,s),u}else s.uniforms=$.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),u=$.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Te(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),f=Cv.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=f,u}function Te(e,t){const n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}xe.setAnimationLoop((function(e){_e&&_e(e)})),"undefined"!=typeof window&&xe.setContext(window),this.setAnimationLoop=function(e){_e=e,fe.setAnimationLoop(e),null===e?xe.stop():xe.start()},fe.addEventListener("sessionstart",ye),fe.addEventListener("sessionend",be),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===v)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,y),p=ne.get(e,f.length),p.init(),f.push(p),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(F),D=this.localClippingEnabled,O=re.init(this.clippingPlanes,D,t),h=te.get(e,d.length),h.init(),d.push(h),we(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(C,k),!0===O&&re.beginShadows();const n=p.state.shadowsArray;if(ie.render(n,e,t),!0===O&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(h,e),p.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Me(h,e,r,r.viewport)}}else Me(h,e,t);null!==y&&(X.updateMultisampleRenderTarget(y),X.updateRenderTargetMipmap(y)),!0===e.isScene&&e.onAfterRender(m,e,t),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1),ue.resetDefaultState(),b=-1,x=null,f.pop(),p=f.length>0?f[f.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return y},this.setRenderTarget=function(e,t=0,n=0){y=e,g=t,_=n,e&&void 0===q.get(e).__webglFramebuffer&&X.setupRenderTarget(e);let r=null,i=!1,a=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(a=!0);const o=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=o[t],i=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:o,w.copy(e.viewport),M.copy(e.scissor),S=e.scissorTest}else w.copy(L).multiplyScalar(T).floor(),M.copy(P).multiplyScalar(T).floor(),S=R;if(G.bindFramebuffer(36160,r)&&V.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(I.length!==n.length||36064!==I[0]){for(let e=0,t=n.length;e<t;e++)I[e]=36064+e;I.length=n.length,t=!0}}else 1===I.length&&36064===I[0]||(I[0]=36064,I.length=1,t=!0);else 1===I.length&&1029===I[0]||(I[0]=1029,I.length=1,t=!0);t&&(V.isWebGL2?he.drawBuffers(I):j.get("WEBGL_draw_buffers").drawBuffersWEBGL(I))}if(G.viewport(w),G.scissor(M),G.setScissorTest(S),i){const r=q.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=q.get(e.texture),i=t||0;he.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}b=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){G.bindFramebuffer(36160,s);try{const o=e.texture,s=o.format,l=o.type;if(s!==vu&&ce.convert(s)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===cu&&(j.has("EXT_color_buffer_half_float")||V.isWebGL2&&j.has("EXT_color_buffer_float"));if(!(l===nu||ce.convert(l)===he.getParameter(35738)||l===lu&&(V.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,ce.convert(s),ce.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==y?q.get(y).__webglFramebuffer:null;G.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);let o=ce.convert(t.format);V.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),X.setTexture2D(t,0),he.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),G.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,a=t.image.height,o=ce.convert(n.format),s=ce.convert(n.type);X.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),G.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=ce.convert(r.format),c=ce.convert(r.type);let u;if(r.isDataTexture3D)X.setTexture3D(r,0),u=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),u=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);const h=he.getParameter(3314),p=he.getParameter(32878),d=he.getParameter(3316),f=he.getParameter(3315),v=he.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,g.width),he.pixelStorei(32878,g.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?he.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,g.data)):he.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,g),he.pixelStorei(3314,h),he.pixelStorei(32878,p),he.pixelStorei(3316,d),he.pixelStorei(3315,f),he.pixelStorei(32877,v),0===i&&r.generateMipmaps&&he.generateMipmap(u),G.unbindTexture()},this.initTexture=function(e){X.setTexture2D(e,0),G.unbindTexture()},this.resetState=function(){g=0,_=0,y=null,G.reset(),ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}xg.prototype.isWebGLRenderer=!0;(class extends xg{}).prototype.isWebGL1Renderer=!0;class wg{constructor(e,t=25e-5){this.name="",this.color=new Rd(e),this.density=t}clone(){return new wg(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}wg.prototype.isFogExp2=!0;class Mg{constructor(e,t=1,n=1e3){this.name="",this.color=new Rd(e),this.near=t,this.far=n}clone(){return new Mg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Mg.prototype.isFog=!0;class Sg extends pd{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Sg.prototype.isScene=!0;class Eg{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Ih,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=jh()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Eg.prototype.isInterleavedBuffer=!0;const Ag=new up;class Tg{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ag.x=this.getX(t),Ag.y=this.getY(t),Ag.z=this.getZ(t),Ag.applyMatrix4(e),this.setXYZ(t,Ag.x,Ag.y,Ag.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ag.x=this.getX(t),Ag.y=this.getY(t),Ag.z=this.getZ(t),Ag.applyNormalMatrix(e),this.setXYZ(t,Ag.x,Ag.y,Ag.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ag.x=this.getX(t),Ag.y=this.getY(t),Ag.z=this.getZ(t),Ag.transformDirection(e),this.setXYZ(t,Ag.x,Ag.y,Ag.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Dd(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Tg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Tg.prototype.isInterleavedBufferAttribute=!0;class Cg extends Ed{constructor(e){super(),this.type="SpriteMaterial",this.color=new Rd(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let kg;Cg.prototype.isSpriteMaterial=!0;const Lg=new up,Pg=new up,Rg=new up,Ig=new Jh,zg=new Jh,Og=new Hp,Dg=new up,Ng=new up,Fg=new up,Bg=new Jh,Ug=new Jh,Hg=new Jh;class jg extends pd{constructor(e){if(super(),this.type="Sprite",void 0===kg){kg=new Xd;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Eg(e,5);kg.setIndex([0,1,2,0,2,3]),kg.setAttribute("position",new Tg(t,3,0,!1)),kg.setAttribute("uv",new Tg(t,2,3,!1))}this.geometry=kg,this.material=void 0!==e?e:new Cg,this.center=new Jh(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pg.setFromMatrixScale(this.matrixWorld),Og.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Pg.multiplyScalar(-Rg.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;Vg(Dg.set(-.5,-.5,0),Rg,a,Pg,r,i),Vg(Ng.set(.5,-.5,0),Rg,a,Pg,r,i),Vg(Fg.set(.5,.5,0),Rg,a,Pg,r,i),Bg.set(0,0),Ug.set(1,0),Hg.set(1,1);let o=e.ray.intersectTriangle(Dg,Ng,Fg,!1,Lg);if(null===o&&(Vg(Ng.set(-.5,.5,0),Rg,a,Pg,r,i),Ug.set(0,1),o=e.ray.intersectTriangle(Dg,Fg,Ng,!1,Lg),null===o))return;const s=e.ray.origin.distanceTo(Lg);s<e.near||s>e.far||t.push({distance:s,point:Lg.clone(),uv:Md.getUV(Lg,Dg,Ng,Fg,Bg,Ug,Hg,new Jh),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Vg(e,t,n,r,i,a){Ig.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(zg.x=a*Ig.x-i*Ig.y,zg.y=i*Ig.x+a*Ig.y):zg.copy(Ig),e.copy(t),e.x+=zg.x,e.y+=zg.y,e.applyMatrix4(Og)}jg.prototype.isSprite=!0;const Gg=new up,Wg=new op,qg=new op,Xg=new up,Yg=new Hp;class Zg extends pf{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Hp,this.bindMatrixInverse=new Hp}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new op,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Wg.fromBufferAttribute(r.attributes.skinIndex,e),qg.fromBufferAttribute(r.attributes.skinWeight,e),Gg.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=qg.getComponent(e);if(0!==r){const i=Wg.getComponent(e);Yg.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Xg.copy(Gg).applyMatrix4(Yg),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}Zg.prototype.isSkinnedMesh=!0;class Jg extends pd{constructor(){super(),this.type="Bone"}}Jg.prototype.isBone=!0;class Qg extends ip{constructor(e=null,t=1,n=1,r,i,a,o,s,l=Jc,c=Jc,u,h){super(null,a,o,s,l,c,r,i,u,h),this.image={data:e,width:t,height:n},this.magFilter=l,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Qg.prototype.isDataTexture=!0;class Kg extends Dd{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Kg.prototype.isInstancedBufferAttribute=!0;const $g=new Hp,e_=new Hp,t_=[],n_=new pf;class r_ extends pf{constructor(e,t,n){super(e,t),this.instanceMatrix=new Kg(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(n_.geometry=this.geometry,n_.material=this.material,void 0!==n_.material)for(let i=0;i<r;i++){this.getMatrixAt(i,$g),e_.multiplyMatrices(n,$g),n_.matrixWorld=e_,n_.raycast(e,t_);for(let e=0,n=t_.length;e<n;e++){const n=t_[e];n.instanceId=i,n.object=this,t.push(n)}t_.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Kg(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}r_.prototype.isInstancedMesh=!0;class i_ extends Ed{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Rd(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}i_.prototype.isLineBasicMaterial=!0;const a_=new up,o_=new up,s_=new Hp,l_=new Up,c_=new Rp;class u_ extends pd{constructor(e=new Xd,t=new i_){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)a_.fromBufferAttribute(t,e-1),o_.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=a_.distanceTo(o_);e.setAttribute("lineDistance",new Bd(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),c_.copy(n.boundingSphere),c_.applyMatrix4(r),c_.radius+=i,!1===e.ray.intersectsSphere(c_))return;s_.copy(r).invert(),l_.copy(e.ray).applyMatrix4(s_);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new up,c=new up,u=new up,h=new up,p=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,a.start),o=Math.min(r.count,a.start+a.count)-1;n<o;n+=p){const a=r.getX(n),o=r.getX(n+1);l.fromBufferAttribute(i,a),c.fromBufferAttribute(i,o);if(l_.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const p=e.ray.origin.distanceTo(h);p<e.near||p>e.far||t.push({distance:p,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),r=Math.min(i.count,a.start+a.count)-1;n<r;n+=p){l.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1);if(l_.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}u_.prototype.isLine=!0;const h_=new up,p_=new up;class d_ extends u_{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)h_.fromBufferAttribute(t,e),p_.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+h_.distanceTo(p_);e.setAttribute("lineDistance",new Bd(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}d_.prototype.isLineSegments=!0;class f_ extends u_{constructor(e,t){super(e,t),this.type="LineLoop"}}f_.prototype.isLineLoop=!0;class m_ extends Ed{constructor(e){super(),this.type="PointsMaterial",this.color=new Rd(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}m_.prototype.isPointsMaterial=!0;const v_=new Hp,g_=new Up,__=new Rp,y_=new up;class b_ extends pd{constructor(e=new Xd,t=new m_){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),__.copy(n.boundingSphere),__.applyMatrix4(r),__.radius+=i,!1===e.ray.intersectsSphere(__))return;v_.copy(r).invert(),g_.copy(e.ray).applyMatrix4(v_);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position;if(null!==i){for(let n=Math.max(0,a.start),l=Math.min(i.count,a.start+a.count);n<l;n++){const a=i.getX(n);y_.fromBufferAttribute(o,a),x_(y_,a,s,r,e,t,this)}}else{for(let n=Math.max(0,a.start),i=Math.min(o.count,a.start+a.count);n<i;n++)y_.fromBufferAttribute(o,n),x_(y_,n,s,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function x_(e,t,n,r,i,a,o){const s=g_.distanceSqToPoint(e);if(s<n){const n=new up;g_.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o})}}b_.prototype.isPoints=!0;(class extends ip{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.format=void 0!==o?o:mu,this.minFilter=void 0!==a?a:$c,this.magFilter=void 0!==i?i:$c,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;class w_ extends ip{constructor(e,t,n,r,i,a,o,s,l,c,u,h){super(null,a,o,s,l,c,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}w_.prototype.isCompressedTexture=!0;(class extends ip{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends ip{constructor(e,t,n,r,i,a,o,s,l,c){if((c=void 0!==c?c:bu)!==bu&&c!==xu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===bu&&(n=au),void 0===n&&c===xu&&(n=du),super(null,r,i,a,o,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Jc,this.minFilter=void 0!==s?s:Jc,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0;new up,new up,new up,new Md;class M_{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let o,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),o=n[r]-a,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Jh:new up);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new up,r=[],i=[],a=[],o=new up,s=new Hp;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new up)}i[0]=new up,a[0]=new up;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Vh(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Vh(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class S_ extends M_{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){const n=t||new Jh,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}S_.prototype.isEllipseCurve=!0;class E_ extends S_{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.type="ArcCurve"}}function A_(){let e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;l*=o,c*=o,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}E_.prototype.isArcCurve=!0;const T_=new up,C_=new A_,k_=new A_,L_=new A_;class P_ extends M_{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new up){const n=t,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e;let o,s,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(T_.subVectors(r[0],r[1]).add(r[0]),o=T_);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(T_.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=T_),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),C_.initNonuniformCatmullRom(o.x,u.x,h.x,s.x,t,n,r),k_.initNonuniformCatmullRom(o.y,u.y,h.y,s.y,t,n,r),L_.initNonuniformCatmullRom(o.z,u.z,h.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(C_.initCatmullRom(o.x,u.x,h.x,s.x,this.tension),k_.initCatmullRom(o.y,u.y,h.y,s.y,this.tension),L_.initCatmullRom(o.z,u.z,h.z,s.z,this.tension));return n.set(C_.calc(c),k_.calc(c),L_.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new up).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function R_(e,t,n,r,i){const a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function I_(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function z_(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}P_.prototype.isCatmullRomCurve3=!0;class O_ extends M_{constructor(e=new Jh,t=new Jh,n=new Jh,r=new Jh){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Jh){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(z_(e,r.x,i.x,a.x,o.x),z_(e,r.y,i.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}O_.prototype.isCubicBezierCurve=!0;class D_ extends M_{constructor(e=new up,t=new up,n=new up,r=new up){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new up){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(z_(e,r.x,i.x,a.x,o.x),z_(e,r.y,i.y,a.y,o.y),z_(e,r.z,i.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}D_.prototype.isCubicBezierCurve3=!0;class N_ extends M_{constructor(e=new Jh,t=new Jh){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Jh){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Jh;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}N_.prototype.isLineCurve=!0;class F_ extends M_{constructor(e=new Jh,t=new Jh,n=new Jh){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Jh){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(I_(e,r.x,i.x,a.x),I_(e,r.y,i.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}F_.prototype.isQuadraticBezierCurve=!0;class B_ extends M_{constructor(e=new up,t=new up,n=new up){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new up){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(I_(e,r.x,i.x,a.x),I_(e,r.y,i.y,a.y),I_(e,r.z,i.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}B_.prototype.isQuadraticBezierCurve3=!0;class U_ extends M_{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Jh){const n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return n.set(R_(o,s.x,l.x,c.x,u.x),R_(o,s.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Jh).fromArray(n))}return this}}U_.prototype.isSplineCurve=!0;var H_=Object.freeze({__proto__:null,ArcCurve:E_,CatmullRomCurve3:P_,CubicBezierCurve:O_,CubicBezierCurve3:D_,EllipseCurve:S_,LineCurve:N_,LineCurve3:class extends M_{constructor(e=new up,t=new up){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new up){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:F_,QuadraticBezierCurve3:B_,SplineCurve:U_});class j_ extends M_{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new N_(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new H_[n.type]).fromJSON(n))}return this}}class V_ extends j_{constructor(e){super(),this.type="Path",this.currentPoint=new Jh,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new N_(this.currentPoint.clone(),new Jh(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new F_(this.currentPoint.clone(),new Jh(e,t),new Jh(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const o=new O_(this.currentPoint.clone(),new Jh(e,t),new Jh(n,r),new Jh(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new U_(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){const l=new S_(e,t,n,r,i,a,o,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class G_ extends V_{constructor(e){super(e),this.uuid=jh(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new V_).fromJSON(n))}return this}}const W_=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let a=q_(e,0,i,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,c,u,h,p,d;if(r&&(a=function(e,t,n,r){const i=[];let a,o,s,l,c;for(a=0,o=t.length;a<o;a++)s=t[a]*r,l=a<o-1?t[a+1]*r:e.length,c=q_(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(ry(c));for(i.sort($_),a=0;a<i.length;a++)ey(i[a],n),n=X_(n,n.next);return n}(e,t,a,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],p=e[t+1],h<s&&(s=h),p<l&&(l=p),h>c&&(c=h),p>u&&(u=p);d=Math.max(c-s,u-l),d=0!==d?1/d:0}return Y_(a,o,n,s,l,d),o};function q_(e,t,n,r,i){let a,o;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=dy(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=dy(a,e[a],e[a+1],o);return o&&sy(o,o.next)&&(fy(o),o=o.next),o}function X_(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!sy(r,r.next)&&0!==oy(r.prev,r,r.next))r=r.next;else{if(fy(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Y_(e,t,n,r,i,a,o){if(!e)return;!o&&a&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=ny(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,a?J_(e,r,i,a):Z_(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),fy(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Y_(e=Q_(X_(e),t,n),t,n,r,i,a,2):2===o&&K_(e,t,n,r,i,a):Y_(X_(e),t,n,r,i,a,1);break}}function Z_(e){const t=e.prev,n=e,r=e.next;if(oy(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(iy(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&oy(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function J_(e,t,n,r){const i=e.prev,a=e,o=e.next;if(oy(i,a,o)>=0)return!1;const s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=ny(s,l,t,n,r),p=ny(c,u,t,n,r);let d=e.prevZ,f=e.nextZ;for(;d&&d.z>=h&&f&&f.z<=p;){if(d!==e.prev&&d!==e.next&&iy(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&oy(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==e.prev&&f!==e.next&&iy(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&oy(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&iy(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&oy(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==e.prev&&f!==e.next&&iy(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&oy(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Q_(e,t,n){let r=e;do{const i=r.prev,a=r.next.next;!sy(i,a)&&ly(i,r,r.next,a)&&hy(i,a)&&hy(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),fy(r),fy(r.next),r=e=a),r=r.next}while(r!==e);return X_(r)}function K_(e,t,n,r,i,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&ay(o,e)){let s=py(o,e);return o=X_(o,o.next),s=X_(s,s.next),Y_(o,t,n,r,i,a),void Y_(s,t,n,r,i,a)}e=e.next}o=o.next}while(o!==e)}function $_(e,t){return e.x-t.x}function ey(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let a,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>o){if(o=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(r===o)return a;const s=a,l=a.x,c=a.y;let u,h=1/0;n=a;do{r>=n.x&&n.x>=l&&r!==n.x&&iy(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),hy(n,e)&&(u<h||u===h&&(n.x>a.x||n.x===a.x&&ty(a,n)))&&(a=n,h=u)),n=n.next}while(n!==s);return a}(e,t),t){const n=py(t,e);X_(t,t.next),X_(n,n.next)}}function ty(e,t){return oy(e.prev,e,t.prev)<0&&oy(t.next,e,e.next)<0}function ny(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ry(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function iy(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function ay(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ly(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(hy(e,t)&&hy(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(oy(e.prev,e,t.prev)||oy(e,t.prev,t))||sy(e,t)&&oy(e.prev,e,e.next)>0&&oy(t.prev,t,t.next)>0)}function oy(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function sy(e,t){return e.x===t.x&&e.y===t.y}function ly(e,t,n,r){const i=uy(oy(e,t,n)),a=uy(oy(e,t,r)),o=uy(oy(n,r,e)),s=uy(oy(n,r,t));return i!==a&&o!==s||(!(0!==i||!cy(e,n,t))||(!(0!==a||!cy(e,r,t))||(!(0!==o||!cy(n,e,r))||!(0!==s||!cy(n,t,r)))))}function cy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function uy(e){return e>0?1:e<0?-1:0}function hy(e,t){return oy(e.prev,e,e.next)<0?oy(e,t,e.next)>=0&&oy(e,e.prev,t)>=0:oy(e,t,e.prev)<0||oy(e,e.next,t)<0}function py(e,t){const n=new my(e.i,e.x,e.y),r=new my(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function dy(e,t,n,r){const i=new my(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function fy(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function my(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class vy{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return vy.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];gy(e),_y(n,e);let a=e.length;t.forEach(gy);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,_y(n,t[e]);const o=W_(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function gy(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function _y(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class yy extends Xd{constructor(e=new G_([new Jh(.5,.5),new Jh(-.5,.5),new Jh(-.5,-.5),new Jh(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++){a(e[t])}function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:1,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,p=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:by;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let v,g,_,y,b,x=!1;f&&(v=f.getSpacedPoints(s),x=!0,c=!1,g=f.computeFrenetFrames(s,!1),_=new up,y=new up,b=new up),c||(d=0,u=0,h=0,p=0);const w=e.extractPoints(o);let M=w.shape;const S=w.holes;if(!vy.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];vy.isClockWise(t)&&(S[e]=t.reverse())}}const E=vy.triangulateShape(M,S),A=M;for(let e=0,t=S.length;e<t;e++){const t=S[e];M=M.concat(t)}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const C=M.length,k=E.length;function L(e,t,n){let r,i,a;const o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,h=o*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),p=Math.sqrt(l*l+c*c),d=t.x-s/h,f=t.y+o/h,m=((n.x-c/p-d)*c-(n.y+l/p-f)*l)/(o*c-s*l);r=d+o*m-e.x,i=f+s*m-e.y;const v=r*r+i*i;if(v<=2)return new Jh(r,i);a=Math.sqrt(v/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=o,a=Math.sqrt(u)):(r=o,i=s,a=Math.sqrt(u/2))}return new Jh(r/a,i/a)}const P=[];for(let e=0,t=A.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),P[e]=L(A[e],A[n],A[r]);const R=[];let I,z=P.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];I=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=L(t[e],t[r],t[i]);R.push(I),z=z.concat(I)}for(let e=0;e<d;e++){const t=e/d,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,t=A.length;e<t;e++){const t=T(A[e],P[e],r);N(t.x,t.y,-n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=R[e];for(let e=0,i=t.length;e<i;e++){const i=T(t[e],I[e],r);N(i.x,i.y,-n)}}}const O=h+p;for(let e=0;e<C;e++){const t=c?T(M[e],z[e],O):M[e];x?(y.copy(g.normals[0]).multiplyScalar(t.x),_.copy(g.binormals[0]).multiplyScalar(t.y),b.copy(v[0]).add(y).add(_),N(b.x,b.y,b.z)):N(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<C;t++){const n=c?T(M[t],z[t],O):M[t];x?(y.copy(g.normals[e]).multiplyScalar(n.x),_.copy(g.binormals[e]).multiplyScalar(n.y),b.copy(v[e]).add(y).add(_),N(b.x,b.y,b.z)):N(n.x,n.y,l/s*e)}for(let e=d-1;e>=0;e--){const t=e/d,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,t=A.length;e<t;e++){const t=T(A[e],P[e],r);N(t.x,t.y,l+n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=R[e];for(let e=0,i=t.length;e<i;e++){const i=T(t[e],I[e],r);x?N(i.x,i.y+v[s-1].y,v[s-1].x+n):N(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*d;e<n;e++){const n=C*e,a=C*(e+1);B(t+r+n,t+i+n,t+i+a,t+r+a)}}}function N(e,t,n){a.push(e),a.push(t),a.push(n)}function F(e,t,i){U(e),U(t),U(i);const a=r.length/3,o=m.generateTopUV(n,r,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[2])}function B(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);const o=r.length/3,s=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function U(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function H(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=C*e;for(let e=0;e<k;e++){const n=E[e];F(n[2]+t,n[1]+t,n[0]+t)}e=s+2*d,t=C*e;for(let e=0;e<k;e++){const n=E[e];F(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<k;e++){const t=E[e];F(t[2],t[1],t[0])}for(let e=0;e<k;e++){const t=E[e];F(t[0]+C*s,t[1]+C*s,t[2]+C*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(A,t),t+=A.length;for(let e=0,n=S.length;e<n;e++){const n=S[e];D(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Bd(r,3)),this.setAttribute("uv",new Bd(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new H_[r.type]).fromJSON(r)),new yy(n,e.options)}}const by={generateTopUV:function(e,t,n,r,i){const a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Jh(a,o),new Jh(s,l),new Jh(c,u)]},generateSideWallUV:function(e,t,n,r,i,a){const o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],p=t[3*i],d=t[3*i+1],f=t[3*i+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-u)<Math.abs(o-c)?[new Jh(o,1-l),new Jh(c,1-h),new Jh(p,1-f),new Jh(m,1-g)]:[new Jh(s,1-l),new Jh(u,1-h),new Jh(d,1-f),new Jh(v,1-g)]}};class xy extends Xd{constructor(e=new G_([new Jh(0,.5),new Jh(-.5,-.5),new Jh(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===vy.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===vy.isClockWise(t)&&(u[e]=t.reverse())}const h=vy.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+o,i=t[1]+o,a=t[2]+o;n.push(r,i,a),s+=3}}this.setIndex(n),this.setAttribute("position",new Bd(r,3)),this.setAttribute("normal",new Bd(i,3)),this.setAttribute("uv",new Bd(a,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new xy(n,e.curveSegments)}}class wy extends Ed{constructor(e){super(),this.type="ShadowMaterial",this.color=new Rd(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}wy.prototype.isShadowMaterial=!0;class My extends Ed{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rd(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Jh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}My.prototype.isMeshStandardMaterial=!0;class Sy extends My{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Jh(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Vh(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new Rd(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Rd(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rd(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Sy.prototype.isMeshPhysicalMaterial=!0;class Ey extends Ed{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Rd(16777215),this.specular=new Rd(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Jh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Ey.prototype.isMeshPhongMaterial=!0;class Ay extends Ed{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Rd(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Jh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Ay.prototype.isMeshToonMaterial=!0;class Ty extends Ed{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Jh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Ty.prototype.isMeshNormalMaterial=!0;class Cy extends Ed{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Rd(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Cy.prototype.isMeshLambertMaterial=!0;class ky extends Ed{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Rd(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Jh(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}ky.prototype.isMeshMatcapMaterial=!0;class Ly extends i_{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}Ly.prototype.isLineDashedMaterial=!0;const Py={arraySlice:function(e,t,n){return Py.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let o=a[r];if(void 0!==o)if(Array.isArray(o))do{o=a[r],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[r],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{o=a[r],void 0!==o&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)},subclip:function(e,t,n,r,i=30){const a=e.clone();a.name=t;const o=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],s=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*i;if(!(a<n||a>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==l.length&&(t.times=Py.convertArray(l,t.times.constructor),t.values=Py.convertArray(c,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)continue;let s=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=r.times.length-1;let p;if(a<=r.times[0]){const e=s,t=l-s;p=Py.arraySlice(r.values,e,t)}else if(a>=r.times[h]){const e=h*l+s,t=e+l-s;p=Py.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=s,n=l-s;e.evaluate(a),p=Py.arraySlice(e.resultBuffer,t,n)}if("quaternion"===i){(new cp).fromArray(p).normalize().conjugate().toArray(p)}const d=o.times.length;for(let e=0;e<d;++e){const t=e*u+c;if("quaternion"===i)cp.multiplyQuaternionsFlat(o.values,t,p,0,o.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)o.values[t+n]-=p[n]}}}return e.blendMode=2501,e}};class Ry{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0}}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Ry.prototype.beforeStart_=Ry.prototype.copySampleValue_,Ry.prototype.afterEnd_=Ry.prototype.copySampleValue_;class Iy extends Ry{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:gh,endingEnd:gh}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case _h:i=e,o=2*t-n;break;case yh:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case _h:a=e,s=2*n-t;break;case yh:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(r-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,_=(-1-p)*m+(1.5+p)*f+.5*d,y=p*m-p*f;for(let e=0;e!==o;++e)i[e]=v*a[c+e]+g*a[l+e]+_*a[s+e]+y*a[u+e];return i}}class zy extends Ry{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==o;++e)i[e]=a[l+e]*u+a[s+e]*c;return i}}class Oy extends Ry{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Dy{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Py.convertArray(t,this.TimeBufferType),this.values=Py.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Py.convertArray(e.times,Array),values:Py.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Oy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Iy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case fh:t=this.InterpolantFactoryMethodDiscrete;break;case mh:t=this.InterpolantFactoryMethodLinear;break;case vh:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fh;case this.InterpolantFactoryMethodLinear:return mh;case this.InterpolantFactoryMethodSmooth:return vh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=Py.arraySlice(n,i,a),this.values=Py.arraySlice(this.values,i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&Py.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=Py.arraySlice(this.times),t=Py.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===vh,i=e.length-1;let a=1;for(let o=1;o<i;++o){let i=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}if(i){if(o!==a){e[a]=e[o];const r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=Py.arraySlice(e,0,a),this.values=Py.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=Py.arraySlice(this.times,0),t=Py.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Dy.prototype.TimeBufferType=Float32Array,Dy.prototype.ValueBufferType=Float32Array,Dy.prototype.DefaultInterpolation=mh;class Ny extends Dy{}Ny.prototype.ValueTypeName="bool",Ny.prototype.ValueBufferType=Array,Ny.prototype.DefaultInterpolation=fh,Ny.prototype.InterpolantFactoryMethodLinear=void 0,Ny.prototype.InterpolantFactoryMethodSmooth=void 0;class Fy extends Dy{}Fy.prototype.ValueTypeName="color";class By extends Dy{}By.prototype.ValueTypeName="number";class Uy extends Ry{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)cp.slerpFlat(i,0,a,l-o,a,l,s);return i}}class Hy extends Dy{InterpolantFactoryMethodLinear(e){return new Uy(this.times,this.values,this.getValueSize(),e)}}Hy.prototype.ValueTypeName="quaternion",Hy.prototype.DefaultInterpolation=mh,Hy.prototype.InterpolantFactoryMethodSmooth=void 0;class jy extends Dy{}jy.prototype.ValueTypeName="string",jy.prototype.ValueBufferType=Array,jy.prototype.DefaultInterpolation=fh,jy.prototype.InterpolantFactoryMethodLinear=void 0,jy.prototype.InterpolantFactoryMethodSmooth=void 0;class Vy extends Dy{}Vy.prototype.ValueTypeName="vector";class Gy{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=jh(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(Wy(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(Dy.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let e=0;e<i;e++){let o=[],s=[];o.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const l=Py.getKeyframeOrder(o);o=Py.sortedArray(o,1,l),s=Py.sortedArray(s,1,l),r||0!==o[0]||(o.push(i),s.push(s[0])),a.push(new By(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(i);if(a&&a.length>1){const e=a[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const a=[];for(const e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],o=[];Py.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new By(".morphTargetInfluence["+n+"]",e,a))}s=e.length*(a||1)}else{const a=".bones["+t[e].name+"]";n(Vy,a+".position",i,"pos",r),n(Hy,a+".quaternion",i,"rot",r),n(Vy,a+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Wy(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return By;case"vector":case"vector2":case"vector3":case"vector4":return Vy;case"color":return Fy;case"quaternion":return Hy;case"bool":case"boolean":return Ny;case"string":return jy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Py.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const qy={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Xy{constructor(e,t,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Yy=new Xy;class Zy{constructor(e){this.manager=void 0!==e?e:Yy,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Jy={};class Qy extends Zy{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=qy.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Jy[e])return void Jy[e].push({onLoad:t,onProgress:n,onError:r});Jy[e]=[],Jy[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(a).then((t=>{if(200===t.status||0===t.status){0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const n=Jy[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a;let s=0;return new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}})}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)})).then((e=>{const t=new Response(e);switch(this.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((e=>(new DOMParser).parseFromString(e,this.mimeType)));case"json":return t.json();default:return t.text()}})).then((t=>{qy.add(e,t);const n=Jy[e];delete Jy[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}this.manager.itemEnd(e)})).catch((t=>{const n=Jy[e];delete Jy[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e),this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ky extends Zy{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=qy.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o=$h("img");function s(){c(),qy.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class $y extends Zy{constructor(e){super(e)}load(e,t,n,r){const i=new Mf,a=new Ky(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}}class eb extends Zy{constructor(e){super(e)}load(e,t,n,r){const i=new ip,a=new Ky(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class tb extends pd{constructor(e,t=1){super(),this.type="Light",this.color=new Rd(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}tb.prototype.isLight=!0;class nb extends tb{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(pd.DefaultUp),this.updateMatrix(),this.groundColor=new Rd(t)}copy(e){return tb.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}nb.prototype.isHemisphereLight=!0;const rb=new Hp,ib=new up,ab=new up;class ob{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Jh(512,512),this.map=null,this.mapPass=null,this.matrix=new Hp,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Pf,this._frameExtents=new Jh(1,1),this._viewportCount=1,this._viewports=[new op(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ib.setFromMatrixPosition(e.matrixWorld),t.position.copy(ib),ab.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ab),t.updateMatrixWorld(),rb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sb extends ob{constructor(){super(new bf(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Bh*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}sb.prototype.isSpotLightShadow=!0;class lb extends tb{constructor(e,t,n=0,r=Math.PI/3,i=0,a=1){super(e,t),this.type="SpotLight",this.position.copy(pd.DefaultUp),this.updateMatrix(),this.target=new pd,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.shadow=new sb}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}lb.prototype.isSpotLight=!0;const cb=new Hp,ub=new up,hb=new up;class pb extends ob{constructor(){super(new bf(90,1,.5,500)),this._frameExtents=new Jh(4,2),this._viewportCount=6,this._viewports=[new op(2,1,1,1),new op(0,1,1,1),new op(3,1,1,1),new op(1,1,1,1),new op(3,0,1,1),new op(1,0,1,1)],this._cubeDirections=[new up(1,0,0),new up(-1,0,0),new up(0,0,1),new up(0,0,-1),new up(0,1,0),new up(0,-1,0)],this._cubeUps=[new up(0,1,0),new up(0,1,0),new up(0,1,0),new up(0,1,0),new up(0,0,1),new up(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),ub.setFromMatrixPosition(e.matrixWorld),n.position.copy(ub),hb.copy(n.position),hb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(hb),n.updateMatrixWorld(),r.makeTranslation(-ub.x,-ub.y,-ub.z),cb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cb)}}pb.prototype.isPointLightShadow=!0;class db extends tb{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new pb}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}db.prototype.isPointLight=!0;class fb extends ob{constructor(){super(new Gf(-5,5,5,-5,.5,500))}}fb.prototype.isDirectionalLightShadow=!0;class mb extends tb{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(pd.DefaultUp),this.updateMatrix(),this.target=new pd,this.shadow=new fb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}mb.prototype.isDirectionalLight=!0;class vb extends tb{constructor(e,t){super(e,t),this.type="AmbientLight"}}vb.prototype.isAmbientLight=!0;class gb extends tb{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}gb.prototype.isRectAreaLight=!0;class _b{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new up)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}_b.prototype.isSphericalHarmonics3=!0;class yb extends tb{constructor(e=new _b,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}yb.prototype.isLightProbe=!0;class bb{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class xb extends Xd{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}xb.prototype.isInstancedBufferGeometry=!0;let wb;(class extends Zy{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=qy.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){qy.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}).prototype.isImageBitmapLoader=!0;const Mb=function(){return void 0===wb&&(wb=new(window.AudioContext||window.webkitAudioContext)),wb};class Sb extends Zy{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new Qy(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{const e=n.slice(0);Mb().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}(class extends yb{constructor(e,t,n=1){super(void 0,n);const r=(new Rd).set(e),i=(new Rd).set(t),a=new up(r.r,r.g,r.b),o=new up(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0;(class extends yb{constructor(e,t=1){super(void 0,t);const n=(new Rd).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class Eb extends pd{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class Ab{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){cp.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;cp.multiplyQuaternionsFlat(e,a,e,t,e,n),cp.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const Tb="\\[\\]\\.:\\/",Cb=new RegExp("["+Tb+"]","g"),kb="[^"+Tb+"]",Lb="[^"+Tb.replace("\\.","")+"]",Pb=/((?:WC+[\/:])*)/.source.replace("WC",kb),Rb=/(WCOD+)?/.source.replace("WCOD",Lb),Ib=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kb),zb=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kb),Ob=new RegExp("^"+Pb+Rb+Ib+zb+"$"),Db=["material","materials","bones"];class Nb{constructor(e,t,n){this.path=t,this.parsedPath=n||Nb.parseTrackName(t),this.node=Nb.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Nb.Composite(e,t,n):new Nb(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Cb,"")}static parseTrackName(e){const t=Ob.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Db.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Nb.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nb.Composite=class{constructor(e,t,n){const r=n||Nb.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Nb.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Nb.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Nb.prototype.GetterByBindingType=[Nb.prototype._getValue_direct,Nb.prototype._getValue_array,Nb.prototype._getValue_arrayElement,Nb.prototype._getValue_toArray],Nb.prototype.SetterByBindingTypeAndVersioning=[[Nb.prototype._setValue_direct,Nb.prototype._setValue_direct_setNeedsUpdate,Nb.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nb.prototype._setValue_array,Nb.prototype._setValue_array_setNeedsUpdate,Nb.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nb.prototype._setValue_arrayElement,Nb.prototype._setValue_arrayElement_setNeedsUpdate,Nb.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nb.prototype._setValue_fromArray,Nb.prototype._setValue_fromArray_setNeedsUpdate,Nb.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Fb{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,o=new Array(a),s={endingStart:gh,endingEnd:gh};for(let e=0;e!==a;++e){const t=i[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=2202===n;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=_h,r.endingEnd=_h):(r.endingStart=e?this.zeroSlopeAtStart?_h:gh:yh,r.endingEnd=t?this.zeroSlopeAtEnd?_h:gh:yh)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}(class extends Dh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new Ab(Nb.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),a[e]=u}o[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new zy(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"==typeof e?Gy.findByName(r,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:bh),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Fb(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?Gy.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o){t[o]._update(r,e,i,a)}const o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Bb{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Bb(void 0===this.value.clone?this.value:this.value.clone())}}(class extends Eg{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class Ub{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Vh(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Hb=new Jh;class jb{constructor(e=new Jh(1/0,1/0),t=new Jh(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Hb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Hb.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}jb.prototype.isBox2=!0;const Vb=new up,Gb=new up;class Wb{constructor(e=new up,t=new up){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Vb.subVectors(e,this.start),Gb.subVectors(this.end,this.start);const n=Gb.dot(Gb);let r=Gb.dot(Vb)/n;return t&&(r=Vh(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const qb=new up,Xb=new Hp,Yb=new Hp;function Zb(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Zb(e.children[n]));return t}class Jb extends d_{constructor(e=10,t=10,n=4473924,r=8947848){n=new Rd(n),r=new Rd(r);const i=t/2,a=e/t,o=e/2,s=[],l=[];for(let e=0,c=0,u=-o;e<=t;e++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Xd;c.setAttribute("position",new Bd(s,3)),c.setAttribute("color",new Bd(l,3));super(c,new i_({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const Qb=new Float32Array(1);new Int32Array(Qb.buffer);M_.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(M_.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},V_.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Jb.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends d_{constructor(e){const t=Zb(e),n=new Xd,r=[],i=[],a=new Rd(0,0,1),o=new Rd(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new Bd(r,3)),n.setAttribute("color",new Bd(i,3));super(n,new i_({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Yb.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(Xb.multiplyMatrices(Yb,i.matrixWorld),qb.setFromMatrixPosition(Xb),r.setXYZ(n,qb.x,qb.y,qb.z),Xb.multiplyMatrices(Yb,i.parent.matrixWorld),qb.setFromMatrixPosition(Xb),r.setXYZ(n+1,qb.x,qb.y,qb.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Zy.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),bb.extractUrlBase(e)},Zy.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},jb.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},jb.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},jb.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},jb.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},dp.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},dp.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},dp.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},dp.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},dp.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Rp.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Pf.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Wb.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Qh.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Qh.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Qh.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Qh.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Qh.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Qh.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Hp.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Hp.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Hp.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new up).setFromMatrixColumn(this,3)},Hp.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Hp.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Hp.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hp.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hp.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Hp.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Hp.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hp.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Hp.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Hp.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Hp.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Hp.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Hp.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hp.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Hp.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},Hp.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Cf.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},cp.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},cp.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Up.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Up.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Up.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Md.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Md.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Md.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Md.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Md.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Md.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Md.getBarycoord(e,t,n,r,i)},Md.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Md.getNormal(e,t,n,r)},G_.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},G_.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new yy(this,e)},G_.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new xy(this,e)},Jh.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Jh.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Jh.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},up.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},up.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},up.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},up.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},up.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},up.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},up.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},up.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},up.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},op.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},op.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pd.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},pd.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},pd.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},pd.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},pd.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(pd.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),pf.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(pf.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Zg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},bf.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(tb.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Dd.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===zh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(zh)}}}),Dd.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?zh:Ih),this},Dd.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Dd.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Xd.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},Xd.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Dd(arguments[1],arguments[2])))},Xd.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},Xd.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Xd.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Xd.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},Xd.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Xd.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Eg.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?zh:Ih),this},Eg.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},yy.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},yy.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},yy.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Sg.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Bb.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ed.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Rd}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(_f.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),xg.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},xg.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},xg.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},xg.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},xg.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},xg.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},xg.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},xg.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},xg.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},xg.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},xg.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},xg.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},xg.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},xg.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},xg.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},xg.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},xg.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},xg.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},xg.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},xg.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},xg.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},xg.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},xg.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},xg.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},xg.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(xg.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?wh:xh}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(hg.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(sp.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Eb.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Sb).load(e,(function(e){t.setBuffer(e)})),this},wf.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},wf.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},np.crossOrigin=void 0,np.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new eb;i.setCrossOrigin(this.crossOrigin);const a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},np.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new $y;i.setCrossOrigin(this.crossOrigin);const a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},np.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},np.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"134"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="134");const Kb=e=>((e+180)%360+180)%360;var $b={clamp:(e,t,n)=>(e>n&&(e=n),(e<t||isNaN(e))&&(e=t),e),random:(e,t)=>e+Math.random()*(t-e),randomInt:(e,t)=>(e=Math.ceil(e),t=Math.floor(t),e+Math.floor(Math.random()*(t-e+1))),dieRoll(e,t,n){e=this.clamp(e,0,1e9);let r=0;for(var i=0;i<e;i++)r+=this.random(t,n);return r},dieRollInt(e,t,n){e=this.clamp(e,0,1e9);let r=0;for(var i=0;i<e;i++)r+=this.randomInt(t,n);return r},lerp:(e,t,n)=>e+(t-e)*n,lerpRotate(e,t,n){let r=Kb(e),i=Kb(t);r>i&&([r,i]=[i,r]);var a=i-r;return a>180?Kb(i+n*(360-a)):r+n*a},minAngle:e=>(e+180*(2*Math.max(4,4+Math.round(e/-360))+1))%360-180,inRange:(e,t,n)=>e<=n&&e>=t?1:0,all:(e,...t)=>-1===t.findIndex((t=>t!==e))?1:0,any:(e,...t)=>t.findIndex((t=>t==e))>=0?1:0,approxEq:(e,...t)=>-1===t.findIndex((t=>Math.abs(e-t)>1e-7))?1:0};const ex=function(){const e=this;this.global_variables={},this.cache_enabled=!0,this.use_radians=!1,this.variables={},this.variableHandler=null;let t=!1,n=0,r={},i=0;function a(e){this.lines=[];for(let t of e){if(!t)continue;let e=E(t);if(this.lines.push(e),e instanceof u)break}}function o(e,t){this.iterations=E(e),this.body=E(t)}function s(e,t,n,r){this.operator=e,this.a=E(t),void 0!==n&&(this.b=E(n)),void 0!==r&&(this.c=E(r))}function l(e,t){this.query=e,this.args=t.map((e=>e.startsWith("'")&&e.endsWith("'")?e:E(e)))}function c(e,t){this.value=E(t),this.name=v(e)}function u(e){this.value=E(e)}function h(){}function p(){}let d=()=>this.use_radians?1:Math.PI/180,f=/^-?\d+(\.\d+f?)?$/;function m(e){return f.test(e)}function v(e){if(e[1]!==S)return e;switch(e[0]){case"q":return"query"+e.substring(1);case"v":return"variable"+e.substring(1);case"t":return"temp"+e.substring(1);case"c":return"context"+e.substring(1);default:return e}}const g=/[&|<>=]/,_=/^(temp|variable|t|v)\.\w+=/,y="true",b="false",x="return",w="break",M="continue",S=".";function E(e){if(!e)return 0;for(e.endsWith(";")&&(e=e.substring(0,e.length-1));A(e);)e=e.substr(1,e.length-2);if(m(e))return parseFloat(e);let t=z(e,";");if(t)return new a(t);if(e.startsWith(x))return new u(e.substr(6));switch(e){case y:return 1;case b:return 0;case w:return new h;case M:return new p}let n=-1!==e.indexOf("="),r=n&&e.length>4&&e.match(_);if(r&&"="!==e[r.index+r[0].length]){return new c(r[0].substring(0,r[0].length-1),e.substr(r.index+r[0].length))}let i=-1!==e.indexOf("?"),d=i&&T(e,"??",19);if(d)return d;let f=i&&I(e,"?");if(f){let e=I(f[1],":");return e&&e.length?new s(10,f[0],e[0],e[1]):new s(10,f[0],f[1],0)}if(d=g.test(e)&&(T(e,"&&",11)||T(e,"||",12)||n&&T(e,"==",17)||n&&T(e,"!=",18)||n&&T(e,"<=",14)||T(e,"<",13)||n&&T(e,">=",16)||T(e,">",15))||T(e,"+",1,!0)||function(e,t,n){let r=O(e,t);if(r)return 0===r[0].length?new s(n,0,r[1]):new s(n,r[0],r[1])}(e,"-",2)||T(e,"*",3)||T(e,"/",4,!0)||function(e){if(e.startsWith("!")&&e.length>1)return new s(5,e.substr(1),0)}(e),d instanceof s)return d;if(e.startsWith("math.")){if("math.pi"===e)return Math.PI;let t=e.indexOf("("),n=e.substr(5,t-5),r=e.substr(t+1,e.length-t-2),i=z(r,",");switch(i||(i=[r]),n){case"abs":return new s(100,i[0]);case"sin":return new s(101,i[0]);case"cos":return new s(102,i[0]);case"exp":return new s(103,i[0]);case"ln":return new s(104,i[0]);case"pow":return new s(105,i[0],i[1]);case"sqrt":return new s(106,i[0]);case"random":return new s(107,i[0],i[1]);case"ceil":return new s(108,i[0]);case"round":return new s(109,i[0]);case"trunc":return new s(110,i[0]);case"floor":return new s(111,i[0]);case"mod":return new s(112,i[0],i[1]);case"min":return new s(113,i[0],i[1]);case"max":return new s(114,i[0],i[1]);case"clamp":return new s(115,i[0],i[1],i[2]);case"lerp":return new s(116,i[0],i[1],i[2]);case"lerprotate":return new s(117,i[0],i[1],i[2]);case"asin":return new s(118,i[0]);case"acos":return new s(119,i[0]);case"atan":return new s(120,i[0]);case"atan2":return new s(121,i[0],i[1]);case"die_roll":return new s(122,i[0],i[1],i[2]);case"die_roll_integer":return new s(123,i[0],i[1],i[2]);case"hermite_blend":return new s(124,i[0]);case"random_integer":return new s(125,i[0],i[1]);case"min_angle":return new s(126,i[0])}}if(e.startsWith("loop(")){let t=z(e.substring(5,e.length-1),",");if(t)return new o(...t)}if(f=e.match(/[a-z0-9._]{2,}/g),f&&1===f.length&&f[0].length>=e.length-2)return v(e);if(e.includes("(")&&")"==e[e.length-1]){let t=e.search(/\(/),n=v(e.substr(0,t)),r=e.substr(t+1,e.length-t-2),i=z(r,",");return i||(i=[r]),new l(n,i)}return 0}function A(e){let t=e.startsWith(C)&&e.endsWith(k);if(t||e.startsWith(L)&&e.endsWith(P)){if(e.indexOf(t?k:P)===e.length-1)return!0;let n=0;for(let t=0;t<e.length-1;t++){switch(e[t]){case C:case L:n++;break;case k:case P:n--}if(0==n)return!1}return!0}return!1}function T(e,t,n,r){let i=r?O(e,t):I(e,t);if(i)return new s(n,i[0],i[1])}const C="(",k=")",L="{",P="}",R="-";function I(e,t){if(-1===e.indexOf(t))return;let n=0;for(let r=0;r<e.length;r++)switch(e[r]){case C:case L:n++;break;case k:case P:n--;break;default:if(0===n&&t[0]===e[r]&&(1===t.length||t===e.substr(r,t.length)))return[e.substr(0,r),e.substr(r+t.length)]}}function z(e,t){if(-1===e.indexOf(t))return;let n,r=0,i=0;e:for(let a=0;a<e.length;a++)switch(e[a]){case C:case L:r++;break;case k:case P:r--;break;default:if(0===r&&t[0]===e[a]&&(1===t.length||t===e.substr(a,t.length))){let r=e.substring(i,a);if(n||(n=[]),n.push(r),i=a+t.length,-1===e.substring(i).indexOf(t))break e}}return n&&n.length?(n.push(e.substring(i)),n):void 0}function O(e,t){if(-1===e.indexOf(t))return;let n=e.length-1,r=0;for(;n>=0;){switch(e[n]){case C:case L:r++;break;case k:case P:r--;break;default:if(!(0!==r||t[0]!==e[n]||1!==t.length&&t!==e.substr(n,t.length)||t===R&&!1!=="+-*/<>=|&?:".includes(e[n-1])))return[e.substr(0,n),e.substr(n+t.length)]}n--}}function D(e,t,n){return"string"==typeof e&&"'"==e[0]||(e=N(e,n,!0)),"string"==typeof t&&"'"==t[0]||(t=N(t,n,!0)),e===t}function N(r,i,f){if("number"==typeof r)return r;if("string"==typeof r){let n=i[r];if(void 0===n&&"function"==typeof e.variableHandler&&(n=e.variableHandler(r,i)),"number"==typeof n)return n;if("string"==typeof n&&!f)return e.parse(n,i)||0;if(void 0===n)t=!0;else if("function"==typeof n)return n()||0;return n||0}if(void 0===r)return 0;switch(r.constructor){case s:switch(r.operator){case 1:return N(r.a,i)+N(r.b,i);case 2:return N(r.a,i)-N(r.b,i);case 3:return N(r.a,i)*N(r.b,i);case 4:return N(r.a,i)/N(r.b,i);case 5:return 0==N(r.a,i)?1:0;case 10:return N(r.a,i)?N(r.b,i):N(r.c,i);case 11:return N(r.a,i)&&N(r.b,i)?1:0;case 12:return N(r.a,i)||N(r.b,i)?1:0;case 13:return N(r.a,i)<N(r.b,i)?1:0;case 14:return N(r.a,i)<=N(r.b,i)?1:0;case 15:return N(r.a,i)>N(r.b,i)?1:0;case 16:return N(r.a,i)>=N(r.b,i)?1:0;case 17:return D(r.a,r.b,i)?1:0;case 18:return D(r.a,r.b,i)?0:1;case 19:t=!1;let e=N(r.a,i);return t?N(r.b,i):e;case 100:return Math.abs(N(r.a,i));case 101:return Math.sin(N(r.a,i)*d());case 102:return Math.cos(N(r.a,i)*d());case 103:return Math.exp(N(r.a,i));case 104:return Math.log(N(r.a,i));case 105:return N(r.a,i)**N(r.b,i);case 106:return Math.sqrt(N(r.a,i));case 107:return $b.random(N(r.a,i),N(r.b,i));case 108:return Math.ceil(N(r.a,i));case 109:return Math.round(N(r.a,i));case 110:return Math.trunc(N(r.a,i));case 111:return Math.floor(N(r.a,i));case 112:return N(r.a,i)%N(r.b,i);case 113:return Math.min(N(r.a,i),N(r.b,i));case 114:return Math.max(N(r.a,i),N(r.b,i));case 115:return $b.clamp(N(r.a,i),N(r.b,i),N(r.c,i));case 116:return $b.lerp(N(r.a,i),N(r.b,i),N(r.c,i));case 117:return $b.lerpRotate(N(r.a,i),N(r.b,i),N(r.c,i));case 118:return Math.asin(N(r.a,i))/d();case 119:return Math.acos(N(r.a,i))/d();case 120:return Math.atan(N(r.a,i))/d();case 121:return Math.atan2(N(r.a,i),N(r.b,i))/d();case 122:return $b.dieRoll(N(r.a,i),N(r.b,i),N(r.c,i));case 123:return $b.dieRollInt(N(r.a,i),N(r.b,i),N(r.c,i));case 124:let n=N(r.a,i);return 3*n**2-2*n**3;case 125:return $b.randomInt(N(r.a,i),N(r.b,i));case 126:return $b.minAngle(N(r.a,i))}break;case u:return n=1,N(r.value,i);case c:return i[r.name]=e.variables[r.name]=N(r.value,i),0;case l:let f=r.args.map((e=>"string"==typeof e&&e.startsWith("'")&&e.endsWith("'")?e.substring(1,e.length-1):N(e,i,!0)));switch(r.query){case"query.in_range":return $b.inRange(...f);case"query.all":return $b.all(...f);case"query.any":return $b.any(...f);case"query.approx_eq":return $b.approxEq(...f)}return"function"==typeof i[r.query]?i[r.query](...f)||0:"function"==typeof e.variableHandler&&e.variableHandler(r.query,i,f)||0;case a:n=0;let m=0;for(let e of r.lines)if(m=N(e,i),n>0)break;return m;case o:let v=0,g=$b.clamp(N(r.iterations,i),0,1024);for(let e=0;e<g;e++){let e=N(r.body,i);if(2===n){n=0;break}if(3!==n){if(v=e,1===n)break}else n=0}return v;case h:return n=2,0;case p:return n=3,0}return 0}this.parse=(t,a)=>{if("number"==typeof t)return t||0;if("string"!=typeof t||0===t.length)return 0;if(t.length<9&&m(t))return parseFloat(t);let o=this.cache_enabled&&r[t];return o||(o=E(t.toLowerCase().replace(/\s/g,"")),this.cache_enabled&&function(e,t){if(r[e]=t,i++,i>400){let e=Object.keys(r);for(let t=0;t<10;t++)delete r[e[t]];i-=10}}(t,o)),function(t,r){let i={};for(let t in e.global_variables)i[t]=e.global_variables[t];for(let t in e.variables)i[t]=e.variables[t];if(r)for(let e in r)i[e]=r[e];let a=N(t,i);return n=0,a}(o,a)||0},this.resetVariables=()=>{e.variables={}}};var tx=n(621),nx=n.n(tx),rx={Scene:class{constructor(e={}){this.emitters=[],this.child_configs={},this.space=new pd,this._fetchTexture=e.fetchTexture,this._fetchParticleFile=e.fetchParticleFile,this.global_options={max_emitter_particles:e.max_emitter_particles||3e4,tick_rate:e.tick_rate||30,loop_mode:e.loop_mode||"auto",parent_mode:e.parent_mode||"world",ground_collision:0!=e.ground_collision,_scale:1},Object.defineProperty(this.global_options,"scale",{get:()=>this.global_options._scale,set:e=>{this.global_options._scale=e,this.emitters.forEach((t=>{t.local_space.scale.set(e,e,e),t.global_space.scale.set(e,e,e)}))}})}fetchTexture(e){if("function"==typeof this._fetchTexture)return this._fetchTexture(e)}fetchParticleFile(e,t){if("function"==typeof this._fetchParticleFile)return this._fetchParticleFile(e,t)}updateFacingRotation(e){this.emitters.forEach((t=>{t.updateFacingRotation(e)}))}}};const ix="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QcKDTg2HKzkwgAAAFBJREFUOMtjvHDhwn8GCgALAwMDg4iICFma37x5w8DEQCEg2gBpaWkGaWlp8g2g2AVDyABcgTUwXiDGNQMfiCzoAk+fPiXIpr4L3rx5Q7YBAOhLE0zw8k9cAAAAAElFTkSuQmCC";function ax(e){if("string"==typeof e&&"#"==e[0])e.length<9&&(e="#ff"+e.substr(1,6));else{if(e instanceof Array)return new(nx())({r:255*(e[0]||0),g:255*(e[1]||0),b:255*(e[2]||0),a:"number"==typeof e[3]?e[3]:1}).toHex8String();e=new(nx())(e).toHex8String()}return"#"+e.substr(3,6)+e.substr(1,2)}class ox{constructor(e,t,n=0){this.scene=e,this.texture=new ip(new Image),this.texture.image.onload=()=>{this.texture.needsUpdate=!0,"function"==typeof this.onTextureUpdate&&this.onTextureUpdate()},this.texture_source_category="placeholder",this.reset(),this.onTextureUpdate=null,n.path&&this.set("file_path",n.path),t&&t.particle_effect?this.setFromJSON(t):"object"==typeof t&&Object.assign(this,t)}reset(){for(var e in this.texture.image.src=ix,this.texture.magFilter=Jc,this.texture.minFilter=Jc,ox.types){var t,n=ox.types[e];switch(n.type){case"string":case"molang":t="";break;case"number":t=0;break;case"boolean":t=!1;break;case"color":t="#ffffff";break;case"object":t={}}if(n.array){if(this[e]=[],n.dimensions)for(var r=0;r<n.dimensions;r++)"object"==n.type&&(t={}),this[e].push(t)}else if("object"==n.type&&this[e])for(let t in this[e])delete this[e][t];else this[e]=t}return this.emitter_rate_mode="steady",this.emitter_lifetime_mode="looping",this.emitter_shape_mode="point",this.particle_appearance_material="particles_alpha",this.particle_appearance_facing_camera_mode="rotate_xyz",this.particle_appearance_direction_mode="derive_from_velocity",this.particle_appearance_speed_threshold=.01,this.particle_direction_mode="outwards",this.particle_motion_mode="dynamic",this.particle_rotation_mode="dynamic",this.particle_texture_mode="static",this.particle_color_mode="static",this.particle_color_interpolant="v.particle_age / v.particle_lifetime",this.particle_color_range=1,this.emitter_rate_rate="4",this.emitter_rate_amount="1",this.emitter_rate_maximum="100",this.emitter_lifetime_active_time="1",this.particle_appearance_size=["0.2","0.2"],this.particle_lifetime_max_lifetime="1",this.particle_texture_size=[16,16],this.texture_source_category="placeholder",this}set(e,t){if(null!=ox.types[e]&&null!=t&&null!=t){if(ox.types[e].array&&t instanceof Array)"molang"==ox.types[e].type&&(t=t.map((e=>e.toString()))),this[e].splice(0,1/0,...t);else if(ox.types[e].array&&"string"==ox.types[e].type&&"string"==typeof t)this[e].splice(0,1/0,t);else if("string"==typeof this[e])this[e]=t.toString();else if("number"==ox.types[e].type&&"number"==typeof t)this[e]=t;else if("boolean"==ox.types[e].type)this[e]=!!t;else if("object"==ox.types[e].type)for(let n in t)this[e][n]=t[n];return this}}setFromJSON(e){var t=e.particle_effect.components,n=e.particle_effect.curves,r=e.particle_effect.events,i=e.particle_effect.description;if(i&&i.identifier&&(this.identifier=i.identifier),i&&i.basic_render_parameters&&(this.set("particle_texture_path",i.basic_render_parameters.texture),this.set("particle_appearance_material",i.basic_render_parameters.material)),"object"==typeof r)for(let _ in r){let y=r[_];this.events[_]=y}if(n)for(var a in n){var o=n[a],s={id:a,mode:o.type,input:(o.input||0).toString(),range:(o.horizontal_range||0).toString(),nodes:[]};if(o.nodes instanceof Array&&o.nodes.length)o.nodes.forEach((e=>{let t=parseFloat(e)||0;s.nodes.push(t)}));else if("object"==typeof o.nodes&&"bezier_chain"==o.type)for(let b in o.nodes){let x=o.nodes[b],w={time:parseFloat(b),left_value:parseFloat(x.left_value||x.value)||0,right_value:parseFloat(x.right_value||x.value)||0,left_slope:parseFloat(x.left_slope||x.slope)||0,right_slope:parseFloat(x.right_slope||x.slope)||0};s.nodes.push(w)}this.curves[a]=s}if(t){function M(e){return t["minecraft:"+e]}if(M("emitter_initialization")){var l=M("emitter_initialization").creation_expression,c=M("emitter_initialization").per_update_expression;"string"==typeof l&&(this.variables_creation_vars=l.replace(/;+$/,"").split(";")),"string"==typeof c&&(this.variables_tick_vars=c.replace(/;+$/,"").split(";"))}if(M("emitter_local_space")&&(this.space_local_position=M("emitter_local_space").position,this.space_local_rotation=M("emitter_local_space").rotation,this.space_local_velocity=M("emitter_local_space").velocity),M("emitter_rate_manual")&&(this.set("emitter_rate_mode","manual"),this.set("emitter_rate_maximum",M("emitter_rate_manual").max_particles)),M("emitter_rate_steady")&&(this.set("emitter_rate_mode","steady"),this.set("emitter_rate_rate",M("emitter_rate_steady").spawn_rate),this.set("emitter_rate_maximum",M("emitter_rate_steady").max_particles)),M("emitter_rate_instant")&&(this.set("emitter_rate_mode","instant"),this.set("emitter_rate_amount",M("emitter_rate_instant").num_particles)),M("emitter_lifetime_once")&&(this.set("emitter_lifetime_mode","once"),this.set("emitter_lifetime_active_time",M("emitter_lifetime_once").active_time)),M("emitter_lifetime_looping")&&(this.set("emitter_lifetime_mode","looping"),this.set("emitter_lifetime_active_time",M("emitter_lifetime_looping").active_time),this.set("emitter_lifetime_sleep_time",M("emitter_lifetime_looping").sleep_time)),M("emitter_lifetime_expression")&&(this.set("emitter_lifetime_mode","expression"),this.set("emitter_lifetime_activation",M("emitter_lifetime_expression").activation_expression),this.set("emitter_lifetime_expiration",M("emitter_lifetime_expression").expiration_expression)),M("emitter_lifetime_events")){let S=M("emitter_lifetime_events");this.set("emitter_events_creation",S.creation_event),this.set("emitter_events_expiration",S.expiration_event),this.set("emitter_events_timeline",S.timeline),this.set("emitter_events_distance",S.travel_distance_events),this.set("emitter_events_distance_looping",S.looping_travel_distance_events)}var u,h=M("emitter_shape_point")||M("emitter_shape_custom");if(h&&(this.set("emitter_shape_mode","point"),this.set("emitter_shape_offset",h.offset)),M("emitter_shape_sphere")&&(h=M("emitter_shape_sphere"),this.set("emitter_shape_mode","sphere"),this.set("emitter_shape_offset",h.offset),this.set("emitter_shape_radius",h.radius),this.set("emitter_shape_surface_only",h.surface_only)),M("emitter_shape_box")&&(h=M("emitter_shape_box"),this.set("emitter_shape_mode","box"),this.set("emitter_shape_offset",h.offset),this.set("emitter_shape_half_dimensions",h.half_dimensions),this.set("emitter_shape_surface_only",h.surface_only)),M("emitter_shape_disc")){switch(h=M("emitter_shape_disc"),this.set("emitter_shape_mode","disc"),this.set("emitter_shape_offset",h.offset),h.plane_normal){case"x":this.set("emitter_shape_plane_normal",[1,0,0]);break;case"y":this.set("emitter_shape_plane_normal",[0,1,0]);break;case"z":this.set("emitter_shape_plane_normal",[0,0,1]);break;default:this.set("emitter_shape_plane_normal",h.plane_normal)}this.set("emitter_shape_radius",h.radius),this.set("emitter_shape_surface_only",h.surface_only)}if(M("emitter_shape_entity_aabb")&&(this.set("emitter_shape_mode","entity_aabb"),this.set("emitter_shape_surface_only",M("emitter_shape_entity_aabb").surface_only),h=M("emitter_shape_entity_aabb")),h&&h.direction&&("inwards"==h.direction||"outwards"==h.direction?this.set("particle_direction_mode",h.direction):(this.set("particle_direction_mode","direction"),this.set("particle_direction_direction",h.direction))),M("particle_initialization")){c=M("particle_initialization").per_update_expression;var p=M("particle_initialization").per_render_expression;"string"==typeof c&&(this.particle_update_expression=c.replace(/;+$/,"").split(";")),"string"==typeof p&&(this.particle_render_expression=p.replace(/;+$/,"").split(";"))}if(M("particle_initial_spin")&&(this.set("particle_rotation_initial_rotation",M("particle_initial_spin").rotation),this.set("particle_rotation_rotation_rate",M("particle_initial_spin").rotation_rate)),M("particle_kill_plane")&&this.set("particle_lifetime_kill_plane",M("particle_kill_plane")),M("particle_motion_dynamic")){let E=M("particle_motion_dynamic").linear_acceleration,A=M("particle_motion_dynamic").linear_drag_coefficient,T=M("particle_motion_dynamic").rotation_acceleration,C=M("particle_motion_dynamic").rotation_drag_coefficient;null==E&&null==A||(this.set("particle_motion_mode","dynamic"),this.set("particle_motion_linear_acceleration",E),this.set("particle_motion_linear_drag_coefficient",A),this.set("particle_motion_linear_speed",1)),null==E&&null==A||(this.set("particle_rotation_mode","dynamic"),this.set("particle_rotation_rotation_acceleration",T),this.set("particle_rotation_rotation_drag_coefficient",C))}else this.set("particle_motion_mode","static");if(M("particle_motion_parametric")){let k=M("particle_motion_parametric").relative_position,L=M("particle_motion_parametric").direction,P=M("particle_motion_parametric").rotation;null==k&&null==L||(this.set("particle_motion_mode","parametric"),this.set("particle_motion_relative_position",k),this.set("particle_motion_direction",L)),null!=P&&(this.set("particle_rotation_mode","parametric"),this.set("particle_rotation_rotation",P))}if(this.set("particle_collision_toggle",null!=M("particle_motion_collision")),M("particle_motion_collision")&&(this.set("particle_collision_enabled",M("particle_motion_collision").enabled),this.set("particle_collision_collision_drag",M("particle_motion_collision").collision_drag),this.set("particle_collision_coefficient_of_restitution",M("particle_motion_collision").coefficient_of_restitution),this.set("particle_collision_collision_radius",M("particle_motion_collision").collision_radius),this.set("particle_collision_expire_on_contact",M("particle_motion_collision").expire_on_contact),M("particle_motion_collision").events)){let R=M("particle_motion_collision").events;R instanceof Array?this.set("particle_collision_events",R):"object"==typeof R&&this.set("particle_collision_events",[R])}if(void 0!==M("particle_initial_speed")&&("object"!=typeof(u=M("particle_initial_speed"))?this.set("particle_motion_linear_speed",u):(this.set("particle_direction_mode","direction"),this.set("particle_direction_direction",M("particle_initial_speed")),this.set("particle_motion_linear_speed",1))),M("particle_lifetime_expression")&&(this.set("particle_lifetime_max_lifetime",M("particle_lifetime_expression").max_lifetime||""),this.set("particle_lifetime_expiration_expression",M("particle_lifetime_expression").expiration_expression||0)),M("particle_expire_if_in_blocks")instanceof Array&&this.set("particle_lifetime_expire_in",M("particle_expire_if_in_blocks")),M("particle_expire_if_not_in_blocks")instanceof Array&&this.set("particle_lifetime_expire_outside",M("particle_expire_if_not_in_blocks")),M("particle_appearance_billboard")){this.set("particle_appearance_size",M("particle_appearance_billboard").size),this.set("particle_appearance_facing_camera_mode",M("particle_appearance_billboard").facing_camera_mode);var{direction:d,uv:f}=M("particle_appearance_billboard");d&&(this.set("particle_appearance_direction_mode",d.mode),this.set("particle_appearance_speed_threshold",d.min_speed_threshold),this.set("particle_appearance_direction",d.custom_direction)),f?(f.texture_width&&this.set("particle_texture_size",[f.texture_width,f.texture_height]),f.flipbook?(this.set("particle_texture_mode","animated"),this.set("particle_texture_uv",f.flipbook.base_UV),this.set("particle_texture_uv_size",f.flipbook.size_UV),this.set("particle_texture_uv_step",f.flipbook.step_UV),this.set("particle_texture_frames_per_second",f.flipbook.frames_per_second),this.set("particle_texture_max_frame",f.flipbook.max_frame),this.set("particle_texture_stretch_to_lifetime",f.flipbook.stretch_to_lifetime),this.set("particle_texture_loop",f.flipbook.loop)):1==f.texture_width&&1==f.texture_height&&f.uv&&!f.uv[0]&&!f.uv[1]&&f.uv_size&&1==f.uv_size[0]&&1==f.uv_size[1]?(this.set("particle_texture_mode","full"),this.set("particle_texture_uv",f.uv),this.set("particle_texture_uv_size",f.uv_size)):(this.set("particle_texture_mode","static"),this.set("particle_texture_uv",f.uv),this.set("particle_texture_uv_size",f.uv_size))):this.set("particle_texture_mode","full")}if(M("particle_appearance_lighting")&&this.set("particle_color_light",!0),M("particle_appearance_tinting"))if("string"==typeof(u=M("particle_appearance_tinting").color))this.set("particle_color_static",ax(u));else if(u instanceof Array&&u.length>=3)if((typeof u[0]+typeof u[1]+typeof u[2]+typeof u[3]).includes("string"))this.set("particle_color_mode","expression"),this.set("particle_color_expression",u);else{this.set("particle_color_mode","static");var m=new(nx())({r:255*u[0],g:255*u[1],b:255*u[2],a:u[3]}).toHex8String();this.set("particle_color_static",m)}else if("object"==typeof u){this.set("particle_color_mode","gradient"),this.set("particle_color_interpolant",u.interpolant);let I=[];if(u.gradient instanceof Array){let z=100/(u.gradient.length-1);u.gradient.forEach(((e,t)=>{e=ax(e);var n=z*t;I.push({percent:n,color:e})}))}else if("object"==typeof u.gradient){let O=1;for(var v in u.gradient)O=Math.max(parseFloat(v),O);for(var v in this.set("particle_color_range",O),u.gradient){m=ax(u.gradient[v]);var g=parseFloat(v)/O*100;I.push({color:m,percent:g})}}this.set("particle_color_gradient",I)}if(M("particle_lifetime_events")){let D=M("particle_lifetime_events");this.set("particle_events_creation",D.creation_event),this.set("particle_events_expiration",D.expiration_event),this.set("particle_events_timeline",D.timeline)}}return this.updateTexture(),this}updateTexture(){let e=e=>{if(e)this.texture_source_category="loaded";else switch(this.particle_texture_path){case"textures/particle/particles":e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAD4RJREFUeJztXQuMXUUZ3sqrSB9bLLRUHgsUhJZHoUJUQCqI+OBRfOGzbq1KrYgFUdJiYtGqQZClxWCoEcQQUAE3samoxGygvjCmLTSNFVOrhgix6BqgGgr29//u+f/duXNn5sw597F7750v+XLvPXNmzuP7/n/mzDlnt6eni0CMsd6HhCbDJbK5jAy0ds8SRuA7+bq8TLkpapnyhAjknbhGlIfWKSqy3Z6rPLQ/XYlWilikPCRcnrBJ+HECV1T6ykMRXrTcFj+ZoIloRAYJLY8td2UB+zOZoMMQEtTuBlq3Vx2GC5f9Pp28bsTMtybhux4p+rsUtvApG3QpUgboYqj4Kfo7FCGBUWYuL5MJ8gwU22a99RNCODN8EnHy68oAOe3rNprVdkKbg4gOYE5iHsScwpwqnCLLJxo8YKz3t+1w9AYipat869atBK5Zs8ZZvmHDBlIW2S6L9QrhPsJ9mfsJDxTBJ4nQvcxpHvYaZjhI6k4U4+xvtF/ZXplz1LGwRXeZYOucOQTeOH16TZktehETGOLva4i/v4g4WUSFwNOZhzJnMA+zOEN4iKw7VeqqEdQE+6oJipyfjoaK/RyfleeMefLr/lhtAo1+OwOo2Hv27CFQlz/xxBNRJnCIf6AR8So8xH018whmH/MY5nHCY2XZkbLOTMMImhHUBLqdfeo5Zx0F0wDmctsAAm/0m+IDJQxgi3+wRDxEPUrEnsM8iTmPOV94OvNk5lzm8cyjmYeLaaZLNrBNkAyg8PX5RQ1go4ABzLQ/Sfry6ZLaVfi5IvbrmGcxFzDfLHwT8xwpe62Y4TVihFlGNqgyQcy+dQ1sEzjEJ+uzCrYJYsWvNFjd50+1xD+ReRrz9czzmBcxFzLfy3yf8HLmO5kXMy8Qg8yXbHGMYYJe0wSx+9c1gOhKzyrU4zEAANGVRbYrBnilpP1XGeLPESHPZr6D+W7mR5hLmZ9hXiNczvwkc7GY4WLJCmdINjBNMFW2NbHIPnYFKCBuDCbcclup+kbqnyb9NgZ6J4j4b5So/wBzGfM65peZX2cOCG9ifoW5knklcxHzUjHBmWKkPjEWtoGrgwPrOdaOBC3roXpMMOG+B6iMCYzony6ROpuyQd7ZIv6HJMpvYK5h3sX8AfMB4Q+ZdzNvY65mXsvsN0wwX8YEh5tZoOxxdixoO2uxzG2Aijm2Cz0m6d+9h2ACVxmWX79nb4WmSWh0dk+jv08iFpH7Non85RLh3xLhf8p8lPlb4S+ZPxMzrJPscK10F+gOzpKu4FjJAri6mNyYs9ZBCBoAZbt/TaF1QgaA8EDFAMY6Vt+P6MeI/zSJ3HdJf3+DiA+BH2FuZvJIhf4sfJK5hbmROcj8thjmKsrGBG+hbDxwgpkFGnPWOgRmhDvL1QBiArscosIAoKu+GkBNMNJuZgCk5ENFnBNELET/h5mfZ97KvE/E38r8K/MfzH8K8f1vzG1iAhjlm8wvMD8qWeANlM0fHCWZBlcEExp3BtsceRFe1QU4yiE84MsCVV1AdQaYLAaYIeLMFbHQf3+c+UXmd5g/YW4S8f/FfIH5X+Fu5rCYAJng58zvMb9K2cARmeRc5qmUXREcJgZIVwKKvAjPgxpATRC93cwAvTTa/6OvPkdEw4j+a8x7Jfq3S7RD/BeZLwlfFBPsYv6J+Svm/cxvUHaZiLkCzCFgxnA2jY4DkgEUeRGeB7ML8I0DnNvNDHCwGADReZqI9R7K+vCbKRvlszNph6T8/4jw/xO+JJkAmWEn83eUjQVwxYDBIAaSF1I2S3i8GABjjklFj7PjsX79elq7dm3Na1U2dPnKlSud65rLQxhjA0wpf6Y6FDDA0qVLa0ywadOmym982qa44447qsrxO3Z7VDsGMLuAT1HWj8d0AS9IF/Ck1QVcbXUBeilYuWXcqPPWMYAB8HnZZZeNiKiim59mnbzfIVA2D2AaAHMAmPe/hOIHgfgeGgTiPgFmFE+h6kFgMoANM/JN+MTP6yLyYBjAdRmIGcDPUTbdi8vAIcq/DMQEES4DMSt4PWX3B3yXgakLsOEyQAsygN77R2RilG5OBF3BXEXZRND9YoJN0h3oRBAmhTaL+D+ibCIIU8KfpuqJIEwH49kCfUZg//JnqkPhMoApuprAjPB6xgDSvk4FH2p0AzoV/H7K7vytFhN8n0angn8j1KlgGARTwTeSeyoY6X+mmG1yMoCB559/nnQAaC7PS/H1XgVIPXs6WG8GQTjcBv6gmGCVdAd3ihHuF+L+wHeZa2n0ZhDExzgCD46YN4M0+tPNIBMQHgM/c/DXKtDoY2CaBfBsn94OPkdMgEs53PPH1PCXKJsgukWIiMctYtwOxpXDIhHfvB18tER/uh3cNNw+zWmeX9x0Dbmo5ZQ9uq1ZQMcC6ApOFBOcJd0BxgS4P/AJyvr3q4WYL7hCoh5PCl0kkY/r/pNo9IGQkeinNAs4Cn3c2/d7xYoVBOK7zhTOnTu3Vuz1c7wG2HD9FaSfSi2nbCCoz/9Ppeqngk6U7gDP++Fa/u0S3Xg66HIhRF8omQLPCGLEfzpVPxIG8c1HwvZr6ElsV0BoWr2a/n3llaTC3zlrVoV4/h9dwrp16yrjA71fgO9glQkQ/Y9dTK4sMH/2tCrhQSzTcjHARKMrME2A7kCfBjYfCj2Xeb4Q0X62lM2XqEef3+cQX18QSXcCAQiu4qvwpgFU7Mq9AhYfmQC/YYqKASA4Ih/i//327BO/DSOo4Kb4VgbQF0NsE+hj4bMkG8yWjACBT5UoB3HZeLKY5Djp73G5N8MQf2IS3wE76k3xQRV8yZIlIxlAu4SqAWMgA/AJryyH8JXIvx3jMLIN4DKB/UYQjHCECHyMGAI8VpYdKeuYbwhNSeLnwDaAiq/lMAAER8RXbhfLGKBmHOAZA2jk37ro/AodY4BXeExwkMMIh4jAMy3OEJOYr4ZNotFXwvDkcXoZxAcV3RYfQKSr4MFnBTxXARD7uvPOGDEAvlsGmGCZ4ABrXGAaYSr5Xw413xTWdwL3S+JHwiW+jTLPCuRlgBgYQuoloxoCnCzLdJ00wi8D3ytisXj22WdbPomU0EAE3giKwssvv5wM0M6AAUJZIPTHI7Zs2UK7d++mhx9+OJmgXRF6LxDC4/Vx2yTPPPMMDQ8Pk+Lpp5+mXbt20eOPP56M0E5QgUFXlGOZGsRVvnHjRnrqqadocHAwCd+O8EW4vU6oi9ixY0cSv52RJ3Aeir4WnpCQMJ6AQdy2bdtSFHcrIH7IAMkgXY48gyQkJCQkdCV0fJC6iYSEhIQEC/bfHXDB7EaKto86oW2QhaLtJ9QBfeU8BFsUlwl8AuYZxiV4MoEH9ZwYVwSb333RZy4zv9t1XXXs9e1thI4nmcCCnpC82cCY5dqGfoZEscXUTzOluwQ3xbazTMyxpKuVAjBPcCiKbUFcUewzgP0b4ms7LgOF+nOfMXzHlBABTbG+crPMPLl2pPkM5BLUNp4vA8TuS0IL4PsjEyHBQnAJGNOl2PuUdxWSMI5hzjIWySAJCQnjHXn9eLPLExqAmJF96I9NjnV5Qk9cxIROXqg85k/NjWV5giAUGXknr93Lux4pAySUhqvPtX+nMUCCE6GM0oryhISGgLI/ZzcvZ51+Zl+gvDevDVnP20bXIiQATuzevXuXg/juKF/AZYMgvnvKUX8nc8C3D7pOSETZRn/gOLCvQ75y3U6E2WqOs6mg7O/y9QXK+30HLgetArgE6ueyYdDVBi+/iwT47mh7CMJJ+bC5Dcr+zuBCXU+aWWCWG9/nSRshE9wFEwTOQ59soy/URoRJBn3l9n5HgbI/xrwqsFObQU9dPSjngYn4in5H24OGgDUHJqJp+bDVtooyZGxjnlF3uYjfa7Sx3Np2r3wfsPfBXFe2N7IPriiU80iuMrON0LlGWV4WQAM55d72vRXa2QAWqgxgF9oG0Ayh27EMsFPb00xjGsBsi7LI3Kn74DpW41ysIk+alnPtNQBlWStogIgMkTvWKAQa311AlYGotguwscBoe8BhoAGjfKdsf5WKr10AzoccU595HNJMn5ik6ngNgzjPlWxzKCSwGDPPAAtD5W0HauIgULODcMCqO8+IerIHgVSd/RT9RttDhoE2SxubpW6fuc+yn0NiIt+xzrP3wbHOwlB5QgnkGBDRvkrY5yjvF2GH7MjXaDYMNmgZrFey2CrDxF5zJPET2heIgLGsn1AnQgKYHeRYlCdEoFkCOgZJNTdzmlmeIBiPArvKYtYpUj8hEuPRII0oT2gRmmWgRpQntAHqFS+Jn5Aw3hBK2WWXFV03oU64Bl32OpV/P8fwveuny3W9VtZP6Il7hs53cvPKR/7/oKxji2CWuURqdv0EQShF5kVQXoSaAhWJUHP0bta326i3ftcjZYCE0rBFLxLhur4+t5/GAF2GUEYpu6zougmC4H8GrQN/ueoPTWn3vh8/2pR2l9z8WPcahe5ujgkeW/xIU9pdcdO9TWn3kqvv6U4T2Aao/Ndw0GEMLIs1jG0AZAXQZQwsizWMbQBkBdBlDCyLNYxtAGQF0GUMLGt7w9BDPZX/DE431xqg8un4v8GV9ZdlJvB1HxB55enX0oMX3FNjAHyizK6DZSBM4Os+IPIFly6ij332xhoD4BNldh0sA2ECX/cBkU+5ZDGdv3igxgD4RJldB8tAmKAtuw+IXhHyIU+ULxs1QSjibRNAdAjpEhHiqvgqtq9duz5Eh5AuESGuiq9i+9q160N0COkSEeKq+Cq2r922MwE9mJ/GR0yw3Z0hXIhJ42oCW+TQwDEmjasJbJFDA8eYNK4msEVuO9FNRBlA0rxLcB0jaJegy2MMoGneJbiOEbRL0OUxBtA07xJcxwjaJejyGANomncJrmME7RLy2hpXaMQloGtQ2IhLQNegsBGXgK5BYSMiuSMGhSby5s6LTMa42vXNz8f8DtWP2b8i2y96fDHbL1Iv9Ns38ZV3bnKRt5HQ8nrRqHbLttMqA5RtJ0ab2PK6KtabAcpu2z6Brc4AsWhU4DTiXBVGMw3QqPqhdmPSX7MzhM+gjTJA08QvUtm1XpG+ZywiMK+8XTLAuDCAb916Nj7eDdCoDFdvkDViH72V8/odG43cgZj2Y9spU94qA4TqhY6/qeIndAFiU1CMg8ump1ZEeGw93++Oj7RmHUDRdlttgLw2YgwQa5JxibydrzdCG7F+ERHq2Y8y2y7aJ487FHVvGUGL1BmrDJAncDKAtX6ZbZRZNy8D1Zuh8vavawzQrPXL1mkUYgRKBugJH2BeBLq++9aJ3Z8i69eTAfLW73gDJHQ3/g+jo09H5lJXBwAAAABJRU5ErkJggg==",this.texture_source_category="built_in";break;case"textures/flame_atlas":case"textures/particle/flame_atlas":e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAIACAYAAACLuuzTAAAphElEQVR42u3dB7RlVZUu4EMVoUCigIqAZFBybBAapSU1oii0NNqNoG0b29buNiuIICVBcs65iCI556DknHMoMlSRKhF372+uvc45t+7ap6qe743n6/H2GHvce6vOnnuFOf/5z7nmWqdTVVXnL7k7fz0C9pin0znhE53Osct0Oscs3emctnqnc9bfdjrnbNCpTluj0/nD2p3O2et3Osct2+n8ft7OcAH7zt/pnLhCEnD0UrWA+qFzPt2pzv27TnXmJ9PD532mU51aC95n/oKAQxbudE5fMwk5Yfn09vM36lQXfbZTXbZlp7pym5mqSz7Xqcas1NICb71os07lwTPX7XTu3mVUdeeOs1W3/WyW6k/fHFHd+L2R1Z+/PaI6eeVOdHeYgCOX6HSu+vJM8abrvj6ienLMotVLV61fPXniwtXtP5+1uvXHtaB/HVGdvlans/+HCgIM4P17fqC65T9mrm74zsjqkcPmr164ZM3quQtWru7b/QPVg/vPUz17zieqsz/V6RxQEmDAnjp50Wi25t7z29mjFa/e/pXq8WM/Uj165ILVA/vMVV27/UwxK8ME3PmrWSvXkyctUt29y+zVs+euUD134Srxb+9OvLcW/rFolfE4/uMFAXf8ctbqjQe+Xz1/4arVwwfPF/ebj/yseuXPm1VPn7Z4dd8eH6hu/dHMMRaXbOGRqQRcsfVM1RPHLVQ9fNB81U3fH1lNefn06o0Hf1hNePRX1S3/OXPlBXf9erYYyD+uW2jBDd8ZEc196er1q7t3HhW/v3rbP1YP7D1X1X89csgHqyMW65RtQZ89fOcOs3UfmPTMQdU7b95Yt+Y/qtfv+df8z+3GZJT13/X0GUvGYF7+D53qoQPmqa7/lxFVqzHtNFunc+TiyQ4YE5s4frlatWu1HlNr3ymr1feqnXZr/O0cnc5RS9YClkxCPHjyKp3Oqauln26CWgX8bs705qOWSPdJKybjYsb0nyB/twrYc57UbA/rird5mCnTvDP+Jv2uZXuWjGm/BeuHalM9dtkkyNv+uF6nc24NKBdskswaHhiX3ecqCDi0xgOG4kFvpBfuP31jRMVKr/7nmaqrakulxrpbBJSLa8C4ePNOTNsDe81VPV5r5v2/n7O64bs1FnwrCdLKvecrCND3W/9r5pjra7ebKUz4iRM+Wj1+zIcDD+6s1fjB/eYOPNjngwUBms1cb/7hzGGyt/10lurhA+etnjtvxTBjxsQWLv1CpzpuuYIAb31r3LnVQzVwsLpHDp0/WvDmwz+pXrtz2zCye383RyAWfRkm4LqvjaheunK9gLB7R88eXXjxinVrRFqleuyoD1V37TSquvHfRkYXi9Z44aad7luA58vXbRQCXrr6U2HeN/9gZHRPC2jlMAGXbxUgEchzxy8SOr14+TrREteUl8+oJjy2Q3VPjVaHLVoQYKCeOmWxMOXbayh/d9ID8eBrd21fTXzq9/U4bFeNv2Wr6t0pj4eFFs35tp/MUl2z7UzV/Xuktz7zx2Wrp09dPObfuMBDyDwQD7Tk0cPnjxlx6X++Xrh0rXY8+M2oTkffjvhYfS+W7IGvyK7OTY33r21mx1kLY7DLHOnBwz+WbkYTQLJqEnTSCsnYqDzsKOIBM/awlpzw8fQwb+zBU1ZJvwObojHxuHx/4MES6aEAlHUanvDp2rzXTag1+gMFARymBzw4pkajK76UHK2frPTSLRImgLxdSwI4TGTCfeHfd8Kt00o6YWpN5SWfrw2pbuXuc7cAynW1FfJQV3ypE9rIqfDYnO1N/z4yLFQLi5Bmmm6vH2IshDCce3advXqs9srM2P+xBbBmoIcJwE4YDquDPhgKAHnhsr8J7SNMCyDWoYsUBOjfU6cuFkTCB7l7rt794L5zV9T8+hofL/9S4knDBJiq+3abI/qeKQ7LZAtaxCvrnhkxkMMEnFv3jfN8cL95guaEbzx9ya6nHnfD5mHeN9f/d/BHCwIMGgaiqfjAhMd3TphwxSdrmrNNDTAbBsCMv23rGNRiC1jeVV+ZKT7w9uvXRAseO/rD4RPuqMdEVx49YsHQlTZzjnkHrBMe+3X1zhs3hE94d/IjXf701rjzqmmR7fqtHwqH4s3U18zQypvT2LTwg1HJVPNN59k/ZwobjDwTp/Kwo8gPKMgh9QgbZa7ew9w8QTQVJjD1Ih7sNlcy5cMXTR/yEIXJvIB7hwf+b5eSgL3ma95WN5PrumDjZJX8Bf0/b8NOhc16wc6zFwTs/cFEKAAIN0/zDBokvuyLnTBlQrRydBseXPrFBBpuimXub//5LOGt3VRZ63YrEQxQRVGu/McEHHwlrbx3tzR9MIGNaOUBHy4IwH/MP5u/+p9mCnu46zejgv7y1IRhLGKoA0sC9PuhA+aNh2gfQcwYR4ANukSwQYXMwwlGPUUI9U21F6aB4IxAHvu6ryWOBGTNSJErn1FTl7FnLhOGxL1zqqzz9sZTo/wCD+ylOAYiM64ceN5QD9grf9q0wYQl6tBnjfDIY89cukatxQOlh7dg7TT3ABXFef3ebwXFQbI94N/oBKM6c51CC+C+y4CBtnE3f6Eaf/OW8dAr129cTX7uyDDzV/60SfXOhNvLeMClT372sKD7uhPmXKM1RAZtuvfIoR8cjAfPnrt8gvL6J3dmIA2cgaWNA/HgoI90Oge661E+YvEeDuT4AY/2mYF4cHCDB5QlAKXhBSg/PDhooRYBGHjQ/SXTnSP2iKU/mVw7TDi4FrBTSYCAGolAKvBhbl2fGRe6z5TRf63cpQ0PfEh8ALY9zAIZEA7pvmyrhAe7ztFC9+k613V+jUbe7OHwiTUOXPPV5PqNxd4ltg7OzDWbBywe4qH4CcplGmmkcShmMAAm1w4HvE2kIpIPt163gmDdMKjIyDABIJwpc+EYCiu8u8YG3BgOiGIE3WbETAzvQj3HACQCjnoAx/5h6bAJcDb+1q0DXPyte/suUE5ABMXJPOCZPy5TTXnh+IAzPvGJ4xeKJAQeLTkzTABtu6Y2HhAuBYIXMxzmqws52JA/6A+Bu79csGmKF9A6lF/uRDegMyR6/uLVY0yeqCMarGWYANb3xv3fj4zF/XvOGeaLK/BOhPIP9OLe0XO08wMY4G3PnrN8wDn/cNdOs8X8m1qgYzYG4gHYNp0eFICZEdQOjPFYA+MFtg5x3eIGJh2YsFwybXggXvj1bIVBRKAjXlg0UX4jLRh1c/E0lR0g5cWAQwwQROITCUDMiigVJsIFeECYVrbiAdeecwb03uCFO6tngkBWCg+K/EDTvI3r8kYzQED22ByPQTQee8zdkg4EIJDI2zzEsOgAe7i60VLjUMwn6r/wlrqaa0pkOsOt196aDmiBcSimA7XAwx7UfA8BFC6NQLoAG82IdMkwAcfUAqhrDjiYr7+NwRMnLBy5NAkKuFnMYJDM4vLIM+MXr1w3KA6fGHiwR0pYFvOJtCyaWoMqV8bqGJU36z+IuxbU1XhBV4ocadLY/YKx6/sTx380nKzRh4sPHzJf/Dt8ENEME+BDMhhj/7BUxE0SL1fWY0F5Imr7QWJpAKXID26pB0gqVKCV4yQjb1zohIHNs9GaTzQD5hoPEDsFR2hUmYprjW4MxIMpL51cTXxi11BdD8BFSJ1VuxUPdm7iBZjPvdNMUM9jcfFu/8Yr/WrWFn4gyKBQGDsPFIb1qeSt8UhB+X4LDsCDkxv37sMXNnjAG6H5GRPgQRGReFxv86E8YMaBElEuAvFkSYoi3QcUYXGbxRs7pkv6j1fmG5gyY2ql+yRTYXNOiObjyMHOahX2N0MysHuVjAmYIhj5TVQYoLBGCxP8oZbx4kUBgimsNAccVBln5lCoOa9ElalxMQGhb5wIdcWFIvlQByAgjW1ISBJKmYr5RPqdUUcrZLQwFFoIJ3MehU0cXconAstnzv54NPPPdVce3GfucLAeAKo8dkRyBG5doPsGTMIBBjBZH6QHtNHsABSGZZyK/ACYCvNwImGOyIXyaHqOG93n11NZJFlG24eNQz8i678pZA80URebJGWZH6A22AnFoc6iOJoYql3Pjq4NxIMJT+wSVOfhg+bt5hG1zthM/XAxn8i1Y+ssklGJ5oLqr5hiB0b3q1la8CC7dx9mvvpO/7Og8Eo1R9yhhAc8biTmV0+YQIBZiKi9ARaCzMAug9w78PBBD3nY9FJvGkpI0P0SHkh9UBzTiMZ5wBSyyiwAzOFMxXSgWOiSjDyfTnjAvGlffjtLFICVBdRYx4jAl/QHHIggo25FTlBpCdwsIhJrxIt0gXPhqaz45VQA1+Z3/1/MJxoD06b/Bu/OHWYNdWaBuhOubavE2g4r5RMNjuxV9LseOFhAQMbGoDlfSfZiPIYJ0DSOFQbE4sw3Exb6sLfHGGyVwKa43mikvZHvv2f07AEiTDcyO5slnug2lcLj4gJFQHo9gIHGNZz7aTygMQ0VeAYB/WoBkXhhlM5PlqdL7MAUmj5d4ebhgVYUzRmxePnavwsTFmC53ntnXIApRMYftHIgHhgDU2e1s/8SPyAeA/GAoXDv7B6EcbRWwVknTOCVcMRflvCAx4UDmVAIcQ1eRO1N6E+QYGSnonufL2EAUwYcHqKZZsHgGURC2ul+zTzoQrdc4FMpRrqs0QOtgUpspsgPQFUkHTdIAgjzdqrMvJkyXQgBc7YIiIBjw9RcNpGtEyZQa5qIPxURCaBE+nPDdNNC8QOtozw5IUd4MR0IE3PSRfNvrDWQQXm7liFbWhMCSrYAJDKhhI3eTqEMJFUmKFjb51PYU2Tr1hRy/kAkr0sMyJv7860UbpgAIR8cwMypM703dTkFlBdw6EIx5KFA3kJpoE5/DumPjTp7GOBKFQ1fX/heGjRQho1kYmkWLtwsORv6IL9SJhhfTh7YOsuEx3aKUMclf2JQIzmzdeIPxQXLcO2P7dhdjHn5mg2GmHNeUgZzA/GAYzknoW7bVcYDHjfnD936qd85aueRuH41O0X3zt/5oIwePuz3s9ZLBpZNmRBaWMQD/NcDUS7QsJPspf2kJ4Qf0sYPCKB1YbZr9BgKAbkGIa94ti5QxKLkeikRQWUpVaBSPbCWkRgaNS62AB7oqw+5zTltpANcPIOS5dW9Yj7RPxqoDKYe5g8j/NuoSYE0hLOYjEMwmKwPZQ9EO+PvzZIZGw/qXVweENJx4ZBHc8EZohWEa8NmsSYt1JQTkkY41lK2T7lUmGhA87j43W0qW3OqoAsnTuuuyXC8Ub9jzWn1pJlFRDJV+qwb7vOaaYMRzNjDdERXiguWBs4KvwVLa6ypJumM6qlTPtbFRT+ByUELtSzaMmEsxfLxs3X4k6/X7/tOt4yEuh+ycBs/GLNoaJ1+t9myqR6IB4iEPisf6b9euupvY8mkFQ84zKg1+ETCg7x4n117Fw8G0f2cO6RUfmYv7ae/EYzgB6MGCWgSj9561nq9Ah/FDPghAeUFirnTQz5MCJ03FnQhcwb/h2AUBUjxhTWulX6a83A0myaCkbHB0mkxnygij5KJ1RKgMGPONNMbLfKztT7R6HprNHmDZA9cen44W6IWFhVJRH51E1RkL3zW+g06NzUYfupecbFOKKM0wJsxEQDiwxHy9Y3NCW1FXVAmu/HMRgApCzQ2UeDWLCMX65EMXA7z6HtwxnVSOkgrMh7oRjHkobLyBkIdgQdkkvEXkMOGroNZO6XHiyscXDueoAXKBvL1zFnLdceFMhWzulEBuP88XRjrt8S3xp1TTX7huPjd+BQF5NIB7IyA585faZg5x5rrdjNNu/7AGCATr96xbSUxYyzEkPIo08SDyBsul1y8UTf33BnUxh/kE1vTgWOaeAFwwP/+8kL/Rtmo/I4lfjC6ySfmbEWuBAhtXKcBmpUSTy7mEy1Y5kpImseAcgIuWyJdObqtHklEHsujK6Y+R6C5SfID1BmgaFWUE83VAijUl9H4MGukxvnhTDx0o0h1c30iAGFE2TMbTELzeMDG4noj9umtNFGcpP+mMVZ4mhJTpabHLt1WYrnI0IAjh3sAJXJIy6WphAdF38je0dgItLZogqwGjbRAmdlJzQAXIxbzn2uzxQuMy3qrNIABPKuhgK0EA4nINoBcWJxwTXh8p3D5eVyiyLMkQJ9l7mJlayqy/eod/xRR/XtvvxBjUyzy1Eel1QItAp45a9kh5qyS2rpLrENtMqAeKYoYdh4VgmAAXBh7xlLROnGEcRqIB++9/WK34DlXS096eq8oORsYL0gHRqywXFIW831yLi9sapKkz3HqwfnEjydAyX4yNHDVZGiEtxIMAXVURC6fPhzRynoNLqzdV4/UVj6wa9OFXMhkJqh2jhUye9GNXdvwIMdG1JUTyc7V30E8VktjUXTvvM25fcij+WFIK/TKK42FcSg6V1jnrdmNMSJdyYmZfLcukfD5GUgzN8pxknHJpSS8eBFQSI4w7zPJaPJ45G0ZdCPXsRcFkJ5zibFktlnKo4nkcx13xoXiGOif7H4kXGKJZJZIh9lFYZUjj0us+pYEUBSrmfmD/ZaIN1s2ZQ+xxjJvC0d68cr1ogUEYO7919OnLVHdv9ecaeV39ZZlom6o3xQv8czergpAPkEkFy9YfwA/mDR2/5451298//13okqSi8/Cp8kPot8XrBTNDoZShz7PNxtCBuYT896FvP0g+MLyvRpFcfNebflEKb5jluolIXL9QcaDSEiukNx7MX9AQGQ0l06qm+PoUOeV001X+NBiPnHXvpCH/sOBCHVW7quIWjGlA4vJeX3rf+vpzdpKrtPMqVLF0EUBDCTzAEhEgNYwoP6bEy7WaBIANLw9wpu1hppy7O1YMvHkoi3IH+Qwj1kz5bwFJddym1530RpJRi5QWStaiFV3G9bKvTFAsopjoJmidrESi5ScZwOPHrFAuLQYlzVTS4pl58ATkEAkY6D0WMGvixC0X7KOUrWusdgphAcQ8OjhC3RNefILx4YQS4iQm7YW11jefv3aqIIS6mu2Kgg7CAgTjFzTLB8XMxhNZqYaf8uWAWGTnzs8qh3s3xC1N5F7jE0x5HG/evuXe1FK/WYPvf/elCi3nCodMBgPZDF14foUH0xfPpGJGsgjG43r6n+DB1GPtMyAfCIB2CoHAxe6e5hWaghmk5g4YBAeUKZjGg8UznSV3ttDwHKpILpoTBEvrNxn/6v0opRcbu0nayyWFzIQruu0NZt11lVSDZbu9N+tNZoECDa0IDvWbMp5a4ZBVuRRdO/wYEzzcHjk5XuUJ2q5P9Yr+ioaEwYeiYbPpEgFV7igSY8TclyzVctMFTmSN+RSOgTD74JNC1Ryi8ZFC1vLztmCbH7ETTWwordqdd9+7fIQlFcCtaa86rtwqk/UApXDPPGksfuE7ir2jd2XtZBYe16khWQh189ftGqwFBk9+MDNP7DP3LHOlnOsZqY4Bm+Pvyi8sGUSggAI2h/l1/vP083mFTdA4ESqhCc++bu01aAGEy0QbCi3Vjndz1jK9crjL0h9ru0fcECmKU3iIV9TXjxh+viBaTR4040HbFzfsHEal004q3N4pyUH4MGvM6A0myRPasjFscv2BHAqrRsgKEeuhMz2n1nJUc2mST+pfJEfdMP/PizwRi3KtzLs/dpKLKNCcrleyiuDiQfpv3w6DRQWFCMWeBDRSoMJrC97Y0pG1QkReLfyg1xemZfGIqO7VkKivHWTgOIYgKrIYjVLppIRUXJde2z6n+nOQW2DqJ+5oDX2OtbWiGjawyOCl5yTxTITxTFgjdz7uc0uc4akTn/iU3vGnj+ldjyVGSrmUCzS2JJntwAXz6QVNNr8E2kwu0m26pWeF937y9d9JoqaGREyEdUAtUVaQhSQ2yAku1Hcsm3grCVYIpj09N5Rk6QFapa1Sn3We1OeStH9b0YNN2c0nnuf8uKJUdxsnUVL7KTqv167+1+iQqRozs9ftNqQdQR1SdNaMhyGB3IFaavm0JBn4pO7R83WQDwwkIc2eJAdyVF9BkWlI584iO5n/c8P5/2Oee+j/EHRGhlI3mWdLdFDNBRKubVOCmiH1grJpRICnfDxXsqDAFDHiNxSQDu14cHRTXklAcBEC9zGBhIxJGrcyg/yHm/0BrAwaeCSu6ILBBRbYHCY8h8aa5RL4GzdtPT4plWtkJYTEMgFckUzubS8AQjFhREGs7jKowWovrdpOgzgzgTcSg2BS64EKuZQTI/wnwVamLFQwQp5ZqkARBvgGJ9ibp2Jaq7ifkkHxQyxTbPGAt5al/Bn2bx9529Z8XzowHkDfQTbBFlr4NYl4nTDFiVnIhTLifQPNxh34+fCnUMgEKZ+uf9SPVgUANI92O+dp05C5Ou+PVrqE997a2w14dEdAnmUXPdfzkEwRhBq8HpjHa0gF/2XndaTnz8mn4tQxgPaRVWz6R7ZsNNDF+65NTYhxi5aIwMJbrBkz6l29zct1LtlcMoJiFHpzUf1CTisEUDN6YmbgB0G7bjOaRC/a4GmE8Ct00BdGLiDIudO8p5v2JhruQFKKyLlBcu8FMKsczUc68w8oVVA8IN1EqggWKguw7KXia/MOysg045tRRw5DYilUGMuLc5D+cWs3Srao9rCf6NrIUr9gYUZAJLK8UdFWpB5e8GJbSXXTDTigvohAQbfGLuHfpSKHPlJ9YsA5/dt2Txe1xKBYxsEF3BAXg06iVyeO3/F2EBc3M8ED+UIGIv9fAp8URpuvke0T4yAHDYOX+FYJSUd3n9vUnxY/qT/Ydc7b95S0/9/jmLw4fzgxzNXr9/zjfgAT9yfwQjv/MToaBnGYjaK5vzaXdsFmZranAUdr9/77e4xJ9OMF65pNnsAVuMibhh/yz8MjhcCDxbu4QFXRvcP/HBvjxNrFKT/YuaWeOGQRkDXKy+UHuTO0EDOh4AiHuQd19GCxXvEOntkiuaWR2td4aDnsRVzmR46+cmANB8m8OLFFjCQMSv39mow4VgmWDf9rWXQqVVArj/IKQ/GdP3X09IZ1f1DU+BoHIpdUNXAUHK0QhM5VwZEL1RDIOKHLTIgh5KrHqKkarOU0ct7GyXsrX60VkzvVZuookbN9jDX5mbGVzcVAaJ33SwKMO/JfGeNauHAgxpgYldh/VPmny3w2sX9TIhDbDvC0ndLWxKF+zAil+O/etvWMSZnl5Lz6B2v+8b934sPW9UjMF8OEHA6C9rTHH0y1flI9QMQx56mcTd+PghF//X6fd8OsgH2mvKC4UskapDCO9cD99a4s3ve+datK9EMlHbdm0qRh5vzxJrqv37vN7ujL/CySGm79ouXr52WClKOYdr5AxskYxfJD0ZOf/6A0eSYIUz5Q8mMeS0km1uTBvt5CQ92zAKaIPugPgv0MGfi5oSLgLJTPpFl8R43OLyPYMMCLWG1xRbk9ca8nhZVEM3qBpxgytCpVYD/yGurDIY3zsecsdKclNCNX8zSQjBigbaJVnL0zhoJCUxYO41TMeBQg5GLeZAMv3Ppwv8Q0KQI7T4tJuMASt7kkLcg5CDcTzjBX+jG6LaEJG6g2XlLJmuMHbbbpN1VLNNG4mJxnxQQboCZiw9iY9SWaeuN0wdcyDi3r4vFI98syImXLQdosgG0oP/+uxMrdbwie2dHFTcLM9HgB2csFZuFUZv+yy7k2GFZt7L/wK1eF+p+2XrgA/o7/tbkTN9765lIhbBIaOQyM8WSKk20VRuhysXPohhMraH51Wt3fz26VzRnSGRdRQmBPV2AFKjOUP4AKqt2kP6ZoXpl7orVRYy8UCLW+zZYgNZxfW5e6WcjW/DAgznpdlATHxCY8YAgalwUsPOovrTfYr0DFNyw4YCmRa0CNC0vyhHSLbH9+1Rmzm/gC2ymiAcE5MyFD8ID3olOWGuOCtlVmpKqtgxGLpfgIyxe80D2NoZnXj/FEpCpmM0DKHnLDQTKzWdQsWW72VGhdUV+ADS9kRlHpfQXe0uHfgKV2FWzVUvlvJFH729uNj5ZZ7z4s6nwmZFhq+ivmKK4m8j8U1spQSUD+HCcWnb9RtWbD/1XaObYM5aMRbsiPzBVqoUfrUmE89EAB17w/vvvdot57m7qccRURUDJ4Q1os/JvgWLS2H3rkH/NsEiufcqLJ8XAFuOFJ8csEhwgthvU4wGhINDDNcXP9YpaAqFL1hilQ+Nu+kI9YF9JR7t8K8VKvYDjpmFWOcQ0pT6AiDSIfEnpeuuVswbjgS0W2Fj09+UzUqz0wvHTxgP8d/8FezkzeLB/ww8yHjAkOeWfjOy0BxxxRtLCvY2SrJNAmgoTWgX8ZlRvLY2qmhVAK498QrPeBhfYzE/bBACRDCgMivEov+UzEFEq3FpCQcCYZsGSm4ua5c1SDT/X7m8aaFxaU6K5uO/UZhNcPjvNT0w96P6iAyqmw+a3SJXSfj+/OebJT4SDqRNWTI0b6TgHZvu0g9CeHU33b4xIVotu8NrGqVjQBEgk4YW33uqNInnu3aGcbAI+FE8fwIs4VuvtvLAAW/XLGw/8e1p7q1uAR0vaFVf7KBBfKOT1ZrgATMbf+qU41kgcIa5mcOeUtiPBfcsisprgTHfikKk6QrFY6TQCRBzYmKFhArzp8eM+EgEFkhHrKs2Osl4KYNd2c5YrcVAKEEE0AOmbD/90mDm/+dCPhpxaNsQ08wlNebX3jfv/rXr/vYmVIw3ydUc6e7YdDyAQXAQs2NoM8QO5goOa85EObuKGYOsLJCMSuVPjH49oyx98tHc+klnJuXa4QBCwYTOtgJLjA/epq/f2M1lvE5QTtHubeycgl1hyoN7M+hgTC43KwGUTWylm87jsXMiYT3PFCbQi7+Nwt57AIODoL+6DDW5olA9npqEEtybjgg9slWh+LrGESpwuv4l4M/Piyjc652H7mikLgyGIeXNrjImCcXvF3YWgij/klZktY4ILyaR/EFkswvGlYimNOY6zoLZNZxyI3C1YEvD4MR9JR7/9MK16FIv7wJQ3AxILFMIfbIVKswuu3y4j5n1qSUAcOFnjAbt3ozLQpzn/I52heNMWNRF/Pi/iTXUkbHNAAAojg+HGBaa+UB0EpLiDIjaE1Z4INrBECzQYCZYiBJjy0inxguKJLJlkRAK2JlcENLY/Y/FCFzhqZMpH2+Tr/XffHIAHszYZ/CZ3SFlyNQAdgRF4Mjz4UQkPooBhod6qXn/JsfQYX0DQ6Db3TgBdyHU3PPGZTdltrs3xf63ZPCZ6YnNKY2zJWjmZtC3bsf7WVEm2nsAgAZErA89ct7d3J+8aCGyoDYxfLBb/axrzBWFMNp/WxCoFHpCagRFeXHsPfrBpCvFBuzf6O2HBHBGUc77AprifydSxwmCn305HnjEkFJ/us05KpkXF487Mcd5VKLSlzlJfVrxk/CkW4Uy6GC9olnjZPmfhDiaiJXQ/9L/21IxNUtJsFY8z4f+9ifrCA1yJSQu4UwJihVgNbFIDww9Q0E+jbX8fi9P/d968tW9X0XmxfFiMFziSSLhsmU6g4MKFOJYMHOQ+6ZkDYulAYVP/DsOuACM78YnfxlzDhTik/Rdlc8Zgy+sLTV9deYWnHxNsjOqHs4F4YEoRqsnPHhrpUaffT3xy9LTjhf2bVT20L045Xz0ZFwLOL+7S5t4JoAuHNfECMIl9fmsny8xVca3ZPCbaX7ggRoidBGv0Tl8gdGDFNBTKOyfyvqa8i+K0ZntW63koIhHAkbcr541AzBpTj53HX0zJiKJ71zd4kA8OUW7MxXuQTtzUHIUGcIpr76hLzurHkQWfTUcA0oVHmxN/aapBLQKKZsV+pmZTFNsXvdIBQuIwhW3TksERi7es/rO8Sxt2Ql0FHxBJjtHtnCT/VtwwzaVrcj7KJI68a75/Qn7ttbu+FgU9AIaQ4ecrr5+2J8aiRHN6JXrDwb4z4c7q7VcvC2sEKsX1RnAdG0PzcXc1GmHtL162djXuhs9GpdALF68RY1PcTQRUURrJlrxx2si//doVQ8uJ7tquHLFIvPeXFOetWfkchIgVHvl5VAlpVet5KPksZTOiC8ZAblFu4fX7vpv/vx0PXrvzq90NkeBMK0xlXkb+K/46lf+jArj12FS/YWfaY5D3+fc7HDAP7vtP6GoVEAdqbZFyBhSKI6HSNLPfIxUFnNtsyxRcRPqvftjae7YRDpeptwpgfVnP46ifbdLOonygCoHMvVVArPB9pTlEpDlxwRjIr/GT0gLApXVrHhwgAPEGX3BQtaBtSW6eqjn9vNwCpYP6GMnY7VLQIfHAH8pisBWCWwV4AHS71R/AQXU4/ZG7vGKrAEm4tLb43Vh7DbJRRzHvvze5emv8RTU72TwOIWtdLhSZTXj0l/HdC1ia/nqjzAZchEzNV6qUWyC9IZORippXiJxinFTV1GdCqOmOFyK8uWaDdIjKRmn75sD8wf9wPGCF+ZykaeNBczh7xgJOJrhhc+L1dLfg4iabRZm4uTjJcfMZEABQQHlUAXw5WSiB5w06FyfQ6HPJKwu28hlikSKvY+sIzr87sl2ANwEM1ujt3ohkWCaz/5+m3vSDAQKYsiZqgcBD0BFni9b2wKydv96/8j9MAIdKSHClL6fwhxGl7br7BCb0xwrDBMidMmVNNnhR+VD7Q9VBMpsZka7vOwNgKKD8dvbqpWs+Xb1657ahOGIGgyeX4Bty7Gno33owRID8oQ/nXcX6ba1Rt3AikJ7N2WyUz09svoclXzKbAJZ2KniarvxB3mqRs7k5d5I2Rmzy/yoegLR+bjjdAuIUwy063e1o/edjTVNArj+IY7+27R2HOkMtyMuF+SDOafOD5tyDfibq9zi4/aep/HTguXn5VLZYoNw4vZn90404zL9W6f4y2+EtaFb1tQKkRXGb5fMD5ombJU6Ni0MEaF7etg1YojqwfrPAm5eyWDEQkVREWWezwmfA8jHpSgd8/Zxgg4X2t2KIAAZjCwL40oW8ZAgnopa5ZuqKe4otSDHRbLFQ6dJn/c8HVzPn5mTjISeSDImZpq56QPdBW5rKXhmBFHGxC4AjFy0pr071Rxd2M5t9JQXtmjj+5i/2cODmL+QCpmmvL/z14kEoVXO+7AwL4BfDGrfsDKG30y0gBxp5xe+CTTv/a4N4deOlKNTULRnW3yFd2Dj5SLkkkTvH0l/EMrAFQDQHHfyhm7fuL+Qpuvf+38VIHnRsOkPiuQYiEvOV/vSmvGCr7zYICsxxheu2HyAAJ87fApMPaoYRSq4xdOBiLIoCMDDmCnXygSIe1irMnS5gbHxma7WwN9mC1TPbObpQzlLVYeQTjIoCOBBZG0mHbJUsMm9FQHGUD/R/hcIQAdZWm69U69r/1PsbtWqgHuQERL6UVOWrKbv8v4AHJac63QLow4Wb/gUC8gGc/1sgrT8dPN0CaJ2bWnO2U5v84IeboIOKu5uilukMODZIrMRygA0wdADJmHpAh72RN2aywRHETCoBDl+ga4lT05yh/KBGIN5Y2iNXSTIiLh2sUeOm1K7TuvaOG8gf6nOcAL9VonpuY9Ac71EWoL/ZgSovBqLZ9s1CPhukuDwQMVPdBUTKGusLl60dG4DsmBD+vzvpvvjd8Qb9X2rSfdgpTOCsf18z+1eP1d1B8dKYCMJa8cDDk587Yipzfrb7O1Cd5nnrjnGylzP2ONaEq3ugQk19ZkiR/oflD/4iAeds0A4m0xSQg45sgedsMIOAgpVIiUU68Osj8v6WdgH5CJOcM8QRaJ0Kodhp5PzxjQfhweYpOsmUngBY4M00EKCgOwMTEOyeReIF0l9iaTfhzFtrBuKBDYJvv3pJlBx7sybzym7B+ZsP/7g9XgAeKL83Ml0JeRZKoJsQXwpXXB7IK555G5IHLE42AXd3V5EMbz+0dwXgAJaDZPQ9nDKY/9n9XeWDHRRTf8Py0PMPXjk7ciUTn9ojHs5nIr07+bF4WGpkmvsbdcWcT315sKlF+P94MMMRy4Z/AR5kitP/ZR8zTjCaL3VwX/+NEdNeoBgSiNbWl0uLGFr+/oWBCUnuWzGfh+TO5BCdTJQXLJovCm6PF+IraGshCIWHCXE+CCGKHG/83sjBLYivIa2FeNjt7A83KyWk/4tMhn3/gv07Hs5N97M5PCRa4cvUb2hrgSUQC3TOTLNEkIXk73Wd+ORuwR2MQ0s+ccGAK1/4qkzCbkq3tVatkEuI7+3ZZgCoevufv5O+sMXD+fwTh7FqkfoDPwcqkpZoQd7TmfOKHm5Oaxny+f8Gd0TMRx2PYswAAAAASUVORK5CYII=",this.texture_source_category="built_in";break;case"textures/particle/soul":e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAACwBAMAAAD0wfO8AAAIdXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZdtkjQnDoT/cwofAQRCcBzER4RvsMf3Q3XPvDNj79qO2Knp7mqqGoQylakK+z+/n/Abf5JqC0Wt1V5r5K/00mVw0uLrrz/vKZbn/f0lfpx8Gw/+cUEYynzm11cb7/sH4/rrBx9rJP8+Htr7irT3ROlz4ucv35Xv+foaJOPyGk/lPVHfr5Pam30N1d8TzfeNTyjvV/kM6/Vxv4dvA0aWlrJQFtk55fi8l1cE+fUavDLv9yrxMnZHLPChub4nIyHftveZ2fg1Qd+Tb++t/cz+59mP5Mt4j+cfuawfE9W/vpD0x3j+XEa+LpzfZ4HhbxdKivan7bxf56x2zn7tbpRKRuubUU+y08c03AitSn5+VjmMl3Juz9E5WhxxAvmKMzrHTD0JeT8hlbTSSCft53OmSYhFthifIlPyM9aySZeZL07lHumI5Z5XbuA2ZQegLFk+Y0nPuv1Zb6bGyitxqyQmu1D/1yP8r4v/5gjnzJuiFNsrT/CCuOTymjAucveduwAknTdu+iT443jDH7/wB6qCoD5pbmxwRH9N4Zp+cSs/OGfuUz5fJZSCrfcEF3nWIpiUQSDWlDVVyCBiKZHHBkCDyCUXcRBIqrIIUkrOVYJJk7s2v7H03CsqVe4w2gQQFFA2sOl5AFYpCn+sNDg0NGtR1aqmLWjXUXMtVWutVq/IDctWTK2aWbNuo+VWmrbarLXW2+jSMxqovXbrrfc+hoTBQoO5BvcPRlw8e3H16ubNu48JfWaZOuu02WafY8nKC5lYddlqq6+xU9goxS5bd9222+57HLh28ilHTz122ulnfKKW3mX78/gXqKU3avIgde+zT9QYDWYfU6QrJ3oxAzEpCcTtIgCh5WIWWypFLnIXs9iFolAhSL3YhJUuYkBYdhI96RO7X8j9I9yCtn+Em/wdcuFC9/9ALgDdn3H7C9TW9bn5IPaqwpvTmKk+ru82Qq+r3sSQ9Cll47YiI0n2Wra4t25TfBirlrrcrs+cqG59tmOzGvW8fXQLUtpoxOw1NxnS2Gjraba9kg9nytTLpgoJ33SZjansNfW6d/KZtk3galNCPD7hDJCcrpYTaQelkYycH+7wbCrloKNzWcl2doKwdQJaPZI7virKwmEX80ooWn0PndbHQnDHSkUhSEmj73S8F69LtXiHj23Uy8p5ZE29VDugGkBv5FkPSqAAWVSM35aOne7ekm6rUPzxFsiT1Uh8RG1Yt+EMlUsNepZgFdmRtla31FdPpbabKazfddji3+shf9HbXWTXmrnV+9hLtk+WBYiOjEyqSOuMt4JX29a2N6mOP8QK/2TpoBY6bmLTF2dijv6kwa09VSi1vIBzGBpHdos+LSlEO+aSlQwy89zpFR8u1ijQcfcosV0Uy+nbumygkTKWB/hAOkAFTleIO8rC1Rq3UmA1Up9nxO0wWKyRSPOSO8XV21mw+pDMu4kTdlcht3VTirL2jYuqdMuAq8A4L8o72+OdwPzwTIwEHT+ex+Es17oDE0peUC9fNFrxM4d7px4JfK1GK6dAPfqMG6otk3QXaoOE4/+rzgJTLYb7DuM2bjy3yWUP5qqFiXJxp1PdchAKq6gSBtT9xF3daRRaIZNEVk6lqx2r8B2aJCLLm00fBUDV1ePWm7lZ6Rd3bgBuZZ1UKTs2fTpSAz/RhshIODFv9i2l+2pDobuiI/x6LXoOdARQ4jSZtJhGUSZuIc0E5gcywfKZxcnR4kf7MrAUZEgTFVrRRXHZD6NRyz5OgZ6LvnwTE40lqAiZcOphprOMfi5UxTbZwslUsqObzbebomqrD6pi7dFI+dr3GlKuJB5aLerR20LkUqs2aglQlF7oJIeNqMZCGk5VPY4RVKgHoPB7FKhONQzwQVbgY2NH6E9BVIFxr+CYBJplRKaGwp45rRz8YZZ9xOlR2HrZeZAdWrFCMYKXnKIuy5ykoTd5tABV2EaRmYZiZGRoRVwi5Z7cwHGeSoryAVdqEMXOOmjG48ZfG0SjrCN1r3QjayvayLOF9bxJ/eJT24IelP66muMO8vD6WLoKpNEmYGbS0FzGpCVsK9CLOI4JVSrdolWIsG7FzopMZsLBXNCTmrtRhPE6C7CnMvcqiAZZB+mTS0CGiH9dKiDVBMdDQx83bcisjrIb+geT2QfXOoV9MD3qC6KXW63KzqFpKGeiRytlUDgDhdrwkbIxPKOwa0CL+OccdbN+RdmOg+w0Jsj9RDyEgmgWBo0CCNKzGkHoak3YHwJV6JjxvzUd8oEOv5nw71ondYm+07EjQfQAIDM3ET0aDAhb8OoK8JdRJHXUziU7zFSx7ccOCuSEVPhgjs0nbjX71jtDYMPEuRUP6iQpYUWO7SFkhkKePGTCyJnWQHit7wsbWtucXPA0gcGcZpY17N1PohrQguw9+qI0EEG6ebR7ttT6uStjHqjjrb0l8AiJpaXxcTN34xkrwDEy87gYfEvqiPbGsckowqNOLwDtk9P4kOe5eAwweolClrD+NmYcDvNGkIojUqSicxEdTgO1MxyHZgdf5lbq6iaVR4kZKUtARGCvDCbsFjc518TC4xIXr+YJQfQI7RZ9JA9u1ASJ15LwAgwEQ8UeScmwLQRI5zAzuV/jdjihpk470LcU2izkrTXUgMXQPpunTR7bT8EhMAglcQeYUgE0BAQp0Y4a0p54D3QP7cw6oCrClprqiAPVwAWA7yayLz/0Oa9OJS66HD3aDuzEROJEoGhrNLB16shvg5lhMdVfomjpk9/yNmkktF4FgGbuq/LMTT3RTRwDT7qsxoMkEh5kVnZGF8iDxaY8aCInQcItgO4DiVEBCGTKu1XUdUHR3Fu+9NT7ZPhk+T7Tvk6wl4NxxPAHEAlIrd57gtcAAAGFaUNDUElDQyBwcm9maWxlAAB4nH2RPUjDQBiG36ZKS6k42EHEIUN1siAq6ihVLIKF0lZo1cHk0j9o0pCkuDgKrgUHfxarDi7Oujq4CoLgD4iTo5Oii5T4XVJoEeMdxz28970vd98BQrPKVLNnHFA1y0gn4mIuvyoGXuFHiOYMghIz9WRmMQvP8XUPH9/vYjzLu+7P0acUTAb4ROI5phsW8Qbx9Kalc94njrCypBCfE48ZdEHiR67LLr9xLjks8MyIkU3PE0eIxVIXy13MyoZKPEUcVVSN8oWcywrnLc5qtc7a9+QvDBe0lQzXaQ0jgSUkkYIIGXVUUIWFGO0aKSbSdB738A85/hS5ZHJVwMixgBpUSI4f/A9+99YsTk64SeE40Pti2x8jQGAXaDVs+/vYtlsngP8ZuNI6/loTmP0kvdHRokdA/zZwcd3R5D3gcgcYfNIlQ3IkPy2hWATez+ib8sDALRBac/vWPsfpA5ClXi3fAAeHwGiJstc93h3s7tu/Ne3+/QBhGHKgiWrVHwAAACRQTFRFAAAAAAAAW0U4alJEeWFSNSkiSTcsAaesC4eKYPX6////AAAA22T4vQAAAAF0Uk5TAEDm2GYAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AMKCwgGRPOpXAAAAWNJREFUOMu9k8FKw0AQhpeNpsSnCFmo15BNKZ4z6QPY1FJPobYRPRVsDHj1BXop0t6lxKcUnH8KjQfRBPeSj9nd+f+dmSjVepmIvzpO/C9wsjRkIGLQacZbKh3j1uC6cV1p/2ctizNOhlsxIZTSGJAlLDrIsGXksLYhwIjWXDIXAu5v3k7IfJbi7QsCLAk2lgTVRSJ+bL/59FDEjzXI2zWlsEg4QS8GRAmXUMBYuDe+6aMD0oNcdbvcAE+em4hzB058w1KWRgyGCHWhDKerBPdfw279FIEMQODLcCBkLGonxvRwylb1VcWgLkdho3OtDeWnI+CtIi7Z/gBjL/UT96vcrhni9dqiyxg2Vdz9RX2/4e/5R43Ae802trOKM5fTIUfcKabWGfvwHPQBumhVBLHh3c4YeuKnNzngTPkGuF8Bevm3P7fd+O7ExuMDFPai/rwRraO6akLnayewFfULiXjqn9cn1VpFD84lOSYAAAAASUVORK5CYII=",this.texture_source_category="built_in";break;case"textures/particle/campfire_smoke":e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAADACAYAAAANzeNOAAAClklEQVRo3u2Z624UMQyF91URgoqi3ujSG70tqgCB4JWDXOlUpx47dmbUVav1j6NMMj6fnZ0ks9uuWmurJVoVIAZcnx23WQAxRmYXALPWYsDnj+9aCiCBIpjQpgEMYaWnoE2eOayglnIBFgHuLr801hBAmyPQs87hp/etB7AgLsCDyXh3ChLAYhjGwg8xazYBvI11NXUe7B5g823doGEAmyOQaZR3YRYyMR/tf3AhGDMBYoS87IC4UxCzBKC1siOJC+hVgjEXwBAvM5vdx8iBuqqhlRiZaze++Ha+PmuiWQCYtRYDLNCwuQvImDVk8jVfbp4c7LlGxJgAMUIIRMtgaUMAmwEUsdkEMAgGQKDuU+BAS6l1wMGesbbztgDyPni4u3hSGsAmiGFdgGXWkNkAazpDZmsaT+b10X7KjDgTwBmsa5ilNQEcoCG4D5kAngoqEmmzCeAqPHEi9zHqYC9zuJS9jHUebBPwc3PVtIZ/cLAZ/RBgZe5VMmxOA/QUMHZ+cvAMMjGzUYJ1H+0EgGAE4dqTOQXc0MEa1n0KvYza3F0HvbJrN74pwO/vNw1KA2DAWymCuBk9uYDIyNXMAoguTg8fZQLkBmdCX1oZg9kF4CDVZgh/+ugCEKCNXnZ3HSBQt7WZCjAL8OfhtkFDADHgQIkg3awA4frq63FLAXTmXhUTgGTh7LqfAmgBlJoCIBo2ex1EZ0LthQK8PODvj/sGDQHEIBuIATfnp7mlzCYNSm1nyaSzowKrCnMKCGal/kkDM1fC/VqJBdhFwO3luv37tXnU8DcUNuN6GCCSzICkv+JoCDRUQXQG1EIqwK4AsAewiYbPAz4TeuYUoHcWhJ9BZK51UIACbAuAA2X47WxBFlVQj/G1A/4D2cRpqoNd7bwAAAAASUVORK5CYII=",this.texture_source_category="built_in";break;default:e=ix,this.texture_source_category="placeholder"}this.texture.image.src=e};if("function"==typeof this.scene.fetchTexture){let t=this.scene.fetchTexture(this);t instanceof Promise?t.then((t=>{e(t)})):e(t)}else e();return this}}ox.types={identifier:{type:"string"},file_path:{type:"string"},events:{type:"object"},curves:{type:"object"},space_local_position:{type:"boolean"},space_local_rotation:{type:"boolean"},space_local_velocity:{type:"boolean"},variables_creation_vars:{type:"string",array:!0},variables_tick_vars:{type:"string",array:!0},emitter_rate_mode:{type:"string"},emitter_rate_rate:{type:"molang"},emitter_rate_amount:{type:"molang"},emitter_rate_maximum:{type:"molang"},emitter_lifetime_mode:{type:"string"},emitter_lifetime_active_time:{type:"molang"},emitter_lifetime_sleep_time:{type:"molang"},emitter_lifetime_activation:{type:"molang"},emitter_lifetime_expiration:{type:"molang"},emitter_events_creation:{type:"string",array:!0},emitter_events_expiration:{type:"string",array:!0},emitter_events_distance:{type:"object"},emitter_events_distance_looping:{type:"object",array:!0},emitter_events_timeline:{type:"object"},emitter_shape_mode:{type:"string"},emitter_shape_offset:{type:"molang",array:!0,dimensions:3},emitter_shape_radius:{type:"molang"},emitter_shape_half_dimensions:{type:"molang",array:!0,dimensions:3},emitter_shape_plane_normal:{type:"molang",array:!0,dimensions:3},emitter_shape_surface_only:{type:"boolean"},particle_appearance_size:{type:"molang",array:!0,dimensions:2},particle_appearance_material:{type:"string"},particle_appearance_facing_camera_mode:{type:"string"},particle_appearance_direction_mode:{type:"string"},particle_appearance_speed_threshold:{type:"number"},particle_appearance_direction:{type:"molang",array:!0,dimensions:3},particle_update_expression:{type:"string",array:!0},particle_render_expression:{type:"string",array:!0},particle_direction_mode:{type:"string"},particle_direction_direction:{type:"molang",array:!0,dimensions:3},particle_motion_mode:{type:"string"},particle_motion_linear_speed:{type:"molang"},particle_motion_linear_acceleration:{type:"molang",array:!0,dimensions:3},particle_motion_linear_drag_coefficient:{type:"molang"},particle_motion_relative_position:{type:"molang",array:!0,dimensions:3},particle_motion_direction:{type:"molang",array:!0,dimensions:3},particle_rotation_mode:{type:"string"},particle_rotation_initial_rotation:{type:"molang"},particle_rotation_rotation_rate:{type:"molang"},particle_rotation_rotation_acceleration:{type:"molang"},particle_rotation_rotation_drag_coefficient:{type:"molang"},particle_rotation_rotation:{type:"molang"},particle_lifetime_max_lifetime:{type:"molang"},particle_lifetime_kill_plane:{type:"number",array:!0,dimensions:4},particle_lifetime_expiration_expression:{type:"molang"},particle_lifetime_expire_in:{type:"string",array:!0},particle_lifetime_expire_outside:{type:"string",array:!0},particle_texture_size:{type:"number",array:!0,dimensions:2},particle_texture_height:{type:"number"},particle_texture_path:{type:"string"},particle_texture_mode:{type:"string"},particle_texture_uv:{type:"molang",array:!0,dimensions:2},particle_texture_uv_size:{type:"molang",array:!0,dimensions:2},particle_texture_uv_step:{type:"molang",array:!0,dimensions:2},particle_texture_frames_per_second:{type:"number"},particle_texture_max_frame:{type:"molang"},particle_texture_stretch_to_lifetime:{type:"boolean"},particle_texture_loop:{type:"boolean"},particle_color_mode:{type:"string"},particle_color_static:{type:"color"},particle_color_interpolant:{type:"molang"},particle_color_range:{type:"number"},particle_color_gradient:{type:"object",array:!0},particle_color_expression:{type:"molang",array:!0,dimensions:4},particle_color_light:{type:"boolean"},particle_collision_toggle:{type:"boolean"},particle_collision_enabled:{type:"molang"},particle_collision_collision_drag:{type:"number"},particle_collision_coefficient_of_restitution:{type:"number"},particle_collision_collision_radius:{type:"number"},particle_collision_expire_on_contact:{type:"boolean"},particle_collision_events:{type:"object",array:!0},particle_events_creation:{type:"string",array:!0},particle_events_expiration:{type:"string",array:!0},particle_events_timeline:{type:"object"}},rx.Config=ox;const sx={roundTo(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},randomab:(e,t)=>e+Math.random()*(t-e),radToDeg:e=>e/Math.PI*180,degToRad:e=>Math.PI/(180/e),clamp:(e,t,n)=>(e>n&&(e=n),(e<t||isNaN(e))&&(e=t),e),roundTo(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},getRandomEuler:()=>new Qp(sx.randomab(-Math.PI,Math.PI),sx.randomab(-Math.PI,Math.PI),sx.randomab(-Math.PI,Math.PI))},lx={x:new up(1,0,0),y:new up(0,1,0),z:new up(0,0,1),n:new up(0,0,0)};function cx(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}const ux={r:255,r:255,b:255,a:1},hx=(new Cf).setComponents(0,1,0,0);class px{constructor(e){this.emitter=e,this.geometry=new zf(2,2),this.material=this.emitter.material,this.mesh=new pf(this.geometry,this.material),this.position=this.mesh.position;let t=new Float32Array(16).fill(1);this.geometry.setAttribute("clr",new Dd(t,4)),this.speed=new up,this.acceleration=new up,this.facing_direction=new up,this.add()}params(){var e=this.emitter.params();return e["variable.particle_lifetime"]=this.lifetime,e["variable.particle_age"]=this.age,e["variable.particle_random_1"]=this.random_vars[0],e["variable.particle_random_2"]=this.random_vars[1],e["variable.particle_random_3"]=this.random_vars[2],e["variable.particle_random_4"]=this.random_vars[3],e}add(){this.emitter.particles.includes(this)||(this.emitter.particles.push(this),this.emitter.getActiveSpace().add(this.mesh)),this.age=this.loop_time=0,this.current_frame=0,this.random_vars=[Math.random(),Math.random(),Math.random(),Math.random()];var e=this.params();this.position.set(0,0,0),this.lifetime=this.emitter.calculate(this.emitter.config.particle_lifetime_max_lifetime,e),this.initial_rotation=this.emitter.calculate(this.emitter.config.particle_rotation_initial_rotation,e),this.rotation_rate=this.emitter.calculate(this.emitter.config.particle_rotation_rotation_rate,e),this.rotation=0;var t=this.emitter.config.emitter_shape_surface_only;if("box"===this.emitter.config.emitter_shape_mode){var n=this.emitter.calculate(this.emitter.config.emitter_shape_half_dimensions,e);if(this.position.x=sx.randomab(-n.x,n.x),this.position.y=sx.randomab(-n.y,n.y),this.position.z=sx.randomab(-n.z,n.z),t){var r=Math.floor(sx.randomab(0,3)),i=Math.floor(sx.randomab(0,2));this.position.setComponent(r,n.getComponent(r)*(i?1:-1))}}else if("entity_aabb"===this.emitter.config.emitter_shape_mode)n=new up(.5,1,.5),this.position.x=sx.randomab(-n.x,n.x),this.position.y=sx.randomab(-n.y,n.y),this.position.z=sx.randomab(-n.z,n.z),t&&(r=Math.floor(sx.randomab(0,3)),i=Math.floor(sx.randomab(0,2)),this.position.setComponent(r,n.getComponent(r)*(i?1:-1)));else if("sphere"===this.emitter.config.emitter_shape_mode){var a=this.emitter.calculate(this.emitter.config.emitter_shape_radius,e);this.position.x=t?a:a*Math.random(),this.position.applyEuler(sx.getRandomEuler())}else if("disc"===this.emitter.config.emitter_shape_mode){a=this.emitter.calculate(this.emitter.config.emitter_shape_radius,e);var o=Math.random()*Math.PI*2,s=t?a:a*Math.sqrt(Math.random());this.position.x=s*Math.cos(o),this.position.z=s*Math.sin(o);var l=this.emitter.calculate(this.emitter.config.emitter_shape_plane_normal,e);if(!l.equals(lx.n)){var c=(new cp).setFromUnitVectors(lx.y,l);this.position.applyQuaternion(c)}}this.speed.set(0,0,0);var u=this.emitter.config.particle_direction_mode;if("outwards"==u&&this.emitter.inherited_particle_speed)this.speed.copy(this.emitter.inherited_particle_speed);else{"inwards"==u||"outwards"==u?"point"===this.emitter.config.emitter_shape_mode?this.speed.set(1,0,0).applyEuler(sx.getRandomEuler()):(this.speed.copy(this.position).normalize(),"inwards"==u&&this.speed.negate()):this.speed=this.emitter.calculate(this.emitter.config.particle_direction_direction,e).normalize();let t=this.emitter.calculate(this.emitter.config.particle_motion_linear_speed,e);this.speed.x*=t,this.speed.y*=t,this.speed.z*=t}if(this.position.add(this.emitter.calculate(this.emitter.config.emitter_shape_offset,e)),"locator"==this.emitter.parent_mode&&(this.position.x*=-1,this.position.y*=-1,this.speed.x*=-1,this.speed.y*=-1),"world"!=this.emitter.parent_mode&&this.emitter.config.space_local_position&&!this.emitter.config.space_local_rotation&&(this.speed.x*=-1,this.speed.z*=-1),"entity_aabb"===this.emitter.config.emitter_shape_mode&&(this.position.x+=1),this.emitter.local_space.parent&&("locator"==this.emitter.parent_mode&&this.speed.applyQuaternion(this.emitter.local_space.getWorldQuaternion(new cp)),this.emitter.config.space_local_rotation||this.position.applyQuaternion(this.emitter.local_space.getWorldQuaternion(new cp)),!this.emitter.config.space_local_position)){let e=this.emitter.local_space.getWorldPosition(new up);this.position.addScaledVector(e,1/this.emitter.scene.global_options._scale)}this.setFrame(0);for(let e of this.emitter.config.particle_events_creation)this.emitter.runEvent(e,this);return this.tick()}tick(e){var t=this.params();let n=1/this.emitter.scene.global_options.tick_rate;for(var r of this.emitter.config.particle_render_expression)this.emitter.Molang.parse(r,t);let i=this.age;if(this.age+=n,this.loop_time+=n,this.lifetime&&this.age>this.lifetime&&this.expire(),this.emitter.calculate(this.emitter.config.particle_lifetime_expiration_expression,t)&&this.expire(),"dynamic"===this.emitter.config.particle_motion_mode){var a=this.emitter.calculate(this.emitter.config.particle_motion_linear_drag_coefficient,t);if(this.acceleration.copy(this.emitter.calculate(this.emitter.config.particle_motion_linear_acceleration,t)),this.emitter.config.space_local_position?"locator"==this.emitter.parent_mode&&(this.acceleration.x*=-1,this.acceleration.y*=-1):"world"!=this.emitter.parent_mode&&(this.acceleration.x*=-1,this.acceleration.z*=-1),this.acceleration.addScaledVector(this.speed,-a),this.speed.addScaledVector(this.acceleration,n),this.position.addScaledVector(this.speed,n),this.emitter.config.particle_lifetime_kill_plane.find((e=>e))){var o=this.emitter.calculate(this.emitter.config.particle_lifetime_kill_plane,t),s=(new up).copy(this.position).addScaledVector(this.speed,-n),l=(new up).copy(this.position);this.emitter.config.space_local_position&&"locator"==this.emitter.parent_mode&&(s.x*=-1,s.y*=-1,l.x*=-1,l.y*=-1);var c=new Wb(s,l);if(o.intersectsLine(c))return this.expire(),this}if(this.emitter.ground_collision&&this.emitter.config.particle_collision_toggle&&(!this.emitter.config.particle_collision_enabled||this.emitter.calculate(this.emitter.config.particle_collision_enabled,t))){let e=this.emitter.config.particle_collision_collision_drag,t=this.emitter.config.particle_collision_coefficient_of_restitution,r=Math.max(this.emitter.config.particle_collision_collision_radius,1e-4),i=hx,a=new Rp(this.position,r),o=(new up).copy(this.position).addScaledVector(this.speed,-n),s=new Wb(o,this.position),l=i.intersectsLine(s);if(l&&i.intersectLine(s,this.position),l||i.intersectsSphere(a)){if(this.emitter.config.particle_collision_events.length){let e=this.speed.length();for(let t of this.emitter.config.particle_collision_events)"object"==typeof t&&t.event&&(t.min_speed&&t.min_speed>e||this.emitter.runEvent(t.event,this))}if(this.emitter.config.particle_collision_expire_on_contact)return this.expire(),this;this.position.y=r*Math.sign(o.y),this.speed.reflect(i.normal),this.speed.y*=t,this.speed.x=Math.sign(this.speed.x)*sx.clamp(Math.abs(this.speed.x)-e*n,0,1/0),this.speed.z=Math.sign(this.speed.z)*sx.clamp(Math.abs(this.speed.z)-e*n,0,1/0)}}}else"parametric"!==this.emitter.config.particle_motion_mode||e||(this.emitter.config.particle_motion_relative_position.join("").length&&this.position.copy(this.emitter.calculate(this.emitter.config.particle_motion_relative_position,t)),this.emitter.config.particle_motion_direction.join("").length&&this.speed.copy(this.emitter.calculate(this.emitter.config.particle_motion_direction,t)),this.emitter.config.space_local_position&&"locator"==this.emitter.parent_mode&&(this.position.x*=-1,this.position.y*=-1));if("dynamic"===this.emitter.config.particle_rotation_mode){var u=this.emitter.calculate(this.emitter.config.particle_rotation_rotation_drag_coefficient,t),h=this.emitter.calculate(this.emitter.config.particle_rotation_rotation_acceleration,t);h+=-u*this.rotation_rate,this.rotation_rate+=h*n,this.rotation=sx.degToRad(this.initial_rotation+this.rotation_rate*this.age)}else"parametric"===this.emitter.config.particle_rotation_mode&&(this.rotation=sx.degToRad(this.emitter.calculate(this.emitter.config.particle_rotation_rotation,t)));if("direction"!=this.emitter.config.particle_appearance_facing_camera_mode.substr(0,9)&&"lookat_direction"!=this.emitter.config.particle_appearance_facing_camera_mode||("custom"==this.emitter.config.particle_appearance_direction_mode?this.facing_direction.copy(this.emitter.calculate(this.emitter.config.particle_appearance_direction,t)).normalize():this.speed.length()>=(this.emitter.config.particle_appearance_speed_threshold||.01)&&this.facing_direction.copy(this.speed).normalize()),!e){var p=this.emitter.calculate(this.emitter.config.particle_appearance_size,t);if(this.mesh.scale.x=p.x||1e-4,this.mesh.scale.y=p.y||1e-4,"animated"===this.emitter.config.particle_texture_mode){var d=this.emitter.calculate(this.emitter.config.particle_texture_max_frame,t);if(this.emitter.config.particle_texture_stretch_to_lifetime&&d)var f=d/this.lifetime;else f=this.emitter.calculate(this.emitter.config.particle_texture_frames_per_second,t);Math.floor(this.loop_time*f)>this.current_frame&&(this.current_frame=Math.floor(this.loop_time*f),d&&this.current_frame>=d?this.emitter.config.particle_texture_loop&&(this.current_frame=0,this.loop_time=0,this.setFrame(0)):this.setFrame(this.current_frame))}else this.setFrame(0);if("expression"===this.emitter.config.particle_color_mode){var m=this.emitter.calculate(this.emitter.config.particle_color_expression,t,"array");this.setColor(...m)}else if("gradient"===this.emitter.config.particle_color_mode){var v=this.emitter.calculate(this.emitter.config.particle_color_interpolant,t),g=this.emitter.calculate(this.emitter.config.particle_color_range,t);m=function(e,t){let n=0;if(e.forEach(((e,r)=>{e.percent<=t&&(n=r)})),e[n]&&!e[n+1])return nx()(e[n].color).toRgb();if(!e[n]&&e[n+1])return nx()(e[n+1].color).toRgb();if(e[n]&&e[n+1]){var r=(t-e[n].percent)/(e[n+1].percent-e[n].percent);return nx().mix(e[n].color,e[n+1].color,100*r).toRgb()}return ux}(this.emitter.config.particle_color_gradient,v/g*100),this.setColor(m.r/255,m.g/255,m.b/255,m.a)}else m=nx()(this.emitter.config.particle_color_static).toRgb(),this.setColor(m.r/255,m.g/255,m.b/255,m.a)}for(let e in this.emitter.config.particle_events_timeline){let t=parseFloat(e);t>=i&&t<this.age&&this.emitter.runEvent(this.emitter.config.particle_events_timeline[e],this)}return this}expire(){for(let e of this.emitter.config.particle_events_expiration)this.emitter.runEvent(e,this);this.remove()}remove(){return cx(this.emitter.particles,this),this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.emitter.dead_particles.push(this),this}delete(){this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.geometry.dispose()}setColor(e,t,n,r=1){let i=this.geometry.getAttribute("clr");i.array.set([e,t,n,r,e,t,n,r,e,t,n,r,e,t,n,r]),i.needsUpdate=!0}setFrame(e){if("full"!==this.emitter.config.particle_texture_mode){var t=this.params(),n=this.emitter.calculate(this.emitter.config.particle_texture_uv,t),r=this.emitter.calculate(this.emitter.config.particle_texture_uv_size,t);if(e){var i=this.emitter.calculate(this.emitter.config.particle_texture_uv_step,t);n.addScaledVector(i,e)}this.setUV(n.x,n.y,r.x||this.emitter.config.particle_texture_size[0],r.y||this.emitter.config.particle_texture_size[1])}else this.setUV(0,0,this.emitter.config.particle_texture_size[0],this.emitter.config.particle_texture_size[1])}setUV(e,t,n,r){let i=this.geometry.getAttribute("uv");n=(e+n-0)/this.emitter.config.particle_texture_size[0],r=(t+r-0)/this.emitter.config.particle_texture_size[1],e=(e+(n>0?0:-0))/this.emitter.config.particle_texture_size[0],t=(t+(r>0?0:-0))/this.emitter.config.particle_texture_size[1],i.array.set([e,1-t,n,1-t,e,1-r,n,1-r]),i.needsUpdate=!0}}rx.Particle=px;const dx=new up,fx=new pd,mx=["particles_alpha","particles_opaque","particles_blend","particles_add"];function vx(e){switch(e.mode){case"catmull_rom":var t=[];return e.nodes.forEach(((e,n)=>{t.push(new Jh(n-1,e))})),new U_(t);case"bezier":return t=[],e.nodes.forEach(((e,n)=>{t.push(new Jh(n/3,e))})),new O_(...t)}}class gx extends class{constructor(){this.events={}}dispatchEvent(e,t){var n=this.events[e];if(n)for(var r=0;r<n.length;r++)"function"==typeof n[r]&&n[r](t)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}removeEventListener(e,t){this.events[e]&&cx(this.events[e],t)}}{constructor(e,t,n=0){super(),this.scene=e,this.child_emitters=[],e.emitters.push(this),this.config=t instanceof ox?t:new ox(e,t,n),this.Molang=new ex,this.Molang.variableHandler=(e,t)=>this.config.curves[e]&&function(e,t,n,r){var i=e.Molang.parse(t.input,r),a=e.Molang.parse(t.range,r);if("bezier_chain"==t.mode&&(a=1),(i=i/a||0)===1/0&&(i=0),"linear"==t.mode){i*=c=t.nodes.length-1;var o=Math.floor(i),s=i%1,l=t.nodes[o+1]-t.nodes[o];return t.nodes[o]+l*s}if("catmull_rom"==t.mode){let r=e._cached_curves[n];var c;r||(r=e._cached_curves[n]=vx(t));var u=(1+(i*=c=t.nodes.length-3))/(c+2);return r.getPoint(u).y}if("bezier"==t.mode){let r=e._cached_curves[n];return r||(r=e._cached_curves[n]=vx(t)),r.getPoint(i).y}if("bezier_chain"==t.mode){let e=t.nodes.slice().sort(((e,t)=>e.time-t.time)),n=0;for(;n<e.length&&!(e[n].time>i);)n++;let r=e[n-1],a=e[n];r||(r={time:0,right_value:0,right_slope:0}),a||(a={time:1,right_value:0,right_slope:0});let o=a.time-r.time;var h=[new Jh(r.time+0*o,r.right_value),new Jh(r.time+o*(1/3),r.right_value+r.right_slope*(1/3)),new Jh(r.time+o*(2/3),a.left_value-a.left_slope*(1/3)),new Jh(r.time+1*o,a.left_value)];return new O_(...h).getPoint((i-r.time)/o).y}}(this,this.config.curves[e],e,t);let r=e.global_options._scale;this.local_space=new pd,this.local_space.scale.set(r,r,r),this.global_space=new pd,this.global_space.scale.set(r,r,r),this.material=new _f({uniforms:{map:{type:"t",value:this.config.texture},materialType:{type:"int",value:1}},vertexShader:"#define GLSLIFY 1\nattribute vec4 clr;varying vec2 vUv;varying vec4 vColor;void main(){vColor=clr;vUv=uv;vec4 mvPosition=modelViewMatrix*vec4(position,1.0);gl_Position=projectionMatrix*mvPosition;}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;varying vec4 vColor;uniform sampler2D map;uniform int materialType;void main(void){vec4 tColor=texture2D(map,vUv);if(materialType==0){if(tColor.a<0.5)discard;tColor.a=1.0;}else if(materialType==1){tColor.a=1.0;}else{tColor.a=tColor.a*vColor.a;}gl_FragColor=vec4(tColor.rgb*vColor.rgb,tColor.a);}",vertexColors:!0,transparent:!0,alphaTest:.2}),this.particles=[],this.dead_particles=[],this.creation_time=0,this.parent_emitter=null,this.age=0,this.view_age=0,this.enabled=!1,this.loop_mode=n.loop_mode||e.global_options.loop_mode,this.parent_mode=n.parent_mode||e.global_options.parent_mode,this.ground_collision="boolean"==typeof n.ground_collision?n.ground_collision:e.global_options.ground_collision,this.inherited_particle_speed=null,this.pre_effect_expression=null,this.random_vars=[Math.random(),Math.random(),Math.random(),Math.random()],this.tick_values={},this.creation_values={},this._cached_curves={},this.updateMaterial()}getActiveSpace(){return this.config.space_local_position&&this.local_space.parent?this.local_space:this.global_space}clone(){let e=new rx.Emitter(this.scene,this.config);return e.loop_mode=this.loop_mode,e}params(){var e={"variable.entity_scale":1};return e["variable.emitter_lifetime"]=this.active_time,e["variable.emitter_age"]=this.age,e["variable.emitter_random_1"]=this.random_vars[0],e["variable.emitter_random_2"]=this.random_vars[1],e["variable.emitter_random_3"]=this.random_vars[2],e["variable.emitter_random_4"]=this.random_vars[3],e}calculate(e,t,n){let r=e=>this.Molang.parse(e,t);var i;return e instanceof Array?"array"==n?(i=[],e.forEach((e=>{i.push(r(e))}))):4===e.length?i=(new Cf).setComponents(r(e[0]),r(e[1]),r(e[2]),r(e[3])):3===e.length?i=new up(r(e[0]),r(e[1]),r(e[2])):2===e.length&&(i=new Jh(r(e[0]),r(e[1]))):"color"==n||(i=r(e)),i}updateConfig(){this.updateMaterial()}updateFacingRotation(e){if(0==this.particles.length)return;const t=new cp,n=new up;let r;this.config.particle_appearance_facing_camera_mode.substring(0,6),r=this.particles[0].mesh.parent.getWorldQuaternion(t).invert(),this.particles.forEach((t=>{switch("direction"==this.config.particle_appearance_facing_camera_mode.substring(0,9)&&("YXZ"!==t.mesh.rotation.order&&(t.mesh.rotation.order="YXZ"),n.copy(t.facing_direction),1==n.y?n.y=-1:-1==n.y&&(n.y=1,n.z=-1e-5)),"lookat_direction"==this.config.particle_appearance_facing_camera_mode&&("XYZ"!==t.mesh.rotation.order&&(t.mesh.rotation.order="XYZ"),n.copy(t.facing_direction)),this.config.particle_appearance_facing_camera_mode){case"lookat_xyz":t.mesh.lookAt(e.position);break;case"lookat_y":var i=n.copy(e.position);dx.set(0,0,0),t.mesh.localToWorld(dx),i.y=dx.y,t.mesh.lookAt(i);break;case"rotate_xyz":t.mesh.rotation.copy(e.rotation),t.mesh.quaternion.premultiply(r);break;case"rotate_y":t.mesh.rotation.copy(e.rotation),t.mesh.rotation.reorder("YXZ"),t.mesh.rotation.x=t.mesh.rotation.z=0,t.mesh.quaternion.premultiply(r);break;case"direction_x":var a=Math.atan2(n.x,n.z),o=Math.atan2(n.y,Math.sqrt(Math.pow(n.x,2)+Math.pow(n.z,2)));t.mesh.rotation.set(0,a-Math.PI/2,o);break;case"direction_y":a=Math.atan2(n.x,n.z);var s=Math.atan2(n.y,Math.sqrt(Math.pow(n.x,2)+Math.pow(n.z,2)));t.mesh.rotation.set(s-Math.PI/2,a-Math.PI,0);break;case"direction_z":a=Math.atan2(n.x,n.z),s=Math.atan2(n.y,Math.sqrt(Math.pow(n.x,2)+Math.pow(n.z,2))),t.mesh.rotation.set(-s,a,0);break;case"lookat_direction":fx.position.copy(t.mesh.position),fx.quaternion.setFromUnitVectors(lx.x,n),n.copy(e.position),t.mesh.parent.add(fx),fx.updateMatrixWorld(),fx.worldToLocal(n),t.mesh.parent.remove(fx),t.mesh.rotation.set(Math.atan2(-n.y,n.z),0,0,"XYZ"),t.mesh.quaternion.premultiply(fx.quaternion);break;case"emitter_transform_xy":t.mesh.rotation.set(0,0,0);break;case"emitter_transform_xz":t.mesh.rotation.set(-Math.PI/2,0,0);break;case"emitter_transform_yz":t.mesh.rotation.set(0,Math.PI/2,0)}t.mesh.rotation.z+=t.rotation||0}))}start(){this.age=0,this.view_age=0,this.enabled=!0,this.initialized=!0,this.scene.space.add(this.global_space);let e=this.params();for(var t of(this.Molang.resetVariables(),this.active_time=this.calculate(this.config.emitter_lifetime_active_time,e),this.sleep_time=this.calculate(this.config.emitter_lifetime_sleep_time,e),this.random_vars=[Math.random(),Math.random(),Math.random(),Math.random()],this.creation_values={},this.config.variables_creation_vars))this.Molang.parse(t,e);"string"==typeof this.pre_effect_expression&&this.Molang.parse(this.pre_effect_expression,e),this.dispatchEvent("start",{params:e}),this.updateMaterial();for(let e of this.config.emitter_events_creation)this.runEvent(e);return"instant"===this.config.emitter_rate_mode?this.spawnParticles(this.calculate(this.config.emitter_rate_amount,e)):"manual"===this.config.emitter_rate_mode&&this.spawnParticles(1),this}tick(e){let t=this.params(),{tick_rate:n}=this.scene.global_options,r=1/n;for(var i of(this._cached_curves={},this.config.variables_tick_vars))this.Molang.parse(i,t);this.config.particle_update_expression.length&&this.particles.forEach((e=>{let t=e.params();for(var n of this.config.particle_update_expression)this.Molang.parse(n,t)})),this.dispatchEvent("tick",{params:t}),e||this.updateMaterial(),this.particles.forEach((t=>{t.tick(e)}));let a=this.age;if(this.age+=r,this.view_age+=r,this.enabled&&"steady"===this.config.emitter_rate_mode){var o=this.calculate(this.config.emitter_rate_rate,t)/n,s=1/o;o=Math.round(this.age*n)%Math.round(s)==0?Math.ceil(o):Math.floor(o),this.spawnParticles(o)}this.dispatchEvent("ticked",{params:t,tick_rate:n});for(let e in this.config.emitter_events_timeline){let t=parseFloat(e);t>=a&&t<this.age&&this.runEvent(this.config.emitter_events_timeline[e])}return this.child_emitters.slice().forEach((t=>{t.tick(e)})),"expression"===this.config.emitter_lifetime_mode?(this.enabled&&this.calculate(this.config.emitter_lifetime_expiration,t)&&this.end(),!this.enabled&&this.calculate(this.config.emitter_lifetime_activation,t)&&this.start()):this.parent_emitter||"looping"!=this.loop_mode&&("auto"!=this.loop_mode||"looping"!=this.config.emitter_lifetime_mode)?this.enabled&&sx.roundTo(this.age,5)>=this.active_time&&this.end():(this.enabled&&sx.roundTo(this.age,5)>=this.active_time&&this.end(),!this.enabled&&sx.roundTo(this.age,5)>=this.sleep_time&&this.start()),this.parent_emitter&&0==this.particles.length&&this.age>this.active_time&&(cx(this.parent_emitter.child_emitters,this),this.delete()),this}stop(e=!1){return this.enabled=!1,this.age=0,e&&(this.particles.slice().forEach((e=>{e.remove()})),this.child_emitters.slice().forEach((e=>e.delete())),this.child_emitters.splice(0)),this.dispatchEvent("stop",{clear_scene:e}),this}end(){this.stop(),this.dispatchEvent("end");for(let e of this.config.emitter_events_expiration)this.runEvent(e);return this}jumpTo(e){let{tick_rate:t}=this.scene.global_options,n=Math.round(this.view_age*t),r=Math.round(e*t);if(("looping"==this.loop_mode||"auto"==this.loop_mode&&"looping"==this.config.emitter_lifetime_mode)&&(r%=Math.round(this.active_time*t)-1),n==r)return;r<n?this.stop(!0).start():this.initialized||this.start();let i=this.view_age;for(;Math.round(this.view_age*t)<r-1&&(this.tick(!0),!(this.view_age<=i));)if(i=this.view_age,!this.material)return;return this.tick(!1),this.material?(this.child_emitters.slice().forEach((t=>{t.creation_time>e&&(t.delete(),cx(this.child_emitters,t))})),this):void 0}updateMaterial(){let e=this.config.particle_appearance_material;this.material.uniforms.materialType.value=mx.indexOf(e),this.material.side="particles_alpha"===e||"particles_opaque"===e?$l:tc,this.material.blending="particles_add"===e?ic:rc}playLoop(){return this.initialized&&0!=this.age||this.start(),this.paused=!1,clearInterval(this.tick_interval),this.tick_interval=setInterval((()=>{this.tick()}),1e3/this.scene.global_options.tick_rate),this}toggleLoop(){return this.paused=!this.paused,this.paused?(clearInterval(this.tick_interval),delete this.tick_interval):this.playLoop(),this}stopLoop(){return clearInterval(this.tick_interval),delete this.tick_interval,this.stop(!0),this.paused=!0,this}spawnParticles(e){if(!e)return this;if("steady"==this.config.emitter_rate_mode){var t=this.calculate(this.config.emitter_rate_maximum,this.params())||0;t=sx.clamp(t,0,this.scene.global_options.max_emitter_particles),e=sx.clamp(e,0,t-this.particles.length)}else e=sx.clamp(e,0,this.scene.global_options.max_emitter_particles-this.particles.length);for(var n=0;n<e;n++){if(this.dead_particles.length)var r=this.dead_particles.pop();else r=new px(this);r.add()}return e}delete(){this.child_emitters.slice().forEach((e=>e.delete())),this.child_emitters.splice(0),this.particles.concat(this.dead_particles).forEach((e=>{e.delete()})),this.particles.splice(0,1/0),this.dead_particles.splice(0,1/0),this.local_space.parent&&this.local_space.parent.remove(this.local_space),this.global_space.parent&&this.global_space.parent.remove(this.global_space),cx(this.scene.emitters,this),this.material.dispose(),delete this.material,delete this.parent_emitter}runEvent(e,t){if(e instanceof Array){for(let n of e)this.runEvent(n,t);return}this.dispatchEvent("event",{event_id:e,particle:t});let n=this.config.events[e],r=async n=>{if(n.sequence instanceof Array)for(let e of n.sequence)r(e);if(n.randomize instanceof Array){let e=function(e){let t=e.reduce(((e,t)=>e+t.weight||1),0),n=Math.random()*t,r=0;for(let t of e)if(r+=t.weight||1,n<=r)return t}(n.randomize);e&&r(e)}if(n.expression&&this.Molang.parse(n.expression,this.params()),n.sound_effect&&this.dispatchEvent("play_sound",{sound_effect:n.sound_effect,particle:t,event_id:e}),n.particle_effect){let r,i=n.particle_effect.effect,a=this.scene.child_configs[i];if(!this.scene.child_configs[i]&&this.scene._fetchParticleFile){a=this.scene.child_configs[i]=new ox(this.scene);let e=this.scene.fetchParticleFile(i,this.config,a),t=e=>{e&&(e.json?(a.file_path=e.file_path,a.setFromJSON(e.json||e)):a.setFromJSON(e))};e instanceof Promise?t(await e):e&&t(e)}if(a){r=new gx(this.scene,a,{}),r.creation_time=this.age,r.parent_emitter=this,r.pre_effect_expression=n.particle_effect.pre_effect_expression,this.child_emitters.push(r),"emitter_bound"==n.particle_effect.type?r.parent_mode=this.parent_mode:"particle_with_velocity"==n.particle_effect.type&&t&&(r.inherited_particle_speed=(new up).copy(t.speed));let e=new up;if(t?t.mesh.getWorldPosition(e):this.getActiveSpace().getWorldPosition(e),this.local_space.parent&&!this.config.space_local_position){let t=this.local_space.getWorldPosition(new up);e.add(t)}r.getActiveSpace().position.copy(e),r.start()}this.dispatchEvent("play_child_particle",{particle_effect:n.particle_effect,config:a,child_emitter:r,event_id:e})}};n&&r(n)}}rx.Emitter=gx;const _x=rx;const yx={type:"change"},bx={type:"start"},xx={type:"end"};class wx extends Dh{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new up,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ul,MIDDLE:Hl,RIGHT:jl},this.touches={ONE:Vl,TWO:Wl},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",V),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(yx),n.update(),i=r.NONE},this.update=function(){const t=new up,h=(new cp).setFromUnitVectors(e.up,new up(0,1,0)),p=h.clone().invert(),d=new up,f=new cp,m=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(h),o.setFromVector3(t),n.autoRotate&&i===r.NONE&&M(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(o.theta+=s.theta*n.dampingFactor,o.phi+=s.phi*n.dampingFactor):(o.theta+=s.theta,o.phi+=s.phi);let v=n.minAzimuthAngle,g=n.maxAzimuthAngle;return isFinite(v)&&isFinite(g)&&(v<-Math.PI?v+=m:v>Math.PI&&(v-=m),g<-Math.PI?g+=m:g>Math.PI&&(g-=m),o.theta=v<=g?Math.max(v,Math.min(g,o.theta)):o.theta>(v+g)/2?Math.max(v,o.theta):Math.min(g,o.theta)),o.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=l,o.radius=Math.max(n.minDistance,Math.min(n.maxDistance,o.radius)),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),t.setFromSpherical(o),t.applyQuaternion(p),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),c.set(0,0,0)),l=1,!!(u||d.distanceToSquared(n.object.position)>a||8*(1-f.dot(n.object.quaternion))>a)&&(n.dispatchEvent(yx),d.copy(n.object.position),f.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",G),n.domElement.removeEventListener("pointerdown",F),n.domElement.removeEventListener("pointercancel",H),n.domElement.removeEventListener("wheel",j),n.domElement.removeEventListener("pointermove",B),n.domElement.removeEventListener("pointerup",U),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",V)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const a=1e-6,o=new Ub,s=new Ub;let l=1;const c=new up;let u=!1;const h=new Jh,p=new Jh,d=new Jh,f=new Jh,m=new Jh,v=new Jh,g=new Jh,_=new Jh,y=new Jh,b=[],x={};function w(){return Math.pow(.95,n.zoomSpeed)}function M(e){s.theta-=e}function S(e){s.phi-=e}const E=function(){const e=new up;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),A=function(){const e=new up;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),T=function(){const e=new up;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),E(2*t*o/i.clientHeight,n.object.matrix),A(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(E(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),A(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function C(e){n.object.isPerspectiveCamera?l/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object.isPerspectiveCamera?l*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){h.set(e.clientX,e.clientY)}function P(e){f.set(e.clientX,e.clientY)}function R(){if(1===b.length)h.set(b[0].pageX,b[0].pageY);else{const e=.5*(b[0].pageX+b[1].pageX),t=.5*(b[0].pageY+b[1].pageY);h.set(e,t)}}function I(){if(1===b.length)f.set(b[0].pageX,b[0].pageY);else{const e=.5*(b[0].pageX+b[1].pageX),t=.5*(b[0].pageY+b[1].pageY);f.set(e,t)}}function z(){const e=b[0].pageX-b[1].pageX,t=b[0].pageY-b[1].pageY,n=Math.sqrt(e*e+t*t);g.set(0,n)}function O(e){if(1==b.length)p.set(e.pageX,e.pageY);else{const t=X(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);p.set(n,r)}d.subVectors(p,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*d.x/t.clientHeight),S(2*Math.PI*d.y/t.clientHeight),h.copy(p)}function D(e){if(1===b.length)m.set(e.pageX,e.pageY);else{const t=X(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);m.set(n,r)}v.subVectors(m,f).multiplyScalar(n.panSpeed),T(v.x,v.y),f.copy(m)}function N(e){const t=X(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);_.set(0,a),y.set(0,Math.pow(_.y/g.y,n.zoomSpeed)),C(y.y),g.copy(_)}function F(e){!1!==n.enabled&&(0===b.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",B),n.domElement.addEventListener("pointerup",U)),function(e){b.push(e)}(e),"touch"===e.pointerType?function(e){switch(q(e),b.length){case 1:switch(n.touches.ONE){case Vl:if(!1===n.enableRotate)return;R(),i=r.TOUCH_ROTATE;break;case Gl:if(!1===n.enablePan)return;I(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case Wl:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&z(),n.enablePan&&I(),i=r.TOUCH_DOLLY_PAN;break;case ql:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&z(),n.enableRotate&&R(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(bx)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Hl:if(!1===n.enableZoom)return;!function(e){g.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case Ul:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;P(e),i=r.PAN}else{if(!1===n.enableRotate)return;L(e),i=r.ROTATE}break;case jl:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;L(e),i=r.ROTATE}else{if(!1===n.enablePan)return;P(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(bx)}(e))}function B(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(q(e),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;O(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;D(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&N(e),n.enablePan&&D(e)}(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&N(e),n.enableRotate&&O(e)}(e),n.update();break;default:i=r.NONE}}(e):function(e){if(!1===n.enabled)return;switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(e){p.set(e.clientX,e.clientY),d.subVectors(p,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*d.x/t.clientHeight),S(2*Math.PI*d.y/t.clientHeight),h.copy(p),n.update()}(e);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),y.subVectors(_,g),y.y>0?C(w()):y.y<0&&k(w()),g.copy(_),n.update()}(e);break;case r.PAN:if(!1===n.enablePan)return;!function(e){m.set(e.clientX,e.clientY),v.subVectors(m,f).multiplyScalar(n.panSpeed),T(v.x,v.y),f.copy(m),n.update()}(e)}}(e))}function U(e){!1!==n.enabled&&(e.pointerType,n.dispatchEvent(xx),i=r.NONE,W(e),0===b.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",B),n.domElement.removeEventListener("pointerup",U)))}function H(e){W(e)}function j(e){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(e.preventDefault(),n.dispatchEvent(bx),function(e){e.deltaY<0?k(w()):e.deltaY>0&&C(w()),n.update()}(e),n.dispatchEvent(xx))}function V(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:T(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:T(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:T(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:T(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function G(e){!1!==n.enabled&&e.preventDefault()}function W(e){delete x[e.pointerId];for(let t=0;t<b.length;t++)if(b[t].pointerId==e.pointerId)return void b.splice(t,1)}function q(e){let t=x[e.pointerId];void 0===t&&(t=new Jh,x[e.pointerId]=t),t.set(e.pageX,e.pageY)}function X(e){const t=e.pointerId===b[0].pointerId?b[1]:b[0];return x[t.pointerId]}n.domElement.addEventListener("contextmenu",G),n.domElement.addEventListener("pointerdown",F),n.domElement.addEventListener("pointercancel",H),n.domElement.addEventListener("wheel",j,{passive:!1}),this.update()}}var Mx=[];const Sx={name:"warning-dialog",data:function(){return{errors:Mx}}};var Ex=n(257),Ax={insert:"head",singleton:!1};sl()(Ex.Z,Ax);Ex.Z.locals;var Tx=El(Sx,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dialog",{staticClass:"dialog",attrs:{id:"warnings"}},[n("div",{staticClass:"tool close_button",on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"unicode_icon"},[e._v(e._s(""))])]),e._v(" "),n("h2",[e._v("Warnings")]),e._v(" "),n("div",{staticClass:"scrollable"},[e._v("\n        There are "+e._s(e.errors.length)+" warning "+e._s(1==e.errors.length?"note":"notes")+":\n        "),n("ul",e._l(e.errors,(function(t,r){return n("li",{key:r,staticClass:"warning"},[e._v("\n                "+e._s(t.text)+"\n            ")])})),0)])])}),[],!1,null,"8dd2ba5c",null);const Cx=Tx.exports;var kx={grid_visible:!0,minecraft_block_visible:!1,axis_helper_visible:!0};try{var Lx=window.localStorage&&window.localStorage.getItem("snowstorm.options");if(Lx){var Px=JSON.parse(Lx);for(var Rx in Px)Rx in kx&&(kx[Rx]=Px[Rx])}}catch(vS){console.error("Failed to load settings",vS)}function Ix(e,t){kx[e]=t,localStorage.setItem("snowstorm.options",JSON.stringify(kx))}const zx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ox=!0;var Dx=(e,t)=>{return{name:e,functional:!0,props:{color:{type:String,default:"currentColor"},size:{type:Number,default:24},strokeWidth:{type:Number,default:2},absoluteStrokeWidth:{type:Boolean,default:!1},defaultClass:{type:String,default:`lucide-icon lucide lucide-${(n=e,n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()).replace("-icon","")}`}},render:(e,{props:{color:n,size:r,strokeWidth:i,absoluteStrokeWidth:a,defaultClass:o},data:s,children:l=[]})=>(Ox&&(console.warn("[Lucide Vue] This package will be deprecated end of 2023. Please upgrade to Vue 3 and use the latest lucide package for Vue."),Ox=!1),e("svg",{class:[o,s.class,s.staticClass,s.attrs&&s.attrs.class].filter(Boolean),style:[s.style,s.staticStyle,s.attrs&&s.attrs.style].filter(Boolean),attrs:{...zx,width:r,height:r,stroke:n,"stroke-width":a?24*Number(i)/Number(r):i,...s.attrs},on:s?.on||{}},[...t.map((([t,n])=>e(String(t),{attrs:n}))),...l]))};var n};const Nx=Dx("FlipVertical2Icon",[["path",{d:"m17 3-5 5-5-5h10",key:"1ftt6x"}],["path",{d:"m17 21-5-5-5 5h10",key:"1m0wmu"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]]),Fx=Dx("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Bx=Dx("PlayIcon",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Ux=Dx("PauseIcon",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Hx=Dx("HashIcon",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),jx=Dx("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Vx=Dx("CheckCheckIcon",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);function Gx(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Wx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wx(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Wx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qx(e){return e.replace(/^variable\./g,"v.").replace(/^context\./g,"c.").replace(/^query\./g,"q.")}function Xx(e){e.splice(0,1/0);var t=[];$w((function(e){if("molang"==e.type)if(e.value instanceof Array){var n,r=Gx(e.value);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i)}}catch(e){r.e(e)}finally{r.f()}}else"string"==typeof e.value&&t.push(e.value)}));var n,r=function e(n){var r;n.expression&&t.push(n.expression),null!==(r=n.particle_effect)&&void 0!==r&&r.pre_effect_expression&&t.push(n.particle_effect.pre_effect_expression),n.sequence&&n.sequence.forEach(e),n.randomize&&n.randomize.forEach(e)},i=Gx(Kw.events.events.events);try{for(i.s();!(n=i.n()).done;){r(n.value.event)}}catch(e){i.e(e)}finally{i.f()}for(var a=new Set,o=new Set,s=0,l=t;s<l.length;s++){var c=l[s];if("string"==typeof c){var u=c.toLowerCase().match(/(v|variable|c|context|q|query)\.[\w.]+\b/g);if(u){var h,p=Gx(u);try{for(p.s();!(h=p.n()).done;){var d=h.value.replace(/^v\./,"variable.").replace(/^c\./,"context.").replace(/^q\./,"query."),f=qx(d);a.add(d);var m=new RegExp("(".concat(d.replace(".","\\."),"|").concat(f.replace(".","\\."),")\\s*=[^=]"),"g");c.match(m)&&o.add(d)}}catch(e){p.e(e)}finally{p.f()}}}}var v,g=Gx(a);try{var _=function(){var t=v.value;if(Zs.find((function(e){return"variable."+e==t}))||Ys.find((function(e){return"context."+e==t})))return 0;var n=qx(t);return Pw.config.curves[t]||Pw.config.curves[n]||o.has(t)?0:void e.push(t)};for(g.s();!(v=g.n()).done;)_()}catch(e){g.e(e)}finally{g.f()}}function Yx(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Zx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zx(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Zx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jx=2699834,Qx={updateVariablePlaceholderList:function(){},PlaybackController:{start:function(){return Pw.initialized&&0!=Pw.age||Pw.start(),Pw.paused=!1,Qx.PlaybackController},toggle:function(){return Pw.paused=!Pw.paused,Pw.paused||Qx.PlaybackController.start(),Qx.PlaybackController},stop:function(){return Pw.stop(!0),Pw.paused=!0,Qx.PlaybackController}}},Kx={time:0},$x={r:new Rd(16592963),g:new Rd(2550853),b:new Rd(2973416),grid:new Rd(4016468)};function ew(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=$x,r=[n.r.r,n.r.g,n.r.b,n.r.r,n.r.g,n.r.b,n.g.r,n.g.g,n.g.b,n.g.r,n.g.g,n.g.b,n.b.r,n.b.g,n.b.b,n.b.r,n.b.g,n.b.b],i=new Xd;i.setAttribute("position",new Bd(t,3)),i.setAttribute("color",new Bd(r,3));var a=new i_({vertexColors:2});return new d_(i,a)}function tw(){Qx.PlaybackController.stop().start()}function nw(){Qx.PlaybackController.toggle()}function rw(e){Qx.canvas=e,Qx.camera=new bf(45,16/9,.1,3e3),Qx.camera.position.set(-6,3,-6),Qx.renderer=new xg({canvas:Qx.canvas,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),Qx.renderer.setClearColor(new Rd(Jx)),Qx.controls=new wx(Qx.camera,Qx.canvas),Qx.controls.target.set(0,.8,0),Qx.controls.screenSpacePanning=!0,Qx.controls.zoomSpeed=1.4,Qx.scene=new Sg,Qx.helper=new ew(1),Qx.grid=new Jb(64,64,$x.grid,$x.grid),Qx.grid.position.y-=5e-4,Qx.scene.add(Qx.helper),Qx.scene.add(Qx.grid),Qx.helper.visible=kx.axis_helper_visible,Qx.grid.visible=kx.grid_visible;var t=new ff(1,1,1);t.setAttribute("color",new Dd(new Float32Array(72).fill(.3),3));var n=function(e,n,r){for(var i=0;i<4;i++)n[i]=Math.lerp(n[i],n[(i+2)%4],.002);t.attributes.uv.array[2*e+0]=n[0],t.attributes.uv.array[2*e+1]=n[1],t.attributes.uv.array[2*e+2]=n[2],t.attributes.uv.array[2*e+3]=n[1],t.attributes.uv.array[2*e+4]=n[0],t.attributes.uv.array[2*e+5]=n[3],t.attributes.uv.array[2*e+6]=n[2],t.attributes.uv.array[2*e+7]=n[3];for(var a=0;a<4;a++)t.attributes.color.setXYZ(e+a,r,r,r)};n(0,[0,.5,.5,0],.64),n(4,[0,.5,.5,0],.64),n(8,[0,.5,.5,1],1),n(12,[.5,.5,1,0],.5),n(16,[0,.5,.5,0],.8),n(20,[0,.5,.5,0],.8),t.attributes.uv.needsUpdate=!0,t.attributes.color.needsUpdate=!0;var r=(new eb).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAJlXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZhnkus4EoT/4xR7BBaAgjkObMTeYI+/X4GU2swz8yZGaokUCFPIzDJot/733+3+w8uXnFzUXFJN6eIVa6y+cVOu+3Vf5Yrn+7z884jfX9rd+4GnKXAN98+0nv6Ndv0YkOPT3r+2uzyeecozkVxflg62st3Px8hnouDvdnl+u/oMaOnTdp6PH8+0r219+x0zYExlvuCdX0HCdb79vVKwTwztXBvtmY4SlHt92vWv+Lk3dD8A8H33Db/rZVn4gOOe6LWt9A2np130W3t4L+O/WCT+vbL/QnW42vX59Qm/vWfZe927axEd1ZieTb22cu7o2IEznGGJd+aj3OfzrrwLywxYm2y1u6vzo4oH8S1RpjTZss51yMDE6JcHbu/98OG0FeCvfgSjINpbts8u1DBDgZ8Bc4Fm/7ZFzrrV1mOxwspT6OmFyeD469t9b/in7y8T7W0yF7nKGyvs8qYvzDDm7JteECL7wVQPvuLuy/X9ZcQGGNQDc2GD7er3FF3lQ1vh8BwudXSN1+0vkuczARCxtmKMBBi4EsKWJFf2PouAY4GfhuW4gO8wIOrUT6z0MYQEOcXb2ozJcvp69Xcz4QUiNKSQoaaGBlkxakz4W0FCzWnQqKpJsxat2lJIMWlKKSeLUy2HHLPmlHMuueZWQolFSyq5lFJLq74Gwpi6mmqupdbaGou22Jir0b/R0H0PPXbtqedeeu1tIJ8Rh4408iijjjb9DJMQ4GaaeZZZZ1uykNKKS1daeZVVV9tobYcdt+608y677vZm7WH1K2vfmfs1a/Kw5g9R1i9/sEZzzq8pxMKJGmcw5qPAeDYGELQ3zq4iMXpjzji7qg8uBPVYqUbOFGMMBuMSr1ve3H0w91PeHOj+KW/+R8w5o+7fYM4ZdZ+Y+ytvP2BtthNuwyHIvBBMiZAB99t5tDwlkhFiI1ip3RIfk4ZV2sViw25rjaOlONfgfuuFFZEYBSTibAxdGSJxt6vOYXc2qFTfK4vombf0q/nC3/Xjq/vZg3KFtffnxmNOTl5HyTNYM6j2ZMvAl/PSNPNVmz2RVLX4JjY8xZCzT2eGTXgvWHtmbVciPz/7f13d94bfXvPcm63bfHUlqacZjGo5eObp/fRiax9Ur+XlBhN0i4/lwRoYS7QBTBRTMzR93fGqLnwC9HqZfv3pdXe3bUKbBI6uYzFx0ht3B89WxuxvoCpOsNaxwR5LGkb1Qc0ZuDZATC2zWJ9xjw9hXemQ1uIsv7PJ/dzYvQ7D2Nr7daAzc5OXQeiC8GNY8M3cuUZ3TAxJDsoSR4nDlGDYYoiGXsZ5ADGVbq8J8EsA+ZBrc7/W6y/lenvVMHcoyR1ZChD6Fe9OqNKYP2xPqcN0eJAzFqD+litFZK/hYcf77bJJ6nZHdlJ2uR6RmCceOq+/dXUfDUKcmJ+eHfByOmYa0nK7rfmZ+pfxUR4z3DWbcfLaE7Ez8KhTcSwcah4HsIrmd8p0P2f/kVStBmYm8EAsMIXUayHMHqRF0oO+k9vXXo7/eLehbUYHn9Z6q7daMrt3X+a3td2f+NNKJvPUUiLQD7OqNuAheq7g0vH4w6eX/Thz6dEMeTybfPdBLWll2BZsGk8huKxiJ0o4vqlOUi6d1KYpzDQ0VxmdW+JNL6fNkx80VWsNp5HsZGGcztECei+EEbjWprpy1j5WyX5ruBhPJikMxzAbhacwZSpsI9eqNu+wNTQHHXWpYx76xWNOnDtIa4p3hWmjVyJ3pu5bzss8Dvp2m7jiWM33qZ26w4awcWcar36tEwtNbFXyS27Vf8TZ27EuK3vPPNTPKVq1wIyBqZ3VBkEWKfDesqa26aseKFbLXdSS5OyRNqDKjWQqlaICF+yVrPug5Qxb6bHVEXOo0tWyC0lXvMkqiAHLwG6aHzl60nktFlNpAqlZSmyLGUiQ4GYoLaWcnCBfdHiLQpMtUAAUqk3qiBxmbz1jZsbmNNrWJmHlMEKbMU9XJgUCgcL6jJT6RGOsm0n4xMJgkeRAW3BJVJ6KFQtViA2ROoj5GNbntRzLGFbESyXAUABVgonqDn2yeZ9RYFAOextsFveLvQ0PbGYfMZLI4/3qyUmufra6ho1HMhcbNcApZlKJCe+yxK2l07mzbTWADHVgLHX10WJOqt0hNVSQAGpMIXwMVk7W3cAkas9R2JU8w0XVRgaZ9XBkAF+Vcm46PPFqfatV8Klb/ba0I10tSLbM9mBO0ksNrSPJoWiSBiDxGccAyyz4GvlbjXQl1UisO1yrUWPBiiCmPnezg/E1ByihtkLJTCF3FK8UWGODdCqLLDIBfnOiTrbG8lbxVdNGikoZJ5DLODQ3E8/3QpPAnX3s10xIFsXjXoSRwhiLrSypNluyPRZcYEA2mxVzqTgJRModouDsyqzzhBbROnDli5jd1u3eCHfjB+iIwrbzARvE1RB1XbNZIG1hVEIuiK2xTLK+26z4EtJ35Wlk3AoWifGiAUeY0MX8c6PJUAvDX7CrwR6B3WO+OTe6F0eUue7nNE7OvXiwbQ/C4AaVRyY5Q4gZtmlIfREKfzyghKagd8SBZyUyaKfiBuD7d2kC6eGOFMZ1C2wxrzEID7cCmJ2zWhkrUB6/zLFCo/9Te/Ll/h17sGgdwBhKoGqGn4kpWC/7j87InIpCetFBJCHnoDJLkkZGPxuoRD5H9Jkcd2YzovCBNmbaxSoqzEbqFlGUgorJxmid+M2iAy8v6JOQYiJh9HK0jYakWHKRa7PvxzvTDhVdhbqECJLupCHmy2N3HP/OGU949rV1dHStR6jm78QYs5RtZQ7z70xnnnwRriyo6qqdbRDe8C4O74ucFwc1JIUqAbTYZKj6iSFVw8SXgM6itQ0ncATzDmHFMX1binwtEhBudyqOoOsFLm4+X2GjNqwcPV8Pg+R6W2kcSDxnyUpS4Dhqvn1v0I3jeKSH9U4PZG/8PVslMizVWlIxY+MQsiGVIgn0lYEJYKjEBMnMcgdJjmxk9/GR6knJ2JDQqN4lgNVcHOeCJYFjgNh//chtV1O29haOZdCA6PzxcH8jwIIVr0RMBCpzcETQ0rXtKAtOp9nEh9NaJuQ4fc5QI1oG5nlcty/fOqdsTZlsSbayCEEvYh95lgNCrpcJS4lHyAx9InXETio2O3aMxkpnqxQ3uJvPi4hKrXIvxdk28is9nim0u2lhrPpTvZ7t6aCQUvt13NTSpf2TrVviuEXFN7X0NwvddxP/qYXuu4l/30KO7ZVT0f8BbFq8TPkE98QAAAGFaUNDUElDQyBwcm9maWxlAAB4nH2RPUjDQBiG36ZKRSqidhBxyFCdLIiKOJYqFsFCaSu06mBy6R80aUhSXBwF14KDP4tVBxdnXR1cBUHwB8TZwUnRRUr8Lim0iPGO4x7e+96Xu+8AoVFhqtk1CaiaZaTiMTGbWxUDrxAwgCDNQYmZeiK9mIHn+LqHj+93EZ7lXffn6FPyJgN8InGU6YZFvEE8u2npnPeJQ6wkKcTnxBMGXZD4keuyy2+ciw4LPDNkZFLzxCFisdjBcgezkqESzxCHFVWjfCHrssJ5i7NaqbHWPfkLg3ltJc11WqOIYwkJJCFCRg1lVGAhQrtGiokUncc8/COOP0kumVxlMHIsoAoVkuMH/4PfvTUL01NuUjAGdL/Y9scYENgFmnXb/j627eYJ4H8GrrS2v9oA5j5Jr7e18BHQvw1cXLc1eQ+43AGGn3TJkBzJT0soFID3M/qmHDB0C/SuuX1rneP0AchQr5ZvgINDYLxI2ese7+7p7Nu/Na3+/QAs03KLi1mJMgAAAAZiS0dEAIoAiQCJeJUIxwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+gCEQ42BVdOGCUAAAPXSURBVFjDrZbBbxtFFMZ/s7FsR3VjuxfbgBXXKUIosmrFSEhRI1lFiAqpUi89UA7tiRMHru0pF1D/AMoBLnDiitQewi2iB1SpBMeHqFK7zgqjrK1A1l4cxa6whwPMMLu2qzb2u3j3zbz53nzve28tTkYjGRcC0/pSAhAXgr6UTFsHWLSs4OIrmhU+XAEDdEcjBgaYAlfrk2Jf1SJhR1/KMVBl3dGIpGXNDTyQwCRgBabAwwzMNQETPBYCUOAxIeYKDmD1pQyIahJIbAJof0qZTsVA/D9QdahZ62miG8wpAd0FCkgd/KJWVCWZRxIRs/UUqHn7gZSBEpjUmyKdKQGzA2IGI8o3MNgI75uLCE16J9VbCVNpw0xyZgYU9WE6w4dPmgPzSEBIGTylH6I9THW4RYWYrRaRlwU3RWoyMhcNmL09DTz8kZqXECPmzZOWNVbX+AvG8jxMdIbDMSVNGsfmYDKTeXT3JrZ7BECz3QGgWi6O+ZyWRyGb1uvbtQbVchFL3Vy1V7jFwsDd0ShQ/+1aA4CHu/vaZ7tHdF/f0L5qucjGxfOB5JyWx7dbv/zPQMyo87T2mjR6H929qZNwWh63rlT0u3lbZU7LA9D7LNf3cX0/IMBpFhMC1/cBUHG2e8RfmTWq5SKFbFrfzrxtPpMCIJ9JUcimuXWloktkPT04AOCnJ09wfZ/uaITT7TIwPk7q3el29V4AFXu2vYPtHlEtF3m4u6/pDpdnj6IukfItLB82N89U3uXxgy8pVd6jNxgA0BsM+LnRIBqNAvDr/j73Pv6A4d4uT9s14rm3if7wDXXbxml5LGfTeL0TLCFIJuLUbZdOr89v7Y4Wn2vvkUos4h/3SSUWqZaLiK3PP5Pfbf3IcvYC0Xfe4KNPvuD7r+/w/PHvVMsrPHCXOJc/ZP3vGLb7J812h3wmpX8v5GSgxktrV/F37usSKCbMZzNe3L6+Ls3N4fbJZ1IBWk1/uPVOE79w43Jp0z/u47Q8hlLSbHdIJuIonyUEpZVcIBigbrtYQpDPpJglPqKoMPtYPavamYHTqDxt/MLGan4zmYhjCaFbqdPrc+3SKkMpqdsu1y6tUsim2a41OHsmjtc7gbfe5/BZ/d8RPkP8wo3LpU2V4VBKvN4Ja2++xnatQTIR5zhbIdI70Aqv2y7L2TSHz+o4LY/SSo5Z4sXt6+vSaXlsXDyv6QRYyZ0LqDtsJpWzxFuADgZo/PGcZrsTmGBOy6NaLo5NOKX4WeLFV59+KJvtTmCOqy+X8oVFZ7aREtlp4/U/IjWf1cLS2lUKO/f1LRWQ2f+K+lni/wEy2SLHyuxorAAAAABJRU5ErkJggg==");r.magFilter=Jc,r.minFilter=Jc;var i=new Id({vertexColors:!0,map:r});Qx.minecraft_block=new pf(t,i),Qx.minecraft_block.position.set(0,-.51,0),Qx.scene.add(Qx.minecraft_block),Qx.minecraft_block.visible=kx.minecraft_block_visible,function(e){e.scene.add(kw.space)}(Qx),ow(),aw()}ew.prototype=Object.create(d_.prototype),Qx.screenshot=function(){var e=new Rd(Jx);Qx.renderer.setClearColor(e,0),Qx.renderer.render(Qx.scene,Qx.camera);var t=Qx.canvas.toDataURL();Qx.renderer.setClearColor(e);var n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,r=document.createElement("a");r.href=t,r.download="snowstorm_screenshot.png",n&&document.body.appendChild(r),r.click(),n&&document.body.removeChild(r)};var iw=performance.now();function aw(){requestAnimationFrame(aw);var e=performance.now();e-iw>32&&(iw=e,Pw.paused||Pw.tick()),!Qx.canvas.offsetParent||Pw.paused&&document.hasFocus&&!document.hasFocus()||(Qx.controls.update(),kw.updateFacingRotation(Qx.camera),Qx.renderer.render(Qx.scene,Qx.camera),Qx.frames_this_second++,Kx.time=Pw.age)}function ow(){var e=Qx.canvas.parentNode,t=e.clientHeight,n=e.clientWidth;Qx.camera.aspect=n/t,Qx.camera.updateProjectionMatrix(),Qx.renderer.setSize(n,t),Qx.renderer.setPixelRatio(window.devicePixelRatio)}window.addEventListener("resize",ow),window.addEventListener("orientationchange",(function(){setTimeout(ow,150)})),window.addEventListener("keypress",(function(e){document.querySelector('input:focus, div[contenteditable="true"]:focus, textarea:focus')||(32===e.which&&e.ctrlKey?nw():32===e.which&&tw())})),Qx.placeholder_variables={},Qx.frames_this_second=0;const sw={name:"preview",data:function(){return{fps:0,particles:0,loop_mode:"auto",parent_mode:"world",warning_count:0,stats:Kx,collision:!0,placeholder_keys:[],placeholder_values:{},show_placeholder_bar:"true"==localStorage.getItem("snowstorm_show_placeholder_bar"),bake_placeholder_key:null}},components:{FlipVertical2:Nx,Minus:Fx,Play:Bx,Pause:Ux,Hash:Hx,X:jx,CheckCheck:Vx},methods:{updateSize:function(){ow()},showPlaceholderBar:function(){this.show_placeholder_bar=!0,Xx(this.placeholder_keys),localStorage.setItem("snowstorm_show_placeholder_bar","true")},hidePlaceholderBar:function(){this.show_placeholder_bar=!1,localStorage.setItem("snowstorm_show_placeholder_bar","false")},updatePlaceholderValue:function(e,t){for(var n in this.placeholder_values[e]=parseFloat(t.target.value)||0,Qx.placeholder_variables)delete Qx.placeholder_variables[n];var r,i=Yx(this.placeholder_keys);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.placeholder_values[a]||(this.placeholder_values[a]=0),Qx.placeholder_variables[a]=this.placeholder_values[a]}}catch(e){i.e(e)}finally{i.f()}},bakePlaceholderVariableConfirm:function(){this.$refs.bake_placeholder_confirm_dialog.close();var e=this.bake_placeholder_key;!function(e,t){var n=qx(e),r=new RegExp("\\b(".concat(e.replace(".","\\."),"|").concat(n.replace(".","\\."),")\\b"),"g");function i(e){return"string"!=typeof e?e:e.replace(r,t)}$w((function(e){"molang"==e.type&&(e.value instanceof Array?e.set(e.value.map(i)):e.set(i(e.value)))})),Gs("bake placeholder variables")}(e,this.placeholder_values[e]||0)},bakePlaceholderVariable:function(e){this.bake_placeholder_key=e,this.$refs.bake_placeholder_confirm_dialog.showModal()},changeLoopMode:function(){Pw.loop_mode=this.loop_mode},changeParentMode:function(){Pw.parent_mode=this.parent_mode},toggleCollision:function(){Pw.ground_collision=!Pw.ground_collision,this.collision=Pw.ground_collision},getWarningTitle:function(){return 1==this.warning_count?"1 Warning":this.warning_count+" Warnings"},blur:function(){document.activeElement.blur()},startAnimation:tw,togglePause:nw},computed:{particle_counter:function(){return this.particles.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},timestamp:function(){var e=this.stats.time,t=Math.floor(e%1*10).toString();return"".concat(Math.floor(e),":").concat(t)}},mounted:function(){var e=this;rw(this.$refs.canvas),setInterval((function(){e.fps=Qx.frames_this_second,Qx.frames_this_second=0}),1e3),setInterval((function(){e.particles=Pw.particles.length}),200),setInterval((function(){window.document.hasFocus()&&Qx.canvas.offsetParent&&(e.warning_count=(Mx.splice(0,Mx.length),"particles_alpha"!=Lw.particle_appearance_material&&"particles_opaque"!=Lw.particle_appearance_material||!("static"==Lw.particle_color_mode&&9==Lw.particle_color_static.length&&"FF"!=Lw.particle_color_static.substr(-2).toUpperCase()||"expression"==Lw.particle_color_mode&&0==["","1","1.0"].includes(Lw.particle_color_expression[3]))||Mx.push({text:"The effect attempts to use opacity but the selected material does not support opacity"}),Lw.particle_appearance_facing_camera_mode.includes("direction")&&"derive_from_velocity"==Lw.particle_appearance_direction_mode&&("dynamic"!=Lw.particle_motion_mode||Lw.particle_motion_linear_speed&&0!=parseFloat(Lw.particle_motion_linear_speed)?"parametric"!=Lw.particle_motion_mode||Lw.particle_motion_direction.find((function(e){return e&&0!=parseFloat(e)}))||Mx.push({text:"The particles are set to face a direction, but no parametric direction is set"}):Mx.push({text:"The particles are set to face a direction, but no speed is set. Only particles with an initial speed support directions"})),"steady"==Lw.emitter_rate_mode&&"expression"!==Lw.emitter_lifetime_mode&&!isNaN(Lw.emitter_rate_rate)&&1/parseFloat(Lw.emitter_rate_rate)>=parseFloat(Lw.emitter_lifetime_active_time)&&Mx.push({text:"The emitter rate is lower than the emitter lifetime, so particles may not spawn"}),Mx).length)}),500),Us.placeholder_bar=function(){e.show_placeholder_bar&&Xx(e.placeholder_keys)},Qx.updateVariablePlaceholderList=function(){Xx(e.placeholder_keys)}}},lw=sw;var cw=n(561),uw={insert:"head",singleton:!1};sl()(cw.Z,uw);cw.Z.locals;var hw=El(lw,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"preview",attrs:{id:"preview"}},[n("div",{attrs:{id:"canvas_wrapper"}},[n("div",{attrs:{id:"overlay_timestamp"}},[e._v(e._s(e.timestamp))]),e._v(" "),n("canvas",{ref:"canvas",attrs:{id:"canvas"},on:{click:function(t){return e.blur()}}}),e._v(" "),e.show_placeholder_bar?n("div",{staticClass:"placeholder_bar"},[n("ul",[e._l(e.placeholder_keys,(function(t){return n("li",{key:t},[n("label",{attrs:{for:"placeholder_"+t}},[e._v(e._s(t.replace(t.substring(1,t.indexOf(".")),"")))]),e._v(" "),n("input",{attrs:{type:"number",id:"placeholder_"+t},domProps:{value:e.placeholder_values[t]||0},on:{input:function(n){return e.updatePlaceholderValue(t,n)}}}),e._v(" "),t.startsWith("variable")?n("div",{staticClass:"tool",attrs:{title:"Bake variable value into all expressions"},on:{click:function(n){return e.bakePlaceholderVariable(t)}}},[n("CheckCheck",{attrs:{size:20}})],1):e._e()])})),e._v(" "),0==e.placeholder_keys.length?n("li",[n("label",[e._v("No undefined variables found")])]):e._e()],2),e._v(" "),n("div",{staticClass:"tool",attrs:{title:"Hide Placeholder Bar"},on:{click:function(t){return e.hidePlaceholderBar()}}},[n("X",{attrs:{size:22}})],1)]):e._e()]),e._v(" "),n("footer",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.loop_mode,expression:"loop_mode"}],attrs:{id:"loop_mode"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.loop_mode=t.target.multiple?n:n[0]},function(t){return e.changeLoopMode()}]}},[n("option",{attrs:{value:"auto"}},[e._v("Auto")]),e._v(" "),n("option",{attrs:{value:"looping"}},[e._v("Looping")]),e._v(" "),n("option",{attrs:{value:"once"}},[e._v("Once")])]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.parent_mode,expression:"parent_mode"}],attrs:{id:"parent_mode"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.parent_mode=t.target.multiple?n:n[0]},function(t){return e.changeParentMode()}]}},[n("option",{attrs:{value:"world"}},[e._v("World")]),e._v(" "),n("option",{attrs:{value:"entity"}},[e._v("Entity")]),e._v(" "),n("option",{attrs:{value:"locator"}},[e._v("Locator")])]),e._v(" "),n("div",{staticClass:"tool ground_collision",class:{toggle_enabled:e.collision},attrs:{title:"Preview Collisions"},on:{click:function(t){return e.toggleCollision()}}},[e.collision?n("FlipVertical2",{attrs:{size:20}}):n("Minus",{attrs:{size:20}})],1),e._v(" "),n("div",{staticClass:"tool",class:{toggle_enabled:e.show_placeholder_bar},attrs:{title:"Show Placeholder Bar"},on:{click:function(t){e.show_placeholder_bar?e.hidePlaceholderBar():e.showPlaceholderBar()}}},[n("Hash",{attrs:{size:22}})],1),e._v(" "),n("div",{staticClass:"spacing"}),e._v(" "),n("div",{staticClass:"tool",attrs:{title:"Play"},on:{click:function(t){return e.startAnimation()}}},[n("Play",{attrs:{size:22}})],1),e._v(" "),n("div",{staticClass:"tool",attrs:{title:"Pause"},on:{click:function(t){return e.togglePause()}}},[n("Pause",{attrs:{size:22}})],1),e._v(" "),n("div",{staticClass:"spacing"}),e._v(" "),e.warning_count?n("div",{staticClass:"tool warning",attrs:{title:e.getWarningTitle()},on:{click:function(t){return e.$emit("opendialog","warnings")}}},[n("i",{staticClass:"unicode_icon warn"},[e._v("")]),e._v(e._s(e.warning_count))]):e._e(),e._v(" "),n("div",{staticClass:"stat"},[e._v(e._s(e.particle_counter)+" P")]),e._v(" "),n("div",{staticClass:"stat",staticStyle:{width:"66px"}},[e._v(e._s(e.fps)+" FPS")])]),e._v(" "),n("dialog",{ref:"bake_placeholder_confirm_dialog",staticClass:"modal_dialog",staticStyle:{"max-width":"308px"},attrs:{id:"bake_placeholder_confirm_dialog"}},[n("div",{staticClass:"form_bar"},[e._v("Do you want to replace all occurrences of '"+e._s(e.bake_placeholder_key)+"' with the value '"+e._s(e.placeholder_values[e.bake_placeholder_key])+"'?")]),e._v(" "),n("div",{staticClass:"button_bar"},[n("button",{on:{click:function(t){return e.bakePlaceholderVariableConfirm()}}},[e._v("Confirm")]),e._v(" "),n("button",{on:{click:function(t){return e.$refs.bake_placeholder_confirm_dialog.close()}}},[e._v("Cancel")])])])])}),[],!1,null,"1e10ce7d",null);const pw=hw.exports;function dw(e){return dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dw(e)}function fw(){fw=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",v={};function g(){}function _(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&r.call(w,o)&&(b=w);var M=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==dw(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(dw(t)+" is not iterable")}return _.prototype=y,i(M,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,l,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function mw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vw(r.key),r)}}function vw(e){var t=function(e,t){if("object"!=dw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dw(t)?t:String(t)}function gw(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function _w(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){gw(a,r,i,o,s,"next",e)}function s(e){gw(a,r,i,o,s,"throw",e)}o(void 0)}))}}var yw={},bw={},xw={format_version:"1.10.0",particle_effect:{description:{identifier:"",basic_render_parameters:{texture:""}},components:{}}};function ww(){return Mw.apply(this,arguments)}function Mw(){return Mw=_w(fw().mark((function e(){var t,n,r;return fw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){Bs.import({extensions:["json"]},(function(t){t[0]?e(JSON.parse(t[0].content)):e()}))}));case 2:return n=e.sent,r=(null==n||null===(t=n.particle_effect)||void 0===t||null===(t=t.description)||void 0===t?void 0:t.identifier)||"",yw[r]||(yw[r]={}),yw[r].json=n,delete kw.child_configs[r],e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Sw(e){return Ew.apply(this,arguments)}function Ew(){return(Ew=_w(fw().mark((function e(t){var n;return fw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yw[t]||(yw[t]={}),(n=JSON.parse(JSON.stringify(xw))).particle_effect.description.identifier=t,yw[t].json=n,delete kw.child_configs[t],e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aw(e){return Tw.apply(this,arguments)}function Tw(){return(Tw=_w(fw().mark((function e(t){var n;return fw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){Bs.import({readtype:"image",extensions:["png"]},(function(t){t[0]?e(t[0].content):e()}))}));case 2:n=e.sent,yw[t]||(yw[t]={}),yw[t].texture=n,kw.child_configs[t]&&kw.child_configs[t].updateTexture();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.addEventListener("focus",(function(e){for(var t in bw)bw[t].updateConfig()}));var Cw=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.identifier=t,this.editor_tab=n}var t,n,r;return t=e,(n=[{key:"updateConfig",value:function(){var e=JSON.parse(this.editor_tab.generateFileForParentEffect()),t=this.editor_tab.getTextureForParentEffect();yw[this.identifier].json=e,yw[this.identifier].texture=t,delete kw.child_configs[this.identifier];var n=this.editor_tab.getSubEffectDataForParentEffect();for(var r in n)bw[r]||(yw[r]||(yw[r]={}),yw[r].json=JSON.parse(n[r].json),yw[r].texture=n[r].texture,delete kw.child_configs[r])}}])&&mw(t.prototype,n),r&&mw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.getSubEffectDataForParentEffect=function(){var e={};for(var t in yw){var n=yw[t],r=n.json,i=n.texture;e[t]={json:JSON.stringify(r),texture:i}}return e},window.EventSubEffects=yw,window.SubEffectEditors=bw;var kw=new _x.Scene({fetchTexture:function(e){var t=e==Lw;if(!t&&yw[e.identifier]&&yw[e.identifier].texture)return yw[e.identifier].texture;if(t&&Bl.internal_changes)return Bl.source;if(window.Data){var n=e.particle_texture_path;if(Cs&&n){var r=Ls(4);return Cs.postMessage({type:"request_texture",request_id:r,path:n}),new Promise((function(e,t){window.addEventListener("message",(function t(n){if("provide_texture"==n.data.type&&n.data.request_id==r){var i=n.data.url&&n.data.url+"?"+Math.floor(1e3*Math.random());window.removeEventListener("message",t),e(i)}}),!1)}))}return t&&window.Data.texture.texture.inputs.image.image&&window.Data.texture.texture.inputs.image.image.loaded?window.Data.texture.texture.inputs.image.image.data:void 0}},fetchParticleFile:function(e){if(e){if(Cs){var t=Ls(4);return Cs.postMessage({type:"request_particle_file",request_id:t,identifier:e}),new Promise((function(n,r){window.addEventListener("message",(function r(i){if("provide_particle_file"==i.data.type&&i.data.request_id==t){window.removeEventListener("message",r);var a=i.data.content?JSON.parse(i.data.content):null;yw[e]={json:a},n(a)}}),!1)}))}var n;return(null===(n=yw[e])||void 0===n?void 0:n.json)||null}}}),Lw=new _x.Config(kw),Pw=new _x.Emitter(kw,Lw,{loop_mode:"auto",parent_mode:"world"}),Rw={resetAll:function(){}};window.Emitter=Pw,Bl.linkEmitter(Pw,Lw),Lw.unsupported_fields={},Lw.reset(),Lw.onTextureUpdate=function(){window.Data&&(Bl.internal_changes||("placeholder"==Lw.texture_source_category?Bl.source="":Bl.source=Lw.texture.image.src,Bl.updateCanvasFromSource()),window.Data.texture.texture.inputs.image.image.hidden=!0,window.Data.texture.texture.inputs.image.image.hidden=!1)},Pw.Molang.global_variables={get"query.distance_from_camera"(){return Qx.camera.position.length()},"query.lod_index":function(e){e.sort((function(e,t){return e-t}));var t=Qx.camera.position.length(),n=e.length;return e.forEachReverse((function(e,r){t<e&&(n=r)})),n},"query.camera_distance_range_lerp":function(e,t){var n=Qx.camera.position.length();return Math.clamp(Math.getLerp(e,t,n),0,1)}};var Iw=Pw.Molang.variableHandler;function zw(e){return function(e){if(Array.isArray(e))return Nw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Dw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ow(e){return Ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ow(e)}function Dw(e,t){if(e){if("string"==typeof e)return Nw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nw(e,t):void 0}}function Nw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bw(r.key),r)}}function Bw(e){var t=function(e,t){if("object"!=Ow(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ow(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ow(t)?t:String(t)}Pw.Molang.variableHandler=function(e,t){var n=Iw(e,t);return null!=n?n:Qx.placeholder_variables[e]};var Uw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t.type||"molang",this.isInput=!0,this.id=t.id,this.label=t.label,this.info=t.info,this.placeholder=t.placeholder,this.axis_count=t.axis_count||1,this.required=1==t.required,this.expanded=1==t.expanded,this.expandable=["molang","text","number"].includes(this.type)&&-1!=this.axis_count,"gradient"===this.type&&(this.value=t.value||[]),this.options=t.options,this.mode_groups=t.mode_groups,!this.mode_groups||this.mode_groups[0]instanceof Array||(this.mode_groups=[this.mode_groups]),this.enabled_modes=t.enabled_modes,this.condition=t.condition,this.updatePreview=t.updatePreview,this.onchange=t.onchange,"image"===this.type&&(this.image={name:"",data:"",hidden:!1},this.image_element=Pw.config.texture.image,this.allow_upload=t.allow_upload),"number"==this.type&&(this.step=t.step,this.min=t.min,this.max=t.max),"event_timeline"==this.type&&(this.timeline=[]),this.id?this.value=Lw[this.id]:null!=t.value?this.value=t.value:["molang","text"].includes(this.type)&&(this.value="")}var t,n,r;return t=e,n=[{key:"value",get:function(){return this._value},set:function(e){if(this._value=e,"number"==this.type&&(e instanceof Array?e.forEach((function(t,n){e[n]=parseFloat(t)})):e=parseFloat(e)),this.id&&Lw.set(this.id,e),"select_custom"!==this.type||this.options[e]?"select"!==this.type&&"select_custom"!==this.type||(this.meta_value=this.options[e]):this.meta_value=this.options.custom,"event_timeline"==this.type)if(this.timeline.splice(0),this._value instanceof Array){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Dw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this._value);try{for(n.s();!(t=n.n()).done;){var r=t.value,i={uuid:Ps(),time:r.distance,event:r.effects instanceof Array?r.effects:[r.effects]};this.timeline.push(i)}}catch(e){n.e(e)}finally{n.f()}}else for(var a in this._value)this.timeline.push({uuid:Ps(),time:parseFloat(a),event:this._value[a]instanceof Array?this._value[a]:[this._value[a]]})}},{key:"toggleExpand",value:function(){this.expandable&&(this.expanded=!this.expanded)}},{key:"update",value:function(e){var t=this;return this.mode_groups instanceof Array&&("select"===this.type||"select_custom"===this.type||"checkbox"==this.type)&&this.mode_groups.forEach((function(n,r){n instanceof Array&&(n=t.mode_groups[r]=e[n[0]][n[1]]),n._selected_mode=t.value})),this}},{key:"emitInput",value:function(){this.change(event)}},{key:"change",value:function(e,t){var n=this,r=this;if("image"===this.type&&e){var i=e instanceof Uint8Array?new File([e],"unknown.png"):e.target.files[0];if(i){var a=new FileReader;a.onloadend=function(){r.image.name=i.name,r.image.data=Bl.source=a.result,Bl.updateCanvasFromSource(),r.image.loaded=!0,r.image.hidden=!0,r.image.hidden=!1,Pw.config.updateTexture()},a.readAsDataURL(i)}}if("select"!==this.type&&"select_custom"!==this.type||e instanceof Event&&"SELECT"==e.target.nodeName&&(this.value=e.target.selectedOptions[0].id),"color"===this.type&&"object"==Ow(this.value)&&(this.value=this.value.hex8),"event_timeline"==this.type)if(this._value instanceof Array)this._value.empty(),this.timeline.sort((function(e,t){return e.time-t.time})),this.timeline.forEach((function(e){var t={distance:e.time,effects:e.event};n._value.push(t)}));else{for(var o in this._value)delete this._value[o];this.timeline.sort((function(e,t){return e.time-t.time})),this.timeline.forEach((function(e){n._value[e.time.toFixed(2)]=e.event}))}return"function"==typeof this.onchange&&this.onchange(e),"function"==typeof this.updatePreview&&this.updatePreview(this.value),"color"==this.type&&t&&t.querySelector('.input_wrapper[input_type="color"]:active'),(e instanceof Event||e instanceof Uint8Array||"color"==this.type&&t)&&(bl.setup&&["molang","text"].includes(this.type)&&this.updateExpressionBar(!1),Gs("change input",e,"color"==this.type&&t)),this.update(),this}},{key:"set",value:function(e){var t;if(void 0!==e)return"select"===this.type||"select_custom"===this.type?(this.value=e,"select_custom"!==this.type||this.options[this.value]?this.meta_value=this.options[this.value]:this.meta_value=this.options.custom):this.value instanceof Array?e instanceof Array&&(t=this.value).splice.apply(t,[0,1/0].concat(zw(e))):this.value=e,this.change(),this}},{key:"reset",value:function(){return"image"==this.type&&(this.image.data=Bl.source="",Bl.internal_changes=!1,Bl.updateCanvasFromSource(),this.image.name="",this.image.loaded=!1,this.image.hidden=!0,this.image.hidden=!1),"function"==typeof this.updatePreview&&this.updatePreview(this.value),this}},{key:"updateExpressionBar",value:function(e){var t=1==this.axis_count?this.value:this.value[bl.axis];return bl.updateText(t,"molang"==this.type?"molang":"generic",e),this}},{key:"isVisible",value:function(e){return"function"==typeof this.condition?this.condition(e):!this.enabled_modes||null===e._selected_mode||this.enabled_modes.includes(e._selected_mode)}},{key:"focus",value:function(e){return bl.input=this,void 0!==e&&(bl.axis=e),this.updateExpressionBar(!0),this}}],n&&Fw(t.prototype,n),r&&Fw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hw(e){return Hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hw(e)}function jw(e){return function(e){if(Array.isArray(e))return Vw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vw(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ww(r.key),r)}}function Ww(e){var t=function(e,t){if("object"!=Hw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hw(t)?t:String(t)}function qw(){return qw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qw.apply(this,arguments)}function Xw(e,t){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xw(e,t)}function Yw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zw(e);if(t){var i=Zw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zw(e){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zw(e)}var Jw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xw(e,t)}(a,e);var t,n,r,i=Yw(a);function a(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=i.call.apply(i,[this].concat(r))).default_value=[{percent:0,color:"#ffffffff",id:Ls(8)},{percent:100,color:"#000000ff",id:Ls(8)}],t.value.length||(e=t.value).splice.apply(e,[0,0].concat(jw(t.default_value))),t.selected=t.value[0],t}return t=a,n=[{key:"change",value:function(e,t,n){return this.selected.color=e.hex8,Gs("change gradient",e,!(!t||!t.parentNode.querySelector(":active"))),this}},{key:"update",value:function(e){var t=this;if(this.selected){var n=this.value.findIndex((function(e){return e.percent==t.selected.percent}));qw(Zw(a.prototype),"update",this).call(this),this.selected=this.value[Math.clamp(n,0,this.value.length-1)]}}},{key:"reset",value:function(){var e;return(e=this.value).splice.apply(e,[0,1/0].concat(jw(this.default_value))),this.selected=this.value[0],this}},{key:"sortValues",value:function(){return this.value.sort((function(e,t){return e.percent-t.percent})),this}},{key:"export",value:function(e){var t={};return this.value.forEach((function(n){var r=n.percent/100*e;(r=Math.roundTo(r,2).toString()).search(/\./)<0&&(r+=".0");var i="#"+n.color.substr(7,2)+n.color.substr(1,6);t[r]=i})),t}},{key:"registerEdit",value:function(){return Gs("update gradient"),this}},{key:"addPoint",value:function(){return this.value.push({percent:50,color:"#ffffffff"}),this.selected=this.value[this.value.length-1],this.sortValues(),Gs("add gradient point"),this}},{key:"removePoint",value:function(){if(this.value.length>2){var e=this.value.remove(this.selected);this.selected=this.value[Math.clamp(e-1,0,this.value.length-1)],Gs("remove gradient point")}return this}}],n&&Gw(t.prototype,n),r&&Gw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Uw);function Qw(e){return Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qw(e)}var Kw={setup:{label:"Quick Setup"},effect:{label:"File",meta:{label:"File",_folded:!1,inputs:{identifier:new Uw({id:"identifier",label:"Identifier",info:"This is the name the particle emitter is referred to as. Should have a namespace.",placeholder:"space:name",required:!0,type:"text",onchange:function(){document.title=(this.value?this.value+" - ":"")+"Snowstorm"}})}},space:{label:"Space",_folded:!1,inputs:{local_position:new Uw({id:"space_local_position",label:"Local Position",info:"When enabled and the effect is attached to an entity, the particles will simulate in entity space",type:"checkbox",onchange:function(e){Kw.effect.space.inputs.local_position.value||Kw.effect.space.inputs.local_rotation.set(!1)}}),local_rotation:new Uw({id:"space_local_rotation",label:"Local Rotation",info:"When enabled and the effect is attached to an entity, the particle rotation will simulate in entity space. Only works if local position is enabled too.",type:"checkbox",onchange:function(e){Kw.effect.space.inputs.local_rotation.value&&Kw.effect.space.inputs.local_position.set(!0)}}),local_velocity:new Uw({id:"space_local_velocity",label:"Local Velocity",info:"When enabled, the emitter's velocity will be added to the initial particle velocity.",type:"checkbox"})}}},emitter:{label:"Emitter",rate:{label:"Spawn Amount",_folded:!1,inputs:{mode:new Uw({id:"emitter_rate_mode",type:"select",label:"Mode",info:"",mode_groups:["emitter","rate"],options:{steady:"Steady",instant:"Instant",manual:"Manual"}}),rate:new Uw({id:"emitter_rate_rate",label:"Rate",info:"How often a particle is emitted, in particles/second.",enabled_modes:["steady"],required:!0,value:4}),amount:new Uw({id:"emitter_rate_amount",label:"Amount",info:"How many particles are spawned at once",enabled_modes:["instant"],required:!0}),maximum:new Uw({id:"emitter_rate_maximum",label:"Maximum",info:"Maximum amount of particles that can be active before the emitter stops spawning new ones.",enabled_modes:["steady","manual"],required:!0,value:100})}},lifetime:{label:"Emitter Lifetime",_folded:!1,inputs:{mode:new Uw({id:"emitter_lifetime_mode",type:"select",label:"Mode",info:"",mode_groups:["emitter","lifetime"],options:{looping:"Looping",once:"Once",expression:"Expression"}}),active_time:new Uw({id:"emitter_lifetime_active_time",label:"Active Time",info:"How long the emitter will be active for",enabled_modes:["looping","once"],required:!0,value:1}),sleep_time:new Uw({id:"emitter_lifetime_sleep_time",label:"Sleep Time",info:"How long the emitter will pause and not emit particles, when used in looping mode.",enabled_modes:["looping"]}),activation:new Uw({id:"emitter_lifetime_activation",label:"Activation",info:"When the expression is non-zero, the emitter will start emitting particles",required:!0,enabled_modes:["expression"]}),expiration:new Uw({id:"emitter_lifetime_expiration",label:"Expiration",info:"Emitter will expire if the expression is non-zero",enabled_modes:["expression"]})}},shape:{label:"Spawn Shape",_folded:!1,inputs:{mode:new Uw({id:"emitter_shape_mode",type:"select",label:"Mode",mode_groups:["emitter","shape"],options:{point:"Point",sphere:"Sphere",box:"Box",disc:"Disc",entity_aabb:"Entity Bounding Box"}}),offset:new Uw({id:"emitter_shape_offset",label:"Offset",info:"Specifies the offset from the emitter to emit each particle",axis_count:3,enabled_modes:["point","sphere","box","custom","disc"]}),radius:new Uw({id:"emitter_shape_radius",label:"Radius",required:!0,info:"Sphere or disc radius",enabled_modes:["sphere","disc"]}),half_dimensions:new Uw({id:"emitter_shape_half_dimensions",label:"Box Size",info:"Half dimensions of the box formed around the emitter",axis_count:3,enabled_modes:["box"]}),plane_normal:new Uw({id:"emitter_shape_plane_normal",label:"Plane Normal",info:"Specifies the normal of the disc plane, the disc will be perpendicular to this direction",axis_count:3,enabled_modes:["disc"]}),surface_only:new Uw({id:"emitter_shape_surface_only",label:"Surface Only",info:"Emit only from the surface of the shape",type:"checkbox",enabled_modes:["sphere","box","entity_aabb","disc"]})}}},motion:{label:"Motion",motion:{label:"Motion",_folded:!1,inputs:{mode:new Uw({id:"particle_motion_mode",type:"select",label:"Mode",mode_groups:["motion","motion"],options:{dynamic:"Dynamic",parametric:"Parametric",static:"Static"}}),direction_mode:new Uw({id:"particle_direction_mode",type:"select",label:"Direction",info:"The direction of emitted particles in regards to the emitter shape",enabled_modes:["dynamic"],options:{outwards:"Outwards",inwards:"Inwards",direction:"Custom"}}),direction:new Uw({id:"particle_direction_direction",label:"Direction",info:"The direction of emitted particles",axis_count:3,enabled_modes:["dynamic"],condition:function(e){return"dynamic"==e.inputs.mode.value&&"direction"==e.inputs.direction_mode.value}}),linear_speed:new Uw({id:"particle_motion_linear_speed",label:"Speed",info:"Starts the particle with a specified speed, using the direction specified by the emitter shape",enabled_modes:["dynamic"],required:!0}),linear_acceleration:new Uw({id:"particle_motion_linear_acceleration",label:"Acceleration",info:"The linear acceleration applied to the particle in blocks/sec/sec",axis_count:3,enabled_modes:["dynamic"]}),linear_drag_coefficient:new Uw({id:"particle_motion_linear_drag_coefficient",label:"Linear Drag",info:"Think of this as air-drag.  The higher the value, the more drag.",enabled_modes:["dynamic"]}),relative_position:new Uw({id:"particle_motion_relative_position",label:"Offset",info:"Directly set the position relative to the emitter",axis_count:3,enabled_modes:["parametric"]}),relative_direction:new Uw({id:"particle_motion_direction",label:"Direction",info:"Directly set the 3d direction of the particle",axis_count:3,enabled_modes:["parametric"]})}},rotation:{label:"Rotation",_folded:!1,inputs:{mode:new Uw({id:"particle_rotation_mode",type:"select",label:"Mode",mode_groups:["motion","rotation"],options:{dynamic:"Dynamic",parametric:"Parametric"}}),initial_rotation:new Uw({id:"particle_rotation_initial_rotation",label:"Start Rotation",info:"Specifies the initial rotation in degrees",enabled_modes:["dynamic"]}),rotation_rate:new Uw({id:"particle_rotation_rotation_rate",label:"Speed",info:"Specifies the spin rate in degrees/second",enabled_modes:["dynamic"]}),rotation_acceleration:new Uw({id:"particle_rotation_rotation_acceleration",label:"Acceleration",info:"Acceleration applied to the rotation speed of the particle in degrees/sec/sec.",enabled_modes:["dynamic"]}),rotation_drag_coefficient:new Uw({id:"particle_rotation_rotation_drag_coefficient",label:"Linear Drag",info:"Rotation resistance. Higher numbers will retard the rotation over time.",enabled_modes:["dynamic"]}),rotation:new Uw({id:"particle_rotation_rotation",label:"Rotation",info:"Directly set the rotation of the particle",enabled_modes:["parametric"]})}},collision:{label:"Collision",_folded:!1,inputs:{toggle:new Uw({id:"particle_collision_toggle",label:"Collide",info:"Enable collision of the particle with the world",type:"checkbox",mode_groups:["motion","collision"]}),collision_radius:new Uw({id:"particle_collision_collision_radius",label:"Radius",info:"The radius of the particle, as used for collision.",min:0,max:.5,step:.05,required:!0,type:"number",enabled_modes:[!0]}),collision_drag:new Uw({id:"particle_collision_collision_drag",label:"Collision Drag",info:"Alters the speed of the particle when it has collided",type:"number",step:.1,enabled_modes:[!0]}),coefficient_of_restitution:new Uw({id:"particle_collision_coefficient_of_restitution",label:"Bounciness",info:"The amount of momentum that is maintained on bounce. Set to 0.0 to not bounce, 1.0 to bounce back up to original height",type:"number",step:.1,enabled_modes:[!0]}),condition:new Uw({id:"particle_collision_enabled",label:"Condition",info:"Enables collision when true / non-zero or unset",enabled_modes:[!0]}),events:new Uw({id:"particle_collision_events",label:"Events",info:"Events to fire when the particle collides",type:"event_speed_list",enabled_modes:[!0]}),expire_on_contact:new Uw({id:"particle_collision_expire_on_contact",label:"Expire On Contact",info:"Removes the particle when it hits a block",type:"checkbox",enabled_modes:[!0]})}}},appearance:{label:"Appearance",appearance:{label:"Appearance",_folded:!1,inputs:{size:new Uw({id:"particle_appearance_size",label:"Size",info:"Specifies the x/y size of the particle billboard.",axis_count:2,value:[.2,.2]}),material:new Uw({id:"particle_appearance_material",type:"select_custom",info:"Material to use for the particles",label:"Material",options:{particles_alpha:"Alpha Test",particles_blend:"Blend",particles_add:"Additive",particles_opaque:"Opaque",custom:"Custom:"}}),facing_camera_mode:new Uw({id:"particle_appearance_facing_camera_mode",type:"select",info:"Modes to orient the particle billboards facing the camera",label:"Facing",options:{rotate_xyz:"Rotate XYZ",rotate_y:"Rotate Y",lookat_xyz:"Look at XYZ",lookat_y:"Look at Y",lookat_direction:"Look at Direction",direction_x:"Direction X",direction_y:"Direction Y",direction_z:"Direction Z",emitter_transform_xy:"Emitter XY-Plane",emitter_transform_xz:"Emitter XZ-Plane",emitter_transform_yz:"Emitter YZ-Plane"}}),direction_mode:new Uw({id:"particle_appearance_direction_mode",type:"select",info:"Specifies how to calculate the billboard direction of a particle",label:"Direction",options:{derive_from_velocity:"From Motion",custom:"Custom"},condition:function(e){return"direction"==e.inputs.facing_camera_mode.value.substr(0,9)||"lookat_direction"==e.inputs.facing_camera_mode.value}}),speed_threshold:new Uw({id:"particle_appearance_speed_threshold",label:"Min Speed",info:"The direction is set if the speed of the particle is above the threshold. The default is 0.01",type:"number",step:.01,condition:function(e){return"direction"==e.inputs.facing_camera_mode.value.substr(0,9)||"lookat_direction"==e.inputs.facing_camera_mode.value&&"derive_from_velocity"==e.inputs.direction_mode.value}}),direction:new Uw({id:"particle_appearance_direction",label:"Direction",info:"The facing direction of emitted particles",axis_count:3,condition:function(e){return"direction"==e.inputs.facing_camera_mode.value.substr(0,9)||"lookat_direction"==e.inputs.facing_camera_mode.value&&"custom"==e.inputs.direction_mode.value}}),light:new Uw({id:"particle_color_light",label:"Environment Lighting",type:"checkbox",info:"If enabled, the particle gets darker at night and in darker areas. Otherwise the particle always displays at full brightness."})}},color:{label:"Color",_folded:!1,inputs:{mode:new Uw({id:"particle_color_mode",type:"select",label:"Color Mode",mode_groups:["appearance","color"],options:{static:"Static",gradient:"Gradient",expression:"Expression"},onchange:function(){"gradient"==Kw.appearance.color.inputs.mode.value&&(0==Kw.appearance.color.inputs.range.value&&(Kw.appearance.color.inputs.range.value=1),Kw.appearance.color.inputs.interpolant.value||(Kw.appearance.color.inputs.interpolant.value="v.particle_age / v.particle_lifetime"))}}),picker:new Uw({id:"particle_color_static",label:"Color",type:"color",enabled_modes:["static"],info:"Set a static color for all emitted particles. Transparency is supported if the material supports blending."}),interpolant:new Uw({id:"particle_color_interpolant",label:"Interpolant",info:'Interpolant for the gradient value. A color for each particle will be picked from the gradient using the result of this expression, between 0 and "Range".',enabled_modes:["gradient"]}),range:new Uw({id:"particle_color_range",label:"Range",info:"The range of the color gradient. By default, gradients range from 0 to 1.",type:"number",value:1,enabled_modes:["gradient"]}),gradient:new Jw({id:"particle_color_gradient",label:"Gradient",info:"Create a gradient by setting, arranging, and recoloring individual color points.",type:"gradient",enabled_modes:["gradient"]}),expression:new Uw({id:"particle_color_expression",label:"Color",info:"Set the color per particle using Molang expressions in RGBA channels between 0 and 1. Alpha channel is supported if the material supports blending.",axis_count:4,enabled_modes:["expression"]})}}},texture:{label:"Texture & UV",texture:{label:"Texture",_folded:!1,inputs:{path:new Uw({id:"particle_texture_path",type:"text",info:"Path to the texture, starting from the texture pack. Example: textures/particle/snowflake",placeholder:"textures/particle/particles",label:"Texture",updatePreview:function(){Lw.updateTexture()}}),image:new Uw({id:"particle_texture_image",type:"image",allow_upload:!Cs,updatePreview:function(e){Lw.updateTexture()}})}},uv:{label:"UV",_folded:!1,inputs:{mode:new Uw({id:"particle_texture_mode",type:"select",label:"UV Mode",mode_groups:["texture","uv"],options:{static:"Static",full:"Full Size",animated:"Animated"}}),size:new Uw({id:"particle_texture_size",label:"Texture Size",info:"Resolution of the texture, used for UV mapping",type:"number",axis_count:2,required:!0,value:[16,16],enabled_modes:["static","animated"]}),uv:new Uw({id:"particle_texture_uv",label:"UV Start",info:"UV start coordinates",axis_count:2,required:!0,value:[0,0],enabled_modes:["static","animated"]}),uv_size:new Uw({id:"particle_texture_uv_size",label:"UV Size",info:"UV size coordinates",axis_count:2,value:[16,16],enabled_modes:["static","animated"]}),uv_step:new Uw({id:"particle_texture_uv_step",label:"UV Step",info:"UV Offset per frame",axis_count:2,enabled_modes:["animated"]}),frames_per_second:new Uw({id:"particle_texture_frames_per_second",label:"FPS",info:"Animation frames per second",type:"number",min:0,enabled_modes:["animated"]}),max_frame:new Uw({id:"particle_texture_max_frame",label:"Max Frame",info:"Maximum amount of animation frames to draw from the flipbook",enabled_modes:["animated"]}),stretch_to_lifetime:new Uw({id:"particle_texture_stretch_to_lifetime",label:"Stretch To Lifetime",info:"Enable to stretch the frames in the animation to the expected lifetime of the particle",type:"checkbox",enabled_modes:["animated"]}),loop:new Uw({id:"particle_texture_loop",label:"Loop",info:"Loop the texture animation",type:"checkbox",enabled_modes:["animated"]})}}},lifetime:{label:"Time",lifetime:{label:"Particle Lifetime",_folded:!1,inputs:{max_lifetime:new Uw({id:"particle_lifetime_max_lifetime",label:"Max Age",info:"Maximum age of the particle in seconds",value:1}),expiration_expression:new Uw({id:"particle_lifetime_expiration_expression",label:"Kill Expression",info:"This expression makes the particle expire when true (non-zero)"}),kill_plane:new Uw({id:"particle_lifetime_kill_plane",label:"Kill Plane",type:"number",step:.1,info:"Particles that cross this plane expire. The plane is relative to the emitter, but oriented in world space. The four parameters are the usual 4 elements of a plane equation.",axis_count:4}),expire_in:new Uw({id:"particle_lifetime_expire_in",label:"Kill in Blocks",info:"List of blocks that let the particle expire on contact. Enter the block IDs including the namespace.",placeholder:"minecraft:stone",axis_count:-1,type:"text"}),expire_outside:new Uw({id:"particle_lifetime_expire_outside",label:"Only in Blocks",info:"List of blocks outside of which the particle expires. Enter the block IDs including the namespace.",placeholder:"minecraft:air",axis_count:-1,type:"text"})}}},events:{label:"Events",events:{label:"Events",_folded:!1,type:"events",events:[]},emitter_events:{label:"Emitter Event Triggers",_folded:!1,inputs:{creation:new Uw({id:"emitter_events_creation",label:"On Creation",info:"Events to fire when the emitter is spawned",type:"event_list"}),expiration:new Uw({id:"emitter_events_expiration",label:"On Expiration",info:"Events to fire when the emitter stops to exist",type:"event_list"}),travel_distance:new Uw({id:"emitter_events_distance",label:"Travel Distance",info:"Fire an event when the emitter has moved a certain distance. Emitters can move when they are attached to an entity that moves. Distances are specified in blocks.",type:"event_timeline"}),looping_travel_distance:new Uw({id:"emitter_events_distance_looping",label:"Travel Distance Looping",info:"Fire an event every time the emitter has moved a certain distance. Emitters can move when they are attached to an entity that moves. Distances are specified in blocks.",type:"event_timeline"}),timeline:new Uw({id:"emitter_events_timeline",label:"Timeline",info:"Fire events at specific times during the lifetime of the emitter",type:"event_timeline"})}},particle_events:{label:"Particle Event Triggers",_folded:!1,inputs:{creation:new Uw({id:"particle_events_creation",label:"On Creation",info:"Events to fire when the particle is spawned",type:"event_list"}),expiration:new Uw({id:"particle_events_expiration",label:"On Expiration",info:"Events to fire when the particle stops to exist",type:"event_list"}),timeline:new Uw({id:"particle_events_timeline",label:"Timeline",info:"Fire events at specific times during the lifetime of the particle",type:"event_timeline"})}}},variables:{label:"Variables & Curves",variables:{label:"Variables",_folded:!1,inputs:{creation_vars:new Uw({id:"variables_creation_vars",label:"Start Variables",info:"Set up Molang variables when the emitter starts",placeholder:"variable.name = value;",type:"molang",axis_count:-1,onchange:function(){}}),tick_vars:new Uw({id:"variables_tick_vars",label:"Tick Variables",info:"Molang variables that get processed for every emitter update",placeholder:"variable.name = value;",type:"molang",axis_count:-1,onchange:function(){}}),particle_update:new Uw({id:"particle_update_expression",label:"Particle Update",info:"Run an expression on the emitter for every particle when the emitter updates",placeholder:"variable.name = value;",type:"molang",axis_count:-1}),particle_render:new Uw({id:"particle_render_expression",label:"Particle Render",info:"Run an expression on the emitter each time a particle is rendered",placeholder:"variable.name = value;",type:"molang",axis_count:-1})}},curves:{label:"Curves",_folded:!1,type:"curves",curves:[]}}};function $w(e){for(var t in Kw)for(var n in Kw[t]){var r=Kw[t][n];if("object"===Qw(r))for(var i in r.inputs)r.inputs[i]instanceof Uw&&e(r.inputs[i],i)}}$w((function(e){e.update(Kw)})),window.Data=Kw;const eM=Kw;function tM(e){return function(e){if(Array.isArray(e))return iM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rM(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rM(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function rM(e,t){if(e){if("string"==typeof e)return iM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iM(e,t):void 0}}function iM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aM(e){return aM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aM(e)}function oM(e,t){return"molang"===t.type?(isNaN(e)?"string"==typeof e&&e.includes("\n")&&(e=e.replace(/[\r\n]+/g,"")):e=parseFloat(e),e||(e=0)):"number"===t.type&&aM(e)!==t.type&&(e=parseFloat(e)||0),e}function sM(e,t){var n=Lw[e],r=Lw.constructor.types[e];if(r.array){var i,a=[],o=nM(n);try{for(o.s();!(i=o.n()).done;){var s=oM(i.value,r);if("string"==r.type&&"string"==typeof s&&s.includes("\n")){var l,c=s.split(/\s*\n+\s*/g).filter((function(e){return e.length}));(l=a).push.apply(l,tM(c))}else a.push(s)}}catch(e){o.e(e)}finally{o.f()}a.find((function(e){return e}))||t||(a=void 0)}else{(a=oM(n,r))||t||(a=void 0)}return a}function lM(e){return 1==e.length?e[0]:e.length>1?e:void 0}function cM(e){var t=!1,n={};for(var r in e)n[r]=lM(e[r]),n[r]&&(t=!0);if(t)return n}function uM(e){if(e){var t,n=[],r=nM(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a={distance:i.distance,effects:lM(i.effects)};n.push(a)}}catch(e){r.e(e)}finally{r.f()}return n.length?n:void 0}}function hM(){var e,t={format_version:"1.10.0",particle_effect:{description:{identifier:Lw.identifier,basic_render_parameters:{material:eM.appearance.appearance.inputs.material.value,texture:sM("particle_texture_path")||"textures/blocks/wool_colored_white"}}}},n={},r=function(){var t=Lw.curves[i];if("bezier_chain"==(e={type:oM(t.mode,{type:"string"}),input:oM(t.input,{type:"molang"}),horizontal_range:"bezier_chain"==t.mode?void 0:oM(t.range,{type:"molang"}),nodes:t.nodes.slice()}).type){var r={};e.nodes.forEach((function(e){var t=Math.roundTo(e.time,2).toString();t.search(/\./)<0&&(t+=".0"),r[t]={value:e.right_value==e.left_value?e.left_value:void 0,left_value:e.right_value==e.left_value?void 0:e.left_value,right_value:e.right_value==e.left_value?void 0:e.right_value,slope:e.right_slope==e.left_slope?e.left_slope:void 0,left_slope:e.right_slope==e.left_slope?void 0:e.left_slope,right_slope:e.right_slope==e.left_slope?void 0:e.right_slope}})),e.nodes=r}n[i]=e};for(var i in Lw.curves)r();if(Object.keys(n).length&&(t.particle_effect.curves=n),eM.events.events.events.length){var a=function e(t){if(t){if(t.randomize instanceof Array){var n,r=nM(t.randomize);try{for(r.s();!(n=r.n()).done;){var i=n.value;delete i.uuid,e(i)}}catch(e){r.e(e)}finally{r.f()}}if(t.sequence instanceof Array){var a,o=nM(t.sequence);try{for(o.s();!(a=o.n()).done;){var s=a.value;delete s.uuid,e(s)}}catch(e){o.e(e)}finally{o.f()}}if(t.particle_effect){var l=t.particle_effect;l.pre_effect_expression?"string"==typeof l.pre_effect_expression&&(l.pre_effect_expression=l.pre_effect_expression.trim(),l.pre_effect_expression.endsWith(";")||(l.pre_effect_expression=l.pre_effect_expression+";")):delete l.pre_effect_expression}return t}};t.particle_effect.events={};var o,s=nM(eM.events.events.events);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=JSON.parse(JSON.stringify(l.event));t.particle_effect.events[l.id]=a(c)}}catch(e){s.e(e)}finally{s.f()}}var u=t.particle_effect.components={};sM("variables_creation_vars")&&((p=(p=sM("variables_creation_vars").join(";")+";").replace(/;;+/g,";"))&&(u["minecraft:emitter_initialization"]={creation_expression:p}));sM("variables_tick_vars")&&((p=(p=sM("variables_tick_vars").join(";")+";").replace(/;;+/g,";"))&&(u["minecraft:emitter_initialization"]||(u["minecraft:emitter_initialization"]={}),u["minecraft:emitter_initialization"].per_update_expression=p));sM("space_local_position","boolean")&&(u["minecraft:emitter_local_space"]={position:sM("space_local_position","boolean"),rotation:sM("space_local_rotation","boolean"),velocity:sM("space_local_velocity","boolean")||void 0}),"instant"===(v=sM("emitter_rate_mode"))?u["minecraft:emitter_rate_instant"]={num_particles:sM("emitter_rate_amount",!0)}:"steady"===v?u["minecraft:emitter_rate_steady"]={spawn_rate:sM("emitter_rate_rate"),max_particles:sM("emitter_rate_maximum")}:"manual"===v&&(u["minecraft:emitter_rate_manual"]={max_particles:sM("emitter_rate_maximum")}),(v=sM("emitter_lifetime_mode"))&&("looping"===v?u["minecraft:emitter_lifetime_looping"]={active_time:sM("emitter_lifetime_active_time"),sleep_time:sM("emitter_lifetime_sleep_time")}:"once"===v?u["minecraft:emitter_lifetime_once"]={active_time:sM("emitter_lifetime_active_time")}:"expression"===v&&(u["minecraft:emitter_lifetime_expression"]={activation_expression:sM("emitter_lifetime_activation"),expiration_expression:sM("emitter_lifetime_expiration")}));var h={creation_event:lM(Lw.emitter_events_creation),expiration_event:lM(Lw.emitter_events_expiration),timeline:cM(Lw.emitter_events_timeline),travel_distance_events:cM(Lw.emitter_events_distance),looping_travel_distance_events:uM(Lw.emitter_events_distance_looping)};(h.creation_event||h.expiration_event||h.timeline||h.travel_distance_events||h.looping_travel_distance_events)&&(u["minecraft:emitter_lifetime_events"]=h);var p,d=void 0;if((v=sM("particle_direction_mode"))&&("inwards"===v?d="inwards":"outwards"===v?d="outwards":"direction"===v&&(d=sM("particle_direction_direction"))),v=sM("emitter_shape_mode"))if("point"===v)"string"==typeof d&&(d=void 0),u["minecraft:emitter_shape_point"]={offset:sM("emitter_shape_offset"),direction:d};else if("sphere"===v)u["minecraft:emitter_shape_sphere"]={offset:sM("emitter_shape_offset"),radius:sM("emitter_shape_radius"),surface_only:sM("emitter_shape_surface_only"),direction:d};else if("box"===v)u["minecraft:emitter_shape_box"]={offset:sM("emitter_shape_offset"),half_dimensions:sM("emitter_shape_half_dimensions"),surface_only:sM("emitter_shape_surface_only"),direction:d};else if("disc"===v){var f=sM("emitter_shape_plane_normal");if(f)switch(f.join("")){case"100":f="x";break;case"010":f="y";break;case"001":f="z"}u["minecraft:emitter_shape_disc"]={offset:sM("emitter_shape_offset"),radius:sM("emitter_shape_radius"),plane_normal:f,surface_only:sM("emitter_shape_surface_only"),direction:d}}else"custom"===v?("string"==typeof d&&(d=void 0),u["minecraft:emitter_shape_custom"]={offset:sM("emitter_shape_offset"),direction:d}):"entity_aabb"===v&&(u["minecraft:emitter_shape_entity_aabb"]={surface_only:sM("emitter_shape_surface_only"),direction:d});sM("particle_update_expression")&&((p=(p=sM("particle_update_expression").join(";")+";").replace(/;;+/g,";"))&&(u["minecraft:particle_initialization"]={per_update_expression:p}));sM("particle_render_expression")&&((p=(p=sM("particle_render_expression").join(";")+";").replace(/;;+/g,";"))&&(u["minecraft:particle_initialization"]||(u["minecraft:particle_initialization"]={}),u["minecraft:particle_initialization"].per_render_expression=p));u["minecraft:particle_lifetime_expression"]={max_lifetime:sM("particle_lifetime_max_lifetime"),expiration_expression:sM("particle_lifetime_expiration_expression")},sM("particle_lifetime_expire_in")&&(u["minecraft:particle_expire_if_in_blocks"]=sM("particle_lifetime_expire_in")),sM("particle_lifetime_expire_outside")&&(u["minecraft:particle_expire_if_not_in_blocks"]=sM("particle_lifetime_expire_outside"));var m={creation_event:lM(Lw.particle_events_creation),expiration_event:lM(Lw.particle_events_expiration),timeline:cM(Lw.particle_events_timeline)};(m.creation_event||m.expiration_event||m.timeline)&&(u["minecraft:particle_lifetime_events"]=m);var v,g=sM("particle_rotation_initial_rotation"),_=sM("particle_rotation_rotation_rate");if((g||_)&&(u["minecraft:particle_initial_spin"]={rotation:g||void 0,rotation_rate:_||void 0}),u["minecraft:particle_initial_speed"]=sM("particle_motion_linear_speed"),(v=sM("particle_motion_mode"))&&("dynamic"===v?(u["minecraft:particle_motion_dynamic"]={linear_acceleration:sM("particle_motion_linear_acceleration"),linear_drag_coefficient:sM("particle_motion_linear_drag_coefficient")},u["minecraft:particle_initial_speed"]||(u["minecraft:particle_initial_speed"]=0)):"parametric"===v&&(u["minecraft:particle_motion_parametric"]={relative_position:sM("particle_motion_relative_position"),direction:sM("particle_motion_direction")})),v=sM("particle_rotation_mode"))if("dynamic"===v){var y=sM("particle_rotation_rotation_acceleration"),b=sM("particle_rotation_rotation_drag_coefficient");if(y||b){u["minecraft:particle_motion_dynamic"]||(u["minecraft:particle_motion_dynamic"]={});var x=u["minecraft:particle_motion_dynamic"];x.rotation_acceleration=y,x.rotation_drag_coefficient=b}}else if("parametric"===v){var w=sM("particle_rotation_rotation");w&&(u["minecraft:particle_motion_parametric"]||(u["minecraft:particle_motion_parametric"]={}),u["minecraft:particle_motion_parametric"].rotation=w)}u["minecraft:particle_kill_plane"]=sM("particle_lifetime_kill_plane");var M=sM("particle_appearance_facing_camera_mode"),S=u["minecraft:particle_appearance_billboard"]={size:sM("particle_appearance_size",!0),facing_camera_mode:M};if("direction"!=M.substring(0,9)&&"lookat_direction"!=M||.01==sM("particle_appearance_speed_threshold")&&"derive_from_velocity"==sM("particle_appearance_direction_mode")||(S.direction={mode:sM("particle_appearance_direction_mode")},"derive_from_velocity"==S.direction.mode?S.direction.min_speed_threshold=sM("particle_appearance_speed_threshold"):S.direction.custom_direction=sM("particle_appearance_direction")),"full"!==sM("particle_texture_mode")&&(S.uv={texture_width:parseInt(Lw.particle_texture_size[0])||0,texture_height:parseInt(Lw.particle_texture_size[1])||0},"static"===sM("particle_texture_mode")?(S.uv.uv=sM("particle_texture_uv")||[0,0],S.uv.uv_size=sM("particle_texture_uv_size")||[S.uv.texture_width,S.uv.texture_height]):S.uv.flipbook={base_UV:sM("particle_texture_uv",!0),size_UV:sM("particle_texture_uv_size",!0),step_UV:sM("particle_texture_uv_step",!0),frames_per_second:sM("particle_texture_frames_per_second"),max_frame:sM("particle_texture_max_frame"),stretch_to_lifetime:sM("particle_texture_stretch_to_lifetime"),loop:sM("particle_texture_loop")}),sM("particle_collision_toggle")&&(u["minecraft:particle_motion_collision"]={enabled:sM("particle_collision_enabled"),collision_drag:sM("particle_collision_collision_drag"),coefficient_of_restitution:sM("particle_collision_coefficient_of_restitution"),collision_radius:sM("particle_collision_collision_radius"),expire_on_contact:sM("particle_collision_expire_on_contact"),events:sM("particle_collision_events")}),sM("particle_color_light")&&(u["minecraft:particle_appearance_lighting"]={}),"static"===sM("particle_color_mode")){var E=sM("particle_color_static").substr(1,8);if("ffffff"!=E.toLowerCase()){var A=E.match(/.{2}/g).map((function(e){return parseInt(e,16)/255}));3==A.length&&(A[3]=1),u["minecraft:particle_appearance_tinting"]={color:A}}}else if("gradient"===sM("particle_color_mode")){var T=sM("particle_color_range");u["minecraft:particle_appearance_tinting"]={color:{interpolant:sM("particle_color_interpolant"),gradient:eM.appearance.color.inputs.gradient.export(T||1)}}}else{var C=sM("particle_color_expression");C instanceof Array&&(C.forEach((function(e,t){"number"==typeof e&&(C[t]=Zh.clamp(e,0,1))})),C[3]||(C[3]=1),u["minecraft:particle_appearance_tinting"]={color:C})}return t}window.generateFileForParentEffect=function(){var e=hM();return JSON.stringify(e)};const pM=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:fire","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/flame_atlas"}},"components":{"minecraft:emitter_rate_steady":{"spawn_rate":20,"max_particles":1000},"minecraft:emitter_lifetime_looping":{"active_time":1},"minecraft:emitter_shape_disc":{"offset":[0,0.4,0],"radius":1.2},"minecraft:particle_lifetime_expression":{"max_lifetime":"Math.random(1, 1.4)"},"minecraft:particle_initial_speed":1,"minecraft:particle_motion_dynamic":{"linear_acceleration":["(variable.particle_random_1-0.5)",1.2,"(variable.particle_random_1-0.5)"]},"minecraft:particle_appearance_billboard":{"size":[0.4,0.4],"facing_camera_mode":"lookat_xyz","uv":{"texture_width":16,"texture_height":512,"flipbook":{"size_UV":[16,16],"step_UV":[0,16],"max_frame":32,"stretch_to_lifetime":true}}}}}}'),dM=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:loading","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/particles"}},"components":{"minecraft:emitter_initialization":{"creation_expression":"variable.size = 0.08;variable.radius = 0.6;"},"minecraft:emitter_local_space":{"position":true,"rotation":true},"minecraft:emitter_rate_steady":{"spawn_rate":31,"max_particles":60},"minecraft:emitter_lifetime_looping":{"active_time":1},"minecraft:emitter_shape_point":{"offset":["variable.radius*-math.sin(variable.emitter_age*360)","variable.radius*math.cos(variable.emitter_age*360)",0]},"minecraft:particle_lifetime_expression":{"max_lifetime":1},"minecraft:particle_motion_dynamic":{},"minecraft:particle_initial_speed":0,"minecraft:particle_appearance_billboard":{"size":["variable.size*(1-variable.particle_age)","variable.size*(1-variable.particle_age)"],"facing_camera_mode":"rotate_xyz","uv":{"texture_width":128,"texture_height":128,"uv":[32,88],"uv_size":[8,8]}},"minecraft:particle_appearance_tinting":{"color":[0.41961,1,0.57647,1]}}}}'),fM=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:rainbow","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/particles"}},"curves":{"variable.rainbow":{"type":"catmull_rom","input":"variable.particle_random_2","horizontal_range":1,"nodes":[1,0,1,1.18]},"variable.psize":{"type":"catmull_rom","input":"variable.particle_age","horizontal_range":"variable.particle_lifetime","nodes":[0,0,1,0,0]}},"components":{"minecraft:emitter_initialization":{"creation_expression":"variable.radius = 2.5;"},"minecraft:emitter_rate_steady":{"spawn_rate":250,"max_particles":500},"minecraft:emitter_lifetime_looping":{"active_time":2},"minecraft:emitter_shape_point":{"offset":["math.cos(variable.emitter_age * 90) * (2.5-variable.particle_random_2)","math.sin(variable.emitter_age * 90) * (2.5-variable.particle_random_2)",0]},"minecraft:particle_lifetime_expression":{"max_lifetime":1.5},"minecraft:particle_initial_speed":0,"minecraft:particle_motion_dynamic":{"linear_acceleration":[0,1,0]},"minecraft:particle_appearance_billboard":{"size":["0.12 * variable.psize","0.12 * variable.psize"],"facing_camera_mode":"rotate_xyz","uv":{"texture_width":128,"texture_height":128,"uv":[32,88],"uv_size":[8,8]}},"minecraft:particle_appearance_tinting":{"color":{"interpolant":"variable.rainbow","gradient":{"0.0":"#d71c1c","0.16":"#ffdf00","0.33":"#08ff00","0.5":"#00ffff","0.67":"#0000ff","0.83":"#ff00ff","1.0":"#e21111"}}}}}}'),mM=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:magic","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/particles"}},"components":{"minecraft:emitter_local_space":{"position":true,"rotation":true},"minecraft:emitter_rate_steady":{"spawn_rate":500,"max_particles":1000},"minecraft:emitter_lifetime_expression":{"activation_expression":1},"minecraft:emitter_shape_disc":{"offset":["math.sin(variable.emitter_age*200)*6","math.cos(variable.emitter_age*260)*6",5],"radius":1.6,"plane_normal":["math.sin(variable.emitter_age*200)*6",0,1],"surface_only":true,"direction":"outwards"},"minecraft:particle_lifetime_expression":{"max_lifetime":"math.random(3, 4)"},"minecraft:particle_initial_spin":{"rotation_rate":"Math.random(-100, 100)"},"minecraft:particle_initial_speed":0,"minecraft:particle_motion_dynamic":{"linear_acceleration":["math.random(0, 4)","math.random(0, 8)","variable.particle_random_3>0.2 ? -10 : -4"]},"minecraft:particle_appearance_billboard":{"size":["0.04+variable.particle_random_2/5","0.04+variable.particle_random_2/5"],"facing_camera_mode":"rotate_xyz","uv":{"texture_width":128,"texture_height":128,"flipbook":{"base_UV":[64,96],"size_UV":[8,8],"step_UV":[-8,0],"max_frame":8,"stretch_to_lifetime":true}}},"minecraft:particle_appearance_tinting":{"color":["Math.clamp(0.3 + variable.particle_random_4/7 + (variable.particle_random_3>0.2 ? 0.4 : 0), 0, 1)","Math.clamp(0.2+variable.particle_random_4/5, 0, 1)","Math.clamp(0.88 + variable.particle_random_4/8, 0, 1)",1]}}}}'),vM=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:rain","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/particles"}},"components":{"minecraft:emitter_rate_steady":{"spawn_rate":640,"max_particles":4000},"minecraft:emitter_lifetime_looping":{"active_time":4},"minecraft:emitter_shape_box":{"offset":[0,40,0],"half_dimensions":[32,0,32],"direction":["2+Math.random(-1, 1)/2","-16-Math.random(0, 8)","Math.random(-1, 1)/2"]},"minecraft:particle_lifetime_expression":{"max_lifetime":2.7},"minecraft:particle_expire_if_not_in_blocks":["minecraft:air"],"minecraft:particle_initial_speed":"16+Math.random(0, 8)","minecraft:particle_motion_dynamic":{"linear_acceleration":[0,-4,0]},"minecraft:particle_appearance_billboard":{"size":["0.04+variable.particle_random_1/8","0.2+variable.particle_random_1/2"],"facing_camera_mode":"lookat_y","uv":{"texture_width":128,"texture_height":128,"uv":["8 * (0.125 * (math.floor(variable.particle_random_2*7)*8))",80],"uv_size":[8,8]}},"minecraft:particle_motion_collision":{"collision_radius":0.1,"expire_on_contact":true},"minecraft:particle_appearance_tinting":{"color":[0.29412,0.63922,1,1]}}}}'),gM=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:snow","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/particles"}},"components":{"minecraft:emitter_rate_steady":{"spawn_rate":80,"max_particles":4000},"minecraft:emitter_lifetime_looping":{"active_time":1},"minecraft:emitter_shape_box":{"offset":[0,20,0],"half_dimensions":[36,0,36],"direction":["Math.random(-1, 1)","-1.2-Math.random(0, 1)","Math.random(-1, 1)"]},"minecraft:particle_lifetime_expression":{"max_lifetime":25},"minecraft:particle_initial_spin":{"rotation":"variable.particle_random_3*360"},"minecraft:particle_initial_speed":1,"minecraft:particle_motion_dynamic":{"linear_acceleration":[0,-0.2,0]},"minecraft:particle_appearance_billboard":{"size":["0.07+variable.particle_random_1/6","0.07+variable.particle_random_1/6"],"facing_camera_mode":"rotate_xyz","uv":{"texture_width":128,"texture_height":128,"uv":["math.floor(variable.particle_random_2*8)*8",72],"uv_size":[8,8]}},"minecraft:particle_motion_collision":{"collision_drag":10,"collision_radius":0.1}}}}'),_M=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:trail","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/particles"}},"components":{"minecraft:emitter_initialization":{"creation_expression":"variable.size = 0.03;variable.lifetime = 2.2;"},"minecraft:emitter_rate_steady":{"spawn_rate":130,"max_particles":1000},"minecraft:emitter_lifetime_expression":{"activation_expression":1},"minecraft:emitter_shape_point":{"offset":["math.sin(variable.emitter_age*70-90)*2",0,0]},"minecraft:particle_lifetime_expression":{"max_lifetime":"variable.particle_random_1*variable.lifetime"},"minecraft:particle_initial_speed":0.4,"minecraft:particle_motion_dynamic":{"linear_acceleration":["(variable.particle_random_3-0.5)",-1,"(variable.particle_random_4-0.5)"],"linear_drag_coefficient":0.2},"minecraft:particle_appearance_billboard":{"size":["variable.size*(variable.particle_random_1*variable.lifetime-variable.particle_age)","variable.size*(variable.particle_random_1*variable.lifetime-variable.particle_age)"],"facing_camera_mode":"rotate_xyz","uv":{"texture_width":128,"texture_height":128,"uv":[40,80],"uv_size":[8,8]}},"minecraft:particle_appearance_tinting":{"color":[0.76471,0.93333,1,1]}}}}'),yM=JSON.parse('{"format_version":"1.10.0","particle_effect":{"description":{"identifier":"snowstorm:billboard","basic_render_parameters":{"material":"particles_alpha","texture":"textures/particle/particles"}},"components":{"minecraft:emitter_local_space":{"position":true,"rotation":true},"minecraft:emitter_rate_instant":{"num_particles":1},"minecraft:emitter_lifetime_looping":{"active_time":1},"minecraft:emitter_shape_point":{},"minecraft:particle_lifetime_expression":{"max_lifetime":1.5},"minecraft:particle_initial_speed":0,"minecraft:particle_motion_dynamic":{},"minecraft:particle_appearance_billboard":{"size":[1,0.25],"facing_camera_mode":"direction_z","direction":{"mode":"custom","custom_direction":[0,0,-1]},"uv":{"texture_width":128,"texture_height":128,"uv":[8,112],"uv_size":[64,16]}}}}}');function bM(e){return bM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bM(e)}function xM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wM(r.key),r)}}function wM(e){var t=function(e,t){if("object"!=bM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bM(t)?t:String(t)}var MM=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;this.uuid=Ps(),this.svg_needs_update=!1,this.inputs={id:new Uw({label:"Name",info:'The Molang variable to be used later in Molang expressions. Must begin with "variable."',placeholder:"variable.curve1",type:"text",value:n?"":"variable.",onchange:function(){r.updateName(this.value)}}),mode:new Uw({type:"select",label:"Mode",info:"Curve interpolation type",value:["catmull_rom","linear","bezier","bezier_chain"].includes(n.mode)?n.mode:"linear",options:{catmull_rom:"Catmull Rom",linear:"Linear",bezier:"Bzier",bezier_chain:"Bzier Chain"},onchange:function(){r.updateSVG(),"bezier"==r.inputs.mode.value&&(r.nodes.splice(4,1/0,0,0,0,0),r.nodes.splice(4)),"bezier_chain"==r.inputs.mode.value?r.nodes.splice(0,1/0,{time:0,left_value:0,right_value:0,left_slope:0,right_slope:0},{time:1,left_value:1,right_value:1,left_slope:0,right_slope:0}):r.nodes.find((function(e){return"object"==bM(e)}))&&r.nodes.forEach((function(e,t){"object"==bM(e)&&(r.nodes[t]=e.left_value||0)}))}}),input:new Uw({label:"Input",info:"Horizontal input",type:"molang",value:n?n.input:"v.particle_age"}),range:new Uw({label:"Range",info:"Horizontal range that the input is mapped to",type:"molang",value:n?n.range:"v.particle_lifetime",condition:function(e){return"bezier_chain"!==e.inputs.mode.value}})},this.nodes=n.nodes instanceof Array?n.nodes:[0,1,0],this.selected_point=-1,this.svg_data="",this.bezier_handles="",this.vertical_line_data="",this.horizontal_line_data="",this.min=0,this.max=1,this.config={get input(){return r.inputs.input.value},get range(){return r.inputs.range.value},get mode(){return r.inputs.mode.value},nodes:this.nodes},setTimeout((function(){As.nextTick((function(){return t.updateSVG()}))}),20)}var t,n,r;return t=e,n=[{key:"updateSVG",value:function(){this.svg_needs_update=!0}},{key:"updateMinMax",value:function(){var e=this;this.min=0,this.max=1,this.nodes.forEach((function(t){e.min=Math.min(e.min,"object"==bM(t)?Math.min(t.right_value,t.left_value):t),e.max=Math.max(e.max,"object"==bM(t)?Math.max(t.right_value,t.left_value):t)})),this.min=Math.clamp(Math.round(100*this.min)/100,-256,0),this.max=Math.clamp(Math.round(100*this.max)/100,0,256),this.updateSVG()}},{key:"updateName",value:function(e){for(var t=e,n=2;Lw.curves[t]&&Lw.curves[t]!==this.config;)t=e+n,n++;for(var r in Lw.curves[t]=this.config,Lw.curves)r===t||eM.variables.curves.curves.find((function(e){return e.inputs.id.value==r}))||delete Lw.curves[r];return this}},{key:"removeNode",value:function(e,t){if(!(this.nodes.length<=2)){var n=this.nodes[e];if(this.nodes.splice(e,1),"bezier_chain"==this.inputs.mode.value){var r=this.nodes.slice().sort((function(e,t){return Math.abs(e.time-n.time)-Math.abs(t.time-n.time)}))[0];this.selected_point=this.nodes.indexOf(r)}else this.selected_point--;this.updateSVG(),Gs("remove curve node")}}},{key:"setNode",value:function(e,t){t=Math.round(100*parseFloat(t))/100,"bezier_chain"==this.inputs.mode.value?this.nodes[e].left_value=this.nodes[e].right_value=t:this.nodes.splice(e,1,t),this.updateMinMax()}},{key:"remove",value:function(){delete Lw.curves[this.inputs.id.value],eM.variables.curves.curves.remove(this),Gs("remove curve")}}],n&&xM(t.prototype,n),r&&xM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SM(){eM.variables.curves._folded||As.nextTick((function(){eM.variables.curves.curves.forEach((function(e){e.svg_needs_update=!0}))}))}const EM=MM;function AM(e){return AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AM(e)}function TM(){TM=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",v={};function g(){}function _(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&r.call(w,o)&&(b=w);var M=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==AM(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(AM(t)+" is not iterable")}return _.prototype=y,i(M,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,l,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function CM(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function kM(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){CM(a,r,i,o,s,"next",e)}function s(e){CM(a,r,i,o,s,"throw",e)}o(void 0)}))}}var LM={fire:pM,loading:dM,rainbow:fM,magic:mM,rain:vM,snow:gM,trail:_M,billboard:yM};function PM(){for(var e in $w((function(e){if(e.value=Lw[e.id],"molang"==e.type&&e.value){var t=function(t){return"string"==typeof t&&t&&t.includes(";")?(e.expanded=!0,t.replace(/;\s*/g,";\n").replace(/\n+$/,"")):t};e.value instanceof Array?e.value.forEach((function(n,r){e.value[r]=t(n)})):e.value=t(e.value)}e.update(eM)})),eM.variables.curves.curves.splice(0,1/0),Lw.curves){var t=Lw.curves[e],n=new EM(t);n.inputs.id.value=e,eM.variables.curves.curves.push(n),Lw.curves[e]=n.config,n.updateMinMax()}for(var r in eM.events.events.events.splice(0),Lw.events){var i=Lw.events[r],a={uuid:Ps(),id:r,event:i};eM.events.events.events.push(a)}eM.effect.meta.inputs.identifier.onchange(),Qx.updateVariablePlaceholderList()}function RM(e){Lw.unsupported_fields={},Lw.setFromJSON(e),e.particle_effect&&(Lw.unsupported_fields.events=e.particle_effect.events,Lw.unsupported_fields.emitter_lifetime_events=e.particle_effect.components["minecraft:emitter_lifetime_events"],Lw.unsupported_fields.particle_lifetime_events=e.particle_effect.components["minecraft:particle_lifetime_events"],e.particle_effect.components["minecraft:particle_motion_collision"]&&(Lw.unsupported_fields.collision_events=e.particle_effect.components["minecraft:particle_motion_collision"].events)),PM()}function IM(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&e.particle_effect&&(!t||zM())&&(Bl.reset(),Rw.resetAll(),RM(e),Pw.stop(!0),Qx.PlaybackController.start(),Gs("load file"))}function zM(e){if(Cs||e||confirm("This action may clear your current work. Do you want to continue?"))return Lw.unsupported_fields={},Lw.reset(),Bl.reset(),Rw.resetAll(),PM(),Gs("new file"),!0}function OM(e){IM(LM[e])}if(window.loadFileFromParentEffect=function(e,t){if(IM(JSON.parse(e),!1),t){var n=eM.texture.texture.inputs.image;n.image.data=Bl.source=t,n.image.loaded=!0,Bl.updateCanvasFromSource(),Lw.updateTexture(),Pw.updateMaterial()}},document.addEventListener("readystatechange",(function(){Pw.start(),Qx.PlaybackController.start()})),Cs){var DM=function(){var e=kM(TM().mark((function e(){return TM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),NM=function(){var e=kM(TM().mark((function e(t){return TM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"string"!=typeof t){e.next=6;break}return e.next=3,DM();case 3:RM(JSON.parse(t)),bl.input&&bl.input.focus();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();window.addEventListener("message",(function(e){var t=e.data;if("update"===t.type){var n=t.text;return NM(n),void Cs.setState({text:n})}}));var FM=Cs.getState();FM&&NM(FM.text)}else document.ondragover=function(e){e.preventDefault()},document.body.ondrop=function(e){var t=e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files[0];if(t&&"json"===Rs(t.name)){var n=new FileReader;n.onloadend=function(){IM(JSON.parse(n.result)),Qx.PlaybackController.start()},n.readAsText(t),e.preventDefault()}};const BM=Dx("Share2Icon",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),UM=Dx("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var HM=Uint8Array,jM=Uint16Array,VM=Uint32Array,GM=new HM([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),WM=new HM([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qM=new HM([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XM=function(e,t){for(var n=new jM(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new VM(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},YM=XM(GM,2),ZM=YM[0],JM=YM[1];ZM[28]=258,JM[258]=28;for(var QM=XM(WM,0),KM=QM[0],$M=QM[1],eS=new jM(32768),tS=0;tS<32768;++tS){var nS=(43690&tS)>>>1|(21845&tS)<<1;nS=(61680&(nS=(52428&nS)>>>2|(13107&nS)<<2))>>>4|(3855&nS)<<4,eS[tS]=((65280&nS)>>>8|(255&nS)<<8)>>>1}var rS=function(e,t,n){for(var r=e.length,i=0,a=new jM(t);i<r;++i)e[i]&&++a[e[i]-1];var o,s=new jM(t);for(i=0;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;if(n){o=new jM(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=s[e[i]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)o[eS[h]>>>l]=c}else for(o=new jM(r),i=0;i<r;++i)e[i]&&(o[i]=eS[s[e[i]-1]++]>>>15-e[i]);return o},iS=new HM(288);for(tS=0;tS<144;++tS)iS[tS]=8;for(tS=144;tS<256;++tS)iS[tS]=9;for(tS=256;tS<280;++tS)iS[tS]=7;for(tS=280;tS<288;++tS)iS[tS]=8;var aS=new HM(32);for(tS=0;tS<32;++tS)aS[tS]=5;var oS=rS(iS,9,0),sS=rS(iS,9,1),lS=rS(aS,5,0),cS=rS(aS,5,1),uS=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},hS=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},pS=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},dS=function(e){return(e+7)/8|0},fS=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(2==e.BYTES_PER_ELEMENT?jM:4==e.BYTES_PER_ELEMENT?VM:HM)(n-t);return r.set(e.subarray(t,n)),r},mS=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vS=function(e,t,n){var r=new Error(t||mS[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,vS),!n)throw r;return r},gS=function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new HM(0);var i=!t||n,a=!n||n.i;n||(n={}),t||(t=new HM(3*r));var o=function(e){var n=t.length;if(e>n){var r=new HM(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,p=n.m,d=n.n,f=8*r;do{if(!u){s=hS(e,l,1);var m=hS(e,l+1,3);if(l+=3,!m){var v=e[(T=dS(l)+4)-4]|e[T-3]<<8,g=T+v;if(g>r){a&&vS(0);break}i&&o(c+v),t.set(e.subarray(T,g),c),n.b=c+=v,n.p=l=8*g,n.f=s;continue}if(1==m)u=sS,h=cS,p=9,d=5;else if(2==m){var _=hS(e,l,31)+257,y=hS(e,l+10,15)+4,b=_+hS(e,l+5,31)+1;l+=14;for(var x=new HM(b),w=new HM(19),M=0;M<y;++M)w[qM[M]]=hS(e,l+3*M,7);l+=3*y;var S=uS(w),E=(1<<S)-1,A=rS(w,S,1);for(M=0;M<b;){var T,C=A[hS(e,l,E)];if(l+=15&C,(T=C>>>4)<16)x[M++]=T;else{var k=0,L=0;for(16==T?(L=3+hS(e,l,3),l+=2,k=x[M-1]):17==T?(L=3+hS(e,l,7),l+=3):18==T&&(L=11+hS(e,l,127),l+=7);L--;)x[M++]=k}}var P=x.subarray(0,_),R=x.subarray(_);p=uS(P),d=uS(R),u=rS(P,p,1),h=rS(R,d,1)}else vS(1);if(l>f){a&&vS(0);break}}i&&o(c+131072);for(var I=(1<<p)-1,z=(1<<d)-1,O=l;;O=l){var D=(k=u[pS(e,l)&I])>>>4;if((l+=15&k)>f){a&&vS(0);break}if(k||vS(2),D<256)t[c++]=D;else{if(256==D){O=l,u=null;break}var N=D-254;if(D>264){var F=GM[M=D-257];N=hS(e,l,(1<<F)-1)+ZM[M],l+=F}var B=h[pS(e,l)&z],U=B>>>4;B||vS(3),l+=15&B;R=KM[U];if(U>3){F=WM[U];R+=pS(e,l)&(1<<F)-1,l+=F}if(l>f){a&&vS(0);break}i&&o(c+131072);for(var H=c+N;c<H;c+=4)t[c]=t[c-R],t[c+1]=t[c+1-R],t[c+2]=t[c+2-R],t[c+3]=t[c+3-R];c=H}}n.l=u,n.p=O,n.b=c,n.f=s,u&&(s=1,n.m=p,n.d=h,n.n=d)}while(!s);return c==t.length?t:fS(t,0,c)},_S=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},yS=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},bS=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return[TS,0];if(1==i){var o=new HM(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=i-1;)s=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};var p=a[0].s;for(r=1;r<i;++r)a[r].s>p&&(p=a[r].s);var d=new jM(p+1),f=xS(n[u-1],d,0);if(f>t){r=0;var m=0,v=f-t,g=1<<v;for(a.sort((function(e,t){return d[t.s]-d[e.s]||e.f-t.f}));r<i;++r){var _=a[r].s;if(!(d[_]>t))break;m+=g-(1<<f-d[_]),d[_]=t}for(m>>>=v;m>0;){var y=a[r].s;d[y]<t?m-=1<<t-d[y]++-1:++r}for(;r>=0&&m;--r){var b=a[r].s;d[b]==t&&(--d[b],++m)}f=t}return[new HM(d),f]},xS=function(e,t,n){return-1==e.s?Math.max(xS(e.l,t,n+1),xS(e.r,t,n+1)):t[e.s]=n},wS=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new jM(++t),r=0,i=e[0],a=1,o=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[s]}return[n.subarray(0,r),t]},MS=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},SS=function(e,t,n){var r=n.length,i=dS(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return 8*(i+4+r)},ES=function(e,t,n,r,i,a,o,s,l,c,u){_S(t,u++,n),++i[256];for(var h=bS(i,15),p=h[0],d=h[1],f=bS(a,15),m=f[0],v=f[1],g=wS(p),_=g[0],y=g[1],b=wS(m),x=b[0],w=b[1],M=new jM(19),S=0;S<_.length;++S)M[31&_[S]]++;for(S=0;S<x.length;++S)M[31&x[S]]++;for(var E=bS(M,7),A=E[0],T=E[1],C=19;C>4&&!A[qM[C-1]];--C);var k,L,P,R,I=c+5<<3,z=MS(i,iS)+MS(a,aS)+o,O=MS(i,p)+MS(a,m)+o+14+3*C+MS(M,A)+(2*M[16]+3*M[17]+7*M[18]);if(I<=z&&I<=O)return SS(t,u,e.subarray(l,l+c));if(_S(t,u,1+(O<z)),u+=2,O<z){k=rS(p,d,0),L=p,P=rS(m,v,0),R=m;var D=rS(A,T,0);_S(t,u,y-257),_S(t,u+5,w-1),_S(t,u+10,C-4),u+=14;for(S=0;S<C;++S)_S(t,u+3*S,A[qM[S]]);u+=3*C;for(var N=[_,x],F=0;F<2;++F){var B=N[F];for(S=0;S<B.length;++S){var U=31&B[S];_S(t,u,D[U]),u+=A[U],U>15&&(_S(t,u,B[S]>>>5&127),u+=B[S]>>>12)}}}else k=oS,L=iS,P=lS,R=aS;for(S=0;S<s;++S)if(r[S]>255){U=r[S]>>>18&31;yS(t,u,k[U+257]),u+=L[U+257],U>7&&(_S(t,u,r[S]>>>23&31),u+=GM[U]);var H=31&r[S];yS(t,u,P[H]),u+=R[H],H>3&&(yS(t,u,r[S]>>>5&8191),u+=WM[H])}else yS(t,u,k[r[S]]),u+=L[r[S]];return yS(t,u,k[256]),u+L[256]},AS=new VM([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),TS=new HM(0),CS=function(e,t,n,r,i,a){var o=e.length,s=new HM(r+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(r,s.length-i),c=0;if(!t||o<8)for(var u=0;u<=o;u+=65535){var h=u+65535;h>=o&&(l[c>>3]=a),c=SS(l,c+1,e.subarray(u,h))}else{for(var p=AS[t-1],d=p>>>13,f=8191&p,m=(1<<n)-1,v=new jM(32768),g=new jM(m+1),_=Math.ceil(n/3),y=2*_,b=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<y)&m},x=new VM(25e3),w=new jM(288),M=new jM(32),S=0,E=0,A=(u=0,0),T=0,C=0;u<o;++u){var k=b(u),L=32767&u,P=g[k];if(v[L]=P,g[k]=L,T<=u){var R=o-u;if((S>7e3||A>24576)&&R>423){c=ES(e,l,0,x,w,M,E,A,C,u-C,c),A=S=E=0,C=u;for(var I=0;I<286;++I)w[I]=0;for(I=0;I<30;++I)M[I]=0}var z=2,O=0,D=f,N=L-P&32767;if(R>2&&k==b(u-N))for(var F=Math.min(d,R)-1,B=Math.min(32767,u),U=Math.min(258,R);N<=B&&--D&&L!=P;){if(e[u+z]==e[u+z-N]){for(var H=0;H<U&&e[u+H]==e[u+H-N];++H);if(H>z){if(z=H,O=N,H>F)break;var j=Math.min(N,H-2),V=0;for(I=0;I<j;++I){var G=u-N+I+32768&32767,W=G-v[G]+32768&32767;W>V&&(V=W,P=G)}}}N+=(L=P)-(P=v[L])+32768&32767}if(O){x[A++]=268435456|JM[z]<<18|$M[O];var q=31&JM[z],X=31&$M[O];E+=GM[q]+WM[X],++w[257+q],++M[X],T=u+z,++S}else x[A++]=e[u],++w[e[u]]}}c=ES(e,l,a,x,w,M,E,A,C,u-C,c),!a&&7&c&&(c=SS(l,c+1,TS))}return fS(s,0,r+dS(c)+i)},kS=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,a=0|n.length,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=n[o];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},LS=function(e,t,n,r,i){return CS(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)},PS=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},RS=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},IS=function(e){(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&vS(6,"invalid zlib data"),32&e[1]&&vS(6,"invalid zlib data: preset dictionaries not supported")};function zS(e,t){t||(t={});var n=kS();n.p(e);var r=LS(e,t,2,4);return RS(r,t),PS(r,r.length-4,n.d()),r}function OS(e,t){return gS((IS(e),e.subarray(2,-4)),t)}var DS="undefined"!=typeof TextEncoder&&new TextEncoder,NS="undefined"!=typeof TextDecoder&&new TextDecoder;try{NS.decode(TS,{stream:!0}),1}catch(e){}var FS=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,fS(e,n-1)];i?3==i?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&i?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}};function BS(e,t){if(t){for(var n=new HM(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(DS)return DS.encode(e);var i=e.length,a=new HM(e.length+(e.length>>1)),o=0,s=function(e){a[o++]=e};for(r=0;r<i;++r){if(o+5>a.length){var l=new HM(o+8+(i-r<<1));l.set(a),a=l}var c=e.charCodeAt(r);c<128||t?s(c):c<2048?(s(192|c>>6),s(128|63&c)):c>55295&&c<57344?(s(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++r))>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|63&c)):(s(224|c>>12),s(128|c>>6&63),s(128|63&c))}return fS(a,0,o)}function US(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(NS)return NS.decode(e);var i=FS(e),a=i[0];return i[1].length&&vS(8),a}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function HS(e){return HS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HS(e)}function jS(){jS=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",v={};function g(){}function _(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&r.call(w,o)&&(b=w);var M=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==HS(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(HS(t)+" is not iterable")}return _.prototype=y,i(M,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,l,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function VS(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function GS(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){VS(a,r,i,o,s,"next",e)}function s(e){VS(a,r,i,o,s,"throw",e)}o(void 0)}))}}function WS(){return WS=GS(jS().mark((function e(t,n){var r,i;return jS().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new URL(window.location.href)).searchParams.set("loadParticle",btoa(US(zS(BS(JSON.stringify(t),!0),{level:9}),!0))),null!==n&&i.searchParams.set("loadParticleTexture",btoa(US(zS(n,{level:9}),!0))),e.next=5,navigator.share({title:null!==(r=t.particle_effect.description.identifier)&&void 0!==r?r:"Unknown",text:"View this particle with Snowstorm",url:i.href}).catch((function(){}));case 5:case"end":return e.stop()}}),e)}))),WS.apply(this,arguments)}function qS(){return(qS=GS(jS().mark((function e(){var t,n,r,i,a,o;return jS().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new URLSearchParams(window.location.search)).has("loadParticle")&&(n=BS(atob(t.get("loadParticle")),!0),r=OS(n),IM(JSON.parse(US(r)),!1)),t.has("loadParticleTexture")&&(i=BS(atob(t.get("loadParticleTexture")),!0),a=OS(i),o=a,eM.texture.texture.inputs.image.change(o));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var XS=!!Cs;function YS(e){Cs?Cs.postMessage({type:"link",link:e}):open(e)}var ZS=[{label:"File",children:[{label:"New File",click:function(){zM()}}]},{label:"Examples",children:[{label:"Loading",click:function(){OM("loading")}},{label:"Rainbow",click:function(){OM("rainbow")}},{label:"Rain",click:function(){OM("rain")}},{label:"Snow",click:function(){OM("snow")}},{label:"Fire",click:function(){OM("fire")}},{label:"Magic",click:function(){OM("magic")}},{label:"Trail",click:function(){OM("trail")}},{label:"Billboard",click:function(){OM("billboard")}}]},{label:"View",children:[{label:"Grid",click:function(){Qx.grid.visible=!Qx.grid.visible,Ix("grid_visible",Qx.grid.visible)}},{label:"Reference Block",click:function(){Qx.minecraft_block.visible=!Qx.minecraft_block.visible,Ix("minecraft_block_visible",Qx.minecraft_block.visible)}},{label:"Axis Helper",click:function(){Qx.helper.visible=!Qx.helper.visible,Ix("axis_helper_visible",Qx.grid.visible)}},{label:"Take Screenshot",click:function(){Qx.screenshot()}}]},{label:"Help",children:[{label:"Open Documentation",click:function(e){e.openHelpPanel("","")}},{label:"Molang Reference",click:function(e){e.openHelpPanel("general","molang")}},{label:"Snowstorm Tutorial",click:function(){YS("https://docs.microsoft.com/en-us/minecraft/creator/documents/particleeffects")}},{label:"Tutorial Video",click:function(){YS("https://youtu.be/J1Ub1tbO9gg")}},{label:"Format Documentation",click:function(){YS("https://docs.microsoft.com/en-us/minecraft/creator/reference/content/particlesreference/")}},{label:"Molang Grapher",click:function(){YS("https://jannisx11.github.io/molang-grapher/")}},{label:"Report a Bug",click:function(){YS("https://github.com/JannisX11/snowstorm/issues")}},{label:"Discord Server",click:function(){YS("https://discord.gg/W9d78Z8AvM")}}]}];XS||ZS[0].children.push({label:"Import",click:function(){Bs.import({extensions:["json"]},(function(e){e[0]&&IM(JSON.parse(e[0].content))}))}},{label:"Download",click:function(){var e,t;t=zs(hM()),Bs.export({name:(e=eM.effect.meta.inputs.identifier.value,(e=e?e.replace(/^\w+:/,""):"particles")+".particle.json"),content:t})}});const JS={name:"menu-bar",components:{Share2:BM,HelpCircle:UM},props:{selected_tab:String,portrait_view:Boolean,is_help_panel_open:Boolean},methods:{changeTab:function(){this.$emit("setTab")},openCodeViewer:function(e){Cs.postMessage({type:"view_code",side:e})},openDialog:function(e){this.$emit("opendialog",e)},getVM:function(){return this},openHelpPanel:function(e,t){this.$emit("open_help_page",e,t)},onShareParticle:function(){var e=null,t=Bl.source;if(t){var n=t.split(",")[1];e=Uint8Array.from(atob(n),(function(e){return e.charCodeAt(0)}))}!function(e,t){WS.apply(this,arguments)}(hM(),e)}},data:function(){return{Menu:ZS,isVSCExtension:XS,canShare:"share"in navigator}}};var QS=n(590),KS={insert:"head",singleton:!1};sl()(QS.Z,KS);QS.Z.locals;const $S=El(JS,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{attrs:{id:"menu_bar"}},[e._l(e.Menu,(function(t){return n("li",{key:t.id,attrs:{onclick:""}},[n("a",[e._v(e._s(t.label))]),e._v(" "),n("ul",{staticClass:"menu_dropdown"},e._l(t.children,(function(t){return n("li",{key:t.id,on:{click:function(n){t.click(e.getVM(),n)}}},[n("a",[e._v(e._s(t.label))])])})),0)])})),e._v(" "),e.isVSCExtension?[n("li",{staticClass:"mode_selector",attrs:{title:"Open Code View to Side"},on:{click:function(t){return e.openCodeViewer(!0)}}},[n("i",{staticClass:"unicode_icon split"},[e._v(e._s(""))])]),e._v(" "),n("li",{staticClass:"mode_selector",attrs:{title:"Open as Code View"},on:{click:function(t){return e.openCodeViewer(!1)}}},[e._v("Switch to Code")])]:e.portrait_view?e._e():[n("li",{staticClass:"mode_selector code",class:{selected:"code"==e.selected_tab},on:{click:function(t){return e.$emit("changetab","code")}}},[e._v("Code")]),e._v(" "),n("li",{staticClass:"mode_selector preview",class:{selected:"preview"==e.selected_tab},on:{click:function(t){return e.$emit("changetab","preview")}}},[e._v("Preview")])],e._v(" "),e.portrait_view?e._e():n("div",{staticClass:"mode_selector highlighting_button",class:{selected:e.is_help_panel_open},attrs:{title:"Documentation"},on:{click:function(t){return e.openHelpPanel()}}},[n("HelpCircle",{attrs:{size:20}})],1),e._v(" "),e.canShare?n("div",{staticClass:"mode_selector highlighting_button",attrs:{title:"Share"},on:{click:e.onShareParticle}},[n("Share2",{attrs:{size:20}})],1):e._e()],2)}),[],!1,null,"1febde09",null).exports;const eE={name:"logo",data:function(){return{version:"3.2.1"}}};var tE=n(473),nE={insert:"head",singleton:!1};sl()(tE.Z,nE);tE.Z.locals;const rE=El(eE,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("svg",{attrs:{"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",width:"54.0mm",height:"8.9683867mm",viewBox:"-0.1 0 90.866723 10.762064",version:"1.1",id:"logo","inkscape:version":"0.92.1 r15371","sodipodi:docname":"logo.svg"}},[n("g",{attrs:{"inkscape:label":"Layer 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-46.836452,-154.97888)"}},[n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 52.870828,157.77701 q -1.291447,-0.71298 -2.24658,-0.71298 -0.645724,0 -1.008944,0.2556 -0.349767,0.2556 -0.349767,0.76679 0,0.47084 0.511198,0.83406 0.524651,0.34977 1.385616,0.67263 0.699534,0.2556 1.197279,0.59192 0.497746,0.32286 0.820608,0.90132 0.336314,0.57846 0.336314,1.46633 0,0.7668 -0.403577,1.42597 -0.390125,0.64573 -1.156922,1.03585 -0.766797,0.37667 -1.829551,0.37667 -0.88787,0 -1.762288,-0.25559 -0.874418,-0.26906 -1.627762,-0.80716 l 0.860965,-1.52014 q 0.511198,0.37667 1.170374,0.61882 0.659177,0.24214 1.183828,0.24214 0.618818,0 1.076206,-0.25559 0.457388,-0.26906 0.457388,-0.86097 0,-0.7668 -1.439426,-1.33181 -0.847513,-0.33631 -1.412521,-0.64572 -0.565009,-0.30941 -0.982039,-0.88787 -0.403577,-0.57846 -0.403577,-1.45288 0,-1.27799 0.83406,-2.05824 0.847512,-0.78025 2.246581,-0.84752 1.103111,0 1.843003,0.2556 0.739892,0.24215 1.439426,0.69954 z",id:"path4489"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 64.359122,155.38245 v 10.30468 h -0.05381 l -6.928079,-6.25545 0.04036,5.85187 h -1.977529 v -10.29122 h 0.08072 l 6.914626,6.34962 -0.04036,-5.9595 z",id:"path4491"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 66.316683,160.34646 q 0,-1.34526 0.672629,-2.51564 0.686082,-1.17037 1.843004,-1.85645 1.170374,-0.69954 2.529085,-0.69954 1.358711,0 2.515633,0.69954 1.170374,0.68608 1.856456,1.85645 0.699534,1.17038 0.699534,2.51564 0,1.37216 -0.699534,2.52908 -0.686082,1.15692 -1.856456,1.84301 -1.156922,0.67262 -2.515633,0.67262 -1.372163,0 -2.529085,-0.67262 -1.156922,-0.68609 -1.843004,-1.84301 -0.672629,-1.15692 -0.672629,-2.52908 z m 2.017888,0 q 0,0.86096 0.403577,1.5874 0.41703,0.72644 1.116564,1.15692 0.712987,0.41703 1.573952,0.41703 0.83406,0 1.520142,-0.41703 0.686081,-0.43048 1.076206,-1.14347 0.390125,-0.72644 0.390125,-1.60085 0,-0.88787 -0.403578,-1.61431 -0.403577,-0.72644 -1.103111,-1.14347 -0.686082,-0.43048 -1.533594,-0.43048 -0.847513,0 -1.547047,0.43048 -0.686082,0.41703 -1.089659,1.14347 -0.403577,0.72644 -0.403577,1.61431 z",id:"path4493"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 85.79623,165.71404 -2.354202,-5.86533 -2.744326,5.89223 -3.981964,-10.29122 h 2.286939 l 1.950624,5.7308 1.506689,-3.78018 -0.78025,-1.95062 h 1.937172 l 2.219676,5.5021 1.681572,-5.5021 h 2.098603 z",id:"path4495"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 96.61799,157.77701 q -1.291447,-0.71298 -2.246581,-0.71298 -0.645723,0 -1.008943,0.2556 -0.349767,0.2556 -0.349767,0.76679 0,0.47084 0.511198,0.83406 0.52465,0.34977 1.385616,0.67263 0.699534,0.2556 1.197279,0.59192 0.497746,0.32286 0.820608,0.90132 0.336314,0.57846 0.336314,1.46633 0,0.7668 -0.403577,1.42597 -0.390125,0.64573 -1.156922,1.03585 -0.766797,0.37667 -1.829551,0.37667 -0.88787,0 -1.762288,-0.25559 -0.874418,-0.26906 -1.627762,-0.80716 l 0.860965,-1.52014 q 0.511198,0.37667 1.170374,0.61882 0.659177,0.24214 1.183827,0.24214 0.618819,0 1.076207,-0.25559 0.457388,-0.26906 0.457388,-0.86097 0,-0.7668 -1.439427,-1.33181 -0.847512,-0.33631 -1.41252,-0.64572 -0.565009,-0.30941 -0.982039,-0.88787 -0.403577,-0.57846 -0.403577,-1.45288 0,-1.27799 0.83406,-2.05824 0.847512,-0.78025 2.246581,-0.84752 1.103111,0 1.843003,0.2556 0.739892,0.24215 1.439426,0.69954 z",id:"path4497"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 105.18707,155.38245 v 1.88337 h -2.40801 v 8.01773 h -1.95062 v -8.01773 h -2.313848 v -1.88337 z",id:"path4499"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 106.12266,160.34646 q 0,-1.34526 0.67263,-2.51564 0.68608,-1.17037 1.843,-1.85645 1.17037,-0.69954 2.52908,-0.69954 1.35871,0 2.51564,0.69954 1.17037,0.68608 1.85645,1.85645 0.69954,1.17038 0.69954,2.51564 0,1.37216 -0.69954,2.52908 -0.68608,1.15692 -1.85645,1.84301 -1.15693,0.67262 -2.51564,0.67262 -1.37216,0 -2.52908,-0.67262 -1.15692,-0.68609 -1.843,-1.84301 -0.67263,-1.15692 -0.67263,-2.52908 z m 2.01788,0 q 0,0.86096 0.40358,1.5874 0.41703,0.72644 1.11657,1.15692 0.71298,0.41703 1.57395,0.41703 0.83406,0 1.52014,-0.41703 0.68608,-0.43048 1.07621,-1.14347 0.39012,-0.72644 0.39012,-1.60085 0,-0.88787 -0.40358,-1.61431 -0.40357,-0.72644 -1.10311,-1.14347 -0.68608,-0.43048 -1.53359,-0.43048 -0.84752,0 -1.54705,0.43048 -0.68608,0.41703 -1.08966,1.14347 -0.40358,0.72644 -0.40358,1.61431 z",id:"path4501"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 123.52442,165.28355 -2.08515,-3.1479 h -1.3049 v 3.1479 h -1.95063 v -9.9011 h 2.99993 q 1.843,0 2.85194,0.90133 1.0224,0.88787 1.0224,2.43491 0,0.91478 -0.39012,1.72194 -0.37668,0.7937 -1.17038,1.25109 l 2.30039,3.59183 z m -3.39005,-5.03126 h 1.38561 q 0.7937,0 1.15692,-0.45739 0.36322,-0.47084 0.36322,-1.00894 0,-0.53811 -0.30941,-1.0224 -0.30941,-0.49774 -1.19728,-0.49774 h -1.39906 z",id:"path4503"}}),e._v(" "),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 137.60317,154.97888 v 10.30467 h -1.95062 v -4.72185 l -3.22862,4.58733 h -0.0269 l -3.10754,-4.29137 v 4.42589 h -1.88336 v -10.30467 h 0.0134 l 5.01781,7.11641 5.13889,-7.11641 z",id:"path4505"}})])]),e._v(" "),n("span",[e._v(e._s(e.version))])])}),[],!1,null,"1c83545f",null).exports;var iE=n(23),aE=n.n(iE);function oE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sE(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function sE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const lE={name:"gradient",components:{"color-picker":aE().Chrome},props:{input:Jw},methods:{getCSSString:function(e){var t,n=["to right"],r=oE(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push("".concat(i.color," ").concat(i.percent,"%"))}}catch(e){r.e(e)}finally{r.f()}return"linear-gradient(".concat(n.join(", "),")")},dragPoint:function(e,t,n){Os(n),e.selected=t;var r=!1,i=t.percent;function a(a){Os(a);var o=a.clientX-n.clientX;if(Math.abs(o)>4&&(r=!0),r&&n.target.parentElement){var s=n.target.parentElement.clientWidth,l=i+o/s*100;t.percent=Math.clamp(Math.round(l),0,100),e.sortValues()}}function o(t){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",o),e.registerEdit()}document.addEventListener("mousemove",a),document.addEventListener("mouseup",o),document.addEventListener("touchmove",a),document.addEventListener("touchend",o)}}},cE=lE;var uE=n(549),hE={insert:"head",singleton:!1};sl()(uE.Z,hE);uE.Z.locals;const pE=El(cE,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color_gradient"},[n("div",{staticClass:"gradient_container checkerboard"},[n("div",{staticClass:"gradient_inner",style:{background:e.getCSSString(e.input.value)}}),e._v(" "),e._l(e.input.value,(function(t){return n("div",{key:t.id,staticClass:"gradient_point",class:{selected:t==e.input.selected},style:{left:t.percent+"%",background:t.color},attrs:{title:t.percent+"%"},on:{mousedown:function(n){return e.dragPoint(e.input,t,n)},touchstart:function(n){return e.dragPoint(e.input,t,n)}}})}))],2),e._v(" "),e.input.selected&&e.input.selected.color?n("div",[n("div",{staticClass:"tool",staticStyle:{float:"right"},on:{click:function(t){return e.input.removePoint()}}},[n("i",{staticClass:"unicode_icon"},[e._v(e._s(""))])]),e._v(" "),n("div",{staticClass:"tool",staticStyle:{float:"right"},on:{click:function(t){return e.input.addPoint()}}},[n("i",{staticClass:"unicode_icon plus"},[e._v(e._s(""))])]),e._v(" "),n("color-picker",{on:{input:function(t){return e.input.change(t,e.$el)}},model:{value:e.input.selected.color,callback:function(t){e.$set(e.input.selected,"color",t)},expression:"input.selected.color"}})],1):n("div",[n("div",{staticClass:"tool",staticStyle:{float:"right"},on:{click:function(t){return e.input.addPoint()}}},[n("i",{staticClass:"unicode_icon plus"},[e._v(e._s(""))])])])])}),[],!1,null,"300efe16",null).exports;const dE=Dx("MousePointerIcon",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),fE=Dx("BrushIcon",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]),mE=Dx("EraserIcon",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),vE=Dx("PaintBucketIcon",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]),gE=Dx("PipetteIcon",[["path",{d:"m2 22 1-1h3l9-9",key:"1sre89"}],["path",{d:"M3 21v-3l9-9",key:"hpe2y6"}],["path",{d:"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z",key:"196du1"}]]),_E=Dx("PlusSquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),yE=Dx("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),bE=Dx("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),xE=Dx("MaximizeIcon",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),wE=Dx("ArrowBigLeftIcon",[["path",{d:"M18 15h-6v4l-7-7 7-7v4h6v6z",key:"lbrdak"}]]),ME=Dx("ArrowBigRightIcon",[["path",{d:"M6 9h6V5l7 7-7 7v-4H6V9z",key:"7fvt9c"}]]),SE=Dx("UndoIcon",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),EE=Dx("RedoIcon",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);function AE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return TE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var CE=new ex;const kE={name:"texture-input",components:{"color-picker":aE().Chrome,MousePointer:dE,Brush:fE,Eraser:mE,PaintBucket:vE,Pipette:gE,PlusSquare:_E,RefreshCcw:yE,Save:bE,Maximize:xE,ArrowBigLeft:wE,ArrowBigRight:ME,X:jx,Undo:SE,Redo:EE},props:{input:Uw,data:Object},data:function(){return{Texture:Bl,paint_color:{hex8:"#ffffffff"},zoom:1,viewport_size:256,offset:[0,0],tool:"select",color_picker_open:!1,new_texture_size:[16,16],cursor_position:{x:0,y:0,active:!1},pixel_position:{x:0,y:0}}},methods:{setPaintColor:function(e){this.paint_color=e},newTexture:function(){this.$refs.new_texture_dialog.showModal()},newTextureConfirm:function(){this.$refs.new_texture_dialog.close(),Bl.createEmpty(this.new_texture_size[0],this.new_texture_size[1])},saveTexture:function(){Bl.source&&Bl.save()},reloadTexture:function(){Bl.source&&Bl.reload()},selectTool:function(e){this.tool=e},onMouseEnter:function(e){this.cursor_position.active=!0},onMouseLeave:function(e){this.cursor_position.active=!1},onTouchStart:function(e){var t,n=this,r=this.zoom,i=function(e){if(2==e.touches.length){e.preventDefault();var i,a=(i=e.touches,Math.sqrt(Math.pow(i[0].clientX-i[1].clientX,2)+Math.pow(i[0].clientY-i[1].clientY,2)));null==t?t=a:t!=a&&n.setZoom(r*(a/t),e.touches[0])}};document.addEventListener("touchmove",i),document.addEventListener("touchend",(function e(t){document.removeEventListener("touchmove",i),document.removeEventListener("touchend",e)}))},onMouseDown:function(e){var t=this;if(!e.target.classList.contains("viewport_scrollbar")){if(this.onMouseMove(e),2==e.button||1==e.button||"select"==this.tool&&"touch"==e.pointerType){var n=this.offset.slice();e.preventDefault();var r=function(r){r.preventDefault();var i,a=[n[0]+(r.clientX-e.clientX),n[1]+(r.clientY-e.clientY)];isNaN(a[0])||(i=t.offset).splice.apply(i,[0,2].concat(a))};return document.addEventListener("pointermove",r),void document.addEventListener("pointerup",(function e(t){document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",e)}))}var i={wrapper:this.$refs.texture_wrapper,position:this.pixel_position,tool:this.tool,color:this.paint_color.hex8};if(e.altKey||"color_picker"==this.tool){var a=Bl.pickColor(e,i);this.paint_color.hex8=a}else"brush"==this.tool||"eraser"==this.tool?Bl.usePaintTool(e,i):"fill_tool"==this.tool&&Bl.useFillTool(e,i)}},onMouseMove:function(e){var t=AE(this.data.texture.uv.inputs.size.value,2),n=t[0],r=t[1],i=this.width,a=this.height,o=this.input.image_element.naturalWidth||Bl.canvas.width,s=this.input.image_element.naturalHeight||Bl.canvas.height,l=this.$refs.texture_wrapper.getBoundingClientRect();this.cursor_position.x=Math.floor((e.clientX-1-l.left)/i*n),this.cursor_position.y=Math.floor((e.clientY-1-l.top)/a*r),this.pixel_position.x=Math.floor((e.clientX-1-l.left)/i*o),this.pixel_position.y=Math.floor((e.clientY-1-l.top)/a*s)},onMouseWheel:function(e){if(e.preventDefault(),this.onMouseMove(e),e.ctrlKey||e.metaKey){var t=this.zoom;e.deltaY>1?t/=1.1:t*=1.1,this.setZoom(t,e)}else e.shiftKey?this.offset.splice(0,1,this.offset[0]-50*Math.sign(e.deltaY)):this.offset.splice(1,1,this.offset[1]-50*Math.sign(e.deltaY))},setZoom:function(e,t){var n=this.zoom;if(e>1/1.1&&e<1.1&&(e=1),(e=Math.clamp(e,Math.min(.5,this.ratio),8))!=this.zoom&&(this.zoom=e,t&&null!=t.clientX)){var r=this.$refs.texture_wrapper.getBoundingClientRect(),i=[t.clientX-1-r.left,t.clientY-1-r.top],a=1-this.zoom/n,o=this.$refs.texture_wrapper.clientWidth>this.$refs.texture_viewport.clientWidth;this.offset.splice(0,2,this.offset[0]+i[0]*a*(o?1:0),this.offset[1]+i[1]*a)}},viewportIsCentered:function(){return 1==this.zoom&&!this.offset[0]&&!this.offset[1]},maximizeViewport:function(){this.viewportIsCentered()?this.zoom=Math.min(1,this.ratio):(this.offset.splice(0,2,0,0),this.zoom=1)},getScrollBarOffset:function(e){var t;if(1==e){t=(this.viewport_size-this.height)/2;var n=this.zoom/this.ratio;t=2*(t-this.offset[e])/n}else{t=this.$refs.texture_wrapper.clientWidth>this.$refs.texture_viewport.clientWidth?(this.$refs.texture_viewport.clientWidth-this.width)/2:0;var r=this.$refs.texture_wrapper.clientWidth/this.$refs.texture_viewport.clientWidth;t=2*(t-this.offset[e])/r}return t+"px"},slideScrollBar:function(e,t){var n=this,r=this.offset[e],i=e?"clientY":"clientX",a=function(a){var o=e?n.zoom/n.ratio:n.$refs.texture_wrapper.clientWidth/n.$refs.texture_viewport.clientWidth,s=r-(a[i]-t[i])*o;n.offset.splice(e,1,s)};document.addEventListener("pointermove",a),document.addEventListener("pointerup",(function e(t){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",e)}))},offsetUVValue:function(e,t){if(!t)return e;if(!e||"0"===e)return t.toString();if("string"!=typeof e||isNaN(e)||(e=parseFloat(e)),"number"==typeof e)return e+t;var n=e.match(/^-?\s*\d+(\.\d+)?\s*(\+|-)/);if(n){var r=parseFloat(n[0].substr(0,n[0].length-1))+t;return 0==r?(e=e.substr(n[0].length+("+"==e[n[0].length-1]?0:-1))).trim():Is(r)+(" "==n[0].substr(-2,1)?" ":"")+e.substr(n[0].length-1)}var i=e.match(/(\+|-)\s*\d*(\.\d+)?\s*$/);if(i){var a=parseFloat(i[0])+t;return e.substr(0,i.index)+("-"==a.toString().substr(0,1)?"":"+")+Is(a)}return t?Is(t)+("-"==e.substr(0,1)?"":"+")+e:void 0},dragUV:function(e,t){var n=this;if(1!=e.button&&2!=e.button&&"select"==this.tool){var r=this.data.texture.uv.inputs[t?"uv_size":"uv"],i=r.value.slice(),a=this.cursor_position.x,o=this.cursor_position.y,s={x:this.cursor_position.x,y:this.cursor_position.y},l=function(e){var t=n.cursor_position;if(s.x!=t.x||s.y!=t.y){var l=[t.x-a,t.y-o];r.set([n.offsetUVValue(i[0],l[0]).toString(),n.offsetUVValue(i[1],l[1]).toString()]),s.x=t.x,s.y=t.y}};document.addEventListener("pointermove",l),document.addEventListener("pointerup",(function e(t){document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",e),Gs("edit uv")}))}},calculateUVSample:function(){var e=this.data.texture.uv.inputs,t=AE(e.size.value,2),n=t[0],r=t[1],i=e.uv.value.map((function(e){return CE.parse(e)})),a=e.uv_size.value.map((function(e){return CE.parse(e)})),o=this.width,s=this.height;return{left:i[0]/n*o+"px",top:i[1]/r*s+"px",width:a[0]/n*o+"px",height:a[1]/r*s+"px"}},calculateUVPerimeter:function(){for(var e=this.data.texture.uv.inputs,t=AE(e.size.value,2),n=t[0],r=t[1],i=[n,r,0,0],a=function(){var t={"variable.particle_random_1":o,"variable.particle_random_2":o,"variable.particle_random_3":o,"variable.particle_random_4":o,"variable.emitter_random_1":o,"variable.emitter_random_2":o,"variable.emitter_random_3":o,"variable.emitter_random_4":o},n=e.uv.value.map((function(e){return CE.parse(e,t)})),r=e.uv_size.value.map((function(e){return CE.parse(e,t)}));i[0]=Math.min(i[0],n[0],n[0]+r[0]),i[1]=Math.min(i[1],n[1],n[1]+r[1]),i[2]=Math.max(i[2],n[0],n[0]+r[0]),i[3]=Math.max(i[3],n[1],n[1]+r[1])},o=0;o<1;o+=.249999999)a();var s=this.width,l=this.height;return{left:i[0]/n*s+"px",top:i[1]/r*l+"px",width:(i[2]-i[0])/n*s+"px",height:(i[3]-i[1])/r*l+"px"}},moveByFrame:function(e){var t=this.data.texture.uv.inputs,n=t.uv_step.value.map((function(e){return CE.parse(e)})),r=AE(t.size.value,2),i=r[0],a=r[1],o=this.width,s=this.height;n[0]*=o/i*e,n[1]*=s/a*e,this.offset.splice(0,2,this.offset[0]-n[0],this.offset[1]-n[1])},getBrushOutlineStyle:function(){var e=this.width,t=this.height,n=this.input.image_element.naturalWidth||Bl.canvas.width,r=this.input.image_element.naturalHeight||Bl.canvas.height;return{left:this.pixel_position.x*(e/n)+"px",top:this.pixel_position.y*(t/r)+"px",width:e/n+"px",height:t/r+"px"}},UVDefinitionMode:function(){return this.data.texture.uv.inputs.mode.value},slideEditorHeight:function(e){Os(e);var t=this,n=this.viewport_size;function r(r){Os(e),t.viewport_size=Math.clamp(n+r.clientY-e.clientY,64,window.innerHeight-120)}function i(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i)}document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",i,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i,{passive:!1})}},computed:{size:function(){return this.viewport_size*this.zoom},width:function(){return this.viewport_size*this.zoom},ratio:function(){if("full"==this.UVDefinitionMode())return this.image_ratio;var e=AE(this.data.texture.uv.inputs.size.value,2);return e[0]/e[1]},image_ratio:function(){return this.inputs&&this.inputs.image_element&&this.inputs.image_element.naturalWidth?this.input.image_element.naturalWidth/this.input.image_element.naturalHeight:Bl.canvas?Bl.canvas.width/Bl.canvas.height:1},height:function(){return this.viewport_size*this.zoom/this.ratio}},mounted:function(){var e=this;document.addEventListener("click",(function(){e.color_picker_open&&(e.color_picker_open=!1)}),{passive:!0}),this.$refs.canvas_wrapper.append(Bl.canvas)}},LE=kE;var PE=n(416),RE={insert:"head",singleton:!1};sl()(PE.Z,RE);PE.Z.locals;var IE=n(284),zE={insert:"head",singleton:!1};sl()(IE.Z,zE);IE.Z.locals;const OE=El(LE,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"texture_input",attrs:{tool:e.tool}},[n("div",{staticClass:"toolbar"},[n("div",{staticClass:"tool",class:{selected:"select"==e.tool},attrs:{title:"Select"},on:{click:function(t){return e.selectTool("select")}}},[n("MousePointer")],1),e._v(" "),n("div",{staticClass:"tool",class:{selected:"brush"==e.tool},attrs:{title:"Brush"},on:{click:function(t){return e.selectTool("brush")}}},[n("Brush")],1),e._v(" "),n("div",{staticClass:"tool",class:{selected:"eraser"==e.tool},attrs:{title:"Eraser"},on:{click:function(t){return e.selectTool("eraser")}}},[n("Eraser")],1),e._v(" "),n("div",{staticClass:"tool",class:{selected:"fill_tool"==e.tool},attrs:{title:"Paint Bucket"},on:{click:function(t){return e.selectTool("fill_tool")}}},[n("PaintBucket")],1),e._v(" "),n("div",{staticClass:"tool",class:{selected:"color_picker"==e.tool},attrs:{title:"Color Picker"},on:{click:function(t){return e.selectTool("color_picker")}}},[n("Pipette")],1),e._v(" "),n("span",{staticClass:"undo_controls"},[n("div",{staticClass:"tool",attrs:{title:"Undo"},on:{click:function(t){return e.Texture.undo()}}},[n("Undo")],1),e._v(" "),n("div",{staticClass:"tool",attrs:{title:"Redo"},on:{click:function(t){return e.Texture.redo()}}},[n("Redo")],1)]),e._v(" "),n("div",{staticClass:"color_preview",on:{click:function(t){t.stopPropagation(),e.color_picker_open=!e.color_picker_open}}},[n("div",{staticClass:"color_preview_color",style:{backgroundColor:e.paint_color.hex8}})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.color_picker_open,expression:"color_picker_open"}],attrs:{id:"color_picker_overlay"},on:{click:function(e){e.stopPropagation()}}},[n("color-picker",{attrs:{value:e.paint_color.hex8},on:{change:function(t){return e.setPaintColor(t)},input:function(t){return e.setPaintColor(t)}}})],1),e._v(" "),n("div",{ref:"texture_viewport",staticClass:"texture_viewport",style:{"--zoom":e.zoom,"--size":e.size+"px","--height":e.height+"px","--outer-height":e.viewport_size+"px","--offset-x":e.offset[0]+"px","--offset-y":e.offset[1]+"px"},on:{pointerenter:function(t){return e.onMouseEnter(t)},pointermove:function(t){return e.onMouseMove(t)},pointerleave:function(t){return e.onMouseLeave(t)},pointerdown:function(t){return e.onMouseDown(t)},touchstart:function(t){return e.onTouchStart(t)},contextmenu:function(e){e.preventDefault()},mousewheel:function(t){return e.onMouseWheel(t)}}},[n("div",{ref:"texture_wrapper",staticClass:"input_texture_wrapper checkerboard",style:{left:e.offset[0]+"px",top:e.offset[1]+"px",height:e.height+"px"}},[n("div",{ref:"canvas_wrapper",attrs:{id:"canvas_wrapper"}}),e._v(" "),"full"!=e.UVDefinitionMode()?[n("div",{staticClass:"uv_preview uv_perimeter_preview",style:e.calculateUVPerimeter(),attrs:{title:"UV Perimeter"},on:{pointerdown:function(t){return e.dragUV(t)}}}),e._v(" "),n("div",{staticClass:"uv_preview uv_sample_preview",style:e.calculateUVSample(),attrs:{title:"UV Sample"},on:{pointerdown:function(t){return e.dragUV(t)}}},["select"==e.tool?n("div",{staticClass:"uv_preview_size_handle",on:{pointerdown:function(t){return t.stopPropagation(),e.dragUV(t,!0)}}}):e._e()])]:e._e(),e._v(" "),e.cursor_position.active&&["brush","eraser","color_picker"].includes(e.tool)?n("div",{style:e.getBrushOutlineStyle(),attrs:{id:"brush_outline"}}):e._e()],2),e._v(" "),!e.viewportIsCentered()&&e.zoom>1?n("div",{staticClass:"viewport_scrollbar horizontal",style:{left:e.getScrollBarOffset(0),width:30/e.zoom+"%"},on:{pointerdown:function(t){return e.slideScrollBar(0,t)}}}):e._e(),e._v(" "),e.zoom/e.ratio>1?n("div",{staticClass:"viewport_scrollbar vertical",style:{top:e.getScrollBarOffset(1),height:30/(e.zoom/e.ratio)+"%"},on:{pointerdown:function(t){return e.slideScrollBar(1,t)}}}):e._e()]),e._v(" "),n("div",{staticClass:"texture_info_bar"},[n("div",{staticClass:"info"},[e._v(e._s(e.offset[0])+"  "+e._s(e.input.image_element.naturalWidth)+" x "+e._s(e.input.image_element.naturalHeight)+" px")]),e._v(" "),n("div",{staticClass:"info"},[e._v(e._s(e.cursor_position.active?e.cursor_position.x+" x "+e.cursor_position.y:""))]),e._v(" "),n("div",{staticClass:"info"},[e._v(e._s(Math.round(100*e.zoom)+"%"))]),e._v(" "),"animated"==e.UVDefinitionMode()?[n("div",{staticClass:"tool",attrs:{title:"Previous Frame"},on:{click:function(t){return e.moveByFrame(-1)}}},[n("ArrowBigLeft",{attrs:{size:20}})],1),e._v(" "),n("div",{staticClass:"tool",attrs:{title:"Next Frame"},on:{click:function(t){return e.moveByFrame(1)}}},[n("ArrowBigRight",{attrs:{size:20}})],1)]:e._e(),e._v(" "),n("div",{staticClass:"tool",attrs:{title:"Center Viewport"},on:{click:function(t){return e.maximizeViewport()}}},[n("Maximize",{attrs:{size:20}})],1)],2),e._v(" "),n("div",{staticClass:"resize_line",on:{mousedown:function(t){return e.slideEditorHeight(t)},touchstart:function(t){return e.slideEditorHeight(t)}}}),e._v(" "),n("div",{staticClass:"meta toolbar"},[e.input.allow_upload?[n("div",{staticClass:"tool",on:{click:function(t){return e.Texture.reset()}}},[n("X")],1),e._v(" "),n("input",{staticStyle:{"margin-top":"5px"},attrs:{id:"particle-texture-image",type:"file",accept:".png"},on:{change:function(t){return e.input.change(t)}}})]:e._e(),e._v(" "),e.input.allow_upload?e._e():n("div",{staticClass:"tool",attrs:{title:"Reload Texture"},on:{click:function(t){return e.reloadTexture()}}},[n("RefreshCcw")],1),e._v(" "),n("div",{staticClass:"tool",attrs:{title:"New Texture"},on:{click:function(t){return e.newTexture()}}},[n("PlusSquare")],1),e._v(" "),e.Texture.internal_changes?n("div",{staticClass:"tool",attrs:{title:"Save"},on:{click:function(t){return e.saveTexture()}}},[n("Save")],1):e._e()],2),e._v(" "),n("dialog",{ref:"new_texture_dialog",staticClass:"modal_dialog",attrs:{id:"new_texture_dialog"}},[n("div",{staticClass:"form_bar"},[n("label",[e._v("Width")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.new_texture_size[0],expression:"new_texture_size[0]",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.new_texture_size[0]},on:{input:function(t){t.target.composing||e.$set(e.new_texture_size,0,e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),n("div",{staticClass:"form_bar"},[n("label",[e._v("Height")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.new_texture_size[1],expression:"new_texture_size[1]",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.new_texture_size[1]},on:{input:function(t){t.target.composing||e.$set(e.new_texture_size,1,e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),n("div",{staticClass:"button_bar"},[n("button",{on:{click:function(t){return e.newTextureConfirm()}}},[e._v("Confirm")]),e._v(" "),n("button",{on:{click:function(t){return e.$refs.new_texture_dialog.close()}}},[e._v("Cancel")])])])])}),[],!1,null,"1f4988d8",null).exports;const DE=Dx("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),NE=Dx("CheckSquareIcon",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),FE={name:"checkbox",props:{value:Boolean},components:{Square:DE,CheckSquare:NE},methods:{toggle:function(e){this.$emit("input",!this.value),this.$emit("change",e)}}};var BE=n(730),UE={insert:"head",singleton:!1};sl()(BE.Z,UE);BE.Z.locals;const HE=El(FE,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custom_checkbox"},[n("input",{attrs:{type:"checkbox"},domProps:{value:e.value},on:{input:function(t){return e.toggle(t)}}}),e._v(" "),e.value?n("CheckSquare",{attrs:{size:21},on:{click:function(t){return e.toggle(t)}}}):n("Square",{attrs:{size:21},on:{click:function(t){return e.toggle(t)}}})],1)}),[],!1,null,"64bb3515",null).exports;const jE=Dx("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),VE=Dx("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),GE={name:"event-picker",components:{Plus:jE,Zap:VE},props:{blacklist:Array,replace:Boolean},data:function(){return{is_open:!1}},methods:{openMenu:function(){var e=this;this.is_open||(this.is_open=!0,this.click_listener=function(t){e.$refs.list&&(e.$refs.list.contains(t.target)||e.closeMenu())},setTimeout((function(){document.addEventListener("click",e.click_listener)}),10))},closeMenu:function(){this.is_open=!1,this.click_listener&&(document.removeEventListener("click",this.click_listener),delete this.click_listener)},select:function(e,t){this.$emit("select",e,t),this.closeMenu()},getEventIDs:function(){var e=this,t=Object.keys(Lw.events);return this.blacklist instanceof Array&&(t=t.filter((function(t){return!e.blacklist.includes(t)}))),t}}},WE=GE;var qE=n(823),XE={insert:"head",singleton:!1};sl()(qE.Z,XE);qE.Z.locals;const YE=El(WE,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event_picker_wrapper"},[n("div",{staticClass:"highlighting_button",on:{click:function(t){return e.openMenu()}}},[e.replace?n("Zap",{attrs:{size:22}}):n("Plus",{attrs:{size:22}})],1),e._v(" "),e.is_open?n("ul",{ref:"list",staticClass:"list"},[e._l(e.getEventIDs(),(function(t){return n("li",{key:t,on:{click:function(n){return e.select(t,n)}}},[n("Zap",{attrs:{size:20}}),e._v("\n\t\t\t"+e._s(t)+"\n\t\t")],1)})),e._v(" "),0==e.getEventIDs().length?[e._v("\n\t\t\tNo events available\n\t\t")]:e._e()],2):e._e()])}),[],!1,null,"281608f1",null).exports,ZE=Dx("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),JE=Dx("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function QE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return KE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KE(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function KE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $E(e,t,n,r){var i=e.filter((function(e){return e.startsWith(t)}));return e.forEach((function(e){!i.includes(e)&&function(e,t){var n,r=0,i=QE(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(find=e.substring(r).indexOf(a),-1==find)return!1;r+=find+1}}catch(e){i.e(e)}finally{i.f()}return!0}(e,t)&&i.push(e)})),n&&n.forEach((function(e){return i.remove(e)})),i.map((function(e){return{text:e.replace(/\.(png|tga)$/,""),label:e,overlap:t.length}}))}var eA={},tA={"":["textures"],textures:["particle","entity","blocks","items","flame_atlas.png"],"textures/particle":["particles.png","campfire_smoke.png","sculk_charge_pop.png","sculk_charge.png","sculk_soul.png","shriek.png","sonic_explosion.png","soul.png","vibration_signal.png"]};const nA={name:"input-group",props:{group:Object,group_key:String,subject_key:String,data:Object},components:{PrismEditor:vl,"color-picker":aE().Chrome,Gradient:pE,TextureInput:OE,Checkbox:HE,EventPicker:YE,ChevronDown:ZE,ChevronUp:JE,Plus:jE,X:jx},methods:{isInputVisible:function(e,t){return e.isVisible(t)},highlightMolang:function(e){return hl().highlight(e,yl.molang)},highlightGeneric:function(e){return hl().highlight(e,yl.generic)},autocomplete:function(e,t){return al(e,t,"input")},autocompletePath:function(e,t){return function(e,t,n){var r=e.substring(0,t);if(!r)return[];var i=(r=r.toLowerCase()).split("/"),a=i.at(-1),o=i.slice(0,-1).join("/");return eA[o]?$E(eA[o],a,null):Cs?(Cs.postMessage({type:"texture_autocomplete",path:o}),eA[o]=[],new Promise((function(e){window.addEventListener("message",(function t(n){"texture_autocomplete"==n.data.type&&(window.removeEventListener("message",t),eA[o]=n.data.list,e($E(eA[o],a,null)))}),!1)}))):tA[o]?$E(tA[o],a,null):[]}(e,t)},toggleExpand:function(e){e.expandable&&(e.expanded=!e.expanded)},edit:function(e,t){Gs(t,e)},addEventToTimeline:function(e,t,n){var r={uuid:Ps(),event:[t],time:0};e.timeline.push(r),e.change(n)},pickEventOnNameClick:function(e){e.target.nextElementSibling.click()}}},rA=nA;var iA=n(478),aA={insert:"head",singleton:!1};sl()(iA.Z,aA);iA.Z.locals;var oA=El(rA,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",e._l(e.group.inputs,(function(t,r){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.isInputVisible(t,e.group),expression:"isInputVisible(input, group)"}],key:r,staticClass:"input_wrapper",attrs:{input_type:t.type,title:t.info,id:e.subject_key+"-"+e.group_key+"-"+r}},[t.label?n("label",{attrs:{for:r}},[e._v(e._s(t.label))]):e._e(),e._v(" "),t.expandable?n("div",{staticClass:"tool input_expand_button",attrs:{title:"Expand"},on:{click:function(n){return e.toggleExpand(t)}}},[t.expanded?n("ChevronUp",{attrs:{size:20}}):n("ChevronDown",{attrs:{size:20}})],1):e._e(),e._v(" "),-1==t.axis_count?[n("div",{staticClass:"tool list_add_tool",on:{click:function(e){return t.value.push("")}}},[n("i",{staticClass:"unicode_icon plus"},[e._v(e._s(""))])]),e._v(" "),n("ul",{staticClass:"input_list"},e._l(t.value,(function(r,i){return n("li",{key:i},["text"==t.type||"molang"==t.type?n("prism-editor",{attrs:{highlight:"molang"==t.type?e.highlightMolang:e.highlightGeneric,language:"","line-numbers":!1,placeholder:t.placeholder,index:i,autocomplete:"molang"==t.type?e.autocomplete:null},on:{input:function(e){return t.emitInput(e)},focus:function(e){return t.focus(i,e)}},model:{value:t.value[i],callback:function(n){e.$set(t.value,i,n)},expression:"input.value[index]"}}):e._e(),e._v(" "),"number"==t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],attrs:{type:"number",step:t.step,min:t.min,max:t.max},domProps:{value:t.value},on:{input:[function(n){n.target.composing||e.$set(t,"value",n.target.value)},function(e){return t.change(e)}]}}):e._e(),e._v(" "),n("div",{staticClass:"tool",on:{click:function(e){t.value.remove(r),t.change(e)}}},[n("i",{staticClass:"unicode_icon"},[e._v(e._s(""))])])],1)})),0)]:n("div",{staticClass:"input_right",class:{expandable:t.expandable,expanded:t.expanded,full_width:!t.label,image:"image"==t.type},attrs:{axes:t.axis_count}},[1==t.axis_count?["text"==t.type||"molang"==t.type?n("prism-editor",{attrs:{highlight:"molang"==t.type?e.highlightMolang:e.highlightGeneric,language:"","line-numbers":!1,value:t.value.toString(),placeholder:t.placeholder,autocomplete:"molang"==t.type?e.autocomplete:"particle_texture_path"==t.id?e.autocompletePath:null},on:{input:function(e){return t.emitInput(e)},focus:function(e){return t.focus(-1,e)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"input.value"}}):e._e(),e._v(" "),"number"==t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],attrs:{type:"number",step:t.step,min:t.min,max:t.max},domProps:{value:t.value},on:{input:[function(n){n.target.composing||e.$set(t,"value",n.target.value)},function(e){return t.change(e)}]}}):e._e()]:["text"==t.type||"molang"==t.type?e._l(t.axis_count,(function(r){return n("div",{key:r,staticClass:"prism_editor_outer_wrapper input_vector"},[n("prism-editor",{attrs:{highlight:"molang"==t.type?e.highlightMolang:e.highlightGeneric,"line-numbers":!1,value:t.value[r-1].toString(),index:r-1,placeholder:t.placeholder,autocomplete:"molang"==t.type?e.autocomplete:null},on:{input:function(e){return t.emitInput(e)},focus:function(e){return t.focus(r-1,e)}},model:{value:t.value[r-1],callback:function(n){e.$set(t.value,r-1,n)},expression:"input.value[i-1]"}})],1)})):e._e(),e._v(" "),"number"==t.type?e._l(t.axis_count,(function(r){return n("input",{directives:[{name:"model",rawName:"v-model",value:t.value[r-1],expression:"input.value[i-1]"}],key:r,staticClass:"input_vector",attrs:{type:"number",step:t.step,min:t.min,max:t.max,index:r-1},domProps:{value:t.value[r-1]},on:{input:[function(n){n.target.composing||e.$set(t.value,r-1,n.target.value)},function(e){return t.change(e)}]}})})):e._e()],e._v(" "),"checkbox"==t.type?n("checkbox",{attrs:{id:r},on:{change:function(e){return t.change(e)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"input.value"}}):e._e(),e._v(" "),"select"==t.type?n("select",{directives:[{name:"model",rawName:"v-model",value:t.meta_value,expression:"input.meta_value"}],attrs:{id:r},on:{change:[function(n){var r=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"meta_value",n.target.multiple?r:r[0])},function(e){return t.change(e)}]}},e._l(t.options,(function(t,r){return n("option",{key:r,attrs:{id:r}},[e._v(e._s(t))])})),0):e._e(),e._v(" "),"select_custom"==t.type?[n("select",{directives:[{name:"model",rawName:"v-model",value:t.meta_value,expression:"input.meta_value"}],attrs:{id:r},on:{change:[function(n){var r=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"meta_value",n.target.multiple?r:r[0])},function(e){return t.change(e)}]}},e._l(t.options,(function(t,r){return n("option",{key:r,attrs:{id:r}},[e._v(e._s(t))])})),0),e._v(" "),t.meta_value==t.options.custom?n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],attrs:{type:"text"},domProps:{value:t.value},on:{input:[function(n){n.target.composing||e.$set(t,"value",n.target.value)},function(e){return t.change(e)}]}}):e._e()]:e._e(),e._v(" "),"event_list"==t.type?[n("ul",{staticClass:"event_list"},[e._l(t.value,(function(r){return n("li",{key:r,staticClass:"event_list_event"},[n("label",[e._v(e._s(r))]),e._v(" "),n("X",{staticClass:"highlighting_button",attrs:{size:18},on:{click:function(e){t.value.remove(r),t.change(e)}}})],1)})),e._v(" "),n("event-picker",{on:{select:function(e,n){t.value.push(e),t.change(n)}}})],2)]:"event_timeline"==t.type?[n("event-picker",{on:{select:function(n,r){e.addEventToTimeline(t,n,r)}}})]:e._e(),e._v(" "),"event_speed_list"==t.type?[n("ul",{staticClass:"event_list event_speed_list"},[e._l(t.value,(function(r){return n("li",{key:r.event,staticClass:"event_list_event"},[n("label",[e._v(e._s(r.event))]),e._v(" "),n("X",{staticClass:"highlighting_button",attrs:{size:18},on:{click:function(e){t.value.remove(r),t.change(e)}}}),e._v(" "),n("div",{staticClass:"event_min_speed"},[n("label",[e._v("Min Speed")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:r.min_speed,expression:"event_obj.min_speed",modifiers:{number:!0}}],attrs:{type:"number",min:"0"},domProps:{value:r.min_speed},on:{change:function(e){return t.change(e)},input:function(t){t.target.composing||e.$set(r,"min_speed",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])],1)})),e._v(" "),n("event-picker",{on:{select:function(e,n){t.value.push({event:e,min_speed:0}),t.change(n)}}})],2)]:e._e(),e._v(" "),"color"==t.type?n("color-picker",{on:{input:function(n){return t.change(n,e.$el)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"input.value"}}):e._e(),e._v(" "),"gradient"==t.type?n("gradient",{attrs:{input:t}}):e._e(),e._v(" "),"image"!=t.type||t.image.hidden?e._e():[n("texture-input",{attrs:{input:t,data:e.data},on:{"update:input":function(e){t=e}}})]],2),e._v(" "),"event_timeline"==t.type?[n("ul",{staticClass:"event_timeline",class:{has_entries:t.timeline.length}},e._l(t.timeline,(function(r){return n("li",{key:r.uuid},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:r.time,expression:"entry.time",modifiers:{number:!0}}],attrs:{type:"number",step:"0.05",min:"0"},domProps:{value:r.time},on:{input:[function(t){t.target.composing||e.$set(r,"time",e._n(t.target.value))},function(t){return e.edit(t,"change event timeline")}],blur:[function(e){return t.change(e)},function(t){return e.$forceUpdate()}]}}),e._v(" "),n("ul",{staticClass:"event_list timeline_event_list"},[e._l(r.event,(function(i){return n("li",{key:i,staticClass:"event_list_event"},[n("label",[e._v(e._s(i))]),e._v(" "),n("X",{staticClass:"highlighting_button",attrs:{size:18},on:{click:function(e){r.event.remove(i),t.change(e)}}})],1)})),e._v(" "),n("event-picker",{on:{select:function(e,n){r.event.push(e),t.change(n)}}})],2),e._v(" "),n("X",{staticClass:"highlighting_button timeline_remove_button",attrs:{size:18},on:{click:function(e){t.timeline.remove(r),t.change(e)}}})],1)})),0)]:e._e()],2)})),0)}),[],!1,null,"21003fb4",null);const sA=oA.exports;function lA(e){return lA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lA(e)}function cA(e){return function(e){if(Array.isArray(e))return hA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uA(e,t){if(e){if("string"==typeof e)return hA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hA(e,t):void 0}}function hA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const pA={name:"curve",components:{InputGroup:sA},props:{curve:Object,group_key:String,subject_key:String},data:function(){return{handle_offset:24,height:140}},methods:{getWidth:function(){return this.$el?this.$el.clientWidth:300},simulateHover:function(e){var t=e.target;setTimeout((function(){document.addEventListener("touchstart",(function e(n){n.target!=t&&n.target.parentElement!=t&&setTimeout((function(){t.classList.remove("touch_active"),document.removeEventListener("touchstart",e)}),1)})),t.classList.add("touch_active")}),10)},getValue:function(e,t){return"object"==lA(e)?t&&e.left_value!==e.right_value?"".concat(e.left_value," / ").concat(e.right_value):e.left_value:e},slideValue:function(e,t){Os(t),this.curve.selected_point=e;var n=this,r=this.curve,i=t.clientY,a=t.clientX,o=r.nodes[e].time,s=.03*(r.max-r.min),l="bezier_chain"==this.curve.config.mode?r.nodes[e].left_value:r.nodes[e],c="bezier_chain"==this.curve.config.mode&&r.nodes[e].left_slope,u="bezier_chain"==this.curve.config.mode&&r.nodes[e].left_value==r.nodes[e].right_value,h="bezier_chain"==this.curve.config.mode&&r.nodes[e].left_slope==r.nodes[e].right_slope;function p(p){if(Os(p),t.target.classList.contains("curve_handle_point")){var d=t.target.classList.contains("right_handle"),f=c+.05*(i-p.clientY)*(d?1:-1);f=Math.snapToValues(f,[0],s),!h&&d||(r.nodes[e].left_slope=Math.roundTo(f,2)),(h||d)&&(r.nodes[e].right_slope=Math.roundTo(f,2)),n.updateSVG()}else{var m=l+(i-p.clientY)/n.height*(r.max-r.min);if(m=Math.snapToValues(m,[1,0,-1],s),"bezier_chain"==r.config.mode){var v=o-(a-p.clientX)/(n.getWidth()-16);r.nodes[e].time=Math.clamp(Math.roundTo(v,3),0,1),(u||!p.ctrlKey&&!p.metaKey)&&(r.nodes[e].left_value=Math.roundTo(m,2)),(u||p.ctrlKey||p.metaKey)&&(r.nodes[e].right_value=Math.roundTo(m,2)),r.updateMinMax(),n.updateSVG()}else r.setNode(e,m)}}function d(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",d),Gs("edit curve node")}document.addEventListener("mousemove",p,{passive:!1}),document.addEventListener("mouseup",d,{passive:!1}),document.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("touchend",d,{passive:!1})},slideCurveHeight:function(e){Os(e);var t=this,n=this.height;function r(r){Os(e),t.height=n+r.clientY-e.clientY,t.updateSVG()}function i(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i)}document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",i,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i,{passive:!1})},registerNodeChange:function(e){if("bezier_chain"==this.curve.config.mode&&this.curve.nodes[this.curve.selected_point]){var t=this.curve.nodes[this.curve.selected_point];t.left_value=parseFloat(t.left_value),t.right_value=parseFloat(t.right_value),t.left_slope=parseFloat(t.left_slope),t.right_slope=parseFloat(t.right_slope),this.curve.updateMinMax(),"left_value"==e&&(t.right_value=t.left_value),"left_slope"==e&&(t.right_slope=t.left_slope)}Gs("edit curve node"),this.updateSVG()},addNode:function(e,t){var n=0;null!=this.curve.nodes[e-1]&&null!=this.curve.nodes[e]&&(n=(this.curve.nodes[e-1]+this.curve.nodes[e])/2),n=Math.round(100*n)/100,this.curve.nodes.splice(e,0,n),this.curve.updateSVG(),Gs("add curve node")},addBezierChainNode:function(e){if(e.target.classList.contains("curve_controls")){Os(e);var t=this.curve,n=e.offsetY/this.height;n=t.min+(t.max-t.min)*(this.height+5-e.offsetY)/this.height,n=Math.roundTo(n,2);var r={time:Math.clamp(Math.roundTo(e.offsetX/this.getWidth(),2),0,1),left_value:n,right_value:n,left_slope:0,right_slope:0};this.curve.nodes.push(r),this.curve.updateSVG(),Gs("add curve node")}},updateSVG:function(){var e=this,t=this.curve,n=this;if(t.svg_data="",t.bezier_handles="",t.vertical_line_data="",!(b=document.querySelectorAll('.curve[uuid="'.concat(t.uuid,'"] .curve_node .curve_point'))).length)return t;var r=Ds(document.querySelector('.curve[uuid="'.concat(t.uuid,'"] .curve_display')))[0]+1,i=Ds(b[0])[0]+5-r,a=Ds(b[b.length-1])[0]+5-r,o=a-i,s=o/(t.nodes.length-1);if(o){var l=this.height+5- -t.min/(t.max-t.min)*this.height,c=this.height+5-(1-t.min)/(t.max-t.min)*this.height,u=this.height+5-(-1-t.min)/(t.max-t.min)*this.height;if(t.horizontal_line_data="M".concat(0," ",l," L",2e3," ").concat(l," M",0," ").concat(c," L",2e3," ").concat(c," M",0," ").concat(u," L",2e3," ").concat(u),t.svg_data+="M".concat(x(0)),"linear"==t.inputs.mode.value){for(var h=1;h<t.nodes.length;h++)t.svg_data+=" L".concat(x(h));t.vertical_line_data="M".concat(i," ").concat(this.height+10," L").concat(i," 0 M").concat(a," ").concat(this.height+10," L").concat(a," 0")}else if("bezier"==t.inputs.mode.value)t.svg_data+=" C".concat(x(1)," ").concat(x(2)," ").concat(x(3)),t.vertical_line_data="M".concat(i," ").concat(this.height+10," L").concat(i," 0 M").concat(a," ").concat(this.height+10," L").concat(a," 0"),t.bezier_handles="M".concat(x(0)," L").concat(x(1)," M").concat(x(2)," L").concat(x(3));else if("bezier_chain"==t.inputs.mode.value){o=this.getWidth()-16,t.svg_data="";var p,d=t.nodes.slice().sort((function(e,t){return e.time-t.time})),f=0,m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=uA(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(d);try{for(m.s();!(p=m.n()).done;){var v=p.value,g=d[f+1];if(!g)return;var _=g.time-v.time,y=[[8+o*(v.time+0*_),v.right_value],[8+o*(v.time+_*(1/3)),v.right_value+v.right_slope*(1/3)],[8+o*(v.time+_*(2/3)),g.left_value-g.left_slope*(1/3)],[8+o*(v.time+1*_),g.left_value]];y.forEach((function(n){n[1]=e.height+5-(n[1]-t.min)/(t.max-t.min)*e.height})),0==f&&(t.svg_data+="M".concat(8,",",y[0][1]," L").concat(y[0].join(",")," ")),t.svg_data+="M".concat(y[0].join(",")," C").concat(y[1].join(",")," ").concat(y[2].join(",")," ").concat(y[3].join(",")," "),f==d.length-2&&(t.svg_data+="M".concat(y[3].join(",")," L").concat(8+o,",").concat(y[3][1])),t.bezier_handles+="M".concat(y[0].join(",")," L").concat(y[1].join(",")," M").concat(y[2].join(",")," L").concat(y[3].join(",")," "),f++}}catch(e){m.e(e)}finally{m.f()}t.vertical_line_data="M".concat(i," ").concat(this.height+10," L").concat(i," 0 M").concat(a," ").concat(this.height+10," L").concat(a," 0")}else if("catmull_rom"==t.inputs.mode.value){var b=[];t.nodes.forEach((function(e,t){b.push(x(t,!0))})),t.svg_data=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,r=0!==n?12*n:6,i=cA(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?(t=e)[0]!==t[t.length-1]?[].concat(cA(t),[t[0]]):t:e).map((function(e){return e.map((function(e){return parseFloat(e)}))})),a=["M"+i[0][0]+" "+i[0][1]+" "],o=i.map((function(e,t,n){return 0==t?c([n[t],n[t],n[t+1],n[t+2]]):t==n.length-2?c([n[t-1],n[t],n[t+1],n[t+1]]):c([n[t-1],n[t],n[t+1],n[t+2]])})).filter((function(e){return void 0!==e[3]})),s=o.map((function(e){return[{x:e[1].x,y:e[1].y},{x:(-e[0].x+r*e[1].x+e[2].x)/r,y:(-e[0].y+r*e[1].y+e[2].y)/r},{x:(e[1].x+r*e[2].x-e[3].x)/r,y:(e[1].y+r*e[2].y-e[3].y)/r},{x:e[2].x,y:e[2].y}]})),l=s.map((function(e){return"C"+e[1].x+","+e[1].y+" "+e[2].x+","+e[2].y+" "+e[3].x+","+e[3].y+" "}));return a.concat(l).join(" ");function c(e){return e.map((function(e){if(void 0!==e)return{x:e[0],y:e[1]}}))}}(b),t.vertical_line_data="M".concat(i+s," ").concat(this.height+10," L").concat(i+s," 0 M").concat(a-s," ").concat(this.height+10," L").concat(a-s," 0")}}function x(e,r){var a=[e*s+i,n.height+5-(t.nodes[e]-t.min)/(t.max-t.min)*n.height];return r?a:a.join(" ")}}},watch:{"curve.svg_needs_update":function(e){var t=this;As.nextTick((function(){e&&t.updateSVG(),t.curve.svg_needs_update=!1}))}},mounted:function(){this.updateSVG(),this.curve.svg_needs_update=!1}},dA=pA;var fA=n(863),mA={insert:"head",singleton:!1};sl()(fA.Z,mA);fA.Z.locals;var vA=El(dA,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"curve "+e.curve.config.mode},[n("input-group",{attrs:{group:e.curve,group_key:e.group_key,subject_key:e.subject_key},on:{"update:group":function(t){e.curve=t},"update:group_key":function(t){e.group_key=t},"update:subject_key":function(t){e.subject_key=t}}}),e._v(" "),n("div",{staticClass:"curve_display",style:{height:e.height+10+"px"}},[n("svg",[n("path",{staticClass:"curve_path",attrs:{d:e.curve.svg_data}}),e._v(" "),"bezier"==e.curve.config.mode||"bezier_chain"==e.curve.config.mode?n("path",{staticClass:"curve_handles",attrs:{d:e.curve.bezier_handles}}):e._e(),e._v(" "),n("path",{staticClass:"vertical_line_path",attrs:{d:e.curve.vertical_line_data}}),e._v(" "),n("path",{staticClass:"horizontal_line_path",attrs:{d:e.curve.horizontal_line_data}})]),e._v(" "),"bezier_chain"!==e.curve.config.mode?n("ul",{staticClass:"curve_controls"},["bezier"!==e.curve.config.mode?n("li",{key:"add_0",staticClass:"curve_add",on:{click:function(t){return e.addNode(0,t)}}}):e._e(),e._v(" "),e._l(e.curve.nodes,(function(t,r){return[n("li",{key:"node_"+r,staticClass:"curve_node",class:{selected:e.curve.selected_point==r},on:{mousedown:function(t){return e.slideValue(r,t)},touchstart:function(t){e.slideValue(r,t),e.simulateHover(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t<=256&&t>=-256,expression:"value <= 256 && value >= -256"}],staticClass:"curve_point",style:{bottom:(t-e.curve.min)/(e.curve.max-e.curve.min)*e.height+"px"}},[n("label",[e._v(e._s(t))])])]),e._v(" "),"bezier"!==e.curve.config.mode?n("li",{key:"add_"+r+1,staticClass:"curve_add",on:{click:function(t){return e.addNode(r+1,t)}}}):e._e()]}))],2):n("ul",{staticClass:"curve_controls",on:{mousedown:function(t){return e.addBezierChainNode(t)},touchstart:function(t){return e.addBezierChainNode(t)}}},e._l(e.curve.nodes,(function(t,r){return n("li",{key:"node_"+r,staticClass:"curve_node",class:{selected:e.curve.selected_point==r},style:{bottom:(e.getValue(t)-e.curve.min)/(e.curve.max-e.curve.min)*e.height+"px",left:(e.getWidth()-16)*t.time+"px"},on:{mousedown:function(t){return t.stopPropagation(),e.slideValue(r,t)},click:function(e){e.stopPropagation()},touchstart:function(t){return e.slideValue(r,t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.getValue(t)<=256&&e.getValue(t)>=-256,expression:"getValue(point) <= 256 && getValue(point) >= -256"}],staticClass:"curve_point",staticStyle:{top:"10px, left: 10px"}},[n("label",[e._v(e._s(e.getValue(t,!0))+" / "+e._s(Math.roundTo(t.time,2)))])]),e._v(" "),e.curve.nodes.find((function(e){return e.time<t.time}))?n("div",{staticClass:"curve_handle_point left_handle",style:{left:e.handle_offset*-Math.cos(Math.atan(t.left_slope))+"px",top:e.handle_offset*Math.sin(Math.atan(t.left_slope))+"px"}}):e._e(),e._v(" "),e.curve.nodes.find((function(e){return e.time>t.time}))?n("div",{staticClass:"curve_handle_point right_handle",style:{left:e.handle_offset*Math.cos(Math.atan(t.right_slope))+"px",top:e.handle_offset*-Math.sin(Math.atan(t.right_slope))+"px"}}):e._e()])})),0),e._v(" "),n("div",{staticClass:"curve_max_num"},[e._v(e._s(e.curve.max))]),e._v(" "),n("div",{staticClass:"curve_min_num"},[e._v(e._s(e.curve.min))])]),e._v(" "),void 0!==e.curve.nodes[e.curve.selected_point]?n("div",{staticClass:"curve_point_options",attrs:{point:e.node=e.curve.nodes[e.curve.selected_point]}},["bezier_chain"!==e.curve.config.mode?n("label",[e._v(e._s(e.curve.selected_point+1+"/"+e.curve.nodes.length))]):e._e(),e._v(" "),"bezier_chain"!==e.curve.config.mode?n("input",{directives:[{name:"model",rawName:"v-model",value:e.node,expression:"node"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.node},on:{input:[function(t){t.target.composing||(e.node=t.target.value)},function(t){return e.curve.setNode(e.curve.selected_point,e.node)}]}}):e._e(),e._v(" "),"bezier_chain"==e.curve.config.mode?[n("label",[e._v("T:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.node.time,expression:"node.time"}],attrs:{type:"number",step:"0.01",min:"0",max:"1"},domProps:{value:e.node.time},on:{input:[function(t){t.target.composing||e.$set(e.node,"time",t.target.value)},function(t){return e.registerNodeChange("time")}]}}),e._v(" "),n("label",[e._v("Value:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.node.left_value,expression:"node.left_value"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.node.left_value},on:{input:[function(t){t.target.composing||e.$set(e.node,"left_value",t.target.value)},function(t){return e.registerNodeChange("left_value")}]}}),e._v(" "),e.node.left_value!=e.node.right_value?n("input",{directives:[{name:"model",rawName:"v-model",value:e.node.right_value,expression:"node.right_value"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.node.right_value},on:{input:[function(t){t.target.composing||e.$set(e.node,"right_value",t.target.value)},function(t){return e.registerNodeChange("right_value")}]}}):e._e(),e._v(" "),n("div",{staticClass:"tool slim",attrs:{title:"Connect Sides"},on:{click:function(t){e.node.left_value==e.node.right_value?e.node.right_value+=.1:e.node.right_value=e.node.left_value,e.registerNodeChange()}}},[n("i",{staticClass:"unicode_icon"},[e._v(e._s(e.node.left_value==e.node.right_value?"=":""))])]),e._v(" "),n("label",[e._v("Slope:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.node.left_slope,expression:"node.left_slope"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.node.left_slope},on:{input:[function(t){t.target.composing||e.$set(e.node,"left_slope",t.target.value)},function(t){return e.registerNodeChange("left_slope")}]}}),e._v(" "),e.node.left_slope!=e.node.right_slope?n("input",{directives:[{name:"model",rawName:"v-model",value:e.node.right_slope,expression:"node.right_slope"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.node.right_slope},on:{input:[function(t){t.target.composing||e.$set(e.node,"right_slope",t.target.value)},function(t){return e.registerNodeChange("right_slope")}]}}):e._e(),e._v(" "),n("div",{staticClass:"tool slim",attrs:{title:"Connect Sides"},on:{click:function(t){e.node.left_slope==e.node.right_slope?e.node.right_slope+=.1:e.node.right_slope=e.node.left_slope,e.registerNodeChange()}}},[n("i",{staticClass:"unicode_icon"},[e._v(e._s(e.node.left_slope==e.node.right_slope?"=":""))])])]:e._e(),e._v(" "),"bezier"!==e.curve.config.mode?n("div",{staticClass:"tool curve_point_remove_tool",on:{click:function(t){return e.curve.removeNode(e.curve.selected_point,t)}}},[n("i",{staticClass:"unicode_icon"},[e._v(e._s(""))])]):e._e()],2):e._e(),e._v(" "),n("div",{staticClass:"curve_footer"},[n("div",{staticClass:"fill_line",on:{mousedown:function(t){return e.slideCurveHeight(t)},touchstart:function(t){return e.slideCurveHeight(t)}}}),e._v(" "),n("div",{staticClass:"tool",staticStyle:{width:"auto"},on:{click:function(t){return e.curve.remove()}}},[e._v("Remove Curve")])])],1)}),[],!1,null,"937f4896",null);const gA=vA.exports;const _A=Dx("CircleSlashIcon",[["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),yA=Dx("ApertureIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"14.31",x2:"20.05",y1:"8",y2:"17.94",key:"jdes2e"}],["line",{x1:"9.69",x2:"21.17",y1:"8",y2:"8",key:"1gubuk"}],["line",{x1:"7.38",x2:"13.12",y1:"12",y2:"2.06",key:"1m4d1n"}],["line",{x1:"9.69",x2:"3.95",y1:"16",y2:"6.06",key:"1wye2p"}],["line",{x1:"14.31",x2:"2.83",y1:"16",y2:"16",key:"1l9f4x"}],["line",{x1:"16.62",x2:"10.88",y1:"12",y2:"21.94",key:"1jjvfs"}]]),bA=Dx("ScrollIcon",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]),xA=Dx("CloudIcon",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),wA=Dx("CuboidIcon",[["path",{d:"m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z",key:"1u2ovd"}],["path",{d:"M10 22v-8L2.25 9.15",key:"11pn4q"}],["path",{d:"m10 14 11.77-6.87",key:"1kt1wh"}]]),MA=Dx("LoaderIcon",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),SA=Dx("CloudRainIcon",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]),EA=Dx("TorusIcon",[["ellipse",{cx:"12",cy:"11",rx:"3",ry:"2",key:"1b2qxu"}],["ellipse",{cx:"12",cy:"12.5",rx:"10",ry:"8.5",key:"h8emeu"}]]),AA=Dx("MagnetIcon",[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]]),TA=Dx("BombIcon",[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]]),CA=Dx("TimerIcon",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),kA=Dx("CreativeCommonsIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M10 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1",key:"1ss3eq"}],["path",{d:"M17 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1",key:"1od56t"}]]),LA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAw0lEQVQ4ja2RsQ3CMBREzxaioU+DaBkDRmAQKiTGoGUQJBaAKSKKuEBIVio3NDRQnfX9bSdIcJVj/3d3doAfZWoHu3P/5rprA077ZXE22yQ4X0wBAI/7K5oAyIyMhglSNKiZ2CG4ps3hFq9nhwZlek2W6WMw6wfnEZyPLaw8rCVKWGvybTL17Pv8CqXBrg3JXnA+gwHxG+XLarE6DWZNg8txZZIGclB+a7jagC3GAJmeGWgTXRtAAhcNqPX2mryJBv+mD2GrgcizxUizAAAAAElFTkSuQmCC",PA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABDElEQVQ4ja2SMWrDQBBFn4RBYBXLYh0hqd2pTqMyoCPYR1Dt2nWOkCsEVOYAAd1AKJUJLmyZZQsZXG2qWWQ5thORX4nVvNl5IwFQ5KlbZHPHiITrZeYAdBxR5Omfm4StsZjuRKIVpjuNGQIW2Xy0QnDrpSglWrF6ff+x9mqDIk9dohWtsf7s5a26qA/vjSi7ubafuwoCHuyR1nYkKqasGs/dbCB5Th/dTE3RccTn1tDajo96GwBM+oXrZebEue8rsEyTqNgzkz4sz0NfgXUcUW/2/navIBsHaL52ftS+q6gAZ+f+K4QPT7TGergPSMqqCYZNL26YqSn1Zu9dh8AwZ/9BWTXBwR5/Df9LvgFiUX03ExzqpAAAAABJRU5ErkJggg==",RA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAfUlEQVQ4jWNgGFIg6qj//6ij/v+RxZiQJY1neP/H1IaQZ2BgYLh5+Q+KOBMyR12XhQHdBmRw8/IfhrMZWxmxShrP8MbpAnyGjgIqAOxRggUgpwPkqGRCV4Qrym5e/sNw8/IfBnVdFgbk6GbCphAbgNkKMwSnE4kF+JI9SQAAEbk8FtORotIAAAAASUVORK5CYII=",IA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAACACAYAAAAClekiAAAB2UlEQVRoge2YPXKDMBCFHwx9Ovep3HIB+tzA1/IFchouQEtF58mo4wSkyCwjlv0RNibjRF9lg/YhrbRPAuC3KaybXdtO9LtuGrGtKtC17fR2OgEAxhBUkdLrIgVrmAJeMABU8Z+h7+cxpwQDUQ7iYC5CuQCA9/N5kYdSCybiYGA5M7OAxBjCKlgScWfBo6Sn8afz62MIYmLnhPCxWcQLKnkpS8GZH7IfCAJUmby7STngZU21T9e5FywEeLBkJpKImQPJD1RDSUmY1KbyGnjiq6R4vsBnw63tlOX833nYD9SVSH6g7U6uADGGgLppCm19HLMOtuxaGPp+srZ7jmooNHa6rhlrqQXz69psrPxACo5RDaVumsLyA+2eOC1W1nNJH03XtpNXB8nng7umb+h7twfJpAzHFXAbbfUCwDgf8HOAdsgQTXUMYe4y75VazqQcl23KuCuvQdwrCdMPpP0g+8GRpBaPe1LdWhsLHgp+Cm5O7vEDcXuXRDRh1w/iYEnE9AMpyPyCEdsVL1v3+4FFPvK/NLtt7X8c9X1B+tggofoBF04yFOtYz02GWJwPtFJN/UCbyWT2ZOu70eq4/3W7iaKAXO4rgY/LZdVIEs1kMi/B5/U6Wf8zO/MNW6+WuxFr3fQAAAAASUVORK5CYII=",zA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAABACAYAAAAnBDaKAAABEUlEQVRIicVUsZHEIAxcPK6C7pihC8d04Rl6oCEyZa6BD/7ECIzAF9zdZngX0K6Ege8jpVRSSoXXpicB4LouAIBzzuxSwMQUMcYSYyxr5efQ12B6Uq6dc2aTJBHdTqwCIoK1FixyzpmbOoRQQgjfzkC1yUWaESlFjU2ZA5+wyR2cwzAD4D+Hd02sMbRJRDiOoy2yt8n1mJ6UuwFglwSAhqxXaGSDz82B2k12c7PZi/b+Y9/JZh5GbW5yGGFTmR5aUGq7AcxtEhFyzg9syruHNq21KgkA2ywD4JWD+lAY3nt1WOpOWWzOGQBwnqep5ChJ731Z/5dWw7rxfapgyj4RAJjnUBFCKKpw6mR1/POh/SH+AEhEuwBr1yTIAAAAAElFTkSuQmCC",OA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAABACAYAAAATffeWAAABQUlEQVRYhe1WsW6DMBB9aSM6R+rMzC8wVP0Mpmz5rGz5BX6gYsgvZM5KpQ5MRFTXITHgYvvONorSiichBrj3ns++8wH/G22VE/fPk+tjkqWsiJVAqXMurARJlgKbLetiQtBWOVFdXFWf3wEAVBdkc7IaB/Zqm20fDAD4/gC+DgCAy+mMl7fjakJgJHrdA587YyALqguirhyWY4E1iZfTWXsHgVN3OohWXxAJSR9QMG5jkqWiM+CEqwJlBF1J1JUagRcp1QURNTQuKtGy2iq/BlAzPF0pU1YqveLNgciy1soUoSEPXjCRekOcPM5JFMGCe4LbLnE9/P7R60SqahwPGOJq1EhUL6AmrDN5l/NsDqJzELULs5yDBY8K1/atueDhAB3DlO97N0bdzpqT0Plg4iZkQukJ5piRgss3eib4W43jB9xsrBE2kQXvAAAAAElFTkSuQmCC",DA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAACACAYAAAAClekiAAABRUlEQVRoge1YSw6DIBCtumnS9Biew2P1DF6oe8/hBbo3Lo1dkSDC/IAqdd6mBpnxleE9B2+362Hq51U8YewWOFiRCGiZKMGhJKQyRjFQnAGmzqF6T/28RvsBuJkwBgoCMDmTlAoFj90C74MkDBSZQZIz5AW+69oNboemwuT8ed/5DMw99QoCuIrblFH7gxJAkjMU7LveIPR29gWYOZuN1A5NNfXz2g5NJaIJ9Qf2mNgTrmAo2h+UCrJo3AV8vh50wflW34zVlMnsJ7lJIEMJJsEmmzHyQrhJxK5VAPT7wQE4Xs6iYPvert23f0WgeIH7QJABdn4gsbqSoWh/cBBYm8FeA5YfuMFsQMG7/iDKC7iG4p3HYZCErSgwz6GDY6ZokmyqQ/97FIMka3BuZJPzCfHvp/MQynkXRu9GtD/IykCU+SdV+ALAkeQN7U75oQAAAABJRU5ErkJggg==";function NA(e){return NA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NA(e)}function FA(e,t,n){return t=function(e){var t=function(e,t){if("object"!=NA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=NA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NA(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BA={shape:{sphere:{"emitter.shape.mode":"sphere","emitter.shape.radius":"1","emitter.shape.surface_only":!1,"motion.motion.direction_mode":"outwards","emitter.shape.offset":["0","0","0"],"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":["0","0","0"],"motion.motion.linear_speed":"3"},rain:{"emitter.shape.mode":"disc","emitter.shape.radius":"6","emitter.shape.surface_only":!1,"motion.motion.direction_mode":"direction","motion.motion.direction":["0","-1","0"],"emitter.shape.offset":["0","6","0"],"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":["0","-6","0"],"motion.motion.linear_speed":"5"},ring:{"emitter.shape.mode":"disc","emitter.shape.radius":"3","emitter.shape.surface_only":!0,"motion.motion.direction_mode":"direction","motion.motion.direction":["0","1","0"],"emitter.shape.offset":["0","0.5","0"],"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":["0","0","0"],"motion.motion.linear_speed":"math.random(1, 4)"},gravitate:{"emitter.shape.mode":"sphere","emitter.shape.radius":"2","emitter.shape.surface_only":!0,"motion.motion.direction_mode":"inwards","motion.motion.linear_speed":"2","emitter.shape.offset":["0","0","0"],"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":["0","0","0"],"lifetime.lifetime.max_lifetime":"1"}},timing:{burst:{"emitter.rate.mode":"instant","emitter.rate.amount":"100","emitter.lifetime.mode":"once","emitter.lifetime.active_time":"1"},steady:{"emitter.rate.mode":"steady","emitter.rate.rate":"60","emitter.rate.maximum":"400","emitter.lifetime.mode":"once","emitter.lifetime.active_time":"1"}},sprite:{ball:{"appearance.appearance.size":["0.4","0.4"],"texture.uv.size":[16,16],"texture.uv.uv":[0,0],"texture.uv.uv_size":[16,16],"texture.uv.mode":"full"},dirt:{"appearance.appearance.size":["0.5","0.5"],"texture.uv.size":[16,16],"texture.uv.uv":[0,0],"texture.uv.uv_size":[16,16],"texture.uv.mode":"full"},leaves:{"appearance.appearance.size":["0.25","0.25"],"texture.uv.size":[16,16],"texture.uv.uv":["Math.floor(v.particle_random_3 * 2) * 8","Math.floor(v.particle_random_4 * 2) * 8"],"texture.uv.uv_size":[8,8],"texture.uv.mode":"static"},smoke:FA(FA(FA(FA(FA(FA(FA({"appearance.appearance.size":["0.5","0.5"],"texture.uv.size":[16,128],"texture.uv.uv":[0,0],"texture.uv.uv_size":[16,16]},"texture.uv.uv_size",[16,16]),"texture.uv.mode","animated"),"texture.uv.uv_step",[0,16]),"texture.uv.frames_per_second","12"),"texture.uv.max_frame","8"),"texture.uv.stretch_to_lifetime",!0),"texture.uv.loop",!1),dust:FA(FA(FA(FA(FA(FA(FA({"appearance.appearance.size":["0.3","0.3"],"texture.uv.size":[8,64],"texture.uv.uv":[0,0],"texture.uv.uv_size":[8,8]},"texture.uv.uv_size",[8,8]),"texture.uv.mode","animated"),"texture.uv.uv_step",[0,8]),"texture.uv.frames_per_second","12"),"texture.uv.max_frame","8"),"texture.uv.stretch_to_lifetime",!0),"texture.uv.loop",!1),sparkle:{"appearance.appearance.size":["0.5","0.5"],"texture.uv.size":[16,64],"texture.uv.uv":[0,0],"texture.uv.uv_size":[16,16],"texture.uv.mode":"animated","texture.uv.uv_step":[0,16],"texture.uv.frames_per_second":"15","texture.uv.max_frame":"4","texture.uv.stretch_to_lifetime":!1,"texture.uv.loop":!0},magic:{"appearance.appearance.size":["0.25","0.25"],"texture.uv.size":[16,128],"texture.uv.uv":["Math.floor(v.particle_random_3 * 2) * 8","Math.floor(v.particle_random_4 * 2) * 8"],"texture.uv.uv_size":[8,8],"texture.uv.mode":"animated","texture.uv.uv_step":[0,16],"texture.uv.frames_per_second":"12","texture.uv.max_frame":"8","texture.uv.stretch_to_lifetime":!0,"texture.uv.loop":!1}},collision:{none:{"motion.collision.toggle":!0,"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":["","",""],"motion.motion.linear_drag_coefficient":0,"motion.collision.collision_radius":0,"motion.collision.collision_drag":0,"motion.collision.condition":"","motion.collision.coefficient_of_restitution":0,"motion.collision.expire_on_contact":!1},solid:{"motion.collision.toggle":!0,"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":[0,-10,0],"motion.motion.linear_drag_coefficient":.1,"motion.collision.collision_radius":.2,"motion.collision.collision_drag":1,"motion.collision.condition":"","motion.collision.coefficient_of_restitution":.3,"motion.collision.expire_on_contact":!1},smoke:{"motion.collision.toggle":!0,"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":[0,1,0],"motion.motion.linear_drag_coefficient":4,"motion.collision.collision_radius":.2,"motion.collision.collision_drag":.4,"motion.collision.condition":"","motion.collision.coefficient_of_restitution":0,"motion.collision.expire_on_contact":!1},ball:{"motion.collision.toggle":!0,"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":[0,-10,0],"motion.motion.linear_drag_coefficient":.2,"motion.collision.collision_radius":.2,"motion.collision.collision_drag":.2,"motion.collision.condition":"","motion.collision.coefficient_of_restitution":.6,"motion.collision.expire_on_contact":!1},paper:{"motion.collision.toggle":!0,"motion.motion.mode":"dynamic","motion.motion.linear_acceleration":["math.sin(v.particle_age * 90)",-10,"math.cos(v.particle_age * 40)"],"motion.motion.linear_drag_coefficient":5,"motion.collision.collision_radius":.2,"motion.collision.collision_drag":10,"motion.collision.condition":"","motion.collision.coefficient_of_restitution":0,"motion.collision.expire_on_contact":!1}}},UA="",HA="",jA=0,VA=4,GA=2,WA="",qA=!0,XA=!1,YA="none",ZA={sprites:{SpriteBall:LA,SpriteDirt:PA,SpriteLeaves:RA,SpriteSmoke:IA,SpriteDust:zA,SpriteSparkle:OA,SpriteMagic:DA},shape:UA,timing:HA,speed:jA,amount:VA,particle_lifetime:GA,sprite:WA,lighting:qA,random_rotation:XA,collision:YA,show_sprite_license:!1};const JA={name:"quick-setup",components:{Checkbox:HE,CircleSlash:_A,Aperture:yA,Scroll:bA,Cloud:xA,Cuboid:wA,Loader:MA,CloudRain:SA,Torus:EA,Magnet:AA,Bomb:TA,Timer:CA,CreativeCommons:kA},props:{input:Object,data:Object},data:function(){return ZA},watch:{speed:function(e){this.setInput("motion.motion.linear_speed",e)},amount:function(e){var t="burst"!=this.timing;this.setInput("emitter.rate."+(t?"rate":"amount"),e)},particle_lifetime:function(e){this.setInput("lifetime.lifetime.max_lifetime",e)},lighting:function(e){this.setInput("appearance.appearance.light",!e)},random_rotation:function(e){this.setInput("motion.rotation.initial_rotation",e?"math.random(-180, 180)":"")}},methods:{setInput:function(e,t){e=e.split(".");var n=this.data[e[0]][e[1]].inputs[e[2]];n&&("molang"==n.type&&(t instanceof Array?t.forEach((function(e,n){t[n]=e.toString()})):"number"==typeof t&&(t=t.toString())),n.set(t),Gs("set quick setup option"))},set:function(e,t){var n=this;this[e]=t;var r=BA[e][t],i=function(){var e=a.split("."),t=n.data[e[0]][e[1]].inputs[e[2]],i=r[a];"motion.motion.linear_speed"!=a||isNaN(i)||(n.speed=i),"emitter.rate.rate"==a&&(n.amount=i),"emitter.rate.amount"==a&&(n.amount=i),"lifetime.lifetime.max_lifetime"==a&&(n.particle_lifetime=i),"appearance.appearance.light"==a&&(n.lighting=i),t&&("molang"==t.type&&(i instanceof Array?i.forEach((function(e,t){i[t]=e.toString()})):"number"==typeof i&&(i=i.toString())),t.set(i))};for(var a in r)i();if("sprite"==e){var o="";switch(t){case"ball":o=LA;break;case"dirt":o=PA;break;case"leaves":o=RA;break;case"smoke":o=IA;break;case"dust":o=zA;break;case"sparkle":o=OA;break;case"magic":o=DA}Bl.source=o,Bl.internal_changes=!0,Bl.update(),Bl.updateCanvasFromSource()}Gs("select quick setup preset")},resetAll:function(){this.shape=UA,this.timing=HA,this.speed=jA,this.amount=VA,this.particle_lifetime=GA,this.sprite=WA,this.lighting=qA,this.random_rotation=XA,this.collision=YA}},mounted:function(){var e=this;Rw.resetAll=function(){e.resetAll()},this.random_rotation="math.random(-180, 180)"==this.data.motion.rotation.inputs.initial_rotation.value,this.lighting=!this.data.appearance.appearance.inputs.light.value}},QA=JA;var KA=n(187),$A={insert:"head",singleton:!1};sl()(KA.Z,$A);KA.Z.locals;const eT=El(QA,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quick_setup"},[n("div",{staticClass:"input_group"},[n("h4",[e._v("Shape & Motion")]),e._v(" "),n("ul",{staticClass:"preset_option_list"},[n("li",{class:{selected:"sphere"==e.shape},on:{click:function(t){return e.set("shape","sphere")}}},[n("Loader",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tSphere\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"rain"==e.shape},on:{click:function(t){return e.set("shape","rain")}}},[n("CloudRain",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tRain\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"ring"==e.shape},on:{click:function(t){return e.set("shape","ring")}}},[n("Torus",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tRing\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"gravitate"==e.shape},on:{click:function(t){return e.set("shape","gravitate")}}},[n("Magnet",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tGravitate to Center\n\t\t\t")],1)]),e._v(" "),n("div",{staticClass:"input_bar"},[n("label",[e._v("Speed")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"range",min:"0",max:"20",step:"0.5"},domProps:{value:e.speed},on:{__r:function(t){e.speed=t.target.value}}}),e._v(" "),n("label",{staticClass:"range_number_label"},[e._v(e._s(e.speed))])])]),e._v(" "),n("div",{staticClass:"input_group"},[n("h4",[e._v("Timing")]),e._v(" "),n("ul",{staticClass:"preset_option_list"},[n("li",{class:{selected:"burst"==e.timing},on:{click:function(t){return e.set("timing","burst")}}},[n("Bomb",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tBurst\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"steady"==e.timing},on:{click:function(t){return e.set("timing","steady")}}},[n("Timer",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tSteady\n\t\t\t")],1)]),e._v(" "),n("div",{staticClass:"input_bar"},[n("label",[e._v("Amount")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{type:"range",min:"1",max:"120",step:"1"},domProps:{value:e.amount},on:{__r:function(t){e.amount=t.target.value}}}),e._v(" "),n("label",{staticClass:"range_number_label"},[e._v(e._s(e.amount))])]),e._v(" "),n("div",{staticClass:"input_bar"},[n("label",[e._v("Particle Lifetime")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.particle_lifetime,expression:"particle_lifetime"}],attrs:{type:"range",min:"0.1",max:"10",step:"0.1"},domProps:{value:e.particle_lifetime},on:{__r:function(t){e.particle_lifetime=t.target.value}}}),e._v(" "),n("label",{staticClass:"range_number_label"},[e._v(e._s(e.particle_lifetime))])])]),e._v(" "),n("div",{staticClass:"input_group"},[n("h4",[e._v("Physics")]),e._v(" "),n("ul",{staticClass:"preset_option_list"},[n("li",{class:{selected:"none"==e.collision},on:{click:function(t){return e.set("collision","none")}}},[n("CircleSlash",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tNone\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"solid"==e.collision},on:{click:function(t){return e.set("collision","solid")}}},[n("Cuboid",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tSolid\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"smoke"==e.collision},on:{click:function(t){return e.set("collision","smoke")}}},[n("Cloud",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tSmoke\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"ball"==e.collision},on:{click:function(t){return e.set("collision","ball")}}},[n("Aperture",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tBall\n\t\t\t")],1),e._v(" "),n("li",{class:{selected:"paper"==e.collision},on:{click:function(t){return e.set("collision","paper")}}},[n("Scroll",{attrs:{size:38,"stroke-width":1}}),e._v("\n\t\t\t\tPaper\n\t\t\t")],1)])]),e._v(" "),n("div",{staticClass:"input_group"},[n("h4",[e._v("\n\t\t\tSprite\n\t\t\t"),n("CreativeCommons",{attrs:{size:20},on:{click:function(t){e.show_sprite_license=!e.show_sprite_license}}})],1),e._v(" "),e.show_sprite_license?n("p",{staticStyle:{padding:"2px 12px"}},[e._v("\n\t\t\tAll sprites listed below are "),n("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("copyright-free (CC0)")]),e._v(" and free to use and modify.\n\t\t")]):e._e(),e._v(" "),n("ul",{staticClass:"preset_option_list"},[n("li",{class:{selected:"ball"==e.sprite},on:{click:function(t){return e.set("sprite","ball")}}},[n("img",{attrs:{src:e.sprites.SpriteBall,height:"45"}}),e._v("\n\t\t\t\tBall\n\t\t\t")]),e._v(" "),n("li",{class:{selected:"dirt"==e.sprite},on:{click:function(t){return e.set("sprite","dirt")}}},[n("img",{attrs:{src:e.sprites.SpriteDirt,height:"45"}}),e._v("\n\t\t\t\tDirt\n\t\t\t")]),e._v(" "),n("li",{class:{selected:"leaves"==e.sprite},on:{click:function(t){return e.set("sprite","leaves")}}},[n("img",{attrs:{src:e.sprites.SpriteLeaves,height:"45"}}),e._v("\n\t\t\t\tLeaves\n\t\t\t")]),e._v(" "),n("li",{class:{selected:"smoke"==e.sprite},on:{click:function(t){return e.set("sprite","smoke")}}},[n("img",{staticClass:"frames_8",attrs:{src:e.sprites.SpriteSmoke,height:"45"}}),e._v("\n\t\t\t\tSmoke\n\t\t\t")]),e._v(" "),n("li",{class:{selected:"dust"==e.sprite},on:{click:function(t){return e.set("sprite","dust")}}},[n("img",{staticClass:"frames_8",attrs:{src:e.sprites.SpriteDust,height:"45"}}),e._v("\n\t\t\t\tDust\n\t\t\t")]),e._v(" "),n("li",{class:{selected:"sparkle"==e.sprite},on:{click:function(t){return e.set("sprite","sparkle")}}},[n("img",{staticClass:"frames_4",attrs:{src:e.sprites.SpriteSparkle,height:"45"}}),e._v("\n\t\t\t\tSparkle\n\t\t\t")]),e._v(" "),n("li",{class:{selected:"magic"==e.sprite},on:{click:function(t){return e.set("sprite","magic")}}},[n("img",{staticClass:"frames_8",attrs:{src:e.sprites.SpriteMagic,height:"45"}}),e._v("\n\t\t\t\tMagic\n\t\t\t")])]),e._v(" "),n("div",{staticClass:"input_bar"},[n("label",{attrs:{for:"quick_rotation_checkbox"}},[e._v("Random Rotation")]),e._v(" "),n("checkbox",{attrs:{id:"quick_rotation_checkbox"},model:{value:e.random_rotation,callback:function(t){e.random_rotation=t},expression:"random_rotation"}})],1),e._v(" "),n("div",{staticClass:"input_bar"},[n("label",{attrs:{for:"quick_lighting_checkbox"}},[e._v("Glow in the dark")]),e._v(" "),n("checkbox",{attrs:{id:"quick_lighting_checkbox"},model:{value:e.lighting,callback:function(t){e.lighting=t},expression:"lighting"}})],1)])])}),[],!1,null,"43114ee2",null).exports,tT=Dx("WandIcon",[["path",{d:"M15 4V2",key:"z1p9b7"}],["path",{d:"M15 16v-2",key:"px0unx"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M17.8 11.8 19 13",key:"yihg8r"}],["path",{d:"M15 9h0",key:"kg5t1u"}],["path",{d:"M17.8 6.2 19 5",key:"fd4us0"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M12.2 6.2 11 5",key:"i3da3b"}]]),nT=Dx("FileIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),rT=Dx("PartyPopperIcon",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),iT=Dx("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),aT=Dx("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),oT=Dx("FeatherIcon",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]),sT=Dx("Clock8Icon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 8 14",key:"tmc9b4"}]]),lT=Dx("TangentIcon",[["circle",{cx:"17",cy:"4",r:"2",key:"y5j2s2"}],["path",{d:"M15.59 5.41 5.41 15.59",key:"l0vprr"}],["circle",{cx:"4",cy:"17",r:"2",key:"9p4efm"}],["path",{d:"M12 22s-4-9-1.5-11.5S22 12 22 12",key:"1twk4o"}]]);const cT=Dx("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const uT=Dx("GripHorizontalIcon",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),hT=Dx("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),pT=Dx("FilePlus2Icon",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4",key:"702lig"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),dT=Dx("ImagePlusIcon",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),fT=Dx("PencilIcon",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function mT(e){return function(e){if(Array.isArray(e))return gT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vT(e,t){if(e){if("string"==typeof e)return gT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gT(e,t):void 0}}function gT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _T(e,t){for(var n,r=e.target;r&&!r.classList.contains("sortable");)n=r,r=r.parentElement;if(r){var i=mT(r.childNodes),a=i.indexOf(n),o=a;Os(e);var s=function(e){Os(e);var t,n=0,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=vT(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.matches(":hover")){var s=a.clientHeight,l=a.getBoundingClientRect();e.clientY-l.top>s/2&&n++;break}n++}}catch(e){r.e(e)}finally{r.f()}n!=i.length+1&&(o=n,i.forEach((function(e){e.classList.remove("sort_before"),e.classList.remove("sort_after")})),i[o]?i[o].classList.add("sort_before"):i[o-1]&&i[o-1].classList.add("sort_after"))},l=function e(n){if(document.removeEventListener("mousemove",s),document.removeEventListener("touchmove",s),document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),Os(n),i.forEach((function(e){e.classList.remove("sort_before"),e.classList.remove("sort_after")})),o!=a&&o>=0&&o<=t.length){var r=t.splice(a,1)[0];a<o&&o--,t.splice(o,0,r)}};document.addEventListener("mousemove",s),document.addEventListener("touchmove",s),document.addEventListener("mouseup",l),document.addEventListener("touchend",l)}}const yT={name:"list-add-button",components:{Plus:jE}};var bT=n(269),xT={insert:"head",singleton:!1};sl()(bT.Z,xT);bT.Z.locals;const wT=El(yT,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:function(t){return e.$emit("click",t)}}},[n("Plus",{attrs:{size:20}})],1)}),[],!1,null,"7246dc22",null).exports;function MT(e){return MT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MT(e)}function ST(){ST=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",v={};function g(){}function _(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&r.call(w,o)&&(b=w);var M=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==MT(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(MT(t)+" is not iterable")}return _.prototype=y,i(M,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,l,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ET(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function AT(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ET(a,r,i,o,s,"next",e)}function s(e){ET(a,r,i,o,s,"throw",e)}o(void 0)}))}}var TT={emitter:"Emitter",emitter_bound:"Emitter Bound",particle:"Particle",particle_with_velocity:"Particle with Velocity"};const CT={name:"event-subpart",components:{Plus:jE,X:jx,GripHorizontal:uT,PrismEditor:vl,Upload:hT,FilePlus2:pT,ImagePlus:dT,Pencil:fT,ListAddButton:wT},props:{subpart:Object},data:function(){return{emitter_type_options:TT,is_extension:!!Cs,new_particle_identifier:""}},methods:{createSequenceSection:function(){As.set(this.subpart,"sequence",[{uuid:Ps()}]),this.modifyEvent()},createRandomizeSection:function(){As.set(this.subpart,"randomize",[{uuid:Ps(),weight:1}]),this.modifyEvent()},createParticleSection:function(){As.set(this.subpart,"particle_effect",{effect:"",type:"emitter",pre_effect_expression:""}),this.modifyEvent()},createSoundSection:function(){As.set(this.subpart,"sound_effect",{event_name:""}),this.modifyEvent()},createExpressionSection:function(){As.set(this.subpart,"expression",""),this.modifyEvent()},addSequenceOption:function(){var e={uuid:Ps()};this.subpart.sequence.push(e),this.modifyEvent()},addRandomizeOption:function(){var e={uuid:Ps(),weight:1};this.subpart.randomize.push(e),this.modifyEvent()},removeSequenceOption:function(e){this.subpart.sequence.remove(e),0==this.subpart.sequence.length&&As.delete(this.subpart,"sequence"),this.modifyEvent()},removeRandomizeOption:function(e){this.subpart.randomize.remove(e),0==this.subpart.randomize.length&&As.delete(this.subpart,"randomize"),this.modifyEvent()},disableParticleSection:function(){As.delete(this.subpart,"particle_effect"),this.modifyEvent()},disableSoundSection:function(){As.delete(this.subpart,"sound_effect"),this.modifyEvent()},disableExpressionSection:function(){As.delete(this.subpart,"expression"),this.modifyEvent()},selectParticleFile:function(){var e=this;return AT(ST().mark((function t(){var n;return ST().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ww();case 2:n=t.sent,e.is_extension=!e.is_extension,e.is_extension=!e.is_extension,n&&n!=e.subpart.particle_effect.effect&&(e.subpart.particle_effect.effect=n,e.modifyEvent());case 6:case"end":return t.stop()}}),t)})))()},createNewParticleFile:function(e,t){var n=this;return AT(ST().mark((function t(){return ST().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.$refs.new_particle_dialog.close(),Sw(e),n.is_extension=!n.is_extension,n.is_extension=!n.is_extension,e&&e!=n.subpart.particle_effect.effect&&(n.subpart.particle_effect.effect=e,n.modifyEvent());case 5:case"end":return t.stop()}}),t)})))()},selectParticleTexture:function(){var e=this;return AT(ST().mark((function t(){var n;return ST().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.subpart.particle_effect.effect,t.next=3,Aw(n);case 3:case"end":return t.stop()}}),t)})))()},editParticleFile:function(){!function(e){if(Cs)Cs.postMessage({type:"open_particle_file_tab",identifier:e});else{var t=bw[e];if(t&&0==t.closed)t.editor_tab.focus();else{var n=yw[e],r=n.json,i=n.texture,a=window.open(location.href);if(!a)return;setTimeout((function(){a.loadFileFromParentEffect(JSON.stringify(r),i)}),500),bw[e]=new Cw(e,a)}}}(this.subpart.particle_effect.effect)},canEditParticleFile:function(){return this.is_extension||null!=yw[this.subpart.particle_effect.effect]},sortList:function(e,t){_T(t,e)},modifyEvent:function(e,t){this.$emit("modify_event",e,t)},highlightMolang:function(e){return hl().highlight(e,yl.molang)},highlightGeneric:function(e){return hl().highlight(e,yl.generic)},autocomplete:function(e,t){return al(e,t,"input")}}},kT=CT;var LT=n(987),PT={insert:"head",singleton:!1};sl()(LT.Z,PT);LT.Z.locals;var RT=El(kT,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event_subpart"},[e.subpart.sequence?n("div",[e._m(0),e._v(" "),n("ul",{staticClass:"nested_list sortable"},e._l(e.subpart.sequence,(function(t,r){return n("li",{key:t.uuid},[n("div",{staticClass:"header_bar"},[n("GripHorizontal",{on:{mousedown:function(t){return e.sortList(e.subpart.sequence,t)}}}),e._v(" "),n("label",[e._v("#"+e._s(r))]),e._v(" "),n("div",{staticClass:"fill_line"}),e._v(" "),n("div",{staticClass:"remove_button highlighting_button",attrs:{title:"Remove Option"},on:{click:function(n){return e.removeSequenceOption(t)}}},[n("X")],1)],1),e._v(" "),n("event-subpart",{attrs:{subpart:t},on:{modify_event:e.modifyEvent}})],1)})),0),e._v(" "),n("list-add-button",{staticClass:"list_add_button",attrs:{title:"Add Sequence Option"},on:{click:function(t){return e.addSequenceOption()}}})],1):e._e(),e._v(" "),e.subpart.randomize?n("div",[e._m(1),e._v(" "),n("ul",{staticClass:"nested_list sortable"},e._l(e.subpart.randomize,(function(t){return n("li",{key:t.uuid},[n("div",{staticClass:"header_bar"},[n("GripHorizontal",{on:{mousedown:function(t){return e.sortList(e.subpart.randomize,t)}}}),e._v(" "),n("label",[e._v("Weight")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.weight,expression:"option.weight",modifiers:{number:!0}}],attrs:{type:"number",min:"0"},domProps:{value:t.weight},on:{input:[function(n){n.target.composing||e.$set(t,"weight",e._n(n.target.value))},e.modifyEvent],blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("div",{staticClass:"fill_line"}),e._v(" "),n("div",{staticClass:"remove_button highlighting_button",attrs:{title:"Remove Option"},on:{click:function(n){return e.removeRandomizeOption(t)}}},[n("X")],1)],1),e._v(" "),n("event-subpart",{attrs:{subpart:t},on:{modify_event:e.modifyEvent}})],1)})),0),e._v(" "),n("list-add-button",{staticClass:"list_add_button",attrs:{title:"Add Random Option"},on:{click:function(t){return e.addRandomizeOption()}}})],1):e._e(),e._v(" "),e.subpart.particle_effect?n("ul",[n("div",{staticClass:"section_bar"},[n("label",{staticClass:"descriptor_label"},[e._v("Particle Effect")]),e._v(" "),n("X",{staticClass:"highlighting_button",attrs:{size:20,title:"Disable Particle Effect"},on:{click:function(t){return e.disableParticleSection()}}})],1),e._v(" "),n("li",{staticClass:"input_wrapper"},[n("label",[e._v("Identifier")]),e._v(" "),n("prism-editor",{attrs:{highlight:e.highlightGeneric,language:"","line-numbers":!1,placeholder:"space:name"},on:{input:function(t){return e.modifyEvent(t,"text")}},model:{value:e.subpart.particle_effect.effect,callback:function(t){e.$set(e.subpart.particle_effect,"effect",t)},expression:"subpart.particle_effect.effect"}}),e._v(" "),e.is_extension||e.canEditParticleFile()?e._e():n("div",{staticClass:"highlighting_button",attrs:{title:"Create New Particle"},on:{click:function(t){e.$refs.new_particle_dialog.showModal(),e.new_particle_identifier=e.subpart.particle_effect.effect}}},[n("FilePlus2",{attrs:{size:22}})],1),e._v(" "),e.is_extension?e._e():n("div",{staticClass:"highlighting_button",attrs:{title:"Select File"},on:{click:function(t){return e.selectParticleFile()}}},[n("Upload",{attrs:{size:22}})],1),e._v(" "),!e.is_extension&&e.canEditParticleFile()?n("div",{staticClass:"highlighting_button",attrs:{title:"Select Texture"},on:{click:function(t){return e.selectParticleTexture()}}},[n("ImagePlus",{attrs:{size:22}})],1):e._e(),e._v(" "),e.canEditParticleFile()?n("div",{staticClass:"highlighting_button",attrs:{title:"Edit Linked Particle Effect"},on:{click:function(t){return e.editParticleFile()}}},[n("Pencil",{attrs:{size:22}})],1):e._e(),e._v(" "),n("dialog",{ref:"new_particle_dialog",staticClass:"modal_dialog",attrs:{id:"new_particle_dialog"}},[n("div",{staticClass:"form_bar"},[n("label",[e._v("Identifier")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.new_particle_identifier,expression:"new_particle_identifier"}],attrs:{type:"text",placeholder:"space:name"},domProps:{value:e.new_particle_identifier},on:{input:function(t){t.target.composing||(e.new_particle_identifier=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"button_bar"},[n("button",{on:{click:function(t){return e.createNewParticleFile(e.new_particle_identifier)}}},[e._v("Confirm")]),e._v(" "),n("button",{on:{click:function(t){return e.$refs.new_particle_dialog.close()}}},[e._v("Cancel")])])])],1),e._v(" "),n("li",{staticClass:"input_wrapper"},[n("label",[e._v("Type")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.subpart.particle_effect.type,expression:"subpart.particle_effect.type"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.subpart.particle_effect,"type",t.target.multiple?n:n[0])},e.modifyEvent]}},e._l(e.emitter_type_options,(function(t,r){return n("option",{key:r,attrs:{id:r},domProps:{value:r}},[e._v(e._s(t))])})),0)]),e._v(" "),n("li",{staticClass:"input_wrapper"},[n("label",[e._v("Expression")]),e._v(" "),n("prism-editor",{attrs:{highlight:e.highlightMolang,language:"","line-numbers":!1,placeholder:"",autocomplete:e.autocomplete},on:{input:function(t){return e.modifyEvent(t,"text")}},model:{value:e.subpart.particle_effect.pre_effect_expression,callback:function(t){e.$set(e.subpart.particle_effect,"pre_effect_expression",t)},expression:"subpart.particle_effect.pre_effect_expression"}})],1)]):e._e(),e._v(" "),e.subpart.sound_effect?n("ul",[n("div",{staticClass:"section_bar"},[n("label",{staticClass:"descriptor_label"},[e._v("Sound")]),e._v(" "),n("X",{staticClass:"highlighting_button",attrs:{size:20,title:"Disable Sound Effect"},on:{click:function(t){return e.disableSoundSection()}}})],1),e._v(" "),n("li",{staticClass:"input_wrapper"},[n("label",[e._v("Sound Event")]),e._v(" "),n("prism-editor",{attrs:{highlight:e.highlightGeneric,language:"","line-numbers":!1,placeholder:"block.bamboo.hit"},on:{input:function(t){return e.modifyEvent(t,"text")}},model:{value:e.subpart.sound_effect.event_name,callback:function(t){e.$set(e.subpart.sound_effect,"event_name",t)},expression:"subpart.sound_effect.event_name"}})],1)]):e._e(),e._v(" "),"string"==typeof e.subpart.expression?n("ul",{attrs:{title:"Run a Molang expression on the event firing emitter"}},[n("div",{staticClass:"section_bar"},[n("label",{staticClass:"descriptor_label"},[e._v("Expression")]),e._v(" "),n("X",{staticClass:"highlighting_button",attrs:{size:20,title:"Disable Expression"},on:{click:function(t){return e.disableExpressionSection()}}})],1),e._v(" "),n("li",{staticClass:"input_wrapper"},[n("prism-editor",{attrs:{highlight:e.highlightMolang,language:"","line-numbers":!1,placeholder:"",autocomplete:e.autocomplete},on:{input:function(t){return e.modifyEvent(t,"text")}},model:{value:e.subpart.expression,callback:function(t){e.$set(e.subpart,"expression",t)},expression:"subpart.expression"}})],1)]):e._e(),e._v(" "),n("ul",{staticClass:"create_bar"},[e.subpart.sequence||e.subpart.randomize?e._e():[e.subpart.particle_effect?e._e():n("li",{on:{click:function(t){return e.createParticleSection()}}},[n("Plus",{attrs:{size:18}}),e._v("Particle")],1),e._v(" "),e.subpart.sound_effect?e._e():n("li",{on:{click:function(t){return e.createSoundSection()}}},[n("Plus",{attrs:{size:18}}),e._v("Sound")],1),e._v(" "),e.subpart.expression?e._e():n("li",{on:{click:function(t){return e.createExpressionSection()}}},[n("Plus",{attrs:{size:18}}),e._v("Expression")],1)],e._v(" "),e.subpart.particle_effect||e.subpart.sound_effect||null!=e.subpart.expression?e._e():[e.subpart.sequence||e.subpart.randomize?e._e():n("li",{on:{click:function(t){return e.createSequenceSection()}}},[n("Plus",{attrs:{size:18}}),e._v("Sequence")],1),e._v(" "),e.subpart.sequence||e.subpart.randomize?e._e():n("li",{on:{click:function(t){return e.createRandomizeSection()}}},[n("Plus",{attrs:{size:18}}),e._v("Randomize")],1)]],2)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subpart_option_head_bar"},[n("label",{staticClass:"descriptor_label"},[e._v("Sequence")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subpart_option_head_bar"},[n("label",{staticClass:"descriptor_label"},[e._v("Randomize")])])}],!1,null,"4056498d",null);const IT=RT.exports;As.component("event-subpart",IT);const zT={name:"event-list",components:{Plus:jE,X:jx,GripVertical:cT,ListAddButton:wT},props:{group:Object},data:function(){return{names:{}}},methods:{renameEvent:function(e,t){var n=t.target.value,r=e.id;delete Lw.events[r],Lw.events[n]=e.event,e.id=n,this.modifyEvent()},addEvent:function(){for(var e="event",t=e,n=0;this.group.events.find((function(e){return e.id==t}));)n++,t=e+n;var r={uuid:Ps(),id:t,event:{}};Lw.events[t]=r.event,this.group.events.push(r),this.modifyEvent()},removeEvent:function(e){this.group.events.remove(e),delete Lw.events[e.id],this.modifyEvent()},startSortingList:function(e){_T(e,this.group.events)},modifyEvent:function(e,t){Gs("edit event",e,"text"==t)}}},OT=zT;var DT=n(34),NT={insert:"head",singleton:!1};sl()(DT.Z,NT);DT.Z.locals;function FT(e){return FT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FT(e)}const BT={name:"sidebar",data:function(){return{data:eM,selected_subject:eM.effect,selected_subject_key:"effect"}},components:{Logo:rE,InputGroup:sA,QuickSetup:eT,EventList:El(OT,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"event_list"}},[n("ul",{staticClass:"sortable"},e._l(e.group.events,(function(t){return n("li",{key:t.uuid,staticClass:"event",attrs:{title:e.group.info,id:"event-"+t.uuid}},[n("div",{staticClass:"event_header_bar"},[n("div",{staticClass:"event_sort_handle",on:{mousedown:function(t){return e.startSortingList(t)}}},[n("GripVertical")],1),e._v(" "),n("label",[e._v("Event ID")]),e._v(" "),n("input",{attrs:{type:"text"},domProps:{value:t.id},on:{input:function(n){return e.renameEvent(t,n)}}}),e._v(" "),n("div",{staticClass:"remove_event_button",on:{click:function(n){return e.removeEvent(t)}}},[e._v("\n\t\t\t\t\tRemove Event\n\t\t\t\t")])]),e._v(" "),n("event-subpart",{attrs:{subpart:t.event},on:{modify_event:e.modifyEvent}})],1)})),0),e._v(" "),n("list-add-button",{attrs:{title:"Add Event"},on:{click:function(t){return e.addEvent()}}})],1)}),[],!1,null,"15ea88b9",null).exports,curve:gA,Wand:tT,File:nT,PartyPopper:rT,Sparkles:iT,ImageIcon:aT,Feather:oT,Clock8:sT,Tangent:lT,Zap:VE,Plus:jE,ListAddButton:wT,HelpCircle:UM},props:{portrait_view:Boolean},computed:{input_groups:function(){var e={};if("setup"==this.tab_key)return e;for(var t in this.selected_subject)"object"==FT(this.selected_subject[t])&&(e[t]=this.selected_subject[t]);return e}},methods:{selectSubject:function(e){this.selected_subject=this.data[e],this.selected_subject_key=e},fold:function(e){e._folded=!e._folded,e.curves&&!e._folded&&SM()},openHelp:function(e,t){this.$emit("open_help_page",e,t)},updateSize:function(e){SM()},addCurve:function(){eM.variables.curves.curves.push(new MM)}}},UT=BT;var HT=n(28),jT={insert:"head",singleton:!1};sl()(HT.Z,jT);HT.Z.locals;var VT=n(563),GT={insert:"head",singleton:!1};sl()(VT.Z,GT);VT.Z.locals;const WT=El(UT,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("content",{attrs:{id:"sidebar"}},[n("div",{attrs:{id:"sidebar_content"}},[e.portrait_view?e._e():n("logo"),e._v(" "),n("div",{attrs:{id:"sidebar_tab_bar"}},e._l(e.data,(function(t,r){return n("div",{key:r,staticClass:"sidebar_tab",class:{selected:r==e.selected_subject_key},on:{click:function(t){return e.selectSubject(r)}}},["setup"==r?n("Wand"):e._e(),e._v(" "),"effect"==r?n("File"):e._e(),e._v(" "),"emitter"==r?n("PartyPopper"):e._e(),e._v(" "),"appearance"==r?n("Sparkles"):e._e(),e._v(" "),"texture"==r?n("ImageIcon"):e._e(),e._v(" "),"motion"==r?n("Feather"):e._e(),e._v(" "),"lifetime"==r?n("Clock8"):e._e(),e._v(" "),"variables"==r?n("Tangent"):e._e(),e._v(" "),"events"==r?n("Zap"):e._e(),e._v(" "),n("div",{staticClass:"sidebar_tab_tooltip"},[e._v(e._s(t.label))])],1)})),0),e._v(" "),n("h3",[e._v(e._s(e.selected_subject.label))]),e._v(" "),e._l(e.input_groups,(function(t,r){return n("div",{key:r,staticClass:"input_group"},[n("h4",{on:{click:function(n){return e.fold(t)}}},[e._v("\n\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t"),n("div",{staticClass:"highlighting_button help_button",on:{click:function(t){return t.stopPropagation(),e.openHelp(e.selected_subject_key,r)}}},[e._v("?")])]),e._v(" "),t._folded?n("div",{staticClass:"input_group_folded_indicator",on:{click:function(n){return e.fold(t)}}},[e._v("...")]):["curves"==t.type?n("ul",[e._l(t.curves,(function(i){return n("curve",{key:i.uuid,staticClass:"curve",attrs:{title:t.info,id:e.selected_subject_key+"-curves-"+i.uuid,uuid:i.uuid,curve:i,group_key:r,subject_key:e.selected_subject_key},on:{"update:curve":function(e){i=e},"update:group_key":function(e){r=e},"update:subject_key":function(t){e.selected_subject_key=t}}})})),e._v(" "),n("list-add-button",{attrs:{id:"add_curve_button"},on:{click:function(t){return e.addCurve()}}})],2):"events"==t.type?n("event-list",{attrs:{group:t},on:{"update:group":function(e){t=e}}}):n("ul",[n("input-group",{attrs:{group:t,group_key:r,subject_key:e.selected_subject_key,data:e.data},on:{"update:group":function(e){t=e},"update:group_key":function(e){r=e},"update:subject_key":function(t){e.selected_subject_key=t}}})],1)]],2)})),e._v(" "),"effect"==e.selected_subject_key?n("div",{staticClass:"input_group"},[n("button",{attrs:{id:"test_quick_setup_button"},on:{click:function(t){return e.selectSubject("setup")}}},[n("Wand"),e._v("\n\t\t\t\t\tQuick Setup\n\t\t\t\t")],1)]):e._e(),e._v(" "),"setup"==e.selected_subject_key?[n("quick-setup",{attrs:{data:e.data}})]:e._e()],2)])}),[],!1,null,"3b47af4a",null).exports;function qT(e){return qT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qT(e)}const XT={general:{title:"General",pages:{overview:{title:"Introduction",text:["Snowstorm is a tool to visually create and edit particles for Minecraft: Bedrock Edition.",{type:"h2",text:"Documentation"},{type:"link",text:"Introduction to Particles",href:"https://learn.microsoft.com/en-us/minecraft/creator/reference/content/particlesreference/particlesintroduction"},{type:"link",text:"Introduction to Snowstorm",href:"https://learn.microsoft.com/en-us/minecraft/creator/documents/particleeffects"},{type:"link",text:"Particle Component List",href:"https://learn.microsoft.com/en-us/minecraft/creator/reference/content/particlesreference/particlecomponentlist"},{type:"h2",text:"Tutorials"},{type:"link",text:'"How to use Snowstorm to create particle effects" by McHorse',href:"https://youtu.be/J1Ub1tbO9gg"},{type:"h2",text:"Links"},{type:"link",text:"Snowstorm Discord Server",href:"https://discord.gg/W9d78Z8AvM"}]},molang:{title:"Molang Reference",text:["Molang is a C-like scripting value that can be used to dynamically calculate values for particle attributes. It is supported for most numeric values in Snowstorm.",{type:"link",href:"https://docs.microsoft.com/en-us/minecraft/creator/reference/content/molangreference/examples/molangconcepts/molangintroduction",text:"Full Molang Documentation"},"This page acts as a reference sheet and lists all built-in variables and math functions.","Note that Molang calculates all angles in degrees.",{type:"h2",text:"Variables"},{type:"code",code:"variable.emitter_lifetime",text:"Lifetime of the emitter"},{type:"code",code:"variable.emitter_age",text:"Age of the emitter"},{type:"code",code:"variable.emitter_random_1",text:"Random number between 0 and 1, constant per emitter loop"},{type:"code",code:"variable.emitter_random_2",text:"Random number"},{type:"code",code:"variable.emitter_random_3",text:"Random number"},{type:"code",code:"variable.emitter_random_4",text:"Random number"},{type:"code",code:"variable.particle_lifetime",text:"Lifetime of the particle"},{type:"code",code:"variable.particle_age",text:"Age of the particle"},{type:"code",code:"variable.particle_random_1",text:"Random number between 0 and 1, constant per particle"},{type:"code",code:"variable.particle_random_2",text:"Random number"},{type:"code",code:"variable.particle_random_3",text:"Random number"},{type:"code",code:"variable.particle_random_4",text:"Random number"},{type:"code",code:"variable.entity_scale",text:"Scale of the attached entity"},{type:"h2",text:"Math Operations"},{type:"code",code:"math.abs(value)",text:"Absolute value of value"},{type:"code",code:"math.sin(value)",text:"Sine (in degrees) of value"},{type:"code",code:"math.cos(value)",text:"Cosine (in degrees) of value"},{type:"code",code:"math.clamp(value, min, max)",text:"Clamp value to between min and max inclusive"},{type:"code",code:"math.ceil(value)",text:"Round value up to nearest integral number"},{type:"code",code:"math.floor(value)",text:"Round value down to nearest integral number"},{type:"code",code:"math.trunc(value)",text:"Round value towards zero"},{type:"code",code:"math.round(value)",text:"Round value to nearest integral number"},{type:"code",code:"math.mod(value, denominator)",text:"Return the remainder of value / denominator"},{type:"code",code:"math.pow(base, exponent)",text:"Elevates `base` to the `exponent`'th power"},{type:"code",code:"math.sqrt(value)",text:"Square root of value"},{type:"code",code:"math.exp(value)",text:"Calculates e to the value'th power"},{type:"code",code:"math.pi",text:"Returns the float representation of the constant pi."},{type:"code",code:"math.max(A, B)",text:"Return highest value of A or B"},{type:"code",code:"math.min(A, B)",text:"Return lowest value of A or B"},{type:"code",code:"math.min_angle(value)",text:"Minimize angle magnitude in degrees into the range [-180, 180]"},{type:"code",code:"math.asin(value)",text:"Arcsin of value"},{type:"code",code:"math.acos(value)",text:"Arccos of value"},{type:"code",code:"math.atan(value)",text:"Arctan of value"},{type:"code",code:"math.atan2(y, x)",text:"Arctan of y/x. NOTE: the order of arguments!"},{type:"code",code:"math.random(low, high)",text:"Random value between low and high inclusive"},{type:"code",code:"math.random_integer(low, high)",text:"Random integer value between low and high inclusive"},{type:"code",code:"math.die_roll(num, low, high)",text:"Returns the sum of 'num' random numbers, each with a value from low to high. Note: the generated random numbers are not integers like normal dice. For that, use `math.die_roll_integer`."},{type:"code",code:"math.die_roll_integer(num, low, high)",text:"Returns the sum of \num random integer numbers, each with a value from low to high. Note: the generated random numbers are integers like normal dice."},{type:"code",code:"math.hermite_blend(value)",text:"Useful for simple smooth curve interpolation using one of the Hermite Basis functions: `3t^2 - 2t^3`. Note that while any valid float is a valid input, this function works best in the range [0,1]."},{type:"code",code:"math.lerp(start, end, 0_to_1)",text:"Lerp from start to end via 0_to_1"},{type:"code",code:"math.lerprotate(start, end, 0_to_1)",text:"Lerp the shortest direction around a circle from start degrees to end degrees via 0_to_1"},{type:"code",code:"math.ln(value)",text:"Natural logarithm of value"}]}}},effect:{title:"File",pages:{meta:{title:"File",inputs:{identifier:{type:"text",text:["An identifier consists of two parts: The project namespace, and the particle name. The namespace is always separated by a colon","The identifier should be all in lower-case letters and use underscores to separate words. Letters from a-z, numbers, points and underscores are allowed, other characters may cause issues.","Example: snowstorm:fire","The identifier can be used in-game to reference the particle effect, for example in particle commands, scripts, or entities."]}}},space:{title:"Space",inputs:{local_position:{type:"toggle",display_input_info:!1,text:["When enabled, the particle will always move in local space relative to the emitter. When attached to an entity, this means that all particles will move along with the entity.","When disabled, particles are emitted relative to the emitter, then simulate independently from the emitter in the world","Enabling this will prevent collisions with the world from working."]},local_rotation:{type:"toggle",display_input_info:!1,text:["Rotate the local space along with the entity that it is attached to. See Local Position","Local position needs to be enabled for local rotation to work"]},local_velocity:{type:"toggle"}}}}},emitter:{title:"Emitter",pages:{rate:{title:"Spawn Amount",text:[],inputs:{mode:{type:"select",text:[{type:"h3",text:"Steady"},"Particles are spawned steadily during the lifetime of the emitter",{type:"h3",text:"Instant"},"All particles are spawned instantly at the start of the emitter's lifetime",{type:"h3",text:"Manual"},'Particles are spawned manually, independent from the emitter. This is used for some vanilla effects, and for particle effects that are triggered by events using the "particle" type.']},rate:{type:"molang",evaluation:"per_tick"},amount:{type:"molang",evaluation:"once"},maximum:{type:"molang",evaluation:"per_tick"}}},lifetime:{title:"Emitter Lifetime",text:"Control how long the emitter lasts and whether it should loop.",inputs:{mode:{type:"select",text:[{type:"h3",text:"Looping"},"Emitter will loop until it is removed.",{type:"h3",text:"Once"},"Emitter will execute once, and once the lifetime ends or the number of particles allowed to emit have emitted, the emitter expires.",{type:"h3",text:"Expression"},'Emitter will turn "on" when the activation expression is non-zero, and will turn "off" when it\'s zero. This is useful for situations like driving an entity-attached emitter from an entity variable.']},active_time:{type:"molang",evaluation:"per_loop"},sleep_time:{type:"molang",evaluation:"per_loop"},activation:{type:"molang",evaluation:"per_tick"},expiration:{type:"molang",evaluation:"per_tick"}}},shape:{title:"Spawn Shape",text:"Control at which position and in which shape particles are spawned.",inputs:{mode:{type:"select",text:[{type:"h3",text:"Point"},"Emit particles at a single point at the position of the emitter.",{type:"h3",text:"Sphere"},"Emit particle in a spherical shape.",{type:"h3",text:"Box"},"Emit particles in a box shape",{type:"h3",text:"Disc"},"Emit particles in a disc shape.",{type:"h3",text:"Entity Bounding Box"},"Emit particles in a box which size adapts to the collision box of the entity that the particle is played on. Only works on particles that are played client-side."]},offset:{type:"molang",evaluation:"once",context:"particle"},radius:{type:"molang",evaluation:"once",context:"particle"},half_dimensions:{type:"molang",evaluation:"once",context:"particle"},plane_normal:{type:"molang",evaluation:"once",context:"particle"},surface_only:{type:"toggle"}}}}},motion:{title:"Motion",overview:[],pages:{motion:{title:"Motion",inputs:{mode:{type:"select",text:[{type:"h3",text:"Dynamic"},"The particle moves dynamically, based on initial speed, acceleration, and drag.",{type:"h3",text:"Parametric"},"The particle position is calculated each tick using the offset vector. Note: This only works in local space and does not support collisions and block tests.",{type:"h3",text:"Static"},"The particle does not move."]},direction_mode:{type:"select",text:[{type:"h3",text:"Outwards"},"Particle direction is set to move away from the emitter",{type:"h3",text:"Inwards"},"Particle direction is set to move towards the emitter",{type:"h3",text:"Custom"},"Set a custom direction vector in the direction field"]},direction:{type:"molang",context:"particle",evaluation:"once"},linear_speed:{type:"molang",context:"particle",evaluation:"once"},linear_acceleration:{type:"molang",context:"particle",evaluation:"per_tick"},linear_drag_coefficient:{type:"molang",context:"particle",evaluation:"per_tick",text:["Drag slows the particle down over time. You can also use negative values to accelerate the particle over time."]},relative_position:{type:"molang",context:"particle",evaluation:"per_tick"},relative_direction:{type:"molang",context:"particle",evaluation:"per_tick"}}},rotation:{title:"Rotation",inputs:{mode:{type:"select",text:[{type:"h3",text:"Dynamic"},"The particle rotates dynamically, based on initial speed, acceleration, and drag.",{type:"h3",text:"Parametric"},"The particle rotation is calculated each tick from a Molang expression."]},initial_rotation:{type:"molang",context:"particle",evaluation:"once"},rotation_rate:{type:"molang",context:"particle",evaluation:"once"},rotation_acceleration:{type:"molang",context:"particle",evaluation:"per_tick"},rotation_drag_coefficient:{type:"molang",context:"particle",evaluation:"per_tick"},rotation:{type:"molang",context:"particle",evaluation:"per_tick",text:"This is used for parametric rotation."}}},collision:{title:"Collision",text:["Enable collision to allow particles to collide with blocks in your world.","Collision only works if the particles are moving in world space and are using dynamic motion.","On collision, particles can be set to bounce back, or to expire on contact. It is also possible to execute events.","For preview inside Snowstorm, particles collide with the ground plane that is visualized by the grid. This can be turned on or off using the Preview Collisions button in the toolbar below the viewport."],inputs:{toggle:{type:"toggle"},collision_radius:{type:"number"},collision_drag:{type:"number",text:["Useful for emulating friction/drag when colliding, e.g a particle that hits the ground would slow to a stop.","The particle is slowed down by the drag amount in blocks/sec."]},coefficient_of_restitution:{type:"number",text:["Also known as the coefficient of restitution."]},condition:{type:"molang",context:"particle",evaluation:"per_tick"},events:{type:"event_trigger"},expire_on_contact:{type:"toggle"}}}}},appearance:{title:"Appearance",pages:{appearance:{title:"Appearance",inputs:{size:{type:"molang",context:"particle",evaluation:"per_tick"},material:{type:"select",text:[{type:"h3",text:"Alpha Test"},"Alpha test materials allow opaque and transparent pixels, but no in-between.",{type:"h3",text:"Blend"},"Blend supports partial transparency in pixels. Note that with this material, particles of different colors, even from different effect, can cause visual flickering in-game when viewed behind each other.",{type:"h3",text:"Additive"},"Partial transparency is supported. Particles are rendered additive blending. This is ideal for creating light effects.",{type:"h3",text:"Opaque"},"The particle is fully opaque, no transparent pixels are supported.",{type:"h3",text:"Custom:"},"Enter a custom material identifier."]},facing_camera_mode:{type:"select",text:[{type:"h3",text:"Rotate XYZ"},"Rotate the particle to be parallel with the camera on all axes.",{type:"h3",text:"Rotate Y"},"Rotate the particle to be parallel with the camera on all the Y axis.",{type:"h3",text:"Look at XYZ"},"Rotate the particle to point at the camera on all axes.",{type:"h3",text:"Look at Y"},"Rotate the particle to point at the camera on the Y axis.",{type:"h3",text:"Look at Direction"},"Rotate the particle to point at the camera around the axis of its own direction vector.",{type:"h3",text:"Direction X"},"Rotate the particle to face towards the X direction of its own direction vector.",{type:"h3",text:"Direction Y"},"Rotate the particle to face towards the Y direction of its own direction vector.",{type:"h3",text:"Direction Z"},"Rotate the particle to face towards the Z direction of its own direction vector.",{type:"h3",text:"Emitter XY-Plane"},"Rotate the particle along the XY-plane of the emitter",{type:"h3",text:"Emitter XZ-Plane"},"Rotate the particle along the XZ-plane of the emitter",{type:"h3",text:"Emitter YZ-Plane"},"Rotate the particle along the YZ-plane of the emitter"]},direction_mode:{type:"select",text:[{type:"h3",text:"From Motion"},"Derive the direction of the particle from its motion vector if the speed of the particle is above a custom threshold.",{type:"h3",text:"Custom"},"Set a custom direction vector."]},speed_threshold:{type:"molang",context:"particle",evaluation:"per_tick"},direction:{type:"molang",context:"particle",evaluation:"per_tick"},light:{type:"toggle"}}},color:{title:"Color",text:["Tint the particles using specific colors. Transparency is supported if the material supports blending.","Colors are applied via multiplication, which means a white texture is the ideal base for tinting."],inputs:{mode:{type:"select",text:[{type:"h3",text:"Static"},"Set a static color to tint the particle.",{type:"h3",text:"Gradient"},"Determine the color of the particle using a gradient.",{type:"h3",text:"Expression"},"Calculate the tint color using an expression for each RGBA color channel."]},picker:{type:"color"},interpolant:{type:"molang",context:"particle",evaluation:"per_tick",text:['Example: At a range of 1, the expression "variable.particle_age / variable.particle_lifetime" will map the gradient along the lifetime of the particle.']},range:{type:"number"},gradient:{type:"color"},expression:{label:"Color Expression",type:"molang",context:"particle",evaluation:"per_tick"}}}}},texture:{title:"Texture & UV",pages:{texture:{title:"Texture",inputs:{path:{type:"text",text:["The path should always use forward slashes, and should not include the file extension."]},image:{type:"image",label:"Image",text:["In VS Code, the image gets loaded from the provided texture path automatically. To use this, ensure that you open the entire texture pack folder as a project in VSCode, not just the individual particle file.","In the web app, you need to upload your PNG file to preview it, unless you are using one of the included vanilla particle files.","Painting on the texture is supported using the provided editing tools."]}}},uv:{title:"UV",text:"UV mapping determines which part of the texture gets mapped onto the particle billboard. UV mapping is also responsible for creating animated textures.",inputs:{mode:{type:"select",text:[{type:"h3",text:"Static"},"Set a static UV map, optionally with Molang expressions.",{type:"h3",text:"Full Size"},"Set the UV map to the full size of the texture.",{type:"h3",text:"Animated"},"Create a UV map with flipbook texture animations."]},size:{type:"number",text:"This size is used to set a base size for the UV map. This does not have to be identical to the actual texture resolution, but the aspect ratio should match."},uv:{type:"number",context:"particle",evaluation:"per_tick"},uv_size:{type:"molang",context:"particle",evaluation:"per_tick"},uv_step:{type:"molang",context:"particle",evaluation:"per_tick"},frames_per_second:{type:"number"},max_frame:{type:"molang",context:"particle",evaluation:"per_tick"},stretch_to_lifetime:{type:"toggle"},loop:{type:"toggle"}}}}},lifetime:{title:"Time",pages:{lifetime:{title:"Particle Lifetime",inputs:{max_lifetime:{type:"molang",context:"particle",evaluation:"once",text:["This will set the particle_lifetime variable on the particle, and once the particle_age reaches the lifetime, the particle will expire."]},expiration_expression:{type:"molang",context:"particle",evaluation:"per_tick"},kill_plane:{type:"number"},expire_in:{type:"list"},expire_outside:{type:"list"}}}}},events:{title:"Events",pages:{events:{title:"Events",text:["Create events that can be triggered from the emitter or a particle. Events can be used to trigger additional particle effects, play sounds, or run Molang expressions.","Events can be created with event subparts, which can be randomized or played in sequence. Subparts can be nested.",{type:"h2",text:"Sequence"},"A sequence can be used to trigger multiple event subparts after one another.",{type:"h2",text:"Randomize"},"Randomly picks one of the subparts of the randomized list. Subparts can be weighted using the Weight field. The higher the weight, the more likely it is that the option will be selected.","You can leave a random subpart empty to add a chance that nothing happens.",{type:"h2",text:"Particle"},"Trigger a new particle effect at the location where the event was fired.",{type:"input_list",inputs:{identifier:{type:"text",label:"Identifier",text:["Enter the identifier of the particle effect to trigger."]},type:(YT={type:"select",label:"Type",text:"Select how the particle effect is played."},ZT="text",JT=[{type:"h3",text:"Emitter"},"Create an emitter of the specified particle effect at the event's world location.",{type:"h3",text:"Emitter Bound"},"Create an emitter of the specified particle effect at the event's location. If the firing emitter is bound to an entity or locator, the new emitter will be bound to the same entity or locator.",{type:"h3",text:"Particle"},"Manually emit a particle on an emitter of the specified type at the event location, creating the emitter if it doesn't already exist.",'Make sure to use the Spawn Amount mode "Manual" on the child particle effect.',{type:"h3",text:"Particle with Velocity"},'The same as "Particle" except the new particle will inherit the spawning particle\'s velocity.'],ZT=function(e){var t=function(e,t){if("object"!=qT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qT(t)?t:String(t)}(ZT),ZT in YT?Object.defineProperty(YT,ZT,{value:JT,enumerable:!0,configurable:!0,writable:!0}):YT[ZT]=JT,YT),expression:{label:"Expression",type:"molang",context:"spawned_emitter",evaluation:"once",text:["A Molang expression to run on the newly spawned emitter. Note that you do not have access to the variable scope of the event firing emitter."]}}},{type:"h2",text:"Sound"},"Play a sound effect at the location where the event was fired.",{type:"input_list",inputs:{identifier:{type:"text",label:"Sound Event",text:["Enter the identifier of the sound effect to trigger. Only vanilla sound events are supported due to a Minecraft bug."]}}},{type:"h2",text:"Expression"},"Run a molang expression on the emitter that fired the event. This can be used to change the value or variables.",{type:"input_list",inputs:{expression:{label:"Expression",type:"molang",context:"emitter",evaluation:"once",text:["A Molang expression to run on the firing emitter."]}}}],inputs:{}},emitter_events:{title:"Emitter Event Triggers",text:["Fire events on the emitter at certain points during its lifetime."],inputs:{creation:{type:"event_trigger"},expiration:{type:"event_trigger"},travel_distance:{type:"event_trigger"},looping_travel_distance:{type:"event_trigger"},timeline:{type:"event_trigger"}}},particle_events:{title:"Particle Event Triggers",text:["Fire events on particles at certain points during their lifetime."],inputs:{creation:{type:"event_trigger"},expiration:{type:"event_trigger"},timeline:{type:"event_trigger"}}}}},variables:{title:"Variables & Curves",pages:{variables:{title:"Variables",inputs:{creation_vars:{type:"molang",context:"emitter",evaluation:"once"},tick_vars:{type:"molang",context:"emitter",evaluation:"per_tick"},particle_update:{type:"molang",context:"particle",evaluation:"per_tick"},particle_render:{type:"molang",context:"particle",evaluation:"per_render"}}},curves:{title:"Curves",text:["Curves are a method of mapping an output to a value using a curve.","For example, you can create a curve that is mapped to the lifetime of a particle. You can then reference the curve in the particle size fields to animate the size of the particle using the curve.","Curves can be accessed multiple times and can be used both in the emitter and particle context, as long as the variables used in Input and Range are available."],inputs:{id:{label:"Name",type:"text",text:'The Molang variable to be used later in Molang expressions. Must begin with "variable.".'},mode:{type:"select",label:"Mode",info:"Curve interpolation type",text:[{type:"h3",text:"Catmull Rom"},"A smooth curve along 4 or more control points. The first and last point are just for controlling, and are not part of the curve.",{type:"h3",text:"Linear"},"A linear curve along 3 or more control points.",{type:"h3",text:"Bzier"},"A single bezier curve, using a start and end point and two control points.",{type:"h3",text:"Bzier Chain"},"A chain of individual bezier curves to make up a larger curve."]},input:{type:"molang",context:"curve",evaluation:"per_use",label:"Input",text:["Horizontal input"]},range:{type:"molang",context:"curve",evaluation:"per_use",label:"Range",text:["Horizontal range that the input is mapped to"]}}}}}};var YT,ZT,JT;const QT=Dx("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const KT={name:"help-text",props:{text:{type:[String,Array],required:!0}},computed:{lines:function(){return this.text instanceof Array?this.text:[this.text]}}};var $T=n(336),eC={insert:"head",singleton:!1};sl()($T.Z,eC);$T.Z.locals;var tC=n(210),nC={insert:"head",singleton:!1};sl()(tC.Z,nC);tC.Z.locals;const rC=El(KT,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e._l(e.lines,(function(t){return["string"==typeof t?n("p",[e._v(e._s(t))]):"code"==t.type?n("p",{staticClass:"code_line"},[n("code",[e._v(e._s(t.code))]),e._v(e._s(t.text))]):"html"==t.type?n("p",{domProps:{innerHTML:e._s(t.content)}}):"h2"==t.type?n("h2",[e._v(e._s(t.text))]):"h3"==t.type?n("h3",[e._v(e._s(t.text))]):"h4"==t.type?n("h4",[e._v(e._s(t.text))]):"link"==t.type?n("p",[n("a",{attrs:{href:t.href,target:"_blank",rel:"noopener"}},[e._v(e._s(t.text))])]):"input_list"==t.type?n("HelpInputList",{attrs:{inputs:t.inputs}}):e._e()]}))],2)}),[],!1,null,"23de1216",null).exports;const iC={name:"help-input-list",components:{Brackets:Dx("BracketsIcon",[["path",{d:"M16 3h3v18h-3",key:"1yor1f"}],["path",{d:"M8 21H5V3h3",key:"1qrfwo"}]]),WholeWord:Dx("WholeWordIcon",[["circle",{cx:"7",cy:"12",r:"3",key:"12clwm"}],["path",{d:"M10 9v6",key:"17i7lo"}],["circle",{cx:"17",cy:"12",r:"3",key:"gl7c2s"}],["path",{d:"M14 7v8",key:"dl84cr"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]),CheckSquare:NE,Menu:Dx("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Gauge:Dx("GaugeIcon",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),Palette:Dx("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Zap:VE},props:{inputs:Object,category_key:String,page_key:String},data:function(){return{labels:{text:"Text",number:"Number",molang:"Molang",toggle:"Toggle",emitter:"Per Emitter",particle:"Per Particle",curve:"Per Curve",spawned_emitter:"Spawned Emitter Context",evaluation_once:"Evaluated once",evaluation_per_tick:"Evaluated each tick",evaluation_per_loop:"Evaluated each loop",evaluation_per_use:"Evaluated each time",evaluation_per_render:"Evaluated each render",evaluation_per_particle:"Evaluated on particle spawn"},input_context_color:{emitter:"#e98989",particle:"#f9da88",spawned_emitter:"#db57ae"}}},methods:{getInput:function(e){var t,n=null===(t=eM[this.category_key])||void 0===t||null===(t=t[this.page_key])||void 0===t||null===(t=t.inputs)||void 0===t?void 0:t[e];return null!=n?n:0},isInputVisible:function(e){var t,n=this.getInput(e);if(!n)return!0;var r=null===(t=eM[this.category_key])||void 0===t?void 0:t[this.page_key];return n.isVisible(r)},consistentPuncuation:function(e){return e?e.endsWith(".")||e.endsWith("!")?e:e+".":""}}};var aC=n(864),oC={insert:"head",singleton:!1};sl()(aC.Z,oC);aC.Z.locals;const sC=El(iC,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",e._l(e.inputs,(function(t,r){return n("div",{class:{input_help:!0,visible:e.isInputVisible(r)}},[n("h2",["molang"==t.type?n("Brackets",{attrs:{title:"Molang"}}):"text"==t.type?n("WholeWord",{attrs:{title:"Text"}}):"toggle"==t.type?n("CheckSquare",{attrs:{title:"Toggle"}}):"select"==t.type?n("Menu",{attrs:{title:"Select"}}):"number"==t.type?n("Gauge",{attrs:{title:"Number"}}):"color"==t.type?n("Palette",{attrs:{title:"Color"}}):"event_trigger"==t.type?n("Zap",{attrs:{title:"Event Trigger"}}):e._e(),e._v("\n\t\t\t"+e._s(t.label||e.getInput(r).label)+"\n\t\t")],1),e._v(" "),"molang"==t.type?n("div",{staticClass:"input_info_bar"},[n("span",{staticClass:"input_type_label"},[e._v(e._s(e.labels[t.type]))]),e._v(" "),"molang"==t.type?n("span",{staticClass:"input_context_label",style:{backgroundColor:e.input_context_color[t.context||"emitter"]}},[e._v(e._s(e.labels[t.context||"emitter"]))]):e._e(),e._v(" "),t.evaluation?n("span",{staticClass:"input_evaluation"},[e._v(e._s(e.labels["evaluation_"+t.evaluation]))]):e._e()]):e._e(),e._v(" "),0!=t.display_input_info?n("p",[e._v(e._s(t.info||e.consistentPuncuation(e.getInput(r).info)))]):e._e(),e._v(" "),t.text?n("HelpText",{class:{select_description:"select"==t.type},attrs:{text:t.text}}):e._e()],1)})),0)}),[],!1,null,"0eb22078",null).exports;As.component("HelpInputList",sC),As.component("HelpText",rC);const lC={name:"help-panel",data:function(){return{category_key:"",page_key:"",HelpData:XT}},components:{HelpText:rC,HelpInputList:sC,X:jx,ChevronLeft:QT},props:{portrait_view:Boolean},watch:{page_key:function(){this.$refs.content.scrollTop=0}},computed:{page:function(){var e;return null===(e=XT[this.category_key])||void 0===e?void 0:e.pages[this.page_key]}},methods:{openPage:function(e,t){this.category_key=e,this.page_key=t}}};var cC=n(357),uC={insert:"head",singleton:!1};sl()(cC.Z,uC);cC.Z.locals;const hC=El(lC,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{portrait_view:e.portrait_view},attrs:{id:"help_panel"}},[n("div",{staticClass:"help_header"},[e.portrait_view?e._e():n("X",{staticClass:"close_button highlighting_button",attrs:{size:22},on:{click:function(t){return e.$emit("close")}}}),e._v(" "),e.category_key?n("a",{staticClass:"back_button",on:{click:function(t){return e.openPage("","")}}},[n("ChevronLeft",{attrs:{size:20}}),e._v(" Back to overview")],1):e._e()],1),e._v(" "),n("content",{ref:"content"},[e.category_key?e.page?[n("h1",[e._v(e._s(e.page.title))]),e._v(" "),e.page.text?n("HelpText",{attrs:{text:e.page.text}}):e._e(),e._v(" "),e.page.inputs?n("HelpInputList",{attrs:{inputs:e.page.inputs,category_key:e.category_key,page_key:e.page_key}}):e._e()]:e._e():[n("h1",[e._v("Documentation")]),e._v(" "),n("ul",e._l(e.HelpData,(function(t,r){return n("li",[n("span",{staticClass:"category_title"},[e._v(e._s(t.title))]),e._v(" "),n("ul",e._l(e.HelpData[r].pages,(function(t,i){return n("li",{staticClass:"clickable",on:{click:function(t){return e.openPage(r,i)}}},[e._v(e._s(t.title))])})),0)])})),0)]],2)])}),[],!1,null,"777ee623",null).exports;n(660),n(277);var pC=n(897),dC=n.n(pC);const fC=Dx("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const mC={name:"code-viewer",components:{Prism:dC(),Copy:fC},data:function(){return{code:zs(hM())}},methods:{copy:function(){!function(e){var t=document.getElementById(e),n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r)}("code"),document.execCommand("copy")}},mounted:function(){var e=this;Us.code_viewer=function(){e.code=zs(hM())}},destroyed:function(){delete Us.code_viewer}},vC=mC;var gC=n(927),_C={insert:"head",singleton:!1};sl()(gC.Z,_C);gC.Z.locals;var yC=n(291),bC={insert:"head",singleton:!1};sl()(yC.Z,bC);yC.Z.locals;const xC=El(vC,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"code",attrs:{id:"code"}},[n("div",{staticClass:"menu"},[n("button",{on:{click:function(t){return e.copy()}}},[n("Copy",{attrs:{size:20}}),e._v("Copy")],1)]),e._v(" "),n("prism",{attrs:{language:"json"}},[e._v(e._s(e.code))])],1)}),[],!1,null,"eed9881e",null).exports;const wC={name:"info-box"};var MC=n(791),SC={insert:"head",singleton:!1};sl()(MC.Z,SC);MC.Z.locals;const EC=El(wC,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"box"}},[e._t("default"),e._v(" "),n("div",{staticClass:"tool close_button",on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"unicode_icon"},[e._v(e._s(""))])])],2)}),[],!1,null,"0f0cb56e",null).exports,AC=Dx("SlidersHorizontalIcon",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),TC=Dx("FileJsonIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),CC=Dx("Move3dIcon",[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]]),kC=Dx("PanelLeftOpenIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);function LC(e){return LC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LC(e)}function PC(){PC=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",v={};function g(){}function _(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&r.call(w,o)&&(b=w);var M=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==LC(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(LC(t)+" is not iterable")}return _.prototype=y,i(M,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,l,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function RC(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}if(!Cs){var IC=localStorage.getItem("snowstorm_startup_count")||0;IC++,localStorage.setItem("snowstorm_startup_count",IC),-1!=navigator.userAgent.indexOf("iPhone")&&document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1")}var zC=document.body.clientWidth>100&&document.body.clientWidth<720;const OC={name:"app",components:{Preview:pw,CodeViewer:xC,MenuBar:$S,Sidebar:WT,HelpPanel:hC,WarningDialog:Cx,ExpressionBar:Al,InfoBox:EC,SlidersHorizontal:AC,FileJson:TC,Move3D:CC,Logo:rE,PanelLeftOpen:kC,HelpCircle:UM},data:function(){return{code:"",tab:zC?"config":"preview",previous_tab:"config",dialog:null,sidebar_width:(e=document.body.clientWidth,e<100&&(e=1280),zC?e:localStorage.getItem("snowstorm_sidebar_width")?Math.clamp(parseInt(localStorage.getItem("snowstorm_sidebar_width")),100,e-200):Math.clamp(e/2,160,Math.clamp(180+.2*e,160,660))),is_sidebar_open:!localStorage.getItem("snowstorm_is_sidebar_open")||"true"==localStorage.getItem("snowstorm_is_sidebar_open"),is_help_panel_open:!1,portrait_view:zC};var e},methods:{setTab:function(e){var t=this;this.previous_tab=this.tab,this.tab=e,As.nextTick((function(){t.$refs.preview.updateSize()}))},openDialog:function(e){this.dialog=e},closeDialog:function(){this.dialog=null},openHelpPage:function(e,t){var n,r=this;return(n=PC().mark((function n(){return PC().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.is_help_panel_open=!0,zC&&r.setTab("help"),n.next=4,As.nextTick();case 4:r.$refs.help_panel.openPage(e,t);case 5:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(e){RC(a,r,i,o,s,"next",e)}function s(e){RC(a,r,i,o,s,"throw",e)}o(void 0)}))})()},setSidebarSize:function(e,t){e>80?(this.sidebar_width=Math.clamp(e,240,document.body.clientWidth-200),this.is_sidebar_open=!0):(this.sidebar_width=t,this.is_sidebar_open=!1),this.$refs.preview.updateSize(),this.$refs.sidebar.updateSize(),localStorage.setItem("snowstorm_sidebar_width",this.sidebar_width),localStorage.setItem("snowstorm_is_sidebar_open",this.is_sidebar_open)},resizeSidebarStart:function(e){var t=this,n=this.sidebar_width,r=function(r){t.setSidebarSize(n+r.clientX-e.clientX,n)};document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)}),!1)},getEffectiveSidebarWidth:function(){return this.is_sidebar_open*this.sidebar_width},toggleSidebar:function(){var e=this;this.is_sidebar_open=!this.is_sidebar_open,As.nextTick((function(){e.$refs.preview.updateSize(),e.$refs.sidebar.updateSize()})),localStorage.setItem("snowstorm_is_sidebar_open",this.is_sidebar_open)}}},DC=OC;var NC=n(204),FC={insert:"head",singleton:!1};sl()(NC.Z,FC);NC.Z.locals;var BC=n(51),UC={insert:"head",singleton:!1};sl()(BC.Z,UC);BC.Z.locals;var HC=n(314),jC={insert:"head",singleton:!1};sl()(HC.Z,jC);HC.Z.locals;const VC=El(DC,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{portrait_view:e.portrait_view},style:{"--sidebar":e.getEffectiveSidebarWidth()+"px"},attrs:{id:"app"}},[e.dialog?n("div",{attrs:{id:"dialog_blackout"},on:{click:e.closeDialog}}):e._e(),e._v(" "),"warnings"==e.dialog?n("warning-dialog",{on:{close:e.closeDialog}}):e._e(),e._v(" "),n("header",[e.portrait_view?n("logo"):e._e(),e._v(" "),n("menu-bar",{attrs:{selected_tab:e.tab,portrait_view:e.portrait_view,is_help_panel_open:e.portrait_view?"help"==e.tab:e.is_help_panel_open},on:{changetab:e.setTab,opendialog:e.openDialog,open_help_page:e.openHelpPage}}),e._v(" "),n("expression-bar")],1),e._v(" "),n("preview",{directives:[{name:"show",rawName:"v-show",value:"preview"==e.tab,expression:"tab == 'preview'"}],ref:"preview",on:{opendialog:e.openDialog}}),e._v(" "),"code"==e.tab?n("code-viewer"):e._e(),e._v(" "),e.is_help_panel_open||"help"==e.tab?n("help-panel",{ref:"help_panel",attrs:{portrait_view:e.portrait_view},on:{close:function(t){e.is_help_panel_open=!1,e.portrait_view&&e.setTab(e.previous_tab)}}}):e._e(),e._v(" "),n("div",{ref:"sidebar_resizer",staticClass:"resizer",style:{left:e.getEffectiveSidebarWidth()+"px",cursor:e.is_sidebar_open?"ew-resize":"default"},on:{mousedown:function(t){e.is_sidebar_open&&e.resizeSidebarStart(t)}}},[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.is_sidebar_open,expression:"!is_sidebar_open"}],staticClass:"resizer_toggle_button",on:{click:e.toggleSidebar,mousedown:function(e){e.stopPropagation()}}},[n("PanelLeftOpen")],1)]),e._v(" "),n("sidebar",{directives:[{name:"show",rawName:"v-show",value:!e.portrait_view||"config"==e.tab,expression:"!portrait_view || tab == 'config'"}],ref:"sidebar",attrs:{portrait_view:e.portrait_view},on:{open_help_page:e.openHelpPage}}),e._v(" "),e.portrait_view?n("ul",{attrs:{id:"portrait_mode_selector"}},[n("li",{staticClass:"mode_selector config",class:{selected:"config"==e.tab},on:{click:function(t){return e.setTab("config")}}},[n("SlidersHorizontal",{attrs:{size:22}})],1),e._v(" "),n("li",{staticClass:"mode_selector code",class:{selected:"code"==e.tab},on:{click:function(t){return e.setTab("code")}}},[n("FileJson",{attrs:{size:22}})],1),e._v(" "),n("li",{staticClass:"mode_selector help",class:{selected:"help"==e.tab},on:{click:function(t){return e.setTab("help")}}},[n("HelpCircle",{attrs:{size:22}})],1),e._v(" "),n("li",{staticClass:"mode_selector preview",class:{selected:"preview"==e.tab},on:{click:function(t){return e.setTab("preview")}}},[n("Move3D",{attrs:{size:22}})],1)]):e._e()],1)}),[],!1,null,"3b44087e",null).exports;function GC(e){return GC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GC(e)}function WC(){WC=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",v={};function g(){}function _(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&r.call(w,o)&&(b=w);var M=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==GC(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(GC(t)+" is not iterable")}return _.prototype=y,i(M,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(M),c(M,l,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function qC(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}if(!Cs){var XC=function(){var e,t=(e=WC().mark((function e(){return WC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register("./service_worker.js");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){qC(a,r,i,o,s,"next",e)}function s(e){qC(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();window.onbeforeunload=function(){return"Your changes might not be saved"},"serviceWorker"in navigator&&XC(),function(){qS.apply(this,arguments)}()}new As({components:{App:VC},template:"<App/>"}).$mount("#app")})()})();